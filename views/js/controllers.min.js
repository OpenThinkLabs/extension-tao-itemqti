define("taoQtiItem/controller/routes",[],function(){return{QtiPreview:{actions:{index:"taoItems/controller/preview/itemRunner"}},QtiCreator:{actions:{index:"controller/creator/main"}}}}),function(e,t){function i(e){var t=ft[e]={};return J.each(e.split(tt),function(e,i){t[i]=!0}),t}function n(e,i,n){if(n===t&&1===e.nodeType){var a="data-"+i.replace(gt,"-$1").toLowerCase();if(n=e.getAttribute(a),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:mt.test(n)?J.parseJSON(n):n}catch(r){}J.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!J.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(){return!1
}function o(){return!0}function s(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,i){if(t=t||0,J.isFunction(t))return J.grep(e,function(e,n){var a=!!t.call(e,n,e);return a===i});if(t.nodeType)return J.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=J.grep(e,function(e){return 1===e.nodeType});if(Mt.test(t))return J.filter(t,n,!i);t=J.filter(t,n)}return J.grep(e,function(e){return J.inArray(e,t)>=0===i})}function d(e){var t=Lt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function u(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))
}function h(e,t){if(1===t.nodeType&&J.hasData(e)){var i,n,a,r=J._data(e),o=J._data(t,r),s=r.events;if(s){delete o.handle,o.events={};for(i in s)for(n=0,a=s[i].length;a>n;n++)J.event.add(t,i,s[i][n])}o.data&&(o.data=J.extend({},o.data))}}function p(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),J.support.html5Clone&&e.innerHTML&&!J.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Gt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(J.expando))
}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Gt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,a=gi.length;a--;)if(t=gi[a]+i,t in e)return t;return n}function v(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)}function b(e,t){for(var i,n,a=[],r=0,o=e.length;o>r;r++)i=e[r],i.style&&(a[r]=J._data(i,"olddisplay"),t?(!a[r]&&"none"===i.style.display&&(i.style.display=""),""===i.style.display&&v(i)&&(a[r]=J._data(i,"olddisplay",E(i.nodeName)))):(n=ii(i,"display"),!a[r]&&"none"!==n&&J._data(i,"olddisplay",n)));
for(r=0;o>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[r]||"":"none"));return e}function y(e,t,i){var n=ci.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function C(e,t,i,n){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>a;a+=2)"margin"===i&&(r+=J.css(e,i+mi[a],!0)),n?("content"===i&&(r-=parseFloat(ii(e,"padding"+mi[a]))||0),"margin"!==i&&(r-=parseFloat(ii(e,"border"+mi[a]+"Width"))||0)):(r+=parseFloat(ii(e,"padding"+mi[a]))||0,"padding"!==i&&(r+=parseFloat(ii(e,"border"+mi[a]+"Width"))||0));return r}function I(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,a=!0,r=J.support.boxSizing&&"border-box"===J.css(e,"boxSizing");
if(0>=n){if(n=ii(e,t),(0>n||null==n)&&(n=e.style[t]),di.test(n))return n;a=r&&(J.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+C(e,t,i||(r?"border":"content"),a)+"px"}function E(e){if(hi[e])return hi[e];var t=J("<"+e+">").appendTo(F.body),i=t.css("display");return t.remove(),("none"===i||""===i)&&(ni=F.body.appendChild(ni||J.extend(F.createElement("iframe"),{frameBorder:0,width:0,height:0})),ai&&ni.createElement||(ai=(ni.contentWindow||ni.contentDocument).document,ai.write("<!doctype html><html><body>"),ai.close()),t=ai.body.appendChild(ai.createElement(e)),i=ii(t,"display"),F.body.removeChild(ni)),hi[e]=i,i}function w(e,t,i,n){var a;
if(J.isArray(t))J.each(t,function(t,a){i||yi.test(e)?n(e,a):w(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==J.type(t))n(e,t);else for(a in t)w(e+"["+a+"]",t[a],i,n)}function x(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a,r,o=t.toLowerCase().split(tt),s=0,l=o.length;if(J.isFunction(i))for(;l>s;s++)n=o[s],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),a=e[n]=e[n]||[],a[r?"unshift":"push"](i)}}function T(e,i,n,a,r,o){r=r||i.dataTypes[0],o=o||{},o[r]=!0;for(var s,l=e[r],c=0,d=l?l.length:0,u=e===Ni;d>c&&(u||!s);c++)s=l[c](i,n,a),"string"==typeof s&&(!u||o[s]?s=t:(i.dataTypes.unshift(s),s=T(e,i,n,a,s,o)));return(u||!s)&&!o["*"]&&(s=T(e,i,n,a,"*",o)),s
}function _(e,i){var n,a,r=J.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:a||(a={}))[n]=i[n]);a&&J.extend(!0,e,a)}function k(e,i,n){var a,r,o,s,l=e.contents,c=e.dataTypes,d=e.responseFields;for(r in d)r in n&&(i[d[r]]=n[r]);for(;"*"===c[0];)c.shift(),a===t&&(a=e.mimeType||i.getResponseHeader("content-type"));if(a)for(r in l)if(l[r]&&l[r].test(a)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function R(e,t){var i,n,a,r,o=e.dataTypes.slice(),s=o[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),o[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];
for(;a=o[++c];)if("*"!==a){if("*"!==s&&s!==a){if(i=l[s+" "+a]||l["* "+a],!i)for(n in l)if(r=n.split(" "),r[1]===a&&(i=l[s+" "+r[0]]||l["* "+r[0]])){i===!0?i=l[n]:l[n]!==!0&&(a=r[0],o.splice(c--,0,a));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(d){return{state:"parsererror",error:i?d:"No conversion from "+s+" to "+a}}}s=a}return{state:"success",data:t}}function D(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function q(){return setTimeout(function(){Wi=t},0),Wi=J.now()}function S(e,t){J.each(t,function(t,i){for(var n=(Ji[t]||[]).concat(Ji["*"]),a=0,r=n.length;r>a;a++)if(n[a].call(e,t,i))return
})}function K(e,t,i){var n,a=0,r=Yi.length,o=J.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Wi||q(),i=Math.max(0,l.startTime+l.duration-t),n=1-(i/l.duration||0),a=0,r=l.tweens.length;r>a;a++)l.tweens[a].run(n);return o.notifyWith(e,[l,n,i]),1>n&&r?i:(o.resolveWith(e,[l]),!1)},l=o.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Wi||q(),duration:i.duration,tweens:[],createTween:function(t,i){var n=J.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){for(var i=0,n=t?l.tweens.length:0;n>i;i++)l.tweens[i].run(1);return t?o.resolveWith(e,[l,t]):o.rejectWith(e,[l,t]),this
}}),c=l.props;for(A(c,l.opts.specialEasing);r>a;a++)if(n=Yi[a].call(l,e,c,l.opts))return n;return S(l,c),J.isFunction(l.opts.start)&&l.opts.start.call(e,l),J.fx.timer(J.extend(s,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function A(e,t){var i,n,a,r,o;for(i in e)if(n=J.camelCase(i),a=t[n],r=e[i],J.isArray(r)&&(a=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),o=J.cssHooks[n],o&&"expand"in o){r=o.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=a)}else t[n]=a}function N(e,t,i){var n,a,r,o,s,l,c,d,u=this,h=e.style,p={},f=[],m=e.nodeType&&v(e);i.queue||(c=J._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()
}),c.unqueued++,u.always(function(){u.always(function(){c.unqueued--,J.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===J.css(e,"display")&&"none"===J.css(e,"float")&&(J.support.inlineBlockNeedsLayout&&"inline"!==E(e.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",J.support.shrinkWrapBlocks||u.done(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Vi.exec(r)){if(delete t[n],r===(m?"hide":"show"))continue;f.push(n)}if(o=f.length)for(s=J._data(e,"fxshow")||J._data(e,"fxshow",{}),m?J(e).show():u.done(function(){J(e).hide()
}),u.done(function(){var t;J.removeData(e,"fxshow",!0);for(t in p)J.style(e,t,p[t])}),n=0;o>n;n++)a=f[n],l=u.createTween(a,m?s[a]:0),p[a]=s[a]||J.style(e,a),a in s||(s[a]=l.start,m&&(l.end=l.start,l.start="width"===a||"height"===a?1:0))}function M(e,t,i,n,a){return new M.prototype.init(e,t,i,n,a)}function P(e,t){for(var i,n={height:e},a=0;4>a;a+=2-t)i=mi[a],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function Q(e){return J.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var L,$,F=e.document,B=e.location,z=e.navigator,H=e.jQuery,j=e.$,W=Array.prototype.push,U=Array.prototype.slice,V=Array.prototype.indexOf,G=Object.prototype.toString,X=Object.prototype.hasOwnProperty,Y=String.prototype.trim,J=function(e,t){return new J.fn.init(e,t,L)
},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,it=et.test("Â ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,nt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rt=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,st=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,dt=/-([\da-z])/gi,ut=function(e,t){return(t+"").toUpperCase()},ht=function(){F.addEventListener?(F.removeEventListener("DOMContentLoaded",ht,!1),J.ready()):"complete"===F.readyState&&(F.detachEvent("onreadystatechange",ht),J.ready())},pt={};J.fn=J.prototype={constructor:J,init:function(e,i,n){var a,r,o;
if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:nt.exec(e),a&&(a[1]||!i)){if(a[1])return i=i instanceof J?i[0]:i,o=i&&i.nodeType?i.ownerDocument||i:F,e=J.parseHTML(a[1],o,!0),at.test(a[1])&&J.isPlainObject(i)&&this.attr.call(e,i,!0),J.merge(this,e);if(r=F.getElementById(a[2]),r&&r.parentNode){if(r.id!==a[2])return n.find(e);this.length=1,this[0]=r}return this.context=F,this.selector=e,this}return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e)}return J.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))
},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return U.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=J.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return J.each(this,e,t)},ready:function(e){return J.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(U.apply(this,arguments),"slice",U.call(arguments).join(","))
},map:function(e){return this.pushStack(J.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice},J.fn.init.prototype=J.fn,J.extend=J.fn.extend=function(){var e,i,n,a,r,o,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},l=2),"object"!=typeof s&&!J.isFunction(s)&&(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(i in e)n=s[i],a=e[i],s!==a&&(d&&a&&(J.isPlainObject(a)||(r=J.isArray(a)))?(r?(r=!1,o=n&&J.isArray(n)?n:[]):o=n&&J.isPlainObject(n)?n:{},s[i]=J.extend(d,o,a)):a!==t&&(s[i]=a));return s},J.extend({noConflict:function(t){return e.$===J&&(e.$=j),t&&e.jQuery===J&&(e.jQuery=H),J
},isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){if(e===!0?!--J.readyWait:!J.isReady){if(!F.body)return setTimeout(J.ready,1);J.isReady=!0,e!==!0&&--J.readyWait>0||($.resolveWith(F,[J]),J.fn.trigger&&J(F).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray||function(e){return"array"===J.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):pt[G.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==J.type(e)||e.nodeType||J.isWindow(e))return!1;
try{if(e.constructor&&!X.call(e,"constructor")&&!X.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||X.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||F,(n=at.exec(e))?[t.createElement(n[1])]:(n=J.buildFragment([e],t,i?null:[]),J.merge([],(n.cacheable?J.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=J.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):rt.test(t.replace(st,"@").replace(lt,"]").replace(ot,""))?new Function("return "+t)():void J.error("Invalid JSON: "+t)):null
},parseXML:function(i){var n,a;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(a=new DOMParser,n=a.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(dt,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var a,r=0,o=e.length,s=o===t||J.isFunction(e);if(n)if(s){for(a in e)if(i.apply(e[a],n)===!1)break
}else for(;o>r&&i.apply(e[r++],n)!==!1;);else if(s){for(a in e)if(i.call(e[a],a,e[a])===!1)break}else for(;o>r&&i.call(e[r],r,e[r++])!==!1;);return e},trim:Y?function(e){return null==e?"":Y.call(e)}:function(e){return null==e?"":e.toString().replace(it,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=J.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||J.isWindow(e)?W.call(n,e):J.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(V)return V.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,a=e.length,r=0;if("number"==typeof n)for(;n>r;r++)e[a++]=i[r];
else for(;i[r]!==t;)e[a++]=i[r++];return e.length=a,e},grep:function(e,t,i){var n,a=[],r=0,o=e.length;for(i=!!i;o>r;r++)n=!!t(e[r],r),i!==n&&a.push(e[r]);return a},map:function(e,i,n){var a,r,o=[],s=0,l=e.length,c=e instanceof J||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||J.isArray(e));if(c)for(;l>s;s++)a=i(e[s],s,n),null!=a&&(o[o.length]=a);else for(r in e)a=i(e[r],r,n),null!=a&&(o[o.length]=a);return o.concat.apply([],o)},guid:1,proxy:function(e,i){var n,a,r;return"string"==typeof i&&(n=e[i],i=e,e=n),J.isFunction(e)?(a=U.call(arguments,2),r=function(){return e.apply(i,a.concat(U.call(arguments)))},r.guid=e.guid=e.guid||r.guid||J.guid++,r):t},access:function(e,i,n,a,r,o,s){var l,c=null==n,d=0,u=e.length;
if(n&&"object"==typeof n){for(d in n)J.access(e,i,d,n[d],1,o,a);r=1}else if(a!==t){if(l=s===t&&J.isFunction(a),c&&(l?(l=i,i=function(e,t,i){return l.call(J(e),i)}):(i.call(e,a),i=null)),i)for(;u>d;d++)i(e[d],n,l?a.call(e[d],d,i(e[d],n)):a,s);r=1}return r?e:c?i.call(e):u?i(e[0],n):o},now:function(){return(new Date).getTime()}}),J.ready.promise=function(t){if(!$)if($=J.Deferred(),"complete"===F.readyState||"loading"!==F.readyState&&F.addEventListener)setTimeout(J.ready,1);else if(F.addEventListener)F.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",J.ready,!1);else{F.attachEvent("onreadystatechange",ht),e.attachEvent("onload",J.ready);var i=!1;
try{i=null==e.frameElement&&F.documentElement}catch(n){}i&&i.doScroll&&function a(){if(!J.isReady){try{i.doScroll("left")}catch(e){return setTimeout(a,50)}J.ready()}}()}return $.promise(t)},J.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),L=J(F);var ft={};J.Callbacks=function(e){e="string"==typeof e?ft[e]||i(e):J.extend({},e);var n,a,r,o,s,l,c=[],d=!e.once&&[],u=function(t){for(n=e.memory&&t,a=!0,l=o||0,o=0,s=c.length,r=!0;c&&s>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}r=!1,c&&(d?d.length&&u(d.shift()):n?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;
!function i(t){J.each(t,function(t,n){!J.isFunction(n)||e.unique&&h.has(n)?n&&n.length&&i(n):c.push(n)})}(arguments),r?s=c.length:n&&(o=t,u(n))}return this},remove:function(){return c&&J.each(arguments,function(e,t){for(var i;(i=J.inArray(t,c,i))>-1;)c.splice(i,1),r&&(s>=i&&s--,l>=i&&l--)}),this},has:function(e){return J.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=n=t,this},disabled:function(){return!c},lock:function(){return d=t,n||h.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],c&&(!a||d)&&(r?d.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this
},fired:function(){return!!a}};return h},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(i){J.each(t,function(t,n){var r=n[0],o=e[t];a[n[1]](J.isFunction(o)?function(){var e=o.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===a?i:this,[e])}:i[r])}),e=null}).promise()},promise:function(e){return"object"==typeof e?J.extend(e,n):n
}},a={};return n.pipe=n.then,J.each(t,function(e,r){var o=r[2],s=r[3];n[r[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),a[r[0]]=o.fire,a[r[0]+"With"]=o.fireWith}),n.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,n,a=0,r=U.call(arguments),o=r.length,s=1!==o||e&&J.isFunction(e.promise)?o:0,l=1===s?e:J.Deferred(),c=function(e,i,n){return function(a){i[e]=this,n[e]=arguments.length>1?U.call(arguments):a,n===t?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>a;a++)r[a]&&J.isFunction(r[a].promise)?r[a].promise().done(c(a,n,r)).fail(l.reject).progress(c(a,i,t)):--s;return s||l.resolveWith(n,r),l.promise()
}}),J.support=function(){var t,i,n,a,r,o,s,l,c,d,u,h=F.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),n=h.getElementsByTagName("a")[0],n.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length||!n)return{};a=F.createElement("select"),r=a.appendChild(F.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===o.value,optSelected:r.selected,getSetAttribute:"t"!==h.className,enctype:!!F.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==F.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===F.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!r.disabled;
try{delete h.test}catch(p){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",u=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",u)),o=F.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),s=F.createDocumentFragment(),s.appendChild(h.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,s.removeChild(o),s.appendChild(h),h.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})l="on"+c,d=l in h,d||(h.setAttribute(l,"return;"),d="function"==typeof h[l]),t[c+"Bubbles"]=d;
return J(function(){var i,n,a,r,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=F.getElementsByTagName("body")[0];s&&(i=F.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(i,s.firstChild),n=F.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=n.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=d&&0===a[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,r=F.createElement("div"),r.style.cssText=n.style.cssText=o,r.style.marginRight=r.style.width="0",n.style.width="1px",n.appendChild(r),t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),s.removeChild(i),i=n=a=r=null)
}),s.removeChild(h),i=n=a=r=o=s=h=null,t}();var mt=/^(?:\{.*\}|\[.*\])$/,gt=/([A-Z])/g;J.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?J.cache[e[J.expando]]:e[J.expando],!!e&&!a(e)},data:function(e,i,n,a){if(J.acceptData(e)){var r,o,s=J.expando,l="string"==typeof i,c=e.nodeType,d=c?J.cache:e,u=c?e[s]:e[s]&&s;if(u&&d[u]&&(a||d[u].data)||!l||n!==t)return u||(c?e[s]=u=J.deletedIds.pop()||++J.uuid:u=s),d[u]||(d[u]={},c||(d[u].toJSON=J.noop)),("object"==typeof i||"function"==typeof i)&&(a?d[u]=J.extend(d[u],i):d[u].data=J.extend(d[u].data,i)),r=d[u],a||(r.data||(r.data={}),r=r.data),n!==t&&(r[J.camelCase(i)]=n),l?(o=r[i],null==o&&(o=r[J.camelCase(i)])):o=r,o
}},removeData:function(e,t,i){if(J.acceptData(e)){var n,r,o,s=e.nodeType,l=s?J.cache:e,c=s?e[J.expando]:J.expando;if(l[c]){if(t&&(n=i?l[c]:l[c].data)){J.isArray(t)||(t in n?t=[t]:(t=J.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,o=t.length;o>r;r++)delete n[t[r]];if(!(i?a:J.isEmptyObject)(n))return}(i||(delete l[c].data,a(l[c])))&&(s?J.cleanData([e],!0):J.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,i){return J.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&J.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),J.fn.extend({data:function(e,i){var a,r,o,s,l,c=this[0],d=0,u=null;if(e===t){if(this.length&&(u=J.data(c),1===c.nodeType&&!J._data(c,"parsedAttrs"))){for(o=c.attributes,l=o.length;l>d;d++)s=o[d].name,0===s.indexOf("data-")&&(s=J.camelCase(s.substring(5)),n(c,s,u[s]));
J._data(c,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){J.data(this,e)}):(a=e.split(".",2),a[1]=a[1]?"."+a[1]:"",r=a[1]+"!",J.access(this,function(i){return i===t?(u=this.triggerHandler("getData"+r,[a[0]]),u===t&&c&&(u=J.data(c,e),u=n(c,e,u)),u===t&&a[1]?this.data(a[0]):u):(a[1]=i,void this.each(function(){var t=J(this);t.triggerHandler("setData"+r,a),J.data(this,e,i),t.triggerHandler("changeData"+r,a)}))},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){J.removeData(this,e)})}}),J.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=J._data(e,t),i&&(!n||J.isArray(i)?n=J._data(e,t,J.makeArray(i)):n.push(i)),n||[]):void 0
},dequeue:function(e,t){t=t||"fx";var i=J.queue(e,t),n=i.shift(),a=J._queueHooks(e,t),r=function(){J.dequeue(e,t)};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),delete a.stop,n.call(e,r,a)),!i.length&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return J._data(e,i)||J._data(e,i,{empty:J.Callbacks("once memory").add(function(){J.removeData(e,t+"queue",!0),J.removeData(e,i,!0)})})}}),J.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?J.queue(this[0],e):i===t?this:this.each(function(){var t=J.queue(this,e,i);J._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&J.dequeue(this,e)
})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},delay:function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,a=1,r=J.Deferred(),o=this,s=this.length,l=function(){--a||r.resolveWith(o,[o])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";s--;)(n=J._data(o[s],e+"queueHooks"))&&n.empty&&(a++,n.empty.add(l));return l(),r.promise(i)}});var vt,bt,yt,Ct=/[\t\r\n]/g,It=/\r/g,Et=/^(?:button|input)$/i,wt=/^(?:button|input|object|select|textarea)$/i,xt=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,_t=J.support.getSetAttribute;
J.fn.extend({attr:function(e,t){return J.access(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})},prop:function(e,t){return J.access(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return e=J.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,a,r,o,s;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),i=0,n=this.length;n>i;i++)if(a=this[i],1===a.nodeType)if(a.className||1!==t.length){for(r=" "+a.className+" ",o=0,s=t.length;s>o;o++)~r.indexOf(" "+t[o]+" ")||(r+=t[o]+" ");
a.className=J.trim(r)}else a.className=e;return this},removeClass:function(e){var i,n,a,r,o,s,l;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(tt),s=0,l=this.length;l>s;s++)if(a=this[s],1===a.nodeType&&a.className){for(n=(" "+a.className+" ").replace(Ct," "),r=0,o=i.length;o>r;r++)for(;n.indexOf(" "+i[r]+" ")>-1;)n=n.replace(" "+i[r]+" "," ");a.className=e?J.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return this.each(J.isFunction(e)?function(i){J(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var a,r=0,o=J(this),s=t,l=e.split(tt);a=l[r++];)s=n?s:!o.hasClass(a),o[s?"addClass":"removeClass"](a);
else("undefined"===i||"boolean"===i)&&(this.className&&J._data(this,"__className__",this.className),this.className=this.className||e===!1?"":J._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ct," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,a,r=this[0];{if(arguments.length)return a=J.isFunction(e),this.each(function(n){var r,o=J(this);1===this.nodeType&&(r=a?e.call(this,n,o.val()):e,null==r?r="":"number"==typeof r?r+="":J.isArray(r)&&(r=J.map(r,function(e){return null==e?"":e+""})),i=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))
});if(r)return i=J.valHooks[r.type]||J.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(It,""):null==n?"":n)}}}),J.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,a,r=e.selectedIndex,o=[],s=e.options,l="select-one"===e.type;if(0>r)return null;for(i=l?r:0,n=l?r+1:s.length;n>i;i++)if(a=s[i],!(!a.selected||(J.support.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&J.nodeName(a.parentNode,"optgroup"))){if(t=J(a).val(),l)return t;o.push(t)}return l&&!o.length&&s.length?J(s[r]).val():o
},set:function(e,t){var i=J.makeArray(t);return J(e).find("option").each(function(){this.selected=J.inArray(J(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,a){var r,o,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return a&&J.isFunction(J.fn[i])?J(e)[i](n):"undefined"==typeof e.getAttribute?J.prop(e,i,n):(s=1!==l||!J.isXMLDoc(e),s&&(i=i.toLowerCase(),o=J.attrHooks[i]||(Tt.test(i)?bt:vt)),n!==t?null===n?void J.removeAttr(e,i):o&&"set"in o&&s&&(r=o.set(e,n,i))!==t?r:(e.setAttribute(i,""+n),n):o&&"get"in o&&s&&null!==(r=o.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,a,r,o=0;if(t&&1===e.nodeType)for(n=t.split(tt);o<n.length;o++)a=n[o],a&&(i=J.propFix[a]||a,r=Tt.test(a),r||J.attr(e,a,""),e.removeAttribute(_t?a:i),r&&i in e&&(e[i]=!1))
},attrHooks:{type:{set:function(e,t){if(Et.test(e.nodeName)&&e.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&"radio"===t&&J.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return vt&&J.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,i){return vt&&J.nodeName(e,"button")?vt.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var a,r,o,s=e.nodeType;
if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!J.isXMLDoc(e),o&&(i=J.propFix[i]||i,r=J.propHooks[i]),n!==t?r&&"set"in r&&(a=r.set(e,n,i))!==t?a:e[i]=n:r&&"get"in r&&null!==(a=r.get(e,i))?a:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):wt.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:t}}}}),bt={get:function(e,i){var n,a=J.prop(e,i);return a===!0||"boolean"!=typeof a&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?J.removeAttr(e,i):(n=J.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},_t||(yt={name:!0,id:!0,coords:!0},vt=J.valHooks.button={get:function(e,i){var n;
return n=e.getAttributeNode(i),n&&(yt[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=F.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},J.each(["width","height"],function(e,t){J.attrHooks[t]=J.extend(J.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),J.attrHooks.contenteditable={get:vt.get,set:function(e,t,i){""===t&&(t="false"),vt.set(e,t,i)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(e,i){J.attrHooks[i]=J.extend(J.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),J.support.style||(J.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t
},set:function(e,t){return e.style.cssText=""+t}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}})});var kt=/^(?:textarea|input|select)$/i,Rt=/^([^\.]*|)(?:\.(.+)|)$/,Dt=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,qt=/^(?:mouse|contextmenu)|click/,St=/^(?:focusinfocus|focusoutblur)$/,Kt=function(e){return J.event.special.hover?e:e.replace(Dt,"mouseenter$1 mouseleave$1")
};J.event={add:function(e,i,n,a,r){var o,s,l,c,d,u,h,p,f,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(o=J._data(e))){for(n.handler&&(f=n,n=f.handler,r=f.selector),n.guid||(n.guid=J.guid++),l=o.events,l||(o.events=l={}),s=o.handle,s||(o.handle=s=function(e){return"undefined"==typeof J||e&&J.event.triggered===e.type?t:J.event.dispatch.apply(s.elem,arguments)},s.elem=e),i=J.trim(Kt(i)).split(" "),c=0;c<i.length;c++)d=Rt.exec(i[c])||[],u=d[1],h=(d[2]||"").split(".").sort(),g=J.event.special[u]||{},u=(r?g.delegateType:g.bindType)||u,g=J.event.special[u]||{},p=J.extend({type:u,origType:d[1],data:a,handler:n,guid:n.guid,selector:r,namespace:h.join(".")},f),m=l[u],m||(m=l[u]=[],m.delegateCount=0,g.setup&&g.setup.call(e,a,h,s)!==!1||(e.addEventListener?e.addEventListener(u,s,!1):e.attachEvent&&e.attachEvent("on"+u,s))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),r?m.splice(m.delegateCount++,0,p):m.push(p),J.event.global[u]=!0;
e=null}},global:{},remove:function(e,t,i,n,a){var r,o,s,l,c,d,u,h,p,f,m,g=J.hasData(e)&&J._data(e);if(g&&(h=g.events)){for(t=J.trim(Kt(t||"")).split(" "),r=0;r<t.length;r++)if(o=Rt.exec(t[r])||[],s=l=o[1],c=o[2],s){for(p=J.event.special[s]||{},s=(n?p.delegateType:p.bindType)||s,f=h[s]||[],d=f.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=0;u<f.length;u++)m=f[u],!(!a&&l!==m.origType||i&&i.guid!==m.guid||c&&!c.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(f.splice(u--,1),m.selector&&f.delegateCount--,!p.remove||!p.remove.call(e,m)));0===f.length&&d!==f.length&&((!p.teardown||p.teardown.call(e,c,g.handle)===!1)&&J.removeEvent(e,s,g.handle),delete h[s])
}else for(s in h)J.event.remove(e,s+t[r],i,n,!0);J.isEmptyObject(h)&&(delete g.handle,J.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,a,r){if(!a||3!==a.nodeType&&8!==a.nodeType){var o,s,l,c,d,u,h,p,f,m,g=i.type||i,v=[];if(St.test(g+J.event.triggered))return;if(g.indexOf("!")>=0&&(g=g.slice(0,-1),s=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),(!a||J.event.customEvent[g])&&!J.event.global[g])return;if(i="object"==typeof i?i[J.expando]?i:new J.Event(g,i):new J.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=s,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=g.indexOf(":")<0?"on"+g:"",!a){o=J.cache;
for(l in o)o[l].events&&o[l].events[g]&&J.event.trigger(i,n,o[l].handle.elem,!0);return}if(i.result=t,i.target||(i.target=a),n=null!=n?J.makeArray(n):[],n.unshift(i),h=J.event.special[g]||{},h.trigger&&h.trigger.apply(a,n)===!1)return;if(f=[[a,h.bindType||g]],!r&&!h.noBubble&&!J.isWindow(a)){for(m=h.delegateType||g,c=St.test(m+g)?a:a.parentNode,d=a;c;c=c.parentNode)f.push([c,m]),d=c;d===(a.ownerDocument||F)&&f.push([d.defaultView||d.parentWindow||e,m])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)c=f[l][0],i.type=f[l][1],p=(J._data(c,"events")||{})[i.type]&&J._data(c,"handle"),p&&p.apply(c,n),p=u&&c[u],p&&J.acceptData(c)&&p.apply(c,n)===!1&&i.preventDefault();
return i.type=g,!(r||i.isDefaultPrevented()||h._default&&h._default.apply(a.ownerDocument,n)!==!1||"click"===g&&J.nodeName(a,"a")||!J.acceptData(a)||!u||!a[g]||("focus"===g||"blur"===g)&&0===i.target.offsetWidth||J.isWindow(a)||(d=a[u],d&&(a[u]=null),J.event.triggered=g,a[g](),J.event.triggered=t,!d||!(a[u]=d))),i.result}},dispatch:function(i){i=J.event.fix(i||e.event);var n,a,r,o,s,l,c,d,u,h,p=(J._data(this,"events")||{})[i.type]||[],f=p.delegateCount,m=[].slice.call(arguments),g=!i.exclusive&&!i.namespace,v=J.event.special[i.type]||{},b=[];if(m[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(o=J(this),o.context=this,r=i.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0||"click"!==i.type){for(l={},d=[],o[0]=r,n=0;f>n;n++)u=p[n],h=u.selector,l[h]===t&&(l[h]=o.is(h)),l[h]&&d.push(u);
d.length&&b.push({elem:r,matches:d})}for(p.length>f&&b.push({elem:this,matches:p.slice(f)}),n=0;n<b.length&&!i.isPropagationStopped();n++)for(c=b[n],i.currentTarget=c.elem,a=0;a<c.matches.length&&!i.isImmediatePropagationStopped();a++)u=c.matches[a],(g||!i.namespace&&!u.namespace||i.namespace_re&&i.namespace_re.test(u.namespace))&&(i.data=u.data,i.handleObj=u,s=((J.event.special[u.origType]||{}).handle||u.handler).apply(c.elem,m),s!==t&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,a,r,o=i.button,s=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||F,a=n.documentElement,r=n.body,e.pageX=i.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?i.toElement:s),!e.which&&o!==t&&(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,i,n=e,a=J.event.fixHooks[e.type]||{},r=a.props?this.props.concat(a.props):this.props;
for(e=J.Event(n),t=r.length;t;)i=r[--t],e[i]=n[i];return e.target||(e.target=n.srcElement||F),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,n):e},special:{ready:{setup:J.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){J.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var a=J.extend(new J.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(a,null,t):J.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=F.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)
}:function(e,t,i){var n="on"+t;e.detachEvent&&("undefined"==typeof e[n]&&(e[n]=null),e.detachEvent(n,i))},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:r):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),this[J.expando]=!0,void 0):new J.Event(e,t)},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;
e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var i,n=this,a=e.relatedTarget,r=e.handleObj;r.selector}return(!a||a!==n&&!J.contains(n,a))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){return J.nodeName(this,"form")?!1:void J.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=J.nodeName(i,"input")||J.nodeName(i,"button")?i.form:t;
n&&!J._data(n,"_submit_attached")&&(J.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),J._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&J.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return J.nodeName(this,"form")?!1:void J.event.remove(this,"._submit")}}),J.support.changeBubbles||(J.event.special.change={setup:function(){return kt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(J.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),J.event.simulate("change",this,e,!0)
})),!1):void J.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!J._data(t,"_change_attached")&&(J.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&J.event.simulate("change",this.parentNode,e,!0)}),J._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return J.event.remove(this,"._change"),kt.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)
};J.event.special[t]={setup:function(){0===i++&&F.addEventListener(e,n,!0)},teardown:function(){0===--i&&F.removeEventListener(e,n,!0)}}}),J.fn.extend({on:function(e,i,n,a,o){var s,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],o);return this}if(null==n&&null==a?(a=i,n=i=t):null==a&&("string"==typeof i?(a=n,n=t):(a=n,n=i,i=t)),a===!1)a=r;else if(!a)return this;return 1===o&&(s=a,a=function(e){return J().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,e,a,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var a,o;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,J(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;
if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=r),this.each(function(){J.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return J(this.context).on(e,this.selector,t,i),this},die:function(e,t){return J(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?J.event.trigger(e,t,this[0],!0):void 0
},toggle:function(e){var t=arguments,i=e.guid||J.guid++,n=0,a=function(i){var a=(J._data(this,"lastToggle"+e.guid)||0)%n;return J._data(this,"lastToggle"+e.guid,a+1),i.preventDefault(),t[a].apply(this,arguments)||!1};for(a.guid=i;n<t.length;)t[n++].guid=i;return this.click(a)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)
},Ot.test(t)&&(J.event.fixHooks[t]=J.event.keyHooks),qt.test(t)&&(J.event.fixHooks[t]=J.event.mouseHooks)}),function(e,t){function i(e,t,i,n){for(var a=0,r=t.length;r>a;a++)rt(e,t[a],i,n)}function n(e,t,n,a,r,o){var s,l=ot.setFilters[t.toLowerCase()];return l||rt.error(t),(e||!(s=r))&&i(e||"*",a,s=[],r),s.length>0?l(s,n,o):[]}function a(e,a,r,o,s){for(var l,c,d,u,h,p,f,m,g=0,v=s.length,b=H.POS,y=new RegExp("^"+b.source+"(?!"+x+")","i"),C=function(){for(var e=1,i=arguments.length-2;i>e;e++)arguments[e]===t&&(l[e]=t)};v>g;g++){for(b.exec(""),e=s[g],u=[],d=0,h=o;l=b.exec(e);)m=b.lastIndex=l.index+l[0].length,m>d&&(f=e.slice(d,l.index),d=m,p=[a],A.test(f)&&(h&&(p=h),h=o),(c=$.test(f))&&(f=f.slice(0,-5).replace(A,"$&*")),l.length>1&&l[0].replace(y,C),h=n(f,l[1],l[2],p,h,c));
h?(u=u.concat(h),(f=e.slice(d))&&")"!==f?A.test(f)?i(f,u,r,o):rt(f,a,r,o?o.concat(h):h):E.apply(r,u)):rt(e,a,r,o)}return 1===v?r:rt.uniqueSort(r)}function r(e,t,i){for(var n,a,r,o=[],s=0,l=M.exec(e),c=!l.pop()&&!l.pop(),d=c&&e.match(N)||[""],u=ot.preFilter,h=ot.filter,p=!i&&t!==m;null!=(a=d[s])&&c;s++)for(o.push(n=[]),p&&(a=" "+a);a;){c=!1,(l=A.exec(a))&&(a=a.slice(l[0].length),c=n.push({part:l.pop().replace(K," "),captures:l}));for(r in h)(l=H[r].exec(a))&&(!u[r]||(l=u[r](l,t,i)))&&(a=a.slice(l.shift().length),c=n.push({part:r,captures:l}));if(!c)break}return c||rt.error(e),o}function o(e,t,i){var n=t.dir,a=C++;return e||(e=function(e){return e===i}),t.first?function(t,i){for(;t=t[n];)if(1===t.nodeType)return e(t,i)&&t
}:function(t,i){for(var r,o=a+"."+u,s=o+"."+d;t=t[n];)if(1===t.nodeType){if((r=t[w])===s)return t.sizset;if("string"==typeof r&&0===r.indexOf(o)){if(t.sizset)return t}else{if(t[w]=s,e(t,i))return t.sizset=!0,t;t.sizset=!1}}}}function s(e,t){return e?function(i,n){var a=t(i,n);return a&&e(a===!0?i:a,n)}:t}function l(e,t,i){for(var n,a,r=0;n=e[r];r++)ot.relative[n.part]?a=o(a,ot.relative[n.part],t):(n.captures.push(t,i),a=s(a,ot.filter[n.part].apply(null,n.captures)));return a}function c(e){return function(t,i){for(var n,a=0;n=e[a];a++)if(n(t,i))return!0;return!1}}var d,u,h,p,f,m=e.document,g=m.documentElement,v="undefined",b=!1,y=!0,C=0,I=[].slice,E=[].push,w=("sizcache"+Math.random()).replace(".",""),x="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=T.replace("w","w#"),k="([*^$|!~]?=)",R="\\["+x+"*("+T+")"+x+"*(?:"+k+x+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+x+"*\\]",D=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",O=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",q=x+"*([\\x20\\t\\r\\n\\f>+~])"+x+"*",S="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+R+"|"+D.replace(2,7)+"|[^\\\\(),])+",K=new RegExp("^"+x+"+|((?:^|[^\\\\])(?:\\\\.)*)"+x+"+$","g"),A=new RegExp("^"+q),N=new RegExp(S+"?(?="+x+"*,|$)","g"),M=new RegExp("^(?:(?!,)(?:(?:^|,)"+x+"*"+S+")*?|"+x+"*(.*?))(\\)|$)"),P=new RegExp(S.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+q,"g"),Q=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,L=/[\x20\t\r\n\f]*[+~]/,$=/:not\($/,F=/h\d/i,B=/input|select|textarea|button/i,z=/\\(?!\\)/g,H={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+D),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+x+"*(even|odd|(([+-]|)(\\d*)n|)"+x+"*(?:([+-]|)"+x+"*(\\d+)|))"+x+"*\\)|)","i"),POS:new RegExp(O,"ig"),needsContext:new RegExp("^"+x+"*[>+~]|"+O,"i")},j={},W=[],U={},V=[],G=function(e){return e.sizzleFilter=!0,e
},X=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}},Y=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}},Z=function(e){var t=!1,i=m.createElement("div");try{t=e(i)}catch(n){}return i=null,t},et=Z(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),tt=Z(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",g.insertBefore(e,g.firstChild);var t=m.getElementsByName&&m.getElementsByName(w).length===2+m.getElementsByName(w+0).length;return f=!m.getElementById(w),g.removeChild(e),t
}),it=Z(function(e){return e.appendChild(m.createComment("")),0===e.getElementsByTagName("*").length}),nt=Z(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==v&&"#"===e.firstChild.getAttribute("href")}),at=Z(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length?(e.lastChild.className="e",1!==e.getElementsByClassName("e").length):!1}),rt=function(e,t,i,n){i=i||[],t=t||m;var a,r,o,s,l=t.nodeType;if(1!==l&&9!==l)return[];if(!e||"string"!=typeof e)return i;if(o=lt(t),!o&&!n&&(a=Q.exec(e)))if(s=a[1]){if(9===l){if(r=t.getElementById(s),!r||!r.parentNode)return i;
if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&ct(t,r)&&r.id===s)return i.push(r),i}else{if(a[2])return E.apply(i,I.call(t.getElementsByTagName(e),0)),i;if((s=a[3])&&at&&t.getElementsByClassName)return E.apply(i,I.call(t.getElementsByClassName(s),0)),i}return ht(e,t,i,n,o)},ot=rt.selectors={cacheLength:50,match:H,order:["ID","TAG"],attrHandle:{},createPseudo:G,find:{ID:f?function(e,t,i){if(typeof t.getElementById!==v&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,i,n){if(typeof i.getElementById!==v&&!n){var a=i.getElementById(e);return a?a.id===e||typeof a.getAttributeNode!==v&&a.getAttributeNode("id").value===e?[a]:t:[]
}},TAG:it?function(e,t){return typeof t.getElementsByTagName!==v?t.getElementsByTagName(e):void 0}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,a=[],r=0;n=i[r];r++)1===n.nodeType&&a.push(n);return a}return i}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(z,""),e[3]=(e[4]||e[5]||"").replace(z,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||rt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&rt.error(e[0]),e
},PSEUDO:function(e){var t,i=e[4];return H.CHILD.test(e[0])?null:(i&&(t=M.exec(i))&&t.pop()&&(e[0]=e[0].slice(0,t[0].length-i.length-1),i=t[0].slice(0,-1)),e.splice(2,3,i||e[3]),e)}},filter:{ID:f?function(e){return e=e.replace(z,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(z,""),function(t){var i=typeof t.getAttributeNode!==v&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(z,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=j[e];return t||(t=j[e]=new RegExp("(^|"+x+")"+e+"("+x+"|$)"),W.push(e),W.length>ot.cacheLength&&delete j[W.shift()]),function(e){return t.test(e.className||typeof e.getAttribute!==v&&e.getAttribute("class")||"")
}},ATTR:function(e,t,i){return t?function(n){var a=rt.attr(n,e),r=a+"";if(null==a)return"!="===t;switch(t){case"=":return r===i;case"!=":return r!==i;case"^=":return i&&0===r.indexOf(i);case"*=":return i&&r.indexOf(i)>-1;case"$=":return i&&r.substr(r.length-i.length)===i;case"~=":return(" "+r+" ").indexOf(i)>-1;case"|=":return r===i||r.substr(0,i.length+1)===i+"-"}}:function(t){return null!=rt.attr(t,e)}},CHILD:function(e,t,i,n){if("nth"===e){var a=C++;return function(e){var t,r,o=0,s=e;if(1===i&&0===n)return!0;if(t=e.parentNode,t&&(t[w]!==a||!e.sizset)){for(s=t.firstChild;s&&(1!==s.nodeType||(s.sizset=++o,s!==e));s=s.nextSibling);t[w]=a}return r=e.sizset-n,0===i?0===r:r%i===0&&r/i>=0
}}return function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t,i,n){var a=ot.pseudos[e]||ot.pseudos[e.toLowerCase()];return a||rt.error("unsupported pseudo: "+e),a.sizzleFilter?a(t,i,n):a}},pseudos:{not:G(function(e,t,i){var n=ut(e.replace(K,"$1"),t,i);return function(e){return!n(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0
},parent:function(e){return!ot.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},contains:G(function(e){return function(t){return(t.textContent||t.innerText||dt(t)).indexOf(e)>-1}}),has:G(function(e){return function(t){return rt(e,t).length>0}}),header:function(e){return F.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:X("radio"),checkbox:X("checkbox"),file:X("file"),password:X("password"),image:X("image"),submit:Y("submit"),reset:Y("reset"),button:function(e){var t=e.nodeName.toLowerCase();
return"input"===t&&"button"===e.type||"button"===t},input:function(e){return B.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,i){return i?e.slice(1):[e[0]]},last:function(e,t,i){var n=e.pop();return i?e:[n]},even:function(e,t,i){for(var n=[],a=i?1:0,r=e.length;r>a;a+=2)n.push(e[a]);return n},odd:function(e,t,i){for(var n=[],a=i?0:1,r=e.length;r>a;a+=2)n.push(e[a]);return n},lt:function(e,t,i){return i?e.slice(+t):e.slice(0,+t)},gt:function(e,t,i){return i?e.slice(0,+t+1):e.slice(+t+1)
},eq:function(e,t,i){var n=e.splice(+t,1);return i?e:n}}};ot.setFilters.nth=ot.setFilters.eq,ot.filters=ot.pseudos,nt||(ot.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}),tt&&(ot.order.push("NAME"),ot.find.NAME=function(e,t){return typeof t.getElementsByName!==v?t.getElementsByName(e):void 0}),at&&(ot.order.splice(1,0,"CLASS"),ot.find.CLASS=function(e,t,i){return typeof t.getElementsByClassName===v||i?void 0:t.getElementsByClassName(e)});try{I.call(g.childNodes,0)[0].nodeType}catch(st){I=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}var lt=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;
return t?"HTML"!==t.nodeName:!1},ct=rt.contains=g.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:g.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},dt=rt.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=dt(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n];n++)i+=dt(t);return i};rt.attr=function(e,t){var i,n=lt(e);return n||(t=t.toLowerCase()),ot.attrHandle[t]?ot.attrHandle[t](e):et||n?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)
},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return y=0}),g.compareDocumentPosition?h=function(e,t){return e===t?(b=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:(h=function(e,t){if(e===t)return b=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,a=[],r=[],o=e.parentNode,s=t.parentNode,l=o;if(o===s)return p(e,t);if(!o)return-1;if(!s)return 1;for(;l;)a.unshift(l),l=l.parentNode;for(l=s;l;)r.unshift(l),l=l.parentNode;i=a.length,n=r.length;for(var c=0;i>c&&n>c;c++)if(a[c]!==r[c])return p(a[c],r[c]);
return c===i?p(e,r[c],-1):p(a[c],t,1)},p=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),rt.uniqueSort=function(e){var t,i=1;if(h&&(b=y,e.sort(h),b))for(;t=e[i];i++)t===e[i-1]&&e.splice(i--,1);return e};var ut=rt.compile=function(e,t,i){var n,a,o,s=U[e];if(s&&s.context===t)return s;for(a=r(e,t,i),o=0;n=a[o];o++)a[o]=l(n,t,i);return s=U[e]=c(a),s.context=t,s.runs=s.dirruns=0,V.push(e),V.length>ot.cacheLength&&delete U[V.shift()],s};rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){return rt(t,null,null,[e]).length>0};var ht=function(e,t,i,n,r){e=e.replace(K,"$1");var o,s,l,c,h,p,f,m,g,v=e.match(N),b=e.match(P),y=t.nodeType;
if(H.POS.test(e))return a(e,t,i,n,v);if(n)o=I.call(n,0);else if(v&&1===v.length){if(b.length>1&&9===y&&!r&&(v=H.ID.exec(b[0]))){if(t=ot.find.ID(v[1],t,r)[0],!t)return i;e=e.slice(b.shift().length)}for(m=(v=L.exec(b[0]))&&!v.index&&t.parentNode||t,g=b.pop(),p=g.split(":not")[0],l=0,c=ot.order.length;c>l;l++)if(f=ot.order[l],v=H[f].exec(p)){if(o=ot.find[f]((v[1]||"").replace(z,""),m,r),null==o)continue;p===g&&(e=e.slice(0,e.length-g.length)+p.replace(H[f],""),e||E.apply(i,I.call(o,0)));break}}if(e)for(s=ut(e,t,r),u=s.dirruns++,null==o&&(o=ot.find.TAG("*",L.test(e)&&t.parentNode||t)),l=0;h=o[l];l++)d=s.runs++,s(h,t)&&i.push(h);return i};m.querySelectorAll&&function(){var e,t=ht,i=/'|\\/g,n=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,a=[],r=[":active"],o=g.matchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.oMatchesSelector||g.msMatchesSelector;
Z(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||a.push("\\["+x+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||a.push(":checked")}),Z(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&a.push("[*^$]="+x+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||a.push(":enabled",":disabled")}),a=a.length&&new RegExp(a.join("|")),ht=function(e,n,r,o,s){if(!(o||s||a&&a.test(e)))if(9===n.nodeType)try{return E.apply(r,I.call(n.querySelectorAll(e),0)),r}catch(l){}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var c=n.getAttribute("id"),d=c||w,u=L.test(e)&&n.parentNode||n;
c?d=d.replace(i,"\\$&"):n.setAttribute("id",d);try{return E.apply(r,I.call(u.querySelectorAll(e.replace(N,"[id='"+d+"'] $&")),0)),r}catch(l){}finally{c||n.removeAttribute("id")}}return t(e,n,r,o,s)},o&&(Z(function(t){e=o.call(t,"div");try{o.call(t,"[test!='']:sizzle"),r.push(ot.match.PSEUDO)}catch(i){}}),r=new RegExp(r.join("|")),rt.matchesSelector=function(t,i){if(i=i.replace(n,"='$1']"),!(lt(t)||r.test(i)||a&&a.test(i)))try{var s=o.call(t,i);if(s||e||t.document&&11!==t.document.nodeType)return s}catch(l){}return rt(i,null,null,[t]).length>0})}(),rt.attr=J.attr,J.find=rt,J.expr=rt.selectors,J.expr[":"]=J.expr.pseudos,J.unique=rt.uniqueSort,J.text=rt.getText,J.isXMLDoc=rt.isXML,J.contains=rt.contains
}(e);var At=/Until$/,Nt=/^(?:parents|prev(?:Until|All))/,Mt=/^.[^:#\[\.,]*$/,Pt=J.expr.match.needsContext,Qt={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(e){var t,i,n,a,r,o,s=this;if("string"!=typeof e)return J(e).filter(function(){for(t=0,i=s.length;i>t;t++)if(J.contains(s[t],this))return!0});for(o=this.pushStack("","find",e),t=0,i=this.length;i>t;t++)if(n=o.length,J.find(e,this[t],o),t>0)for(a=n;a<o.length;a++)for(r=0;n>r;r++)if(o[r]===o[a]){o.splice(a--,1);break}return o},has:function(e){var t,i=J(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(J.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)
},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Pt.test(e)?J(e,this.context).index(this[0])>=0:J.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,a=this.length,r=[],o=Pt.test(e)||"string"!=typeof e?J(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(o?o.index(i)>-1:J.find.matchesSelector(i,e)){r.push(i);break}i=i.parentNode}return r=r.length>1?J.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?J.inArray(this[0],J(e)):J.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1
},add:function(e,t){var i="string"==typeof e?J(e,t):J.makeArray(e&&e.nodeType?[e]:e),n=J.merge(this.get(),i);return this.pushStack(s(i[0])||s(n[0])?n:J.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.fn.andSelf=J.fn.addBack,J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,i){return J.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")
},nextUntil:function(e,t,i){return J.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return J.dir(e,"previousSibling",i)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return J.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(i,n){var a=J.map(this,t,i);return At.test(e)||(n=i),n&&"string"==typeof n&&(a=J.filter(n,a)),a=this.length>1&&!Qt[e]?J.unique(a):a,this.length>1&&Nt.test(e)&&(a=a.reverse()),this.pushStack(a,e,U.call(arguments).join(","))}}),J.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?J.find.matchesSelector(t[0],e)?[t[0]]:[]:J.find.matches(e,t)
},dir:function(e,i,n){for(var a=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!J(r).is(n));)1===r.nodeType&&a.push(r),r=r[i];return a},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",$t=/ jQuery\d+="(?:null|\d+)"/g,Ft=/^\s+/,Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Ht=/<tbody/i,jt=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,Ut=/<(?:script|object|embed|option|style)/i,Vt=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Gt=/^(?:checkbox|radio)$/,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Yt=/\/(java|ecma)script/i,Jt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ei=d(F),ti=ei.appendChild(F.createElement("div"));
Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,J.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),J.fn.extend({text:function(e){return J.access(this,function(e){return e===t?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||F).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(J.isFunction(e))return this.each(function(t){J(this).wrapAll(e.call(this,t))});if(this[0]){var t=J(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))
}:function(){var t=J(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(i){J(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)
});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(e,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||J.filter(e,[i]).length)&&(!t&&1===i.nodeType&&(J.cleanData(i.getElementsByTagName("*")),J.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&J.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);
return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return J.access(this,function(e){var i=this[0]||{},n=0,a=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace($t,""):t;if(!("string"!=typeof e||Wt.test(e)||!J.support.htmlSerialize&&Vt.test(e)||!J.support.leadingWhitespace&&Ft.test(e)||Zt[(zt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Bt,"<$1></$2>");try{for(;a>n;n++)i=this[n]||{},1===i.nodeType&&(J.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(r){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return s(this[0])?this.length?this.pushStack(J(J.isFunction(e)?e():e),"replaceWith",e):this:J.isFunction(e)?this.each(function(t){var i=J(this),n=i.html();
i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=J(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;J(this).remove(),t?J(t).before(e):J(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=[].concat.apply([],e);var a,r,o,s,l=0,c=e[0],d=[],h=this.length;if(!J.support.checkClone&&h>1&&"string"==typeof c&&Xt.test(c))return this.each(function(){J(this).domManip(e,i,n)});if(J.isFunction(c))return this.each(function(a){var r=J(this);e[0]=c.call(this,a,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(a=J.buildFragment(e,this,d),o=a.fragment,r=o.firstChild,1===o.childNodes.length&&(o=r),r)for(i=i&&J.nodeName(r,"tr"),s=a.cacheable||h-1;h>l;l++)n.call(i&&J.nodeName(this[l],"table")?u(this[l],"tbody"):this[l],l===s?o:J.clone(o,!0,!0));
o=r=null,d.length&&J.each(d,function(e,t){t.src?J.ajax?J.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):J.error("no ajax"):J.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Jt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),J.buildFragment=function(e,i,n){var a,r,o,s=e[0];return i=i||F,i=(i[0]||i).ownerDocument||i[0]||i,"undefined"==typeof i.createDocumentFragment&&(i=F),1===e.length&&"string"==typeof s&&s.length<512&&i===F&&"<"===s.charAt(0)&&!Ut.test(s)&&(J.support.checkClone||!Xt.test(s))&&(J.support.html5Clone||!Vt.test(s))&&(r=!0,a=J.fragments[s],o=a!==t),a||(a=i.createDocumentFragment(),J.clean(e,i,a,n),r&&(J.fragments[s]=o&&a)),{fragment:a,cacheable:r}
},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(i){var n,a=0,r=[],o=J(i),s=o.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return o[t](this[0]),this;for(;s>a;a++)n=(a>0?this.clone(!0):this).get(),J(o[a])[t](n),r=r.concat(n);return this.pushStack(r,e,o.selector)}}),J.extend({clone:function(e,t,i){var n,a,r,o;if(J.support.html5Clone||J.isXMLDoc(e)||!Vt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ti.innerHTML=e.outerHTML,ti.removeChild(o=ti.firstChild)),!(J.support.noCloneEvent&&J.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(p(e,o),n=f(e),a=f(o),r=0;n[r];++r)a[r]&&p(n[r],a[r]);
if(t&&(h(e,o),i))for(n=f(e),a=f(o),r=0;n[r];++r)h(n[r],a[r]);return n=a=null,o},clean:function(e,t,i,n){var a,r,o,s,l,c,u,h,p,f,g,v=0,b=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=F),r=t===F&&ei;null!=(o=e[v]);v++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(jt.test(o)){for(r=r||d(t),u=u||r.appendChild(t.createElement("div")),o=o.replace(Bt,"<$1></$2>"),s=(zt.exec(o)||["",""])[1].toLowerCase(),l=Zt[s]||Zt._default,c=l[0],u.innerHTML=l[1]+o+l[2];c--;)u=u.lastChild;if(!J.support.tbody)for(h=Ht.test(o),p="table"!==s||h?"<table>"!==l[1]||h?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes,a=p.length-1;a>=0;--a)J.nodeName(p[a],"tbody")&&!p[a].childNodes.length&&p[a].parentNode.removeChild(p[a]);
!J.support.leadingWhitespace&&Ft.test(o)&&u.insertBefore(t.createTextNode(Ft.exec(o)[0]),u.firstChild),o=u.childNodes,u=r.lastChild}else o=t.createTextNode(o);o.nodeType?b.push(o):b=J.merge(b,o)}if(u&&(r.removeChild(u),o=u=r=null),!J.support.appendChecked)for(v=0;null!=(o=b[v]);v++)J.nodeName(o,"input")?m(o):"undefined"!=typeof o.getElementsByTagName&&J.grep(o.getElementsByTagName("input"),m);if(i)for(f=function(e){return!e.type||Yt.test(e.type)?n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):void 0},v=0;null!=(o=b[v]);v++)J.nodeName(o,"script")&&f(o)||(i.appendChild(o),"undefined"!=typeof o.getElementsByTagName&&(g=J.grep(J.merge([],o.getElementsByTagName("script")),f),b.splice.apply(b,[v+1,0].concat(g)),v+=g.length));
return b},cleanData:function(e,t){for(var i,n,a,r,o=0,s=J.expando,l=J.cache,c=J.support.deleteExpando,d=J.event.special;null!=(a=e[o]);o++)if((t||J.acceptData(a))&&(n=a[s],i=n&&l[n])){if(i.events)for(r in i.events)d[r]?J.event.remove(a,r):J.removeEvent(a,r,i.handle);l[n]&&(delete l[n],c?delete a[s]:a.removeAttribute?a.removeAttribute(s):a[s]=null,J.deletedIds.push(n))}}}),function(){var e,t;J.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}
},e=J.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.webkit&&(t.safari=!0),J.browser=t,J.sub=function(){function e(t,i){return new e.fn.init(t,i)}J.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function i(i,n){return n&&n instanceof J&&!(n instanceof e)&&(n=e(n)),J.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(F);return e}}();var ii,ni,ai,ri=/alpha\([^)]*\)/i,oi=/opacity=([^)]*)/,si=/^(top|right|bottom|left)$/,li=/^margin/,ci=new RegExp("^("+Z+")(.*)$","i"),di=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),ui=new RegExp("^([-+])=("+Z+")","i"),hi={},pi={position:"absolute",visibility:"hidden",display:"block"},fi={letterSpacing:0,fontWeight:400,lineHeight:1},mi=["Top","Right","Bottom","Left"],gi=["Webkit","O","Moz","ms"],vi=J.fn.toggle;
J.fn.extend({css:function(e,i){return J.access(this,function(e,i,n){return n!==t?J.style(e,i,n):J.css(e,i)},e,i,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e,t){var i="boolean"==typeof e;return J.isFunction(e)&&J.isFunction(t)?vi.apply(this,arguments):this.each(function(){(i?e:v(this))?J(this).show():J(this).hide()})}}),J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ii(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,l=J.camelCase(i),c=e.style;
if(i=J.cssProps[l]||(J.cssProps[l]=g(c,l)),s=J.cssHooks[i]||J.cssHooks[l],n===t)return s&&"get"in s&&(r=s.get(e,!1,a))!==t?r:c[i];if(o=typeof n,"string"===o&&(r=ui.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(J.css(e,i)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"===o&&!J.cssNumber[l]&&(n+="px"),s&&"set"in s&&(n=s.set(e,n,a))===t)))try{c[i]=n}catch(d){}}},css:function(e,i,n,a){var r,o,s,l=J.camelCase(i);return i=J.cssProps[l]||(J.cssProps[l]=g(e.style,l)),s=J.cssHooks[i]||J.cssHooks[l],s&&"get"in s&&(r=s.get(e,!0,a)),r===t&&(r=ii(e,i)),"normal"===r&&i in fi&&(r=fi[i]),n||a!==t?(o=parseFloat(r),n||J.isNumeric(o)?o||0:r):r},swap:function(e,t,i){var n,a,r={};
for(a in t)r[a]=e.style[a],e.style[a]=t[a];n=i.call(e);for(a in t)e.style[a]=r[a];return n}}),e.getComputedStyle?ii=function(e,t){var i,n,a,r,o=getComputedStyle(e,null),s=e.style;return o&&(i=o[t],""===i&&!J.contains(e.ownerDocument.documentElement,e)&&(i=J.style(e,t)),di.test(i)&&li.test(t)&&(n=s.width,a=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=o.width,s.width=n,s.minWidth=a,s.maxWidth=r)),i}:F.documentElement.currentStyle&&(ii=function(e,t){var i,n,a=e.currentStyle&&e.currentStyle[t],r=e.style;return null==a&&r&&r[t]&&(a=r[t]),di.test(a)&&!si.test(t)&&(i=r.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":a,a=r.pixelLeft+"px",r.left=i,n&&(e.runtimeStyle.left=n)),""===a?"auto":a
}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,i,n){return i?0!==e.offsetWidth||"none"!==ii(e,"display")?I(e,t,n):J.swap(e,pi,function(){return I(e,t,n)}):void 0},set:function(e,i,n){return y(e,i,n?C(e,t,n,J.support.boxSizing&&"border-box"===J.css(e,"boxSizing")):0)}}}),J.support.opacity||(J.cssHooks.opacity={get:function(e,t){return oi.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=J.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===J.trim(r.replace(ri,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=ri.test(r)?r.replace(ri,a):r+" "+a)
}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(e,t){return J.swap(e,{display:"inline-block"},function(){return t?ii(e,"marginRight"):void 0})}}),!J.support.pixelPosition&&J.fn.position&&J.each(["top","left"],function(e,t){J.cssHooks[t]={get:function(e,i){if(i){var n=ii(e,t);return di.test(n)?J(e).position()[t]+"px":n}}}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!J.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ii(e,"display"))},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(i){var n,a="string"==typeof i?i.split(" "):[i],r={};
for(n=0;4>n;n++)r[e+mi[n]+t]=a[n]||a[n-2]||a[0];return r}},li.test(e)||(J.cssHooks[e+t].set=y)});var bi=/%20/g,yi=/\[\]$/,Ci=/\r?\n/g,Ii=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ei=/^(?:select|textarea)/i;J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ei.test(this.nodeName)||Ii.test(this.type))}).map(function(e,t){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(e){return{name:t.name,value:e.replace(Ci,"\r\n")}
}):{name:t.name,value:i.replace(Ci,"\r\n")}}).get()}}),J.param=function(e,i){var n,a=[],r=function(e,t){t=J.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){r(this.name,this.value)});else for(n in e)w(n,e[n],i,r);return a.join("&").replace(bi,"+")};var wi,xi,Ti=/#.*$/,_i=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ki=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ri=/^(?:GET|HEAD)$/,Di=/^\/\//,Oi=/\?/,qi=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Si=/([?&])_=[^&]*/,Ki=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ai=J.fn.load,Ni={},Mi={},Pi=["*/"]+["*"];
try{wi=B.href}catch(Qi){wi=F.createElement("a"),wi.href="",wi=wi.href}xi=Ki.exec(wi.toLowerCase())||[],J.fn.load=function(e,i,n){if("string"!=typeof e&&Ai)return Ai.apply(this,arguments);if(!this.length)return this;var a,r,o,s=this,l=e.indexOf(" ");return l>=0&&(a=e.slice(l,e.length),e=e.slice(0,l)),J.isFunction(i)?(n=i,i=t):"object"==typeof i&&(r="POST"),J.ajax({url:e,type:r,dataType:"html",data:i,complete:function(e,t){n&&s.each(n,o||[e.responseText,t,e])}}).done(function(e){o=arguments,s.html(a?J("<div>").append(e.replace(qi,"")).find(a):e)}),this},J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){J.fn[t]=function(e){return this.on(t,e)
}}),J.each(["get","post"],function(e,i){J[i]=function(e,n,a,r){return J.isFunction(n)&&(r=r||a,a=n,n=t),J.ajax({type:i,url:e,data:n,success:a,dataType:r})}}),J.extend({getScript:function(e,i){return J.get(e,t,i,"script")},getJSON:function(e,t,i){return J.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?_(e,J.ajaxSettings):(t=e,e=J.ajaxSettings),_(e,t),e},ajaxSettings:{url:wi,isLocal:ki.test(xi[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Pi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:x(Ni),ajaxTransport:x(Mi),ajax:function(e,i){function n(e,i,n,o){var c,u,b,y,I,w=i;
2!==C&&(C=2,l&&clearTimeout(l),s=t,r=o||"",E.readyState=e>0?4:0,n&&(y=k(h,E,n)),e>=200&&300>e||304===e?(h.ifModified&&(I=E.getResponseHeader("Last-Modified"),I&&(J.lastModified[a]=I),I=E.getResponseHeader("Etag"),I&&(J.etag[a]=I)),304===e?(w="notmodified",c=!0):(c=R(h,y),w=c.state,u=c.data,b=c.error,c=!b)):(b=w,(!w||e)&&(w="error",0>e&&(e=0))),E.status=e,E.statusText=""+(i||w),c?m.resolveWith(p,[u,w,E]):m.rejectWith(p,[E,w,b]),E.statusCode(v),v=t,d&&f.trigger("ajax"+(c?"Success":"Error"),[E,h,c?u:b]),g.fireWith(p,[E,w]),d&&(f.trigger("ajaxComplete",[E,h]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var a,r,o,s,l,c,d,u,h=J.ajaxSetup({},i),p=h.context||h,f=p!==h&&(p.nodeType||p instanceof J)?J(p):J.event,m=J.Deferred(),g=J.Callbacks("once memory"),v=h.statusCode||{},b={},y={},C=0,I="canceled",E={readyState:0,setRequestHeader:function(e,t){if(!C){var i=e.toLowerCase();
e=y[i]=y[i]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===C?r:null},getResponseHeader:function(e){var i;if(2===C){if(!o)for(o={};i=_i.exec(r);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return C||(h.mimeType=e),this},abort:function(e){return e=e||I,s&&s.abort(e),n(0,e),this}};if(m.promise(E),E.success=E.done,E.error=E.fail,E.complete=g.add,E.statusCode=function(e){if(e){var t;if(2>C)for(t in e)v[t]=[v[t],e[t]];else t=e[E.status],E.always(t)}return this},h.url=((e||h.url)+"").replace(Ti,"").replace(Di,xi[1]+"//"),h.dataTypes=J.trim(h.dataType||"*").toLowerCase().split(tt),null==h.crossDomain&&(c=Ki.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==xi[1]&&c[2]==xi[2]&&(c[3]||("http:"===c[1]?80:443))==(xi[3]||("http:"===xi[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=J.param(h.data,h.traditional)),T(Ni,h,i,E),2===C)return E;
if(d=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Ri.test(h.type),d&&0===J.active++&&J.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Oi.test(h.url)?"&":"?")+h.data,delete h.data),a=h.url,h.cache===!1)){var w=J.now(),x=h.url.replace(Si,"$1_="+w);h.url=x+(x===h.url?(Oi.test(h.url)?"&":"?")+"_="+w:"")}(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&E.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(a=a||h.url,J.lastModified[a]&&E.setRequestHeader("If-Modified-Since",J.lastModified[a]),J.etag[a]&&E.setRequestHeader("If-None-Match",J.etag[a])),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Pi+"; q=0.01":""):h.accepts["*"]);
for(u in h.headers)E.setRequestHeader(u,h.headers[u]);if(!h.beforeSend||h.beforeSend.call(p,E,h)!==!1&&2!==C){I="abort";for(u in{success:1,error:1,complete:1})E[u](h[u]);if(s=T(Mi,h,i,E)){E.readyState=1,d&&f.trigger("ajaxSend",[E,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){E.abort("timeout")},h.timeout));try{C=1,s.send(b,n)}catch(_){if(!(2>C))throw _;n(-1,_)}}else n(-1,"No Transport");return E}return E.abort()},active:0,lastModified:{},etag:{}});var Li=[],$i=/\?/,Fi=/(=)\?(?=&|$)|\?\?/,Bi=J.now();J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Li.pop()||J.expando+"_"+Bi++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(i,n,a){var r,o,s,l=i.data,c=i.url,d=i.jsonp!==!1,u=d&&Fi.test(c),h=d&&!u&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fi.test(l);
return"jsonp"===i.dataTypes[0]||u||h?(r=i.jsonpCallback=J.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,o=e[r],u?i.url=c.replace(Fi,"$1"+r):h?i.data=l.replace(Fi,"$1"+r):d&&(i.url+=($i.test(c)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return s||J.error(r+" was not called"),s[0]},i.dataTypes[0]="json",e[r]=function(){s=arguments},a.always(function(){e[r]=o,i[r]&&(i.jsonpCallback=n.jsonpCallback,Li.push(r)),s&&J.isFunction(o)&&o(s[0]),s=o=t}),"script"):void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return J.globalEval(e),e
}}}),J.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),J.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=F.head||F.getElementsByTagName("head")[0]||F.documentElement;return{send:function(a,r){i=F.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,a){(a||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,a||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var zi,Hi=e.ActiveXObject?function(){for(var e in zi)zi[e](0,1)
}:!1,ji=0;J.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&D()||O()}:D,function(e){J.extend(J.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(i){if(!i.crossDomain||J.support.cors){var n;return{send:function(a,r){var o,s,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)l[s]=i.xhrFields[s];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),!i.crossDomain&&!a["X-Requested-With"]&&(a["X-Requested-With"]="XMLHttpRequest");try{for(s in a)l.setRequestHeader(s,a[s])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,a){var s,c,d,u,h;
try{if(n&&(a||4===l.readyState))if(n=t,o&&(l.onreadystatechange=J.noop,Hi&&delete zi[o]),a)4!==l.readyState&&l.abort();else{s=l.status,d=l.getAllResponseHeaders(),u={},h=l.responseXML,h&&h.documentElement&&(u.xml=h);try{u.text=l.responseText}catch(e){}try{c=l.statusText}catch(p){c=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=u.text?200:404}}catch(f){a||r(-1,f)}u&&r(s,c,u,d)},i.async?4===l.readyState?setTimeout(n,0):(o=++ji,Hi&&(zi||(zi={},J(e).unload(Hi)),zi[o]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var Wi,Ui,Vi=/^(?:toggle|show|hide)$/,Gi=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Xi=/queueHooks$/,Yi=[N],Ji={"*":[function(e,t){var i,n,a,r=this.createTween(e,t),o=Gi.exec(t),s=r.cur(),l=+s||0,c=1;
if(o){if(i=+o[2],n=o[3]||(J.cssNumber[e]?"":"px"),"px"!==n&&l){l=J.css(r.elem,e,!0)||i||1;do a=c=c||".5",l/=c,J.style(r.elem,e,l+n),c=r.cur()/s;while(1!==c&&c!==a)}r.unit=n,r.start=l,r.end=o[1]?l+(o[1]+1)*i:i}return r}]};J.Animation=J.extend(K,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;a>n;n++)i=e[n],Ji[i]=Ji[i]||[],Ji[i].unshift(t)},prefilter:function(e,t){t?Yi.unshift(e):Yi.push(e)}}),J.Tween=M,M.prototype={constructor:M,init:function(e,t,i,n,a,r){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(J.cssNumber[i]?"":"px")},cur:function(){var e=M.propHooks[this.prop];
return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,i=M.propHooks[this.prop];return this.pos=t=J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration),this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now
}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.each(["toggle","show","hide"],function(e,t){var i=J.fn[t];J.fn[t]=function(n,a,r){return null==n||"boolean"==typeof n||!e&&J.isFunction(n)&&J.isFunction(a)?i.apply(this,arguments):this.animate(P(t,!0),n,a,r)}}),J.fn.extend({fadeTo:function(e,t,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=J.isEmptyObject(e),r=J.speed(t,i,n),o=function(){var t=K(this,J.extend({},e),r);a&&t.stop(!0)};return a||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(e,i,n){var a=function(e){var t=e.stop;
delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=J.timers,o=J._data(this);if(i)o[i]&&o[i].stop&&a(o[i]);else for(i in o)o[i]&&o[i].stop&&Xi.test(i)&&a(o[i]);for(i=r.length;i--;)r[i].elem===this&&(null==e||r[i].queue===e)&&(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&J.dequeue(this,e)})}}),J.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),J.speed=function(e,t,i){var n=e&&"object"==typeof e?J.extend({},e):{complete:i||!i&&t||J.isFunction(e)&&e,duration:e,easing:i&&t||t&&!J.isFunction(t)&&t};
return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.timers=[],J.fx=M.prototype.init,J.fx.tick=function(){for(var e,t=J.timers,i=0;i<t.length;i++)e=t[i],!e()&&t[i]===e&&t.splice(i--,1);t.length||J.fx.stop()},J.fx.timer=function(e){e()&&J.timers.push(e)&&!Ui&&(Ui=setInterval(J.fx.tick,J.fx.interval))},J.fx.interval=13,J.fx.stop=function(){clearInterval(Ui),Ui=null
},J.fx.speeds={slow:600,fast:200,_default:400},J.fx.step={},J.expr&&J.expr.filters&&(J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length});var Zi=/^(?:body|html)$/i;J.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){J.offset.setOffset(this,e,t)});var i,n,a,r,o,s,l,c,d,u,h=this[0],p=h&&h.ownerDocument;if(p)return(a=p.body)===h?J.offset.bodyOffset(h):(n=p.documentElement,J.contains(n,h)?(i=h.getBoundingClientRect(),r=Q(p),o=n.clientTop||a.clientTop||0,s=n.clientLeft||a.clientLeft||0,l=r.pageYOffset||n.scrollTop,c=r.pageXOffset||n.scrollLeft,d=i.top+l-o,u=i.left+c-s,{top:d,left:u}):{top:0,left:0})
},J.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(J.css(e,"marginTop"))||0,i+=parseFloat(J.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=J.css(e,"position");"static"===n&&(e.style.position="relative");var a,r,o=J(e),s=o.offset(),l=J.css(e,"top"),c=J.css(e,"left"),d=("absolute"===n||"fixed"===n)&&J.inArray("auto",[l,c])>-1,u={},h={};d?(h=o.position(),a=h.top,r=h.left):(a=parseFloat(l)||0,r=parseFloat(c)||0),J.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):o.css(u)
}},J.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=Zi.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(J.css(e,"marginTop"))||0,i.left-=parseFloat(J.css(e,"marginLeft"))||0,n.top+=parseFloat(J.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(J.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||F.body;e&&!Zi.test(e.nodeName)&&"static"===J.css(e,"position");)e=e.offsetParent;return e||F.body})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);J.fn[e]=function(a){return J.access(this,function(e,a,r){var o=Q(e);
return r===t?o?i in o?o[i]:o.document.documentElement[a]:e[a]:void(o?o.scrollTo(n?J(o).scrollLeft():r,n?r:J(o).scrollTop()):e[a]=r)},e,a,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(e,i){J.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,a){J.fn[a]=function(a,r){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(a===!0||r===!0?"margin":"border");return J.access(this,function(i,n,a){var r;return J.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):a===t?J.css(i,n,a,s):J.style(i,n,a,s)},i,o?a:t,o)
}})}),e.jQuery=e.$=J,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return J})}(window),function(){function e(e,t,i){i=(i||0)-1;for(var n=e?e.length:0;++i<n;)if(e[i]===t)return i;return-1}function t(t,i){var n=typeof i;if(t=t.l,"boolean"==n||null==i)return t[i]?0:-1;"number"!=n&&"string"!=n&&(n="object");var a="number"==n?i:y+i;return t=(t=t[n])&&t[a],"object"==n?t&&-1<e(t,i)?0:-1:t?0:-1}function i(e){var t=this.l,i=typeof e;if("boolean"==i||null==e)t[e]=!0;else{"number"!=i&&"string"!=i&&(i="object");var n="number"==i?e:y+e,t=t[i]||(t[i]={});"object"==i?(t[n]||(t[n]=[])).push(e):t[n]=!0}}function n(e){return e.charCodeAt(0)
}function a(e,t){for(var i=e.m,n=t.m,a=-1,r=i.length;++a<r;){var o=i[a],s=n[a];if(o!==s){if(o>s||"undefined"==typeof o)return 1;if(s>o||"undefined"==typeof s)return-1}}return e.n-t.n}function r(e){var t=-1,n=e.length,a=e[0],r=e[n/2|0],o=e[n-1];if(a&&"object"==typeof a&&r&&"object"==typeof r&&o&&"object"==typeof o)return!1;for(a=l(),a["false"]=a["null"]=a["true"]=a.undefined=!1,r=l(),r.k=e,r.l=a,r.push=i;++t<n;)r.push(e[t]);return r}function o(e){return"\\"+J[e]}function s(){return m.pop()||[]}function l(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function c(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")
}function d(e){e.length=0,m.length<I&&m.push(e)}function u(e){var t=e.l;t&&u(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,g.length<I&&g.push(e)}function h(e,t,i){t||(t=0),"undefined"==typeof i&&(i=e?e.length:0);var n=-1;i=i-t||0;for(var a=Array(0>i?0:i);++n<i;)a[n]=e[t+n];return a}function p(i){function m(e){return e&&"object"==typeof e&&!Fi(e)&&Ii.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function I(e){function t(){if(n){var e=h(n);Ei.apply(e,arguments)}if(this instanceof t){var r=et(i.prototype),e=i.apply(r,e||arguments);return wt(e)?e:r}return i.apply(a,e||arguments)}var i=e[0],n=e[2],a=e[4];return $i(t,e),t
}function J(e,t,i,n,a){if(i){var r=i(e);if("undefined"!=typeof r)return r}if(!wt(e))return e;var o=fi.call(e);if(!U[o]||!Li.nodeClass&&c(e))return e;var l=Pi[o];switch(o){case L:case $:return new l(+e);case z:case W:return new l(e);case j:return r=l(e.source,R.exec(e)),r.lastIndex=e.lastIndex,r}if(o=Fi(e),t){var u=!n;n||(n=s()),a||(a=s());for(var p=n.length;p--;)if(n[p]==e)return a[p];r=o?l(e.length):{}}else r=o?h(e):Ji({},e);return o&&(Ii.call(e,"index")&&(r.index=e.index),Ii.call(e,"input")&&(r.input=e.input)),t?(n.push(e),a.push(r),(o?Yi:tn)(e,function(e,o){r[o]=J(e,t,i,n,a)}),u&&(d(n),d(a)),r):r}function et(e){return wt(e)?Ri(e):{}}function tt(e,t,i){if("function"!=typeof e)return Vt;
if("undefined"==typeof t||!("prototype"in e))return e;var n=e.__bindData__;if("undefined"==typeof n&&(Li.funcNames&&(n=!e.name),n=n||!Li.funcDecomp,!n)){var a=yi.call(e);Li.funcNames||(n=!D.test(a)),n||(n=K.test(a),$i(e,n))}if(!1===n||!0!==n&&1&n[1])return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,a){return e.call(t,i,n,a)};case 4:return function(i,n,a,r){return e.call(t,i,n,a,r)}}return Wt(e,t)}function it(e){function t(){var e=l?o:this;if(a){var f=h(a);Ei.apply(f,arguments)}return(r||d)&&(f||(f=h(arguments)),r&&Ei.apply(f,r),d&&f.length<s)?(n|=16,it([i,u?n:-4&n,f,null,o,s])):(f||(f=arguments),c&&(i=e[p]),this instanceof t?(e=et(i.prototype),f=i.apply(e,f),wt(f)?f:e):i.apply(e,f))
}var i=e[0],n=e[1],a=e[2],r=e[3],o=e[4],s=e[5],l=1&n,c=2&n,d=4&n,u=8&n,p=i;return $i(t,e),t}function nt(i,n){var a=-1,o=ft(),s=i?i.length:0,l=s>=C&&o===e,c=[];if(l){var d=r(n);d?(o=t,n=d):l=!1}for(;++a<s;)d=i[a],0>o(n,d)&&c.push(d);return l&&u(n),c}function rt(e,t,i,n){n=(n||0)-1;for(var a=e?e.length:0,r=[];++n<a;){var o=e[n];if(o&&"object"==typeof o&&"number"==typeof o.length&&(Fi(o)||bt(o))){t||(o=rt(o,t,i));var s=-1,l=o.length,c=r.length;for(r.length+=l;++s<l;)r[c++]=o[s]}else i||r.push(o)}return r}function ot(e,t,i,n,a,r){if(i){var o=i(e,t);if("undefined"!=typeof o)return!!o}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&Y[typeof e]||t&&Y[typeof t]))return!1;
if(null==e||null==t)return e===t;var l=fi.call(e),u=fi.call(t);if(l==P&&(l=H),u==P&&(u=H),l!=u)return!1;switch(l){case L:case $:return+e==+t;case z:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case j:case W:return e==si(t)}if(u=l==Q,!u){var h=Ii.call(e,"__wrapped__"),p=Ii.call(t,"__wrapped__");if(h||p)return ot(h?e.__wrapped__:e,p?t.__wrapped__:t,i,n,a,r);if(l!=H||!Li.nodeClass&&(c(e)||c(t)))return!1;if(l=!Li.argsObject&&bt(e)?ri:e.constructor,h=!Li.argsObject&&bt(t)?ri:t.constructor,l!=h&&!(Et(l)&&l instanceof l&&Et(h)&&h instanceof h)&&"constructor"in e&&"constructor"in t)return!1}for(l=!a,a||(a=s()),r||(r=s()),h=a.length;h--;)if(a[h]==e)return r[h]==t;var f=0,o=!0;
if(a.push(e),r.push(t),u){if(h=e.length,f=t.length,(o=f==h)||n)for(;f--;)if(u=h,p=t[f],n)for(;u--&&!(o=ot(e[u],p,i,n,a,r)););else if(!(o=ot(e[f],p,i,n,a,r)))break}else en(t,function(t,s,l){return Ii.call(l,s)?(f++,o=Ii.call(e,s)&&ot(e[s],t,i,n,a,r)):void 0}),o&&!n&&en(e,function(e,t,i){return Ii.call(i,t)?o=-1<--f:void 0});return a.pop(),r.pop(),l&&(d(a),d(r)),o}function st(e,t,i,n,a){(Fi(t)?qt:tn)(t,function(t,r){var o,s,l=t,c=e[r];if(t&&((s=Fi(t))||nn(t))){for(l=n.length;l--;)if(o=n[l]==t){c=a[l];break}if(!o){var d;i&&(l=i(c,t),d="undefined"!=typeof l)&&(c=l),d||(c=s?Fi(c)?c:[]:nn(c)?c:{}),n.push(t),a.push(c),d||st(c,t,i,n,a)}}else i&&(l=i(c,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(c=l);
e[r]=c})}function lt(e,t){return e+bi(Mi()*(t-e+1))}function ct(i,n,a){var o=-1,l=ft(),c=i?i.length:0,h=[],p=!n&&c>=C&&l===e,f=a||p?s():h;for(p&&(f=r(f),l=t);++o<c;){var m=i[o],g=a?a(m,o,i):m;(n?!o||f[f.length-1]!==g:0>l(f,g))&&((a||p)&&f.push(g),h.push(m))}return p?(d(f.k),u(f)):a&&d(f),h}function dt(e){return function(t,i,n){var a={};if(i=m.createCallback(i,n,3),Fi(t)){n=-1;for(var r=t.length;++n<r;){var o=t[n];e(a,o,i(o,n,t),t)}}else Yi(t,function(t,n,r){e(a,t,i(t,n,r),r)});return a}}function ut(e,t,i,n,a,r){var o=1&t,s=4&t,l=16&t,c=32&t;if(!(2&t||Et(e)))throw new li;l&&!i.length&&(t&=-17,l=i=!1),c&&!n.length&&(t&=-33,c=n=!1);var d=e&&e.__bindData__;return d&&!0!==d?(d=h(d),d[2]&&(d[2]=h(d[2])),d[3]&&(d[3]=h(d[3])),!o||1&d[1]||(d[4]=a),!o&&1&d[1]&&(t|=8),!s||4&d[1]||(d[5]=r),l&&Ei.apply(d[2]||(d[2]=[]),i),c&&_i.apply(d[3]||(d[3]=[]),n),d[1]|=t,ut.apply(null,d)):(1==t||17===t?I:it)([e,t,i,n,a,r])
}function ht(){X.h=M,X.b=X.c=X.g=X.i="",X.e="t",X.j=!0;for(var e,t=0;e=arguments[t];t++)for(var i in e)X[i]=e[i];t=X.a,X.d=/^[^,]+/.exec(t)[0],e=ii,t="return function("+t+"){",i=X;var n="var n,t="+i.d+",E="+i.e+";if(!t)return E;"+i.i+";";i.b?(n+="var u=t.length;n=-1;if("+i.b+"){",Li.unindexedChars&&(n+="if(s(t)){t=t.split('')}"),n+="while(++n<u){"+i.g+";}}else{"):Li.nonEnumArgs&&(n+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+i.g+";}}else{"),Li.enumPrototypes&&(n+="var G=typeof t=='function';"),Li.enumErrorProps&&(n+="var F=t===k||t instanceof Error;");var a=[];if(Li.enumPrototypes&&a.push('!(G&&n=="prototype")'),Li.enumErrorProps&&a.push('!(F&&(n=="message"||n=="name"))'),i.j&&i.f)n+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",a.length&&(n+="if("+a.join("&&")+"){"),n+=i.g+";",a.length&&(n+="}"),n+="}";
else if(n+="for(n in t){",i.j&&a.push("m.call(t, n)"),a.length&&(n+="if("+a.join("&&")+"){"),n+=i.g+";",a.length&&(n+="}"),n+="}",Li.nonEnumShadows){for(n+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)n+="n='"+i.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",i.j||(n+="||(!x[n]&&t[n]!==A[n])"),n+="){"+i.g+"}";n+="}"}return(i.b||Li.nonEnumArgs)&&(n+="}"),n+=i.c+";return E",e("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+n+"}")(tt,F,di,Ii,b,bt,Fi,Tt,X.f,ui,Y,Qi,W,hi,fi)}function pt(e){return Ui[e]}function ft(){var t=(t=m.indexOf)===$t?e:t;return t}function mt(e){return"function"==typeof e&&mi.test(e)}function gt(e){var t,i;return!e||fi.call(e)!=H||(t=e.constructor,Et(t)&&!(t instanceof t))||!Li.argsClass&&bt(e)||!Li.nodeClass&&c(e)?!1:Li.ownLast?(en(e,function(e,t,n){return i=Ii.call(n,t),!1
}),!1!==i):(en(e,function(e,t){i=t}),"undefined"==typeof i||Ii.call(e,i))}function vt(e){return Vi[e]}function bt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&fi.call(e)==P||!1}function yt(e,t,i){var n=zi(e),a=n.length;for(t=tt(t,i,3);a--&&(i=n[a],!1!==t(e[i],i,e)););return e}function Ct(e){var t=[];return en(e,function(e,i){Et(e)&&t.push(i)}),t.sort()}function It(e){for(var t=-1,i=zi(e),n=i.length,a={};++t<n;){var r=i[t];a[e[r]]=r}return a}function Et(e){return"function"==typeof e}function wt(e){return!(!e||!Y[typeof e])}function xt(e){return"number"==typeof e||e&&"object"==typeof e&&fi.call(e)==z||!1}function Tt(e){return"string"==typeof e||e&&"object"==typeof e&&fi.call(e)==W||!1
}function _t(e){for(var t=-1,i=zi(e),n=i.length,a=Zt(n);++t<n;)a[t]=e[i[t]];return a}function kt(e,t,i){var n=-1,a=ft(),r=e?e.length:0,o=!1;return i=(0>i?Ki(0,r+i):i)||0,Fi(e)?o=-1<a(e,t,i):"number"==typeof r?o=-1<(Tt(e)?e.indexOf(t,i):a(e,t,i)):Yi(e,function(e){return++n<i?void 0:!(o=e===t)}),o}function Rt(e,t,i){var n=!0;if(t=m.createCallback(t,i,3),Fi(e)){i=-1;for(var a=e.length;++i<a&&(n=!!t(e[i],i,e)););}else Yi(e,function(e,i,a){return n=!!t(e,i,a)});return n}function Dt(e,t,i){var n=[];if(t=m.createCallback(t,i,3),Fi(e)){i=-1;for(var a=e.length;++i<a;){var r=e[i];t(r,i,e)&&n.push(r)}}else Yi(e,function(e,i,a){t(e,i,a)&&n.push(e)});return n}function Ot(e,t,i){if(t=m.createCallback(t,i,3),!Fi(e)){var n;
return Yi(e,function(e,i,a){return t(e,i,a)?(n=e,!1):void 0}),n}i=-1;for(var a=e.length;++i<a;){var r=e[i];if(t(r,i,e))return r}}function qt(e,t,i){if(t&&"undefined"==typeof i&&Fi(e)){i=-1;for(var n=e.length;++i<n&&!1!==t(e[i],i,e););}else Yi(e,t,i);return e}function St(e,t,i){var n=e,a=e?e.length:0;if(t=t&&"undefined"==typeof i?t:tt(t,i,3),Fi(e))for(;a--&&!1!==t(e[a],a,e););else{if("number"!=typeof a)var r=zi(e),a=r.length;else Li.unindexedChars&&Tt(e)&&(n=e.split(""));Yi(e,function(e,i,o){return i=r?r[--a]:--a,t(n[i],i,o)})}return e}function Kt(e,t,i){var n=-1,a=e?e.length:0,r=Zt("number"==typeof a?a:0);if(t=m.createCallback(t,i,3),Fi(e))for(;++n<a;)r[n]=t(e[n],n,e);
else Yi(e,function(e,i,a){r[++n]=t(e,i,a)});return r}function At(e,t,i){var a=-1/0,r=a;if("function"!=typeof t&&i&&i[t]===e&&(t=null),null==t&&Fi(e)){i=-1;for(var o=e.length;++i<o;){var s=e[i];s>r&&(r=s)}}else t=null==t&&Tt(e)?n:m.createCallback(t,i,3),Yi(e,function(e,i,n){i=t(e,i,n),i>a&&(a=i,r=e)});return r}function Nt(e,t,i,n){var a=3>arguments.length;if(t=m.createCallback(t,n,4),Fi(e)){var r=-1,o=e.length;for(a&&(i=e[++r]);++r<o;)i=t(i,e[r],r,e)}else Yi(e,function(e,n,r){i=a?(a=!1,e):t(i,e,n,r)});return i}function Mt(e,t,i,n){var a=3>arguments.length;return t=m.createCallback(t,n,4),St(e,function(e,n,r){i=a?(a=!1,e):t(i,e,n,r)}),i}function Pt(e){var t=-1,i=e?e.length:0,n=Zt("number"==typeof i?i:0);
return qt(e,function(e){var i=lt(0,++t);n[t]=n[i],n[i]=e}),n}function Qt(e,t,i){var n;if(t=m.createCallback(t,i,3),Fi(e)){i=-1;for(var a=e.length;++i<a&&!(n=t(e[i],i,e)););}else Yi(e,function(e,i,a){return!(n=t(e,i,a))});return!!n}function Lt(e,t,i){var n=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var r=-1;for(t=m.createCallback(t,i,3);++r<a&&t(e[r],r,e);)n++}else if(n=t,null==n||i)return e?e[0]:f;return h(e,0,Ai(Ki(0,n),a))}function $t(t,i,n){if("number"==typeof n){var a=t?t.length:0;n=0>n?Ki(0,a+n):n||0}else if(n)return n=Bt(t,i),t[n]===i?n:-1;return e(t,i,n)}function Ft(e,t,i){if("number"!=typeof t&&null!=t){var n=0,a=-1,r=e?e.length:0;for(t=m.createCallback(t,i,3);++a<r&&t(e[a],a,e);)n++
}else n=null==t||i?1:Ki(0,t);return h(e,n)}function Bt(e,t,i,n){var a=0,r=e?e.length:a;for(i=i?m.createCallback(i,n,1):Vt,t=i(t);r>a;)n=a+r>>>1,i(e[n])<t?a=n+1:r=n;return a}function zt(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i="function"!=typeof t&&n&&n[t]===e?null:t,t=!1),null!=i&&(i=m.createCallback(i,n,3)),ct(e,t,i)}function Ht(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,i=e?At(sn(e,"length")):0,n=Zt(0>i?0:i);++t<i;)n[t]=sn(e,t);return n}function jt(e,t){var i=-1,n=e?e.length:0,a={};for(t||!n||Fi(e[0])||(t=[]);++i<n;){var r=e[i];t?a[r]=t[i]:r&&(a[r[0]]=r[1])}return a}function Wt(e,t){return 2<arguments.length?ut(e,17,h(arguments,2),null,t):ut(e,1,null,null,t)
}function Ut(e,t,i){var n,a,r,o,s,l,c,d=0,u=!1,h=!0;if(!Et(e))throw new li;if(t=Ki(0,t)||0,!0===i)var p=!0,h=!1;else wt(i)&&(p=i.leading,u="maxWait"in i&&(Ki(t,i.maxWait)||0),h="trailing"in i?i.trailing:h);var m=function(){var i=t-(ln()-o);i>0?l=xi(m,i):(a&&vi(a),i=c,a=l=c=f,i&&(d=ln(),r=e.apply(s,n),l||a||(n=s=null)))},g=function(){l&&vi(l),a=l=c=f,(h||u!==t)&&(d=ln(),r=e.apply(s,n),l||a||(n=s=null))};return function(){if(n=arguments,o=ln(),s=this,c=h&&(l||!p),!1===u)var i=p&&!l;else{a||p||(d=o);var f=u-(o-d),v=0>=f;v?(a&&(a=vi(a)),d=o,r=e.apply(s,n)):a||(a=xi(g,f))}return v&&l?l=vi(l):l||t===u||(l=xi(m,t)),i&&(v=!0,r=e.apply(s,n)),!v||l||a||(n=s=null),r}}function Vt(e){return e
}function Gt(e,t,i){var n=!0,a=t&&Ct(t);t&&(i||a.length)||(null==i&&(i=t),r=g,t=e,e=m,a=Ct(t)),!1===i?n=!1:wt(i)&&"chain"in i&&(n=i.chain);var r=e,o=Et(r);qt(a,function(i){var a=e[i]=t[i];o&&(r.prototype[i]=function(){var t=this.__chain__,i=this.__wrapped__,o=[i];if(Ei.apply(o,arguments),o=a.apply(e,o),n||t){if(i===o&&wt(o))return this;o=new r(o),o.__chain__=t}return o})})}function Xt(){}function Yt(e){return function(t){return t[e]}}function Jt(){return this.__wrapped__}i=i?at.defaults(Z.Object(),i,at.pick(Z,N)):Z;var Zt=i.Array,ei=i.Boolean,ti=i.Date,ii=i.Function,ni=i.Math,ai=i.Number,ri=i.Object,oi=i.RegExp,si=i.String,li=i.TypeError,ci=[],di=i.Error.prototype,ui=ri.prototype,hi=si.prototype,pi=i._,fi=ui.toString,mi=oi("^"+si(fi).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),gi=ni.ceil,vi=i.clearTimeout,bi=ni.floor,yi=ii.prototype.toString,Ci=mt(Ci=ri.getPrototypeOf)&&Ci,Ii=ui.hasOwnProperty,Ei=ci.push,wi=ui.propertyIsEnumerable,xi=i.setTimeout,Ti=ci.splice,_i=ci.unshift,ki=function(){try{var e={},t=mt(t=ri.defineProperty)&&t,i=t(e,e,e)&&t
}catch(n){}return i}(),Ri=mt(Ri=ri.create)&&Ri,Di=mt(Di=Zt.isArray)&&Di,Oi=i.isFinite,qi=i.isNaN,Si=mt(Si=ri.keys)&&Si,Ki=ni.max,Ai=ni.min,Ni=i.parseInt,Mi=ni.random,Pi={};Pi[Q]=Zt,Pi[L]=ei,Pi[$]=ti,Pi[B]=ii,Pi[H]=ri,Pi[z]=ai,Pi[j]=oi,Pi[W]=si;var Qi={};Qi[Q]=Qi[$]=Qi[z]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Qi[L]=Qi[W]={constructor:!0,toString:!0,valueOf:!0},Qi[F]=Qi[B]=Qi[j]={constructor:!0,toString:!0},Qi[H]={constructor:!0},function(){for(var e=M.length;e--;){var t,i=M[e];for(t in Qi)Ii.call(Qi,t)&&!Ii.call(Qi[t],i)&&(Qi[t][i]=!1)}}(),g.prototype=m.prototype;var Li=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];
e.prototype={valueOf:1,y:1};for(var a in new e)n.push(a);for(a in arguments);Li.argsClass=fi.call(arguments)==P,Li.argsObject=arguments.constructor==ri&&!(arguments instanceof Zt),Li.enumErrorProps=wi.call(di,"message")||wi.call(di,"name"),Li.enumPrototypes=wi.call(e,"prototype"),Li.funcDecomp=!mt(i.WinRTError)&&K.test(p),Li.funcNames="string"==typeof ii.name,Li.nonEnumArgs=0!=a,Li.nonEnumShadows=!/valueOf/.test(n),Li.ownLast="x"!=n[0],Li.spliceObjects=(ci.splice.call(t,0,1),!t[0]),Li.unindexedChars="xx"!="x"[0]+ri("x")[0];try{Li.nodeClass=!(fi.call(document)==H&&!({toString:0}+""))}catch(r){Li.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:O,variable:"",imports:{_:m}},Ri||(et=function(){function e(){}return function(t){if(wt(t)){e.prototype=t;
var n=new e;e.prototype=null}return n||i.Object()}}());var $i=ki?function(e,t){G.value=t,ki(e,"__bindData__",G)}:Xt;Li.argsClass||(bt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ii.call(e,"callee")&&!wi.call(e,"callee")||!1});var Fi=Di||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&fi.call(e)==Q||!1},Bi=ht({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),zi=Si?function(e){return wt(e)?Li.enumPrototypes&&"function"==typeof e||Li.nonEnumArgs&&e.length&&bt(e)?Bi(e):Si(e):[]}:Bi,Hi={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:zi,g:"if(e(t[n],n,g)===false)return E"},ji={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:zi,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Wi={i:"if(!B[typeof t])return E;"+Hi.i,b:!1},Ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vi=It(Ui),Gi=oi("("+zi(Vi).join("|")+")","g"),Xi=oi("["+zi(Ui).join("")+"]","g"),Yi=ht(Hi),Ji=ht(ji,{i:ji.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Zi=ht(ji),en=ht(Hi,Wi,{j:!1}),tn=ht(Hi,Wi);
Et(/x/)&&(Et=function(e){return"function"==typeof e&&fi.call(e)==B});var nn=Ci?function(e){if(!e||fi.call(e)!=H||!Li.argsClass&&bt(e))return!1;var t=e.valueOf,i=mt(t)&&(i=Ci(t))&&Ci(i);return i?e==i||Ci(e)==i:gt(e)}:gt,an=dt(function(e,t,i){Ii.call(e,i)?e[i]++:e[i]=1}),rn=dt(function(e,t,i){(Ii.call(e,i)?e[i]:e[i]=[]).push(t)}),on=dt(function(e,t,i){e[i]=t}),sn=Kt,ln=mt(ln=ti.now)&&ln||function(){return(new ti).getTime()},cn=8==Ni(E+"08")?Ni:function(e,t){return Ni(Tt(e)?e.replace(q,""):e,t||0)};return m.after=function(e,t){if(!Et(t))throw new li;return function(){return 1>--e?t.apply(this,arguments):void 0}},m.assign=Ji,m.at=function(e){var t=arguments,i=-1,n=rt(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:n.length,a=Zt(t);
for(Li.unindexedChars&&Tt(e)&&(e=e.split(""));++i<t;)a[i]=e[n[i]];return a},m.bind=Wt,m.bindAll=function(e){for(var t=1<arguments.length?rt(arguments,!0,!1,1):Ct(e),i=-1,n=t.length;++i<n;){var a=t[i];e[a]=ut(e[a],1,null,null,e)}return e},m.bindKey=function(e,t){return 2<arguments.length?ut(t,19,h(arguments,2),null,e):ut(t,3,null,null,e)},m.chain=function(e){return e=new g(e),e.__chain__=!0,e},m.compact=function(e){for(var t=-1,i=e?e.length:0,n=[];++t<i;){var a=e[t];a&&n.push(a)}return n},m.compose=function(){for(var e=arguments,t=e.length;t--;)if(!Et(e[t]))throw new li;return function(){for(var t=arguments,i=e.length;i--;)t=[e[i].apply(this,t)];return t[0]}},m.constant=function(e){return function(){return e
}},m.countBy=an,m.create=function(e,t){var i=et(e);return t?Ji(i,t):i},m.createCallback=function(e,t,i){var n=typeof e;if(null==e||"function"==n)return tt(e,t,i);if("object"!=n)return Yt(e);var a=zi(e),r=a[0],o=e[r];return 1!=a.length||o!==o||wt(o)?function(t){for(var i=a.length,n=!1;i--&&(n=ot(t[a[i]],e[a[i]],null,!0)););return n}:function(e){return e=e[r],o===e&&(0!==o||1/o==1/e)}},m.curry=function(e,t){return t="number"==typeof t?t:+t||e.length,ut(e,4,null,null,null,t)},m.debounce=Ut,m.defaults=Zi,m.defer=function(e){if(!Et(e))throw new li;var t=h(arguments,1);return xi(function(){e.apply(f,t)},1)},m.delay=function(e,t){if(!Et(e))throw new li;var i=h(arguments,2);
return xi(function(){e.apply(f,i)},t)},m.difference=function(e){return nt(e,rt(arguments,!0,!0,1))},m.filter=Dt,m.flatten=function(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i="function"!=typeof t&&n&&n[t]===e?null:t,t=!1),null!=i&&(e=Kt(e,i,n)),rt(e,t)},m.forEach=qt,m.forEachRight=St,m.forIn=en,m.forInRight=function(e,t,i){var n=[];en(e,function(e,t){n.push(t,e)});var a=n.length;for(t=tt(t,i,3);a--&&!1!==t(n[a--],n[a],e););return e},m.forOwn=tn,m.forOwnRight=yt,m.functions=Ct,m.groupBy=rn,m.indexBy=on,m.initial=function(e,t,i){var n=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var r=a;for(t=m.createCallback(t,i,3);r--&&t(e[r],r,e);)n++}else n=null==t||i?1:t||n;
return h(e,0,Ai(Ki(0,a-n),a))},m.intersection=function(){for(var i=[],n=-1,a=arguments.length,o=s(),l=ft(),c=l===e,h=s();++n<a;){var p=arguments[n];(Fi(p)||bt(p))&&(i.push(p),o.push(c&&p.length>=C&&r(n?i[n]:h)))}var c=i[0],f=-1,m=c?c.length:0,g=[];e:for(;++f<m;){var v=o[0],p=c[f];if(0>(v?t(v,p):l(h,p))){for(n=a,(v||h).push(p);--n;)if(v=o[n],0>(v?t(v,p):l(i[n],p)))continue e;g.push(p)}}for(;a--;)(v=o[a])&&u(v);return d(o),d(h),g},m.invert=It,m.invoke=function(e,t){var i=h(arguments,2),n=-1,a="function"==typeof t,r=e?e.length:0,o=Zt("number"==typeof r?r:0);return qt(e,function(e){o[++n]=(a?t:e[t]).apply(e,i)}),o},m.keys=zi,m.map=Kt,m.mapValues=function(e,t,i){var n={};
return t=m.createCallback(t,i,3),tn(e,function(e,i,a){n[i]=t(e,i,a)}),n},m.max=At,m.memoize=function(e,t){if(!Et(e))throw new li;var i=function(){var n=i.cache,a=t?t.apply(this,arguments):y+arguments[0];return Ii.call(n,a)?n[a]:n[a]=e.apply(this,arguments)};return i.cache={},i},m.merge=function(e){var t=arguments,i=2;if(!wt(e))return e;if("number"!=typeof t[2]&&(i=t.length),i>3&&"function"==typeof t[i-2])var n=tt(t[--i-1],t[i--],2);else i>2&&"function"==typeof t[i-1]&&(n=t[--i]);for(var t=h(arguments,1,i),a=-1,r=s(),o=s();++a<i;)st(e,t[a],n,r,o);return d(r),d(o),e},m.min=function(e,t,i){var a=1/0,r=a;if("function"!=typeof t&&i&&i[t]===e&&(t=null),null==t&&Fi(e)){i=-1;
for(var o=e.length;++i<o;){var s=e[i];r>s&&(r=s)}}else t=null==t&&Tt(e)?n:m.createCallback(t,i,3),Yi(e,function(e,i,n){i=t(e,i,n),a>i&&(a=i,r=e)});return r},m.omit=function(e,t,i){var n={};if("function"!=typeof t){var a=[];en(e,function(e,t){a.push(t)});for(var a=nt(a,rt(arguments,!0,!1,1)),r=-1,o=a.length;++r<o;){var s=a[r];n[s]=e[s]}}else t=m.createCallback(t,i,3),en(e,function(e,i,a){t(e,i,a)||(n[i]=e)});return n},m.once=function(e){var t,i;if(!Et(e))throw new li;return function(){return t?i:(t=!0,i=e.apply(this,arguments),e=null,i)}},m.pairs=function(e){for(var t=-1,i=zi(e),n=i.length,a=Zt(n);++t<n;){var r=i[t];a[t]=[r,e[r]]}return a},m.partial=function(e){return ut(e,16,h(arguments,1))
},m.partialRight=function(e){return ut(e,32,null,h(arguments,1))},m.pick=function(e,t,i){var n={};if("function"!=typeof t)for(var a=-1,r=rt(arguments,!0,!1,1),o=wt(e)?r.length:0;++a<o;){var s=r[a];s in e&&(n[s]=e[s])}else t=m.createCallback(t,i,3),en(e,function(e,i,a){t(e,i,a)&&(n[i]=e)});return n},m.pluck=sn,m.property=Yt,m.pull=function(e){for(var t=arguments,i=0,n=t.length,a=e?e.length:0;++i<n;)for(var r=-1,o=t[i];++r<a;)e[r]===o&&(Ti.call(e,r--,1),a--);return e},m.range=function(e,t,i){e=+e||0,i="number"==typeof i?i:+i||1,null==t&&(t=e,e=0);var n=-1;t=Ki(0,gi((t-e)/(i||1)));for(var a=Zt(t);++n<t;)a[n]=e,e+=i;return a},m.reject=function(e,t,i){return t=m.createCallback(t,i,3),Dt(e,function(e,i,n){return!t(e,i,n)
})},m.remove=function(e,t,i){var n=-1,a=e?e.length:0,r=[];for(t=m.createCallback(t,i,3);++n<a;)i=e[n],t(i,n,e)&&(r.push(i),Ti.call(e,n--,1),a--);return r},m.rest=Ft,m.shuffle=Pt,m.sortBy=function(e,t,i){var n=-1,r=Fi(t),o=e?e.length:0,c=Zt("number"==typeof o?o:0);for(r||(t=m.createCallback(t,i,3)),qt(e,function(e,i,a){var o=c[++n]=l();r?o.m=Kt(t,function(t){return e[t]}):(o.m=s())[0]=t(e,i,a),o.n=n,o.o=e}),o=c.length,c.sort(a);o--;)e=c[o],c[o]=e.o,r||d(e.m),u(e);return c},m.tap=function(e,t){return t(e),e},m.throttle=function(e,t,i){var n=!0,a=!0;if(!Et(e))throw new li;return!1===i?n=!1:wt(i)&&(n="leading"in i?i.leading:n,a="trailing"in i?i.trailing:a),V.leading=n,V.maxWait=t,V.trailing=a,Ut(e,t,V)
},m.times=function(e,t,i){e=-1<(e=+e)?e:0;var n=-1,a=Zt(e);for(t=tt(t,i,1);++n<e;)a[n]=t(n);return a},m.toArray=function(e){return e&&"number"==typeof e.length?Li.unindexedChars&&Tt(e)?e.split(""):h(e):_t(e)},m.transform=function(e,t,i,n){var a=Fi(e);if(null==i)if(a)i=[];else{var r=e&&e.constructor;i=et(r&&r.prototype)}return t&&(t=m.createCallback(t,n,4),(a?Yi:tn)(e,function(e,n,a){return t(i,e,n,a)})),i},m.union=function(){return ct(rt(arguments,!0,!0))},m.uniq=zt,m.values=_t,m.where=Dt,m.without=function(e){return nt(e,h(arguments,1))},m.wrap=function(e,t){return ut(t,16,[e])},m.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var i=arguments[e];if(Fi(i)||bt(i))var n=n?ct(nt(n,i).concat(nt(i,n))):i
}return n||[]},m.zip=Ht,m.zipObject=jt,m.collect=Kt,m.drop=Ft,m.each=qt,m.eachRight=St,m.extend=Ji,m.methods=Ct,m.object=jt,m.select=Dt,m.tail=Ft,m.unique=zt,m.unzip=Ht,Gt(m),m.clone=function(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i=t,t=!1),J(e,t,"function"==typeof i&&tt(i,n,1))},m.cloneDeep=function(e,t,i){return J(e,!0,"function"==typeof t&&tt(t,i,1))},m.contains=kt,m.escape=function(e){return null==e?"":si(e).replace(Xi,pt)},m.every=Rt,m.find=Ot,m.findIndex=function(e,t,i){var n=-1,a=e?e.length:0;for(t=m.createCallback(t,i,3);++n<a;)if(t(e[n],n,e))return n;return-1},m.findKey=function(e,t,i){var n;return t=m.createCallback(t,i,3),tn(e,function(e,i,a){return t(e,i,a)?(n=i,!1):void 0
}),n},m.findLast=function(e,t,i){var n;return t=m.createCallback(t,i,3),St(e,function(e,i,a){return t(e,i,a)?(n=e,!1):void 0}),n},m.findLastIndex=function(e,t,i){var n=e?e.length:0;for(t=m.createCallback(t,i,3);n--;)if(t(e[n],n,e))return n;return-1},m.findLastKey=function(e,t,i){var n;return t=m.createCallback(t,i,3),yt(e,function(e,i,a){return t(e,i,a)?(n=i,!1):void 0}),n},m.has=function(e,t){return e?Ii.call(e,t):!1},m.identity=Vt,m.indexOf=$t,m.isArguments=bt,m.isArray=Fi,m.isBoolean=function(e){return!0===e||!1===e||e&&"object"==typeof e&&fi.call(e)==L||!1},m.isDate=function(e){return e&&"object"==typeof e&&fi.call(e)==$||!1},m.isElement=function(e){return e&&1===e.nodeType||!1
},m.isEmpty=function(e){var t=!0;if(!e)return t;var i=fi.call(e),n=e.length;return i==Q||i==W||(Li.argsClass?i==P:bt(e))||i==H&&"number"==typeof n&&Et(e.splice)?!n:(tn(e,function(){return t=!1}),t)},m.isEqual=function(e,t,i,n){return ot(e,t,"function"==typeof i&&tt(i,n,2))},m.isFinite=function(e){return Oi(e)&&!qi(parseFloat(e))},m.isFunction=Et,m.isNaN=function(e){return xt(e)&&e!=+e},m.isNull=function(e){return null===e},m.isNumber=xt,m.isObject=wt,m.isPlainObject=nn,m.isRegExp=function(e){return e&&Y[typeof e]&&fi.call(e)==j||!1},m.isString=Tt,m.isUndefined=function(e){return"undefined"==typeof e},m.lastIndexOf=function(e,t,i){var n=e?e.length:0;for("number"==typeof i&&(n=(0>i?Ki(0,n+i):Ai(i,n-1))+1);n--;)if(e[n]===t)return n;
return-1},m.mixin=Gt,m.noConflict=function(){return i._=pi,this},m.noop=Xt,m.now=ln,m.parseInt=cn,m.random=function(e,t,i){var n=null==e,a=null==t;return null==i&&("boolean"==typeof e&&a?(i=e,e=1):a||"boolean"!=typeof t||(i=t,a=!0)),n&&a&&(t=1),e=+e||0,a?(t=e,e=0):t=+t||0,i||e%1||t%1?(i=Mi(),Ai(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)):lt(e,t)},m.reduce=Nt,m.reduceRight=Mt,m.result=function(e,t){if(e){var i=e[t];return Et(i)?e[t]():i}},m.runInContext=p,m.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:zi(e).length},m.some=Qt,m.sortedIndex=Bt,m.template=function(e,t,i){var n=m.templateSettings;e=si(e||""),i=Zi({},i,n);var a,r=Zi({},i.imports,n.imports),n=zi(r),r=_t(r),s=0,l=i.interpolate||S,c="__p+='",l=oi((i.escape||S).source+"|"+l.source+"|"+(l===O?_:S).source+"|"+(i.evaluate||S).source+"|$","g");
e.replace(l,function(t,i,n,r,l,d){return n||(n=r),c+=e.slice(s,d).replace(A,o),i&&(c+="'+__e("+i+")+'"),l&&(a=!0,c+="';"+l+";\n__p+='"),n&&(c+="'+((__t=("+n+"))==null?'':__t)+'"),s=d+t.length,t}),c+="';",l=i=i.variable,l||(i="obj",c="with("+i+"){"+c+"}"),c=(a?c.replace(w,""):c).replace(x,"$1").replace(T,"$1;"),c="function("+i+"){"+(l?"":i+"||("+i+"={});")+"var __t,__p='',__e=_.escape"+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var d=ii(n,"return "+c).apply(f,r)}catch(u){throw u.source=c,u}return t?d(t):(d.source=c,d)},m.unescape=function(e){return null==e?"":si(e).replace(Gi,vt)},m.uniqueId=function(e){var t=++v;
return si(null==e?"":e)+t},m.all=Rt,m.any=Qt,m.detect=Ot,m.findWhere=Ot,m.foldl=Nt,m.foldr=Mt,m.include=kt,m.inject=Nt,Gt(function(){var e={};return tn(m,function(t,i){m.prototype[i]||(e[i]=t)}),e}(),!1),m.first=Lt,m.last=function(e,t,i){var n=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var r=a;for(t=m.createCallback(t,i,3);r--&&t(e[r],r,e);)n++}else if(n=t,null==n||i)return e?e[a-1]:f;return h(e,Ki(0,a-n))},m.sample=function(e,t,i){return e&&"number"!=typeof e.length?e=_t(e):Li.unindexedChars&&Tt(e)&&(e=e.split("")),null==t||i?e?e[lt(0,e.length-1)]:f:(e=Pt(e),e.length=Ai(Ki(0,t),e.length),e)},m.take=Lt,m.head=Lt,tn(m,function(e,t){var i="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,n){var a=this.__chain__,r=e(this.__wrapped__,t,n);
return a||null!=t&&(!n||i&&"function"==typeof t)?new g(r,a):r})}),m.VERSION="2.4.1",m.prototype.chain=function(){return this.__chain__=!0,this},m.prototype.toString=function(){return si(this.__wrapped__)},m.prototype.value=Jt,m.prototype.valueOf=Jt,Yi(["join","pop","shift"],function(e){var t=ci[e];m.prototype[e]=function(){var e=this.__chain__,i=t.apply(this.__wrapped__,arguments);return e?new g(i,e):i}}),Yi(["push","reverse","sort","unshift"],function(e){var t=ci[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Yi(["concat","slice","splice"],function(e){var t=ci[e];m.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)
}}),Li.spliceObjects||Yi(["pop","shift","splice"],function(e){var t=ci[e],i="splice"==e;m.prototype[e]=function(){var e=this.__chain__,n=this.__wrapped__,a=t.apply(n,arguments);return 0===n.length&&delete n[0],e||i?new g(a,e):a}}),m}var f,m=[],g=[],v=0,b={},y=+new Date+"",C=75,I=40,E=" 	\fÂ ï»¿\n\r\u2028\u2029áá ââââââââââââ¯âã",w=/\b__p\+='';/g,x=/\b(__p\+=)''\+/g,T=/(__e\(.*?\)|\b__t\))\+'';/g,_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,R=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,O=/<%=([\s\S]+?)%>/g,q=RegExp("^["+E+"]*0+(?=.$)"),S=/($^)/,K=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,N="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),P="[object Arguments]",Q="[object Array]",L="[object Boolean]",$="[object Date]",F="[object Error]",B="[object Function]",z="[object Number]",H="[object Object]",j="[object RegExp]",W="[object String]",U={};
U[B]=!1,U[P]=U[Q]=U[L]=U[$]=U[z]=U[H]=U[j]=U[W]=!0;var V={leading:!1,maxWait:0,trailing:!1},G={configurable:!1,enumerable:!1,value:null,writable:!1},X={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},Y={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=Y[typeof window]&&window||this,et=Y[typeof exports]&&exports&&!exports.nodeType&&exports,tt=Y[typeof module]&&module&&!module.nodeType&&module,it=tt&&tt.exports===et&&et,nt=Y[typeof global]&&global;!nt||nt.global!==nt&&nt.window!==nt||(Z=nt);var at=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=at,define("lodash",[],function(){return at
})):et&&tt?it?(tt.exports=at)._=at:et._=at:Z._=at}.call(this),define("layout/loading-bar",["jquery"],function(e){var t=e(".loading-bar"),i=t.height(),n=e(window),a=e("header").height(),r=n.height();return n.on("scroll",function(){if(t.hasClass("loading")){var o=e(".version-warning"),s=o.length&&o.is(":visible")?a+o.height()-i:a-i;s<=n.scrollTop()?(t.addClass("fixed"),t.height(r-i)):(t.removeClass("fixed"),t.height(r-s))}}),{start:function(){t.hasClass("loading")&&t.stop(),t.addClass("loading"),n.trigger("scroll")},stop:function(){t.removeClass("loading").height(i)}}}),define("context",["module"],function(e){return e.config()}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e
}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,a,r,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)o[i]=str(i,l)||"null";return a=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,a
}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;r>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],a=str(n,l),a&&o.push(quote(n)+(gap?": ":":")+a));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(a=str(n,l),a&&o.push(quote(n)+(gap?": ":":")+a));return a=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()
});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,a=e[t];
if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n=walk(a,i),void 0!==n?a[i]=n:delete a[i]);return reviver.call(e,t,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){var i=e.History=e.History||{};if("undefined"!=typeof i.Adapter)throw new Error("History.js Adapter has already been loaded...");
i.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=i.Adapter._uid++)},bind:function(e,t,n){var a=i.Adapter.uid(e);i.Adapter.handlers[a]=i.Adapter.handlers[a]||{},i.Adapter.handlers[a][t]=i.Adapter.handlers[a][t]||[],i.Adapter.handlers[a][t].push(n),e["on"+t]=function(e,t){return function(n){i.Adapter.trigger(e,t,n)}}(e,t)},trigger:function(e,t,n){n=n||{};var a,r,o=i.Adapter.uid(e);for(i.Adapter.handlers[o]=i.Adapter.handlers[o]||{},i.Adapter.handlers[o][t]=i.Adapter.handlers[o][t]||[],a=0,r=i.Adapter.handlers[o][t].length;r>a;++a)i.Adapter.handlers[o][t][a].apply(this,[n])},extractEventData:function(e,i){var n=i&&i[e]||t;return n},onDomLoad:function(t){var i=e.setTimeout(function(){t()
},2e3);e.onload=function(){clearTimeout(i),t()}}},"undefined"!=typeof i.init&&i.init()}(window),function(e){var t=e.document,i=e.setTimeout||i,n=e.clearTimeout||n,a=e.setInterval||a,r=e.History=e.History||{};if("undefined"!=typeof r.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");r.initHtml4=function(){return"undefined"!=typeof r.initHtml4.initialized?!1:(r.initHtml4.initialized=!0,r.enabled=!0,r.savedHashes=[],r.isLastHash=function(e){var t,i=r.getHashByIndex();return t=e===i},r.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},r.saveHash=function(e){return r.isLastHash(e)?!1:(r.savedHashes.push(e),!0)
},r.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?r.savedHashes[r.savedHashes.length-1]:0>e?r.savedHashes[r.savedHashes.length+e]:r.savedHashes[e]},r.discardedHashes={},r.discardedStates={},r.discardState=function(e,t,i){var n,a=r.getHashByState(e);return n={discardedState:e,backState:i,forwardState:t},r.discardedStates[a]=n,!0},r.discardHash=function(e,t,i){var n={discardedHash:e,backState:i,forwardState:t};return r.discardedHashes[e]=n,!0},r.discardedState=function(e){var t,i=r.getHashByState(e);return t=r.discardedStates[i]||!1},r.discardedHash=function(e){var t=r.discardedHashes[e]||!1;return t},r.recycleState=function(e){var t=r.getHashByState(e);
return r.discardedState(e)&&delete r.discardedStates[t],!0},r.emulated.hashChange&&(r.hashChangeInit=function(){r.checkerFunction=null;var i,n,o,s,l="",c=Boolean(r.getHash());return r.isInternetExplorer()?(i="historyjs-iframe",n=t.createElement("iframe"),n.setAttribute("id",i),n.setAttribute("src","#"),n.style.display="none",t.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),o="",s=!1,r.checkerFunction=function(){if(s)return!1;s=!0;var t=r.getHash(),i=r.getHash(n.contentWindow.document);return t!==l?(l=t,i!==t&&(o=i=t,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=r.escapeHash(t)),r.Adapter.trigger(e,"hashchange")):i!==o&&(o=i,c&&""===i?r.back():r.setHash(i,!1)),s=!1,!0
}):r.checkerFunction=function(){var t=r.getHash()||"";return t!==l&&(l=t,r.Adapter.trigger(e,"hashchange")),!0},r.intervalList.push(a(r.checkerFunction,r.options.hashChangeInterval)),!0},r.Adapter.onDomLoad(r.hashChangeInit)),r.emulated.pushState&&(r.onHashChange=function(t){var i,n=t&&t.newURL||r.getLocationHref(),a=r.getHashByUrl(n),o=null,s=null;return r.isLastHash(a)?(r.busy(!1),!1):(r.doubleCheckComplete(),r.saveHash(a),a&&r.isTraditionalAnchor(a)?(r.Adapter.trigger(e,"anchorchange"),r.busy(!1),!1):(o=r.extractState(r.getFullUrl(a||r.getLocationHref()),!0),r.isLastSavedState(o)?(r.busy(!1),!1):(s=r.getHashByState(o),i=r.discardedState(o),i?(r.getHashByIndex(-2)===r.getHashByState(i.forwardState)?r.back(!1):r.forward(!1),!1):(r.pushState(o.data,o.title,encodeURI(o.url),!1),!0))))
},r.Adapter.bind(e,"hashchange",r.onHashChange),r.pushState=function(t,i,n,a){if(n=encodeURI(n).replace(/%25/g,"%"),r.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.pushState,args:arguments,queue:a}),!1;r.busy(!0);var o=r.createStateObject(t,i,n),s=r.getHashByState(o),l=r.getState(!1),c=r.getHashByState(l),d=r.getHash(),u=r.expectedStateId==o.id;return r.storeState(o),r.expectedStateId=o.id,r.recycleState(o),r.setTitle(o),s===c?(r.busy(!1),!1):(r.saveState(o),u||r.Adapter.trigger(e,"statechange"),!r.isHashEqual(s,d)&&!r.isHashEqual(s,r.getShortUrl(r.getLocationHref()))&&r.setHash(s,!1),r.busy(!1),!0)
},r.replaceState=function(t,i,n,a){if(n=encodeURI(n).replace(/%25/g,"%"),r.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(a!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.replaceState,args:arguments,queue:a}),!1;r.busy(!0);var o=r.createStateObject(t,i,n),s=r.getHashByState(o),l=r.getState(!1),c=r.getHashByState(l),d=r.getStateByIndex(-2);return r.discardState(l,o,d),s===c?(r.storeState(o),r.expectedStateId=o.id,r.recycleState(o),r.setTitle(o),r.saveState(o),r.Adapter.trigger(e,"statechange"),r.busy(!1)):r.pushState(o.data,o.title,o.url,!1),!0}),r.emulated.pushState&&r.getHash()&&!r.emulated.hashChange&&r.Adapter.onDomLoad(function(){r.Adapter.trigger(e,"hashchange")
}),void 0)},"undefined"!=typeof r.init&&r.init()}(window),function(e,t){var i=e.console||t,n=e.document,a=e.navigator,r=!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,c=e.clearInterval,d=e.JSON,u=e.alert,h=e.History=e.History||{},p=e.history;try{r=e.sessionStorage,r.setItem("TEST","1"),r.removeItem("TEST")}catch(f){r=!1}if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;
if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||n.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);
h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e,t,a,r,o,s="undefined"!=typeof i&&"undefined"!=typeof i.log&&"undefined"!=typeof i.log.apply,l=n.getElementById("log");for(s?(r=Array.prototype.slice.call(arguments),e=r.shift(),"undefined"!=typeof i.debug?i.debug.apply(i,[e,r]):i.log.apply(i,[e,r])):e="\n"+arguments[0]+"\n",t=1,a=arguments.length;a>t;++t){if(o=arguments[t],"object"==typeof o&&"undefined"!=typeof d)try{o=d.stringify(o)}catch(c){}e+="\n"+o+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||u(e),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=n.createElement("div"),i=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&i[0];);return e>4?e:!1
}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.emulated=h.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(a.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(a.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in n)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;
return!0},h.cloneObject=function(e){var t,i;return e?(t=d.stringify(e),i=d.parse(t)):i={},i},h.getRootUrl=function(){var e=n.location.protocol+"//"+(n.location.hostname||n.location.host);return n.location.port&&(e+=":"+n.location.port),e+="/"},h.getBaseHref=function(){var e=n.getElementsByTagName("base"),t=null,i="";return 1===e.length&&(t=e[0],i=t.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e,t=h.getState(!1,!1),i=(t||{}).url||h.getLocationHref();return e=i.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"
})},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var i=e,n=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(i="/"===n?h.getRootUrl()+e.replace(/^\/+/,""):"#"===n?h.getPageUrl().replace(/#.*/,"")+e:"?"===n?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,i=h.getBaseUrl(),n=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(i,"")),t=t.replace(n,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")
},h.getLocationHref=function(e){return e=e||n,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);
var i=h.getLastSavedState();return!i&&t&&(i=h.createStateObject()),e&&(i=h.cloneObject(i),i.url=i.cleanUrl||i.url),i},h.getIdByState=function(e){var t,i=h.extractId(e.url);if(!i)if(t=h.getStateString(e),"undefined"!=typeof h.stateToId[t])i=h.stateToId[t];else if("undefined"!=typeof h.store.stateToId[t])i=h.store.stateToId[t];else{for(;i=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[i]||"undefined"!=typeof h.store.idToState[i];);h.stateToId[t]=i,h.idToState[i]=e}return i},h.normalizeState=function(e){var t,i;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,i=!h.isEmptyObject(t.data),(t.title||i)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)
},h.createStateObject=function(e,t,i){var n={data:e,title:t,url:i};return n=h.normalizeState(n)},h.getStateById=function(e){e=String(e);var i=h.idToState[e]||h.store.idToState[e]||t;return i},h.getStateString=function(e){var t,i,n;return t=h.normalizeState(e),i={data:t.data,title:e.title,url:e.url},n=d.stringify(i)},h.getStateId=function(e){var t,i;return t=h.normalizeState(e),i=t.id},h.getHashByState=function(e){var t,i;return t=h.normalizeState(e),i=t.hash},h.extractId=function(e){var t,i,n,a;return a=-1!=e.indexOf("#")?e.split("#")[0]:e,i=/(.*)\&_suid=([0-9]+)$/.exec(a),n=i?i[1]||e:e,t=i?String(i[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);
return t},h.extractState=function(e,t){var i,n,a=null;return t=t||!1,i=h.extractId(e),i&&(a=h.getStateById(i)),a||(n=h.getFullUrl(e),i=h.getIdByUrl(n)||!1,i&&(a=h.getStateById(i)),!a&&t&&!h.isTraditionalAnchor(e)&&(a=h.createStateObject(null,null,n))),a},h.getIdByUrl=function(e){var i=h.urlToId[e]||h.store.urlToId[e]||t;return i},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t,i=!1;return t=h.extractState(e.url),i=t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e
},h.isLastSavedState=function(e){var t,i,n,a=!1;return h.savedStates.length&&(t=e.id,i=h.getLastSavedState(),n=i.id,a=t===n),a},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?h.savedStates[h.savedStates.length-1]:0>e?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){var e=null;return e=h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t,i=h.getLocationHref(e);return t=h.getHashByUrl(i)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");
return t},h.setHash=function(e,t){var i,a;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),i=h.extractState(e,!0),i&&!h.emulated.pushState?h.pushState(i.data,i.title,i.url,!1):h.getHash()!==e&&(h.bugs.setHash?(a=h.getPageUrl(),h.pushState(null,null,a+"#"+e,!1)):n.location.hash=e),h)},h.escapeHash=function(t){var i=h.normalizeHash(t);return i=e.encodeURIComponent(i),h.bugs.hashEscape||(i=i.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),i},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,i=e.title;
i||(t=h.getStateByIndex(0),t&&t.url===e.url&&(i=t.title||h.options.initialTitle));try{n.getElementsByTagName("title")[0].innerHTML=i.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(a){}return n.title=i,h},h.queues=[],h.busy=function(e){if("undefined"!=typeof e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);var t=function(){var e,i,n;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)i=h.queues[e],0!==i.length&&(n=i.shift(),h.fireQueueItem(n),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])
},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0
},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,i=h.extractState(h.getLocationHref());return h.isLastSavedState(i)?void 0:(t=i,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h)},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var i;if(e>0)for(i=1;e>=i;++i)h.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");
for(i=-1;i>=e;--i)h.back(t)}return h},h.emulated.pushState){var f=function(){};h.pushState=h.pushState||f,h.replaceState=h.replaceState||f}else h.onPopState=function(t,i){var n,a,r=!1,o=!1;return h.doubleCheckComplete(),n=h.getHash(),n?(a=h.extractState(n||h.getLocationHref(),!0),a?h.replaceState(a.data,a.title,a.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,i)||!1,o=r?h.getStateById(r):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()),o||(o=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(o)?(h.busy(!1),!1):(h.storeState(o),h.saveState(o),h.setTitle(o),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))
},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,i,n,a){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:a}),!1;h.busy(!0);var r=h.createStateObject(t,i,n);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.pushState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,i,n,a){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:a}),!1;h.busy(!0);var r=h.createStateObject(t,i,n);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.replaceState(r.id,r.title,r.url),h.Adapter.trigger(e,"popstate")),!0};if(r){try{h.store=d.parse(r.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),r&&(h.onUnload=function(){var e,t,i;try{e=d.parse(r.getItem("History.store"))||{}}catch(n){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};
for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),i=d.stringify(e);try{r.setItem("History.store",i)}catch(a){if(a.code!==DOMException.QUOTA_EXCEEDED_ERR)throw a;r.length&&(r.removeItem("History.store"),r.setItem("History.store",i))}},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===a.vendor||"Mozilla"===(a.appCodeName||""))&&(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")
}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},(!h.options||!h.options.delayInit)&&h.init()}(window),define("history",function(){}),define("layout/section",["jquery","lodash","context","history"],function(e,t,i){function n(e){return e&&e.data&&e.data.sectionId?s.get(e.data.sectionId)["_"+e.data.restoreWith]():void 0}function a(e,t){var i=window.location.search+"";i||(i="?"),i=i.replace(r,"")+"&section="+e.id,o.pushState({sectionId:e.id,restoreWith:t||"activate"},e.name||"",i)}var r=/&section=([^&]*)/,o=window.History;o.Adapter.bind(window,"statechange",function(){n(o.getState())});var s={scope:e(".section-container"),sections:{},selected:null,init:function(i,a){var s,l,c=this,d=!0,u=window.location.toString().match(r);
if(u&&u.length&&(l=u[1].replace("#","")),this.options=a||{},this.scope=i||this.scope||e(".section-container"),s=e(".tab-container",this.scope),this.selected=null,e("li",s).each(function(t){var i=e(this),n=i.children("a"),a=n.attr("href").replace("#panel-",""),r=e("#panel-"+a);r.removeClass("hidden"),c.sections[a]={id:a,url:n.data("url"),name:n.text(),panel:e("#panel-"+a),opener:i,type:r.find(".section-trees").children().length?"tree":"content",active:l?l===a:0===t,activated:!1}}),0===t(this.sections).where({active:!0}).size())for(var h in this.sections){this.sections[h].active=!0,d=!1;break}return this._bindOpener(s),this.scope.trigger("init.section"),this.options.history!==!1&&d&&n(o.getState())?this:this.activate()
},_bindOpener:function(t){var i=this;return t.off("click.section","li").on("click.section","li",function(t){t.preventDefault();{var n=e(this).children("a").attr("href").replace("#panel-","");i.sections[n]}i.get(n).activate()}),e("li:not(.hidden)",t).length<2?t.hide():t.show(),this},activate:function(){return this.selected||this.current(),this.options.history===!1?this._activate():(a(this.selected,"activate"),this)},_activate:function(){return this._show(),this.selected.activated===!1&&(this.selected.activated=!0,this.scope.trigger("activate.section",[this.selected])),this},show:function(){return this.selected||this.current(),this.options.history===!1?this._show():(a(this.selected,"show"),this)
},_show:function(){var e=this,i=t(this.sections).where({active:!0}).first();return this.selected&&this.selected.id!==i.id?(t.forEach(this.sections,function(e){e.active=!1}),this.sections[this.selected.id].active=!0):this.current(),t.where(this.sections,{active:!1}).forEach(function(t){t.opener.removeClass("active"),t.panel.hide(),e.scope.trigger("hide.section",[t])}),t.where(this.sections,{active:!0}).forEach(function(t){t.opener.addClass("active"),t.panel.show(),e.scope.trigger("show.section",[t])}),this},refresh:function(){return this.sections={},this.init()},current:function(){return this.selected=t(this.sections).where({active:!0}).first(),this},create:function(i){var n,a,r,o=this.scope.find(".tab-container");
if(!t.isObject(i))throw new TypeError("The create() method requires an object with section data as parameter.");if(!t.isString(i.id)||!t.isString(i.url)||!t.isString(i.name))throw new TypeError("The create() method requires data with id, url and name to create a new section.");return"undefined"==typeof i.visible&&(i.visible=!0),this.get(i.id),r=this.selected&&this.selected.id===i.id?this.selected:void 0,r||(a=e('<div id="panel-'+i.id+'" class="clear"></div>'),i.contentBlock===!0&&a.append('<section class="content-container"><ul class="plain action-bar content-action-bar horizontal-action-bar"></ul><div class="content-block"></div></section>'),n=e('<li class="small '+(i.visible?"":"hidden")+'"><a title="'+i.name+'" data-url="'+i.url+'" href="#panel-'+i.id+'">'+i.name+"</a></li>"),o.append(n),this.scope.append(a),r={id:i.id,url:i.url,name:i.name,panel:a,opener:n,type:"content",active:!1},this.sections[i.id]=r),this.selected=r,i.content?i.contentBlock===!0?this.updateContentBlock(i.content):r.panel.html(i.content):i.contentBlock===!0?this.loadContentBlock():this.load(),this._bindOpener(o),this
},get:function(e){var n;if(!t.isString(e))throw new TypeError("The get() method requires a string parameter, the section id or url.");return n=this.sections[e]||this.sections[e.replace("panel-","")]||t(this.sections).where({url:e}).first()||t(this.sections).where({url:i.root_url+e}).first(),n?this.selected=n:this.current(),this},load:function(e,t){var i=this;return this.selected||this.current(),e=e||this.selected.url,"tree"===this.selected.type?this.selected.panel.addClass("content-panel"):this.selected.panel.removeClass("content-panel"),this.selected.panel.empty().load(e,t,function(e){i.scope.trigger("load.section",[i.selected,e])}),this},loadContentBlock:function(t,i){var n;
return this.selected||this.current(),t=t||this.selected.url,"tree"===this.selected.type?this.selected.panel.addClass("content-panel"):this.selected.panel.removeClass("content-panel"),n=e(".content-block",this.selected.panel),n.length?(n.empty().load(t,i),this):this.load(t,i)},updateContentBlock:function(t){var i=e(".content-block",this.selected.panel);return i.length?i.empty().html(t):this.selected.panel.empty().html(t),this},on:function(e,t){var i=this;return this.scope.on(e+".section",function(){t.apply(i,Array.prototype.slice.call(arguments,1))}),this}};return s});var initializing=!1,fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(e){var t=this.prototype;
initializing=!0;var i=new this;initializing=!1;for(var n in e)i[n]="function"==typeof e[n]&&"function"==typeof t[n]&&fnTest.test(e[n])?function(e,i){return function(){var n=this._super;this._super=t[e];var a=i.apply(this,arguments);return this._super=n,a}}(n,e[n]):e[n];return Class=function(){!initializing&&this.init&&this.init.apply(this,arguments)},Class.prototype=i,Class.constructor=Class,Class.extend=arguments.callee,Class},"undefined"!=typeof exports&&(exports.Class=Class),define("class",function(e){return function(){var t;return t||e.Class}}(this)),define("taoQtiItem/qtiItem/helper/util",["lodash"],function(e){var t={buildSerial:function(e){for(var t=e||"",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;22>n;n++)t+=i.charAt(Math.floor(Math.random()*i.length));
return t},fullpath:function(e,t){return e=e||"",t=t||"",e&&(e=e.replace(/^\//,""),e.match(/^http/i)||(t&&!t.match(/\/$/)&&(t+="/"),e=t+e)),e},findInCollection:function(t,i,n){var a=null;if(e.isString(i)&&(i=[i]),!e.isArray(i))throw new Error("invalid argument : colllectionNames must be an array or a string");return e.each(i,function(i){var r=t;e.each(i.split("."),function(e){r=r[e]});var o=r[n];return o?(a={parent:t,element:o},!1):(e.each(r,function(t){return e.isFunction(t.find)&&(a=t.find(n))?!1:void 0}),a?!1:void 0)}),a}};return t}),define("taoQtiItem/qtiItem/helper/rendererConfig",["lodash","jquery"],function(e,t){var i={};return i.getOptionsFromArguments=function(i){var n={data:{},placeholder:null,subclass:"",renderer:null};
return e.each(i,function(a){a&&(a.isRenderer?n.renderer=a:a instanceof t&&a.length?n.placeholder=a:e.isString(a)?n.subclass=a:e.isPlainObject(a)?n.data=a:console.log("invalid arg",a,i))}),n},i}),define("taoQtiItem/qtiItem/core/Element",["class","lodash","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i,n){var a={},r=e.extend({qtiClass:"",serial:"",relatedItem:null,init:function(e,t){if(this.attributes={},this.metaData={},"object"==typeof e&&(t=e,e=""),e||(e=i.buildSerial(this.qtiClass+"_")),e&&("string"!=typeof e||!e.match(/^[a-z_0-9]*$/i)))throw"invalid QTI serial : ("+typeof e+") "+e;if(a[e])throw"a QTI Element with the same serial already exists "+e;
a[e]=this,this.serial=e,this.setAttributes(t||{}),"function"==typeof this.initContainer&&this.initContainer(arguments[2]||""),"function"==typeof this.initObject&&this.initObject()},is:function(e){return e===this.qtiClass},placeholder:function(){return"{{"+this.serial+"}}"},getSerial:function(){return this.serial},getUsedIdentifiers:function(){var e={},t=this.getComposingElements();for(var i in t){var n=t[i],a=n.attr("identifier");a&&(e[a]=n)}return e},attr:function(e,t){if(e)if(void 0!==t)this.attributes[e]=t;else if("object"==typeof e)for(var i in e)this.attr(i,e[i]);else if("string"==typeof e)return void 0===this.attributes[e]?void 0:this.attributes[e];return this
},data:function(e,t){if(e)if(void 0!==t)this.metaData[e]=t,$(document).trigger("metaChange.qti-widget",{element:this,key:e,value:t});else if("object"==typeof e)for(var i in e)this.data(i,e[i]);else if("string"==typeof e)return void 0===this.metaData[e]?void 0:this.metaData[e];return this},removeData:function(e){return delete this.metaData[e],this},removeAttr:function(e){return this.removeAttributes(e)},setAttributes:function(e){return this.attributes=e,this},getAttributes:function(){return t.clone(this.attributes)},removeAttributes:function(e){"string"==typeof e&&(e=[e]);for(var t in e)delete this.attributes[e[t]];return this},getComposingElements:function(){var e={};
if("function"==typeof this.initContainer){var i=this.getBody();e[i.getSerial()]=i,e=t.extend(e,i.getComposingElements())}if("function"==typeof this.initObject){var n=this.getObject();e[n.getSerial()]=n,e=t.extend(e,n.getComposingElements())}return e},getUsedClasses:function(){var e=[this.qtiClass],i=this.getComposingElements();return t.each(i,function(t){e.push(t.qtiClass)}),t.uniq(e)},find:function(e){var t=null;if("function"==typeof this.initObject){var i=this.getObject();i.serial===e&&(t={parent:this,element:i,location:"object"})}return t||"function"!=typeof this.initContainer||(t=this.getBody().find(e,this)),t},parent:function(){var e=this.getRelatedItem();
if(e){var t=e.find(this.getSerial());if(t)return t.parent}return null},setRelatedItem:function(e,t){if(t="undefined"==typeof t?!0:t,r.isA(e,"assessmentItem")){this.relatedItem=e;var i=this.getComposingElements();for(var n in i)i[n].setRelatedItem(e,!1)}},getRelatedItem:function(){var e=null;return r.isA(this.relatedItem,"assessmentItem")&&(e=this.relatedItem),e},setRenderer:function(e){if(!e||!e.isRenderer)throw"invalid qti rendering engine";this.renderer=e;var t=this.getComposingElements();for(var i in t)t[i].setRenderer(e)},getRenderer:function(){return this.renderer},render:function(){var e=n.getOptionsFromArguments(arguments),i=e.renderer||this.getRenderer(),a={},r={tag:this.qtiClass,serial:this.serial,attributes:this.getAttributes()};
if(!i)throw"render: no renderer found for the element "+this.qtiClass+":"+this.serial;if("function"==typeof this.initContainer&&(r.body=this.getBody().render(i)),"function"==typeof this.initObject){r.object={attributes:this.object.getAttributes()};var o=r.object.attributes.data,s=i.getOption("baseUrl");s&&(/^http(s)?:\/\//.test(o)||(r.object.attributes.data=s+o))}a=t.merge(r,e.data||{}),a=i.getData(this,a,e.subclass);var l=i.renderTpl(this,a,e.subclass);return e.placeholder&&e.placeholder.replaceWith(l),l},postRender:function(e,t,i){if(i=i||this.getRenderer(),"function"==typeof this.initContainer&&this.getBody().postRender({},"",i),i)return i.postRender(this,e,t);
throw"postRender: no renderer found for the element "+this.qtiClass+":"+this.serial},getContainer:function(e,t){var i=this.getRenderer();if(i)return i.getContainer(this,e,t);throw"getContainer: no renderer found for the element "+this.qtiClass+":"+this.serial},toArray:function(){var e={serial:this.serial,type:this.qtiClass,attributes:this.getAttributes()};return"function"==typeof this.initContainer&&(e.body=this.getBody().toArray()),"function"==typeof this.initObject&&(e.object=this.object.toArray()),e},isEmpty:function(){return!1},addClass:function(e){var t=this.attr("class")||"";o(t,e)||this.attr("class",t+(t.length?" ":"")+e)},hasClass:function(e){return o(this.attr("class"),e)
},removeClass:function(e){var t=this.attr("class")||"";if(t){var i=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","");t=t.replace(i,"").replace(/^\s+/,""),t?this.attr("class",t):this.removeAttr("class")}},isset:function(){return r.issetElement(this.serial)},unset:function(){return r.unsetElement(this.serial)}}),o=function(e,t){var i=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","");return e&&i.test(e)};return r.isA=function(e,t){return e instanceof r&&e.is(t)},r.getElementBySerial=function(e){return a[e]},r.issetElement=function(e){return!!a[e]},r.unsetElement=function(e){var i=r.getElementBySerial(e);if(!i)throw"cannot unset an element that does not exist";var n=i.getComposingElements();
return t.each(n,function(e){delete a[e.serial]}),delete a[i.serial],!0},r}),define("taoQtiItem/qtiCreator/helper/panel",["jquery","lodash","taoQtiItem/qtiItem/core/Element"],function(e,t,i){var n=function(){return e("#item-editor-panel")},a=function(e,t){e.show(),m(e.children("section")),t&&t.length&&f(t.children("section"))},r=function(){e(document).off(".panel");var r=n(),s={img:"Image",object:"Media",rubricBlock:"Rubric Block",math:"Math"},l=e("#item-editor-interaction-property-bar"),c=e("#item-editor-choice-property-bar"),d=e("#item-editor-response-property-bar"),u=e("#item-editor-item-property-bar"),h=e("#item-editor-body-element-property-bar"),p=e("#item-editor-text-property-bar"),f=e("#item-editor-modal-feedback-property-bar"),m=e("#item-style-editor-bar"),g=e("#appearance-trigger"),b=g.find(".menu-label"),y=g.find(".icon-item"),C=g.find(".icon-style"),I=function(e){e?(g.addClass("active"),m.show(),u.hide(),r.trigger("styleedit"),a(m),b.text(b.data("item")),y.show(),C.hide()):(g.removeClass("active"),m.hide(),a(u),b.text(b.data("style")),y.hide(),C.show())
};g.on("click",function(){I(g.hasClass("active")?!1:!0)}),t.delay(function(){a(u)},200),e(document).on("afterStateInit.qti-widget.panel",function(e,t,n){switch(n.name){case"active":I(!1),i.isA(t,"assessmentItem")||u.hide();var o=s[t.qtiClass];o?(h.find("h2").html(o+" Properties"),a(h)):"_container"===t.qtiClass&&a(p),"modalFeedback"===t.qtiClass&&(a(f),d.hide());break;case"question":a(l);break;case"answer":a(d);break;case"choice":a(c,l);break;case"sleep":s[t.qtiClass]?h.hide():"_container"===t.qtiClass&&p.hide(),i.isA(t,"choice")||r.find(".widget-box.edit-active").length||a(u)}}).on("afterStateExit.qti-widget.panel",function(e,t,i){switch(i.name){case"active":"modalFeedback"===t.qtiClass&&(a(d),f.hide());
break;case"question":t.is("interaction")&&(c.hide(),l.hide());break;case"choice":c.hide(),a(l);break;case"answer":d.hide()}}).on("elementCreated.qti-widget.panel",function(e,t){"_container"===t.element.qtiClass&&v("inline-interactions")}).on("deleted.qti-widget.panel",function(e,t){"_container"===t.element.qtiClass&&o()})},o=function(){var e=n();e.find(".widget-textBlock").length?v("inline-interactions"):b("inline-interactions")},s="h2",l="section",c="hr, .panel",d="closed",u="accordion",h=function(t){var i=t.find(l),n=(t.children(c).hide(),t.find(s));return 0===n.length?!0:(n.each(function(){var t=e(this),i=t.parents(l),n=i.children(c),a=e("<span>",{"class":"icon-up"}),r=e("<span>",{"class":"icon-down"}),o=n.is(":visible")?"open":"close";
t.append(a).append(r).addClass(d),n.on("panelclose."+u+" panelopen."+u,function(e,t){var i="panelclose"===e.type?"add":"remove";t.heading[i+"Class"](d)}),n.trigger("panel"+o+"."+u,{heading:t})}),void i.each(function(){e(this).find(s).on("click",function(t,i){var n,a,r=e(this),o=r.parents(l).children(c),s=(!(!i||!i.preserveOthers),{close:"hide",open:"fadeIn"}),h=i&&i.forceState?i.forceState:!1;h&&(a="open"===h?"addClass":"removeClass",r[a](d)),n=r.hasClass(d)?"open":"close",o.trigger("panel"+n+"."+u,{heading:r})[s[n]]()})}))},p=function(t,i,n){t.each(function(){e(this).find(s).trigger("click",{preserveOthers:i,forceState:n})})},f=function(e,t){p(e,!!t,"close")
},m=function(e,t){p(e,!!t,"open")},g=function(t,i){if(t=e("."+t),t.length){var n="disable"===i?"addClass":"removeClass";t.data("cover")[n]("blocking")}},v=function(e){g(e,"enable")},b=function(e){g(e,"disable")};return{initFormVisibilityListener:r,showPanel:a,toggleInlineInteractionGroup:o,initSidebarAccordion:h,openSections:m,closeSections:f,enableSubGroup:v,disableSubGroup:b}}),function(e,t){function i(t,i){var a=t.nodeName.toLowerCase();if("area"===a){var r,o=t.parentNode,s=o.name;return t.href&&s&&"map"===o.nodeName.toLowerCase()?(r=e("img[usemap=#"+s+"]")[0],!!r&&n(r)):!1}return(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"==a?t.href||i:i)&&n(t)
}function n(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;
setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);
if(this.length)for(var n,a,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function a(t,i,n,a){return e.each(r,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,n&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),a&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)
}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?s["inner"+n].call(this):this.each(function(){e(this).css(o,a(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(o,a(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))
},tabbable:function(t){var n=e.attr(t,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(t,!a)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,i,n){var a=e.ui[t].prototype;for(var r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([i,n[r]])},call:function(e,t,i){var n=e.plugins[t];if(n&&e.element[0].parentNode)for(var a=0;a<n.length;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)
}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0?!0:(t[n]=1,a=t[n]>0,t[n]=0,a)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,a,r,o){return e.ui.isOverAxis(t,n,r)&&e.ui.isOverAxis(i,a,o)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var n,a=0;null!=(n=t[a]);a++)try{e(n).triggerHandler("remove")}catch(r){}i(t)}}else{var n=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")
}catch(t){}}),n.call(e(this),t,i)})}}e.widget=function(t,i,n){var a,r=t.split(".")[0];t=t.split(".")[1],a=r+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a]=function(i){return!!e.data(i,t)},e[r]=e[r]||{},e[r][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new i;o.options=e.extend(!0,{},o.options),e[r][t].prototype=e.extend(!0,o,{namespace:r,widgetName:t,widgetEventPrefix:e[r][t].prototype.widgetEventPrefix||t,widgetBaseClass:a},n),e.widget.bridge(t,e[r][t])},e.widget.bridge=function(i,n){e.fn[i]=function(a){var r="string"==typeof a,o=Array.prototype.slice.call(arguments,1),s=this;return a=!r&&o.length?e.extend.apply(null,[!0,a].concat(o)):a,r&&"_"===a.charAt(0)?s:(this.each(r?function(){var n=e.data(this,i),r=n&&e.isFunction(n[a])?n[a].apply(n,o):n;
return r!==n&&r!==t?(s=r,!1):void 0}:function(){var t=e.data(this,i);t?t.option(a||{})._init():e.data(this,i,new n(a,this))}),s)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")
},widget:function(){return this.element},option:function(i,n){var a=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(n===t)return this.options[i];a={},a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var a,r,o=this.options[t];
if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent,r)for(a in r)a in i||(i[a]=r[a]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0
}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,a=1==i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return a&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)
},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1
},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n="center",a={},r=e.fn.position,o=e.fn.offset;e.fn.position=function(o){if(!o||!o.of)return r.apply(this,arguments);o=e.extend({},o);var s,l,c,d=e(o.of),u=d[0],h=(o.collision||"flip").split(" "),p=o.offset?o.offset.split(" "):[0,0];return 9===u.nodeType?(s=d.width(),l=d.height(),c={top:0,left:0}):u.setTimeout?(s=d.width(),l=d.height(),c={top:d.scrollTop(),left:d.scrollLeft()}):u.preventDefault?(o.at="left top",s=l=0,c={top:o.of.pageY,left:o.of.pageX}):(s=d.outerWidth(),l=d.outerHeight(),c=d.offset()),e.each(["my","at"],function(){var e=(o[this]||"").split(" ");
1===e.length&&(e=t.test(e[0])?e.concat([n]):i.test(e[0])?[n].concat(e):[n,n]),e[0]=t.test(e[0])?e[0]:n,e[1]=i.test(e[1])?e[1]:n,o[this]=e}),1===h.length&&(h[1]=h[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===o.at[0]?c.left+=s:o.at[0]===n&&(c.left+=s/2),"bottom"===o.at[1]?c.top+=l:o.at[1]===n&&(c.top+=l/2),c.left+=p[0],c.top+=p[1],this.each(function(){var t,i=e(this),r=i.outerWidth(),d=i.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,f=parseInt(e.curCSS(this,"marginTop",!0))||0,m=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),g=d+f+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},c);"right"===o.my[0]?v.left-=r:o.my[0]===n&&(v.left-=r/2),"bottom"===o.my[1]?v.top-=d:o.my[1]===n&&(v.top-=d/2),a.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),t={left:v.left-u,top:v.top-f},e.each(["left","top"],function(i,n){e.ui.position[h[i]]&&e.ui.position[h[i]][n](v,{targetWidth:s,targetHeight:l,elemWidth:r,elemHeight:d,collisionPosition:t,collisionWidth:m,collisionHeight:g,offset:p,my:o.my,at:o.at})
}),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(v,{using:o.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window),a=i.collisionPosition.left+i.collisionWidth-n.width()-n.scrollLeft();t.left=a>0?t.left-a:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var n=e(window),a=i.collisionPosition.top+i.collisionHeight-n.height()-n.scrollTop();t.top=a>0?t.top-a:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==n){var a=e(window),r=i.collisionPosition.left+i.collisionWidth-a.width()-a.scrollLeft(),o="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,s="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];
t.left+=i.collisionPosition.left<0?o+s+l:r>0?o+s+l:0}},top:function(t,i){if(i.at[1]!==n){var a=e(window),r=i.collisionPosition.top+i.collisionHeight-a.height()-a.scrollTop(),o="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,s="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?o+s+l:r>0?o+s+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),a=n.offset(),r=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,s={top:i.top-a.top+r,left:i.left-a.left+o};"using"in i?i.using.call(t,s):n.css(s)
},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(e.isFunction(t)?function(i){e(this).offset(t.call(this,i,e(this).offset()))}:function(){e.offset.setOffset(this,t)}):o.call(this):null}),e.curCSS||(e.curCSS=e.css),function(){var t,i,n,r,o,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in n)t.style[c]=n[c];t.appendChild(l),i=s||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",r=e(l).offset(function(e,t){return t
}).offset(),t.innerHTML="",i.removeChild(t),o=r.top+r.left+(s?2e3:0),a.fractions=o>21&&22>o}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()
},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(i.iframeFix&&e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")
}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)
},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],a=!1;n&&(n=n.parentNode);)n==document&&(a=!0);
if(!a&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this
},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]!=this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))&&n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)
},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();
return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);
else{var i=e(t.containment),n=i[0];if(!n)return;var a=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(a?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i
}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,a=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:a.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:a.scrollLeft())*n)}
},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName),r=t.pageX,o=t.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;t.pageX-this.offset.click.left<s[0]&&(r=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(r=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)
}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=s&&(c-this.offset.click.top<s[1]||c-this.offset.click.top>s[3])?c-this.offset.click.top<s[1]?c+i.grid[1]:c-i.grid[1]:c;var d=i.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;r=s&&(d-this.offset.click.left<s[0]||d-this.offset.click.left>s[2])?d-this.offset.click.left<s[0]?d+i.grid[0]:d-i.grid[0]:d}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),a=n.options,r=e.extend({},i,{item:n.element});
n.sortables=[],e(a.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i){var n=e(this).data("draggable"),a=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))
})},drag:function(t,i){var n=e(this).data("draggable"),a=this;e.each(n.sortables,function(){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)
})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),a=e(this).data("draggable").options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");
t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,a=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)
}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),a=n.options,r=a.snapTolerance,o=i.offset.left,s=o+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,d=n.snapElements.length-1;d>=0;d--){var u=n.snapElements[d].left,h=u+n.snapElements[d].width,p=n.snapElements[d].top,f=p+n.snapElements[d].height;
if(o>u-r&&h+r>o&&l>p-r&&f+r>l||o>u-r&&h+r>o&&c>p-r&&f+r>c||s>u-r&&h+r>s&&l>p-r&&f+r>l||s>u-r&&h+r>s&&c>p-r&&f+r>c){if("inner"!=a.snapMode){var m=Math.abs(p-c)<=r,g=Math.abs(f-l)<=r,v=Math.abs(u-s)<=r,b=Math.abs(h-o)<=r;m&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var y=m||g||v||b;if("outer"!=a.snapMode){var m=Math.abs(p-l)<=r,g=Math.abs(f-c)<=r,v=Math.abs(u-o)<=r,b=Math.abs(h-s)<=r;
m&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),b&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[d].snapping&&(m||g||v||b||y)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=m||g||v||b||y}else n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1
}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),a=e(this).data("draggable").options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;
this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)
}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;
i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var a=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(a=!0,!1):void 0
}),a?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,s=o+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,d=i.offset.top,u=d+i.proportions.height;
switch(n){case"fit":return a>=l&&c>=r&&o>=d&&u>=s;case"intersect":return l<a+t.helperProportions.width/2&&r-t.helperProportions.width/2<c&&d<o+t.helperProportions.height/2&&s-t.helperProportions.height/2<u;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(p,h,d,l,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=d&&u>=o||s>=d&&u>=s||d>o&&s>u)&&(a>=l&&c>=a||r>=l&&c>=r||l>a&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();
e:for(var o=0;o<n.length;o++)if(!(n[o].options.disabled||t&&!n[o].accept.call(n[o].element[0],t.currentItem||t.element))){for(var s=0;s<r.length;s++)if(r[s]==n[o].element[0]){n[o].proportions.height=0;continue e}n[o].visible="none"!=n[o].element.css("display"),n[o].visible&&("mousedown"==a&&n[o]._activate.call(n[o],i),n[o].offset=n[o].element.offset(),n[o].proportions={width:n[o].element[0].offsetWidth,height:n[o].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))
}),n},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),a=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(a){var r;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(r=e.data(o[0],"droppable"),r.greedyChild="isover"==a?1:0)}r&&"isover"==a&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[a]=1,this["isout"==a?"isover":"isout"]=0,this["isover"==a?"_over":"_out"].call(this,i),r&&"isout"==a&&(r.isout=0,r.isover=1,r._over.call(r,i))
}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");
var n=this.handles.split(",");this.handles={};for(var a=0;a<n.length;a++){var r=e.trim(n[a]),o="ui-resizable-"+r,s=e('<div class="ui-resizable-handle '+o+'"></div>');s.css({zIndex:i.zIndex}),"se"==r&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(s)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),a=0;a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();
var r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(r,a),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())
})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i
},_mouseStart:function(i){var n=this.options,a=this.element.position(),r=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy();var o=t(this.helper.css("left")),s=t(this.helper.css("top"));n.containment&&(o+=e(n.containment).scrollLeft()||0,s+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:s},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:o,top:s},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;
var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),r.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i=this.helper,n=(this.options,this.originalMousePosition),a=this.axis,r=t.pageX-n.left||0,o=t.pageY-n.top||0,s=this._change[a];if(!s)return!1;{var l=s.apply(this,[t,r,o]);e.browser.msie&&e.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1
},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var a=this._proportionallyResizeElements,r=a.length&&/textarea/i.test(a[0].nodeName),o=r&&e.ui.hasScroll(a[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,l={width:n.helper.width()-s,height:n.helper.height()-o},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:d,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1
},_updateVirtualBoundaries:function(e){var t,n,a,r,o,s=this.options;o={minWidth:i(s.minWidth)?s.minWidth:0,maxWidth:i(s.maxWidth)?s.maxWidth:1/0,minHeight:i(s.minHeight)?s.minHeight:0,maxHeight:i(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,a=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),a>o.minHeight&&(o.minHeight=a),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(e){this.options;this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)
},_updateRatio:function(e){var t=(this.options,this.position),n=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==a&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"==a&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),a=(this._aspectRatio||t.shiftKey,this.axis),r=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,o=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,s=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;s&&(e.width=n.minWidth),l&&(e.height=n.minHeight),r&&(e.width=n.maxWidth),o&&(e.height=n.maxHeight);
var c=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,u=/sw|nw|w/.test(a),h=/nw|ne|n/.test(a);s&&u&&(e.left=c-n.minWidth),r&&u&&(e.left=c-n.maxWidth),l&&h&&(e.top=d-n.minHeight),o&&h&&(e.top=d-n.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var a=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],r=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];
this.borderDif=e.map(a,function(e,t){var i=parseInt(e,10)||0,n=parseInt(r[t],10)||0;return i+n})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.browser.msie&&e.browser.version<7,a=n?1:0,r=n?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-a+"px",top:this.elementOffset.top-a+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()
}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),a=this.originalPosition;return{top:a.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))
},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.23"}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})
})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("resizable"),a=n.options,r=n.originalSize,o=n.originalPosition,s={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){var t=e(this),a=e(this).data("resizable-alsoresize"),r={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(a[t]||0)+(s[t]||0);i&&i>=0&&(r[t]=i||null)
}),t.css(r)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):e.each(a.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),n=i.options,a=i._proportionallyResizeElements,r=a.length&&/textarea/i.test(a[0].nodeName),o=r&&e.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,s=r?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};
a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),n=i.options,a=i.element,r=n.containment,o=r instanceof e?r.get(0):/parent/.test(r)?a.parent().get(0):r;if(o)if(i.containerElement=e(o),/document/.test(r)||r==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var s=e(o),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){l[e]=t(s.css("padding"+i))
}),i.containerOffset=s.offset(),i.containerPosition=s.position(),i.containerSize={height:s.innerHeight()-l[3],width:s.innerWidth()-l[1]};var c=i.containerOffset,d=i.containerSize.height,u=i.containerSize.width,h=e.ui.hasScroll(o,"left")?o.scrollWidth:u,p=e.ui.hasScroll(o)?o.scrollHeight:d;i.parentData={element:o,left:c.left,top:c.top,width:h,height:p}}},resize:function(t){var i=e(this).data("resizable"),n=i.options,a=(i.containerSize,i.containerOffset),r=(i.size,i.position),o=i._aspectRatio||t.shiftKey,s={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(s=a),r.left<(i._helper?a.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-a.left:i.position.left-s.left),o&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?a.left:0),r.top<(i._helper?a.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-a.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?a.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;
var c=Math.abs((i._helper?i.offset.left-s.left:i.offset.left-s.left)+i.sizeDiff.width),d=Math.abs((i._helper?i.offset.top-s.top:i.offset.top-a.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),h=/relative|absolute/.test(i.containerElement.css("position"));u&&h&&(c-=i.parentData.left),c+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-c,o&&(i.size.height=i.size.width/i.aspectRatio)),d+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-d,o&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,n=(t.position,t.containerOffset),a=t.containerPosition,r=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;
t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:s.left-a.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:s.left-a.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){{var t=e(this).data("resizable");t.options}t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})
},stop:function(){{var t=e(this).data("resizable");t.options}t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){{var i=e(this).data("resizable"),n=i.options,a=i.size,r=i.originalSize,o=i.originalPosition,s=i.axis;n._aspectRatio||t.shiftKey}n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((a.width-r.width)/(n.grid[0]||1))*(n.grid[0]||1),c=Math.round((a.height-r.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(s)?(i.size.width=r.width+l,i.size.height=r.height+c):/^(ne)$/.test(s)?(i.size.width=r.width+l,i.size.height=r.height+c,i.position.top=o.top-c):/^(sw)$/.test(s)?(i.size.width=r.width+l,i.size.height=r.height+c,i.position.left=o.left-l):(i.size.width=r.width+l,i.size.height=r.height+c,i.position.top=o.top-c,i.position.left=o.left-l)
}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})
})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");
n.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var a=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(a?"ui-unselecting":"ui-selected").addClass(a?"ui-selecting":"ui-unselecting"),n.unselecting=!a,n.selecting=a,n.selected=a,a?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,a=this.opos[0],r=this.opos[1],o=t.pageX,s=t.pageY;
if(a>o){var l=o;o=a,a=l}if(r>s){var l=s;s=r,r=l}return this.helper.css({left:a,top:r,width:o-a,height:s-r}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>o||l.right<a||l.top>s||l.bottom<r):"fit"==n.tolerance&&(c=l.left>a&&l.right<o&&l.top>r&&l.bottom<s),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&!t.metaKey&&!t.ctrlKey&&!l.startselected&&(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element})))
}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.23"})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;
this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)
},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);{var a=null,r=this;e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==r?(a=e(this),!1):void 0})}if(e.data(t.target,n.widgetName+"-item")==r&&(a=e(t.target)),!a)return!1;if(this.options.handle&&!i){var o=!1;if(e(this.options.handle,a).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=a,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var a=this.options,r=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",a.cursor)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,r._uiHash(this));
return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)
}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var a=this.items.length-1;a>=0;a--){var r=this.items[a],o=r.item[0],s=this._intersectsWithPointer(r);if(s&&o!=this.currentItem[0]&&this.placeholder[1==s?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],o):!0)){if(this.direction=1==s?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());
break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,a=n.placeholder.offset();n.reverting=!0,e(this.helper).animate({left:a.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:a.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)
})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this
},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,r=e.left,o=r+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,d=this.offset.click.left,u=n+c>s&&l>n+c&&t+d>r&&o>t+d;
return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&s<n+this.helperProportions.height/2&&a-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=i&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();
return a?this.floating?o&&"right"==o||"down"==r?2:1:r&&("down"==r?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&n||"left"==r&&!n:a&&("down"==a&&i||"up"==a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")
},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],a=this._connectWith();if(a&&t)for(var r=a.length-1;r>=0;r--)for(var o=e(a[r]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(var r=n.length-1;r>=0;r--)n[r][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],a=this._connectWith();if(a&&this.ready)for(var r=a.length-1;r>=0;r--)for(var o=e(a[r]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))
}for(var r=n.length-1;r>=0;r--)for(var c=n[r][1],d=n[r][0],s=0,u=d.length;u>s;s++){var h=e(d[s]);h.data(this.widgetName+"-item",c),i.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var a=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=a.outerWidth(),n.height=a.outerHeight());var r=a.offset();n.left=r.left,n.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,n=i.options;if(!n.placeholder||n.placeholder.constructor==String){var a=n.placeholder;n.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(a||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
return a||(t.style.visibility="hidden"),t},update:function(e,t){(!a||n.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,n=null,a=this.containers.length-1;a>=0;a--)if(!e.ui.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(i&&e.ui.contains(this.containers[a].element[0],i.element[0]))continue;
i=this.containers[a],n=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else if(this.currentContainer!=this.containers[n]){for(var r=1e4,o=null,s=this.positionAbs[this.containers[n].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[n].element[0],this.items[l].item[0])){var c=this.containers[n].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(c-s)<r&&(r=Math.abs(c-s),o=this.items[l],this.direction=c-s>0?"down":"up")
}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n
},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),a="hidden"!=e(i).css("overflow");
this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(a?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(a?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);
var n="absolute"==t?1:-1,a=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:a.scrollTop())*n),left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:a.scrollLeft())*n)}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);
"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var r=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var s=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];
o=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+i.grid[1]:s-i.grid[1]:s;var l=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())}
},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this,r=this.counter;window.setTimeout(function(){r==a.counter&&a.refreshPositions(!n)},0)},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var a in this._storedCSS)("auto"==this._storedCSS[a]||"static"==this._storedCSS[a])&&(this._storedCSS[a]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
}else this.currentItem.show();if(this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!i&&n.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||n.push(function(e){this._trigger("remove",e,this._uiHash())});for(var a=this.containers.length-1;a>=0;a--)e.ui.contains(this.containers[a].element[0],this.currentItem[0])&&!i&&(n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}
}.call(this,this.containers[a])),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[a])))}for(var a=this.containers.length-1;a>=0;a--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());
for(var a=0;a<n.length;a++)n[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var a=0;a<n.length;a++)n[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}
}}),e.extend(e.ui.sortable,{version:"1.8.23"})}(jQuery),function(e){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||e(this).addClass("ui-state-hover")
}).bind("mouseleave.accordion",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var n=t.element.find("a").filter(i.navigationFilter).eq(0);if(n.length){var a=n.closest(".ui-accordion-header");t.active=a.length?a:n.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)
}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");
return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,n=this.headers.length,a=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(a+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(a-1+n)%n];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()
}return r?(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),!1):!0}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var n=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;
var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var n=this.options;if(!n.disabled){if(!t.target){if(!n.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),this.active.next().addClass("ui-accordion-content-active");var a=this.active.next(),r={options:n,newHeader:e([]),oldHeader:n.active,newContent:e([]),oldContent:a},o=this.active=e([]);
return void this._toggle(o,a,r)}var s=e(t.currentTarget||i),l=s[0]===this.active[0];if(n.active=n.collapsible&&l?!1:this.headers.index(s),!(this.running||!n.collapsible&&l)){var c=this.active,o=s.next(),a=this.active.next(),r={options:n,newHeader:l&&n.collapsible?e([]):s,oldHeader:this.active,newContent:l&&n.collapsible?e([]):o,oldContent:a},d=this.headers.index(this.active[0])>this.headers.index(s[0]);this.active=l?e([]):s,this._toggle(o,a,r,l,d),c.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(n.icons.headerSelected).addClass(n.icons.header),l||(s.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(n.icons.header).addClass(n.icons.headerSelected),s.next().addClass("ui-accordion-content-active"))
}}},_toggle:function(t,i,n,a,r){var o=this,s=o.options;o.toShow=t,o.toHide=i,o.data=n;var l=function(){return o?o._completed.apply(o,arguments):void 0};if(o._trigger("changestart",null,o.data),o.running=0===i.size()?t.size():i.size(),s.animated){var c={};c=s.collapsible&&a?{toShow:e([]),toHide:i,complete:l,down:r,autoHeight:s.autoHeight||s.fillSpace}:{toShow:t,toHide:i,complete:l,down:r,autoHeight:s.autoHeight||s.fillSpace},s.proxied||(s.proxied=s.animated),s.proxiedDuration||(s.proxiedDuration=s.duration),s.animated=e.isFunction(s.proxied)?s.proxied(c):s.proxied,s.duration=e.isFunction(s.proxiedDuration)?s.proxiedDuration(c):s.proxiedDuration;var d=e.ui.accordion.animations,u=s.duration,h=s.animated;
h&&!d[h]&&!e.easing[h]&&(h="slide"),d[h]||(d[h]=function(e){this.slide(e,{easing:h,duration:u||700})}),d[h](c)}else s.collapsible&&a?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))
}}),e.extend(e.ui.accordion,{version:"1.8.23",animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),!t.toHide.size())return void t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);if(!t.toShow.size())return void t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);var n,a=t.toShow.css("overflow"),r=0,o={},s={},l=["height","paddingTop","paddingBottom"],c=t.toShow;n=c[0].style.width,c.width(c.parent().width()-parseFloat(c.css("paddingLeft"))-parseFloat(c.css("paddingRight"))-(parseFloat(c.css("borderLeftWidth"))||0)-(parseFloat(c.css("borderRightWidth"))||0)),e.each(l,function(i,n){s[n]="hide";
var a=(""+e.css(t.toShow[0],n)).match(/^([\d+-.]+)(.*)$/);o[n]={value:a[1],unit:a[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(s,{step:function(e,i){"height"==i.prop&&(r=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=r*o[i.prop].value+o[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:n,overflow:a}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,n=this.element[0].ownerDocument;
this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(!i.options.disabled&&!i.element.propAttr("readOnly")){t=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:i._move("previousPage",n);break;case a.PAGE_DOWN:i._move("nextPage",n);break;case a.UP:i._keyEvent("previous",n);break;case a.DOWN:i._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:i.menu.active&&(t=!0,n.preventDefault());case a.TAB:if(!i.menu.active)return;i.menu.select(n);break;case a.ESCAPE:i.element.val(i.term),i.close(n);
break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,n))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(t){var n=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target!==i.element[0]&&t.target!==n&&!e.ui.contains(n,t.target)&&i.close()
})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var n=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:n})&&/^key/.test(e.originalEvent.type)&&i.element.val(n.value)},selected:function(e,t){var a=t.item.data("item.autocomplete"),r=i.previous;i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=r,setTimeout(function(){i.previous=r,i.selectedItem=a},1)),!1!==i._trigger("select",e,{item:a})&&i.element.val(a.value),i.term=i.element.val(),i.close(e),i.selectedItem=a},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")
},e(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))
}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")
}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);
this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)
},widget:function(){return this.menu.element},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))
}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,n=this.element.scrollTop(),a=this.element.height();0>i?this.element.scrollTop(n+i):i>=a&&this.element.scrollTop(n+i-a+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})
},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return void this.activate(i,this.element.children(t));var n=this.active[e+"All"](".ui-menu-item").eq(0);n.length?this.activate(i,n):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));
var i=this.active.offset().top,n=this.element.height(),a=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-n+e(this).height();return 10>t&&t>-10});a.length||(a=this.element.children(".ui-menu-item:last")),this.activate(t,a)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,n=this.element.height(),a=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+n-e(this).height();
return 10>t&&t>-10});a.length||(a=this.element.children(".ui-menu-item:first")),this.activate(t,a)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e){var t,i,n,a,r="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");
setTimeout(function(){t.button("refresh")},1)},c=function(t){var i=t.name,n=t.form,a=e([]);return i&&(a=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";
null===s.label&&(s.label=this.buttonElement.html()),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter.button",function(){s.disabled||(e(this).addClass("ui-state-hover"),this===t&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){s.disabled||e(this).removeClass(u)}).bind("click.button",function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){o.buttonElement.addClass(h)}).bind("blur.button",function(){o.buttonElement.removeClass(h)}),d&&(this.element.bind("change.button",function(){a||o.refresh()}),this.buttonElement.bind("mousedown.button",function(e){s.disabled||(a=!1,i=e.pageX,n=e.pageY)
}).bind("mouseup.button",function(e){s.disabled||(i!==e.pageX||n!==e.pageY)&&(a=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return s.disabled||a?!1:(e(this).toggleClass("ui-state-active"),void o.buttonElement.attr("aria-pressed",o.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(s.disabled||a)return!1;e(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var t=o.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return s.disabled?!1:(e(this).addClass("ui-state-active"),t=this,e(document).one("mouseup",function(){t=null
}),void 0)}).bind("mouseup.button",function(){return s.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){return s.disabled?!1:void((t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";
this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+o+" "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)
},_setOption:function(t,i){return e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?void(i?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))
},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,a=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):r.push("ui-button-text-only"),t.addClass(r.join(" "))
}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()
},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;
0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var t=this,n=t.options,a=n.title||"&#160;",r=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(i+n.dialogClass).css({zIndex:n.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){n.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":r}).mousedown(function(e){t.moveToTop(!1,e)
}),s=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(s);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(n.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",r).html(a).prependTo(s)
}e.isFunction(n.beforeclose)&&!e.isFunction(n.beforeClose)&&(n.beforeClose=n.beforeclose),s.find("*").add(s).disableSelection(),n.draggable&&e.fn.draggable&&t._makeDraggable(),n.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(n.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog
},close:function(t){var i,n,a=this;if(!1!==a._trigger("beforeClose",t))return a.overlay&&a.overlay.destroy(),a.uiDialog.unbind("keypress.ui-dialog"),a._isOpen=!1,a.options.hide?a.uiDialog.hide(a.options.hide,function(){a._trigger("close",t)}):(a.uiDialog.hide(),a._trigger("close",t)),e.ui.dialog.overlay.resize(),a.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==a.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),a},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,a=this,r=a.options;return r.modal&&!t||!r.stack&&!r.modal?a._trigger("focus",i):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),a.overlay&&(e.ui.dialog.maxZ+=1,a.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),n={scrollTop:a.element.scrollTop(),scrollLeft:a.element.scrollLeft()},e.ui.dialog.maxZ+=1,a.uiDialog.css("z-index",e.ui.dialog.maxZ),a.element.attr(n),a._trigger("focus",i),a)
},open:function(){if(!this._isOpen){var t=this,i=t.options,n=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),n.show(i.show),t.moveToTop(!0),i.modal&&n.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),n=i.filter(":first"),a=i.filter(":last");return t.target!==a[0]||t.shiftKey?t.target===n[0]&&t.shiftKey?(a.focus(1),!1):void 0:(n.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(n.find(".ui-dialog-buttonpane :tabbable").get().concat(n.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,n=!1,a=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),r=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(a);
i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n&&(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var a=e('<button type="button"></button>').click(function(){n.click.apply(i.element[0],arguments)}).appendTo(r);e.each(n,function(e,t){"click"!==e&&(e in a?a[e](t):a.attr(e,t))}),e.fn.button&&a.button()}),a.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,n=this,a=n.options,r=e(document);n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,o){i="auto"===a.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",r,t(o))
},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(o,s){a.position=[s.position.left-r.scrollLeft(),s.position.top-r.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),n._trigger("dragStop",o,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var a=this,r=a.options,o=a.uiDialog.css("position"),s="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";a.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:a.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:a._minHeight(),handles:s,start:function(t,i){e(this).addClass("ui-dialog-resizing"),a._trigger("resizeStart",t,n(i))
},resize:function(e,t){a._trigger("resize",e,n(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),a._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],a=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(a[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:a.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()
},_setOptions:function(t){var i=this,r={},o=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(o=!0),e in a&&(r[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var a=this,r=a.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":a._createButtons(n);break;case"closeText":a.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":r.removeClass(a.options.dialogClass).addClass(i+n);break;case"disabled":n?r.addClass("ui-dialog-disabled"):r.removeClass("ui-dialog-disabled");break;case"draggable":var o=r.is(":data(draggable)");o&&!n&&r.draggable("destroy"),!o&&n&&a._makeDraggable();
break;case"position":a._position(n);break;case"resizable":var s=r.is(":data(resizable)");s&&!n&&r.resizable("destroy"),s&&"string"==typeof n&&r.resizable("option","handles",n),!s&&n!==!1&&a._makeResizable(n);break;case"title":e(".ui-dialog-title",a.uiDialogTitlebar).html(""+(n||"&#160;"))}e.Widget.prototype._setOption.apply(a,arguments)},_size:function(){var t,i,n=this.options,a=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).height(),i=Math.max(0,n.minHeight-t),"auto"===n.height)if(e.support.minHeight)this.element.css({minHeight:i,height:"auto"});
else{this.uiDialog.show();var r=this.element.css("height","auto").height();a||this.uiDialog.hide(),this.element.height(Math.max(r,i))}else this.element.height(Math.max(n.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"
}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i
},destroy:function(t){var i=e.inArray(t,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var n=0;e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"
},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i=this,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=n.values&&n.values.length||1,s=[];
this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(n.range===!0&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:"")));for(var l=a.length;o>l;l+=1)s.push(r);this.handles=a.add(e(s.join("")).appendTo(i.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()
}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var a,r,o,s,l=e(this).data("index.ui-slider-handle");if(!i.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!i._keySliding&&(i._keySliding=!0,e(this).addClass("ui-state-active"),a=i._start(n,l),a===!1))return
}switch(s=i.options.step,r=o=i.options.values&&i.options.values.length?i.values(l):i.value(),n.keyCode){case e.ui.keyCode.HOME:o=i._valueMin();break;case e.ui.keyCode.END:o=i._valueMax();break;case e.ui.keyCode.PAGE_UP:o=i._trimAlignValue(r+(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:o=i._trimAlignValue(r-(i._valueMax()-i._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===i._valueMax())return;o=i._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===i._valueMin())return;o=i._trimAlignValue(r-s)}i._slide(n,l,o)}}).keyup(function(t){var n=e(this).data("index.ui-slider-handle");i._keySliding&&(i._keySliding=!1,i._stop(t,n),i._change(t,n),e(this).removeClass("ui-state-active"))
}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,n,a,r,o,s,l,c,d,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(t){var i=Math.abs(n-o.values(t));
a>i&&(a=i,r=e(this),s=t)}),u.range===!0&&this.values(1)===u.min&&(s+=1,r=e(this.handles[s])),l=this._start(t,s),l===!1?!1:(this._mouseSliding=!0,o._handleIndex=s,r.addClass("ui-state-active").focus(),c=r.offset(),d=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=d?{left:0,top:0}:{left:t.pageX-c.left-r.width()/2,top:t.pageY-c.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);
return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,a,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),r=this._valueMin()+n*a,this._trimAlignValue(r)
},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,a,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(a=this.values(),a[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),n=this.values(t?0:1),r!==!1&&this.values(t,i,!0))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};
this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,a,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;
if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,a=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(a[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,a=0;switch(e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));
break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;a>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);
return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,a,r,o=this.options.range,s=this.options,l=this,c=this._animateOff?!1:s.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){t=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](d,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:s.animate}))),i=t
}):(n=this.value(),a=this._valueMin(),r=this._valueMax(),t=r!==a?(n-a)/(r-a)*100:0,d["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:s.animate}))}}),e.extend(e.ui.slider,{version:"1.8.23"})
}(jQuery),function(e,t){function i(){return++a}function n(){return++r}var a=0,r=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+i()
},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function n(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var a=this,r=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]
}),this.panels=e([]),this.anchors.each(function(t,i){var n,s=e(i).attr("href"),l=s.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(n=e("base")[0])&&l===n.href)&&(s=i.hash,i.href=s),o.test(s))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(s)));else if(s&&"#"!==s){e.data(i,"href.tabs",s),e.data(i,"load.tabs",s.replace(/#.*$/,""));var c=a._tabId(i);i.href="#"+c;var d=a.element.find("#"+c);d.length||(d=e(r.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[t-1]||a.list),d.data("destroy.tabs",!0)),a.panels=a.panels.add(d)}else r.disabled.push(t)}),i?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),r.selected===t?(location.hash&&this.anchors.each(function(e,t){return t.hash==location.hash?(r.selected=e,!1):void 0
}),"number"!=typeof r.selected&&r.cookie&&(r.selected=parseInt(a._cookie(),10)),"number"!=typeof r.selected&&this.lis.filter(".ui-tabs-selected").length&&(r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),r.selected=r.selected||(this.lis.length?0:-1)):null===r.selected&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabled=e.unique(r.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return a.lis.index(e)}))).sort(),-1!=e.inArray(r.selected,r.disabled)&&r.disabled.splice(e.inArray(r.selected,r.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),r.selected>=0&&this.anchors.length&&(a.element.find(a._sanitizeSelector(a.anchors[r.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(r.selected).addClass("ui-tabs-selected ui-state-active"),a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[r.selected],a.element.find(a._sanitizeSelector(a.anchors[r.selected].hash))[0]))
}),this.load(r.selected)),e(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs"),a.lis=a.anchors=a.panels=null})):r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[r.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),r.cookie&&this._cookie(r.selected,r.cookie);for(var s,l=0;s=this.lis[l];l++)e(s)[-1==e.inArray(l,r.disabled)||e(s).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==r.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},d=function(e,t){t.removeClass("ui-state-"+e)
};this.lis.bind("mouseover.tabs",function(){c("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){d("hover",e(this))}),this.anchors.bind("focus.tabs",function(){c("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){d("focus",e(this).closest("li"))})}var u,h;r.fx&&(e.isArray(r.fx)?(u=r.fx[0],h=r.fx[1]):u=h=r.fx);var p=h?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(h,h.duration||"normal",function(){n(i,h),a._trigger("show",null,a._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),a._trigger("show",null,a._ui(t,i[0]))
},f=u?function(e,t){t.animate(u,u.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),n(t,u),a.element.dequeue("tabs")})}:function(e,t){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),a.element.dequeue("tabs")};this.anchors.bind(r.event+".tabs",function(){var t=this,i=e(t).closest("li"),n=a.panels.filter(":not(.ui-tabs-hide)"),o=a.element.find(a._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!r.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,o[0]))===!1)return this.blur(),!1;
if(r.selected=a.anchors.index(this),a.abort(),r.collapsible){if(i.hasClass("ui-tabs-selected"))return r.selected=-1,r.cookie&&a._cookie(r.selected,r.cookie),a.element.queue("tabs",function(){f(t,n)}).dequeue("tabs"),this.blur(),!1;if(!n.length)return r.cookie&&a._cookie(r.selected,r.cookie),a.element.queue("tabs",function(){p(t,o)}),a.load(a.anchors.index(this)),this.blur(),!1}if(r.cookie&&a._cookie(r.selected,r.cookie),!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";n.length&&a.element.queue("tabs",function(){f(t,n)}),a.element.queue("tabs",function(){p(t,o)}),a.load(a.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1
})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))
}),t.cookie&&this._cookie(null,t.cookie),this},add:function(i,n,a){a===t&&(a=this.anchors.length);var r=this,o=this.options,s=e(o.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),l=i.indexOf("#")?this._tabId(e("a",s)[0]):i.replace("#","");s.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var c=r.element.find("#"+l);return c.length||(c=e(o.panelTemplate).attr("id",l).data("destroy.tabs",!0)),c.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),a>=this.lis.length?(s.appendTo(this.list),c.appendTo(this.list[0].parentNode)):(s.insertBefore(this.lis[a]),c.insertBefore(this.panels[a])),o.disabled=e.map(o.disabled,function(e){return e>=a?++e:e
}),this._tabify(),1==this.anchors.length&&(o.selected=0,s.addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[0],r.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[a],this.panels[a])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.lis.eq(t).remove(),a=this.panels.eq(t).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!=t}),function(e){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],a[0])),this
},enable:function(t){t=this._getIndex(t);var i=this.options;if(-1!=e.inArray(t,i.disabled))return this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),-1==e){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this
},load:function(t){t=this._getIndex(t);var i=this,n=this.options,a=this.anchors.eq(t)[0],r=e.data(a,"load.tabs");if(this.abort(),!r||0!==this.element.queue("tabs").length&&e.data(a,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(t).addClass("ui-state-processing"),n.spinner){var o=e("span",a);o.data("label.tabs",o.html()).html(n.spinner)}return this.xhr=e.ajax(e.extend({},n.ajaxOptions,{url:r,success:function(r,o){i.element.find(i._sanitizeSelector(a.hash)).html(r),i._cleanup(),n.cache&&e.data(a,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{n.ajaxOptions.success(r,o)}catch(s){}},error:function(e,r){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));
try{n.ajaxOptions.error(e,r,t,a)}catch(o){}}})),i.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.23"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var i=this,n=this.options,a=i._rotate||(i._rotate=function(t){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var e=n.selected;
i.select(++e<i.anchors.length?e:0)},e),t&&t.stopPropagation()}),r=i._unrotate||(i._unrotate=t?function(){a()}:function(e){e.clientX&&i.rotate(null)});return e?(this.element.bind("tabsshow",a),this.anchors.bind(n.event+".tabs",r),a()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",a),this.anchors.unbind(n.event+".tabs",r),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var i=$(e.target).closest(t);i.length&&i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var n=$(i.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&n.length&&(n.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n.addClass("ui-state-hover"),n.hasClass("ui-datepicker-prev")&&n.addClass("ui-datepicker-prev-hover"),n.hasClass("ui-datepicker-next")&&n.addClass("ui-datepicker-next-hover"))
})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;
for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}
},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();
var a=this._get(t,"showOn");if(("focus"==a||"both"==a)&&e.focus(this._showDatepicker),"button"==a||"both"==a){var r=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?r:$("<img/>").attr({src:o,alt:r,title:r}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1
})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)
}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,a){var r=this._dialogInst;if(!r){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),r=this._dialogInst=this._newInst(this._dialogInput,!1),r.settings={},$.data(this._dialogInput[0],PROP_NAME,r)}if(extendRemove(r.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(r,t):t,this._dialogInput.val(t),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;
this._pos=[s/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,r),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()
}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();
if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var a=t.children("."+this._inlineClass);a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)
}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var a=t||{};if("string"==typeof t&&(a={},a[t]=i),n){this._curInst==n&&this._hideDatepicker();var r=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(n,"min"),s=this._getMinMaxDate(n,"max");extendRemove(n.settings,a),null!==o&&a.dateFormat!==undefined&&a.minDate===undefined&&(n.settings.minDate=this._formatDate(n,o)),null!==s&&a.dateFormat!==undefined&&a.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,s)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,r),this._updateAlternate(n),this._updateDatepicker(n)
}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var a=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);
a[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,a[0]);var r=$.datepicker._get(t,"onSelect");if(r){var o=$.datepicker._formatDate(t);r.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;
break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;
break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))
}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);
var a=!1;$(e).parents().each(function(){return a|="fixed"==$(this).css("position"),!a}),a&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var r={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),r=$.datepicker._checkOffset(t,r,a),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),s=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");
if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),s,l):t.dpDiv[o||"show"](o?s:null,l),(!o||!s)&&l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var i=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();
var a=this._getNumberOfMonths(e),r=a[1],o=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em"),e.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var s=e.yearshtml;setTimeout(function(){s===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),s=e.yearshtml=null
},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>s&&s>n?Math.abs(t.left+n-s):0),t.top-=Math.min(t.top,t.top+a>l&&l>a?Math.abs(a+o):0),t
},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),a=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,a):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1
}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,t+("M"==i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))
},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),a=this._getInst(n[0]);a["selected"+("M"==i?"Month":"Year")]=a["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,t,i,n){var a=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(a[0])){var r=this._getInst(a[0]);
r.selectedDay=r.currentDay=$("a",n).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear))}},_clearDate:function(e){{var t=$(e);this._getInst(t[0])}this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var a=this._get(n,"onSelect");a?a.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)
},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),a=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(a)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;
n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,u=-1,h=!1,p=function(t){var i=b+1<e.length&&e.charAt(b+1)==t;return i&&b++,i},f=function(e){var i=p(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,a=new RegExp("^\\d{1,"+n+"}"),r=t.substring(v).match(a);if(!r)throw"Missing number at position "+v;return v+=r[0].length,parseInt(r[0],10)},m=function(e,i,n){var a=$.map(p(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)
}),r=-1;if($.each(a,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(r=i[0],v+=n.length,!1):void 0}),-1!=r)return r+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<e.length;b++)if(h)"'"!=e.charAt(b)||p("'")?g():h=!1;else switch(e.charAt(b)){case"d":d=f("d");break;case"D":m("D",a,r);break;case"o":u=f("o");break;case"m":c=f("m");break;case"M":c=m("M",o,s);break;case"y":l=f("y");break;case"@":var y=new Date(f("@"));l=y.getFullYear(),c=y.getMonth()+1,d=y.getDate();break;case"!":var y=new Date((f("!")-this._ticksTo1970)/1e4);l=y.getFullYear(),c=y.getMonth()+1,d=y.getDate();
break;case"'":p("'")?g():h=!0;break;default:g()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),u>-1)for(c=1,d=u;;){var C=this._getDaysInMonth(l,c-1);if(C>=d)break;c++,d-=C}var y=this._daylightSavingAdjust(new Date(l,c-1,d));if(y.getFullYear()!=l||y.getMonth()+1!=c||y.getDate()!=d)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";
var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,s=function(t){var i=h+1<e.length&&e.charAt(h+1)==t;return i&&h++,i},l=function(e,t,i){var n=""+t;if(s(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return s(e)?n[t]:i[t]},d="",u=!1;if(t)for(var h=0;h<e.length;h++)if(u)"'"!=e.charAt(h)||s("'")?d+=e.charAt(h):u=!1;else switch(e.charAt(h)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);
break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),r,o);break;case"y":d+=s("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?d+="'":u=!0;break;default:d+=e.charAt(h)}return d},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=a+1<e.length&&e.charAt(a+1)==t;return i&&a++,i},a=0;a<e.length;a++)if(i)"'"!=e.charAt(a)||n("'")?t+=e.charAt(a):i=!1;else switch(e.charAt(a)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(a)}return t
},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,a=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(a,r,o)||n}catch(s){this.log(s),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))
},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,r))
}l=s.exec(t)}return new Date(a,r,o)},r=null==t||""===t?i:"string"==typeof t?a(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return r=r&&"Invalid Date"==r.toString()?i:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,r=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(a!=e.selectedMonth||r!=e.selectedYear)&&!i&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))
},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1
},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),a=this._get(e,"hideIfNoPrevNext"),r=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-s,f=e.drawYear;
if(0>p&&(p+=12,f--),h){var m=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));for(m=u&&u>m?u:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)p--,0>p&&(p=11,f--)}e.drawMonth=p,e.drawYear=f;var g=this._get(e,"prevText");g=r?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":a?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");
b=r?this.formatDate(b,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(e)):b;var y=this._canAdjustMonth(e,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":a?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",C=this._get(e,"currentText"),I=this._get(e,"gotoCurrent")&&e.currentDay?d:t;C=r?this.formatDate(C,I,this._getFormatConfig(e)):C;var E=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",w=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?E:"")+(this._isInRange(e,I)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+C+"</button>":"")+(i?"":E)+"</div>":"",x=parseInt(this._get(e,"firstDay"),10);
x=isNaN(x)?0:x;for(var T=this._get(e,"showWeek"),_=this._get(e,"dayNames"),k=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),R=this._get(e,"monthNames"),D=this._get(e,"monthNamesShort"),O=this._get(e,"beforeShowDay"),q=this._get(e,"showOtherMonths"),S=this._get(e,"selectOtherMonths"),K=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),A="",N=0;N<o[0];N++){var M="";this.maxRows=4;for(var P=0;P<o[1];P++){var Q=this._daylightSavingAdjust(new Date(f,p,e.selectedDay)),L=" ui-corner-all",F="";if(c){if(F+='<div class="ui-datepicker-group',o[1]>1)switch(P){case 0:F+=" ui-datepicker-group-first",L=" ui-corner-"+(i?"right":"left");break;
case o[1]-1:F+=" ui-datepicker-group-last",L=" ui-corner-"+(i?"left":"right");break;default:F+=" ui-datepicker-group-middle",L=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+L+'">'+(/all|left/.test(L)&&0==N?i?y:v:"")+(/all|right/.test(L)&&0==N?i?v:y:"")+this._generateMonthYearHeader(e,p,f,u,h,N>0||P>0,R,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var B=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var H=(z+x)%7;B+="<th"+((z+x+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+_[H]+'">'+k[H]+"</span></th>"}F+=B+"</tr></thead><tbody>";var j=this._getDaysInMonth(f,p);
f==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,j));var W=(this._getFirstDayOfMonth(f,p)-x+7)%7,U=Math.ceil((W+j)/7),V=c&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var G=this._daylightSavingAdjust(new Date(f,p,1-W)),X=0;V>X;X++){F+="<tr>";for(var Y=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"",z=0;7>z;z++){var J=O?O.apply(e.input?e.input[0]:null,[G]):[!0,""],Z=G.getMonth()!=p,et=Z&&!S||!J[0]||u&&u>G||h&&G>h;Y+='<td class="'+((z+x+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(G.getTime()==Q.getTime()&&p==e.selectedMonth&&e._keyEvent||K.getTime()==G.getTime()&&K.getTime()==Q.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!q?"":" "+J[1]+(G.getTime()==d.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!q||!J[2]?"":' title="'+J[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(Z&&!q?"&#xa0;":et?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==d.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)
}F+=Y+"</tr>"}p++,p>11&&(p=0,f++),F+="</tbody></table>"+(c?"</div>"+(o[0]>0&&P==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=F}A+=M}return A+=w+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,A},_generateMonthYearHeader:function(e,t,i,n,a,r,o,s){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',h="";if(r||!l)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=n&&n.getFullYear()==i,f=a&&a.getFullYear()==i;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
for(var m=0;12>m;m++)(!p||m>=n.getMonth())&&(!f||m<=a.getMonth())&&(h+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+s[m]+"</option>");h+="</select>"}if(d||(u+=h+(!r&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},y=b(g[0]),C=Math.max(y,b(g[1]||""));for(y=n?Math.max(y,n.getFullYear()):y,C=a?Math.min(C,a.getFullYear()):C,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';C>=y;y++)e.yearshtml+='<option value="'+y+'"'+(y==i?' selected="selected"':"")+">"+y+"</option>";
e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),d&&(u+=(!r&&l&&c?"":"&#xa0;")+h),u+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),a=e.drawMonth+("M"==i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"==i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,r)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return a=n&&a>n?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");
t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(0>t?t:a[0]*a[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");
return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))
}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))
},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)
},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)
}}),e.extend(e.ui.progressbar,{version:"1.8.23"})}(jQuery),jQuery.effects||function(e,t){function i(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(t))?c.transparent:c[e.trim(t).toLowerCase()]
}function n(t,n){var a;do{if(a=(e.curCSS||e.css)(t,n),""!=a&&"transparent"!=a||e.nodeName(t,"body"))break;n="backgroundColor"}while(t=t.parentNode);return i(a)}function a(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var a=i.length;a--;)e=i[a],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(n[e]=i[e]);return n}function r(t){var i,n;for(i in t)n=t[i],(null==n||e.isFunction(n)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete t[i];return t}function o(e,t){var i,n={_:0};
for(i in t)e[i]!=t[i]&&(n[i]=t[i]);return n}function s(t,i,n,a){return"object"==typeof t&&(a=i,n=null,i=t,t=i.effect),e.isFunction(i)&&(a=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=n,n=i,i={}),e.isFunction(n)&&(a=n,n=null),i=i||{},n=n||i.duration,n=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,a=a||i.complete,[t,i,n,a]}function l(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects[t]?!1:!0}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,a){e.fx.step[a]=function(e){e.colorInit||(e.start=n(e.elem,a),e.end=i(e.end),e.colorInit=!0),e.elem.style[a]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"
}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},d=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};
e.effects.animateClass=function(t,i,n,s){return e.isFunction(n)&&(s=n,n=null),this.queue(function(){var l,c=e(this),u=c.attr("style")||" ",h=r(a.call(this)),p=c.attr("class")||"";e.each(d,function(e,i){t[i]&&c[i+"Class"](t[i])}),l=r(a.call(this)),c.attr("class",p),c.animate(o(h,l),{queue:!1,duration:i,easing:n,complete:function(){e.each(d,function(e,i){t[i]&&c[i+"Class"](t[i])}),"object"==typeof c.attr("style")?(c.attr("style").cssText="",c.attr("style").cssText=u):c.attr("style",u),s&&s.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,a){return i?e.effects.animateClass.apply(this,[{add:t},i,n,a]):this._addClass(t)
},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,a){return i?e.effects.animateClass.apply(this,[{remove:t},i,n,a]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,a,r,o){return"boolean"==typeof n||n===t?a?e.effects.animateClass.apply(this,[n?{add:i}:{remove:i},a,r,o]):this._toggleClass(i,n):e.effects.animateClass.apply(this,[{toggle:i},n,a,r])},switchClass:function(t,i,n,a,r){return e.effects.animateClass.apply(this,[{add:i,remove:t},n,a,r])}}),e.extend(e.effects,{version:"1.8.23",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))
},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a=document.activeElement;try{a.id}catch(r){a=document.body
}return t.wrap(n),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),n=t.parent(),"static"==t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(i).show()},removeWrapper:function(t){var i,n=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(i=t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),i):t},setTransition:function(t,i,n,a){return a=a||{},e.each(i,function(e,i){var r=t.cssUnit(i);
r[0]>0&&(a[i]=r[0]*n+r[1])}),a}}),e.fn.extend({effect:function(t){var i=s.apply(this,arguments),n={options:i[1],duration:i[2],callback:i[3]},a=n.options.mode,r=e.effects[t];return e.fx.off||!r?a?this[a](n.duration,n.callback):this.each(function(){n.callback&&n.callback.call(this)}):r.call(this,n)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);
var i=s.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}});var h={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){h[t]=function(t){return Math.pow(t,e+2)}}),e.extend(h,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)
}}),e.each(h,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:i(-2*e+2)/-2+1}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(i,n),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),s="vertical"==r?"height":"width",l="vertical"==r?o.height():o.width();"show"==a&&o.css(s,0);var c={};c[s]="show"==a?l:0,o.animate(c,t.duration,t.options.easing,function(){"hide"==a&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()
})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"effect"),r=t.options.direction||"up",o=t.options.distance||20,s=t.options.times||5,l=t.duration||250;/show|hide/.test(a)&&n.push("opacity"),e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var c="up"==r||"down"==r?"top":"left",d="up"==r||"left"==r?"pos":"neg",o=t.options.distance||("top"==c?i.outerHeight(!0)/3:i.outerWidth(!0)/3);if("show"==a&&i.css("opacity",0).css(c,"pos"==d?-o:o),"hide"==a&&(o/=2*s),"hide"!=a&&s--,"show"==a){var u={opacity:1};u[c]=("pos"==d?"+=":"-=")+o,i.animate(u,l/2,t.options.easing),o/=2,s--
}for(var h=0;s>h;h++){var p={},f={};p[c]=("pos"==d?"-=":"+=")+o,f[c]=("pos"==d?"+=":"-=")+o,i.animate(p,l/2,t.options.easing).animate(f,l/2,t.options.easing),o="hide"==a?2*o:o/2}if("hide"==a){var u={opacity:0};u[c]=("pos"==d?"-=":"+=")+o,i.animate(u,l/2,t.options.easing,function(){i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}else{var p={},f={};p[c]=("pos"==d?"-=":"+=")+o,f[c]=("pos"==d?"+=":"-=")+o,i.animate(p,l/2,t.options.easing).animate(f,l/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()
}),i.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(i,n),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),s="IMG"==i[0].tagName?o:i,l={size:"vertical"==r?"height":"width",position:"vertical"==r?"top":"left"},c="vertical"==r?s.height():s.width();"show"==a&&(s.css(l.size,0),s.css(l.position,c/2));var d={};d[l.size]="show"==a?c:0,d[l.position]="show"==a?0:c/2,s.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()
}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","opacity"],a=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"left";e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var o="up"==r||"down"==r?"top":"left",s="up"==r||"left"==r?"pos":"neg",l=t.options.distance||("top"==o?i.outerHeight(!0)/2:i.outerWidth(!0)/2);"show"==a&&i.css("opacity",0).css(o,"pos"==s?-l:l);var c={opacity:"show"==a?1:0};c[o]=("show"==a?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()
}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var a=e(this).show().css("visibility","hidden"),r=a.offset();r.top-=parseInt(a.css("marginTop"),10)||0,r.left-=parseInt(a.css("marginLeft"),10)||0;for(var o=a.outerWidth(!0),s=a.outerHeight(!0),l=0;i>l;l++)for(var c=0;n>c;c++)a.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-c*(o/n),top:-l*(s/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/n,height:s/i,left:r.left+c*(o/n)+("show"==t.options.mode?(c-Math.floor(n/2))*(o/n):0),top:r.top+l*(s/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(s/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:r.left+c*(o/n)+("show"==t.options.mode?0:(c-Math.floor(n/2))*(o/n)),top:r.top+l*(s/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(s/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);
setTimeout(function(){"show"==t.options.mode?a.css({visibility:"visible"}):a.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(a[0]),a.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fade=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.size||15,o=!!t.options.horizFirst,s=t.duration?t.duration/2:e.fx.speeds._default/2;
e.effects.save(i,n),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),c="show"==a!=o,d=c?["width","height"]:["height","width"],u=c?[l.width(),l.height()]:[l.height(),l.width()],h=/([0-9]+)%/.exec(r);h&&(r=parseInt(h[1],10)/100*u["hide"==a?0:1]),"show"==a&&l.css(o?{height:0,width:r}:{height:r,width:0});var p={},f={};p[d[0]]="show"==a?u[0]:r,f[d[1]]="show"==a?u[1]:0,l.animate(p,s,t.options.easing).animate(f,s,t.options.easing,function(){"hide"==a&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var i=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(i,t.options.mode||"show"),r={backgroundColor:i.css("backgroundColor")};
"hide"==a&&(r.opacity=0),e.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,n),"show"==a&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"show"),a=2*(t.options.times||5)-1,r=t.duration?t.duration/2:e.fx.speeds._default/2,o=i.is(":visible"),s=0;o||(i.css("opacity",0).show(),s=1),("hide"==n&&o||"show"==n&&!o)&&a--;
for(var l=0;a>l;l++)i.animate({opacity:s},r,t.options.easing),s=(s+1)%2;i.animate({opacity:s},r,t.options.easing,function(){0==s&&i.hide(),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var i=e(this),n=e.effects.setMode(i,t.options.mode||"hide"),a=parseInt(t.options.percent,10)||150,r=a/100,o={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:n,percent:"hide"==n?a:100,from:"hide"==n?o:{height:o.height*r,width:o.width*r}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var i=e(this),n=e.extend(!0,{},t.options),a=e.effects.setMode(i,t.options.mode||"effect"),r=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==a?0:100),o=t.options.direction||"both",s=t.options.origin;
"effect"!=a&&(n.origin=s||["middle","center"],n.restore=!0);var l={height:i.height(),width:i.width()};i.from=t.options.from||("show"==a?{height:0,width:0}:l);var c={y:"horizontal"!=o?r/100:1,x:"vertical"!=o?r/100:1};i.to={height:l.height*c.y,width:l.width*c.x},t.options.fade&&("show"==a&&(i.from.opacity=0,i.to.opacity=1),"hide"==a&&(i.from.opacity=1,i.to.opacity=0)),n.from=i.from,n.to=i.to,n.mode=a,i.effect("size",n,t.duration,t.callback),i.dequeue()})},e.effects.size=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],r=["width","height","overflow"],o=["fontSize"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.effects.setMode(i,t.options.mode||"effect"),d=t.options.restore||!1,u=t.options.scale||"both",h=t.options.origin,p={height:i.height(),width:i.width()};
if(i.from=t.options.from||p,i.to=t.options.to||p,h){var f=e.effects.getBaseline(h,p);i.from.top=(p.height-i.from.height)*f.y,i.from.left=(p.width-i.from.width)*f.x,i.to.top=(p.height-i.to.height)*f.y,i.to.left=(p.width-i.to.width)*f.x}var m={from:{y:i.from.height/p.height,x:i.from.width/p.width},to:{y:i.to.height/p.height,x:i.to.width/p.width}};("box"==u||"both"==u)&&(m.from.y!=m.to.y&&(n=n.concat(s),i.from=e.effects.setTransition(i,s,m.from.y,i.from),i.to=e.effects.setTransition(i,s,m.to.y,i.to)),m.from.x!=m.to.x&&(n=n.concat(l),i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to))),("content"==u||"both"==u)&&m.from.y!=m.to.y&&(n=n.concat(o),i.from=e.effects.setTransition(i,o,m.from.y,i.from),i.to=e.effects.setTransition(i,o,m.to.y,i.to)),e.effects.save(i,d?n:a),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),("content"==u||"both"==u)&&(s=s.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),r=n.concat(s).concat(l),i.find("*[width]").each(function(){var i=e(this);
d&&e.effects.save(i,r);var n={height:i.height(),width:i.width()};i.from={height:n.height*m.from.y,width:n.width*m.from.x},i.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(i.from=e.effects.setTransition(i,s,m.from.y,i.from),i.to=e.effects.setTransition(i,s,m.to.y,i.to)),m.from.x!=m.to.x&&(i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.options.easing,function(){d&&e.effects.restore(i,r)})})),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==c&&i.hide(),e.effects.restore(i,d?n:a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()
}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],a=(e.effects.setMode(i,t.options.mode||"effect"),t.options.direction||"left"),r=t.options.distance||20,o=t.options.times||3,s=t.duration||t.options.duration||140;e.effects.save(i,n),i.show(),e.effects.createWrapper(i);var l="up"==a||"down"==a?"top":"left",c="up"==a||"left"==a?"pos":"neg",d={},u={},h={};d[l]=("pos"==c?"-=":"+=")+r,u[l]=("pos"==c?"+=":"-=")+2*r,h[l]=("pos"==c?"-=":"+=")+2*r,i.animate(d,s,t.options.easing);for(var p=1;o>p;p++)i.animate(u,s,t.options.easing).animate(h,s,t.options.easing);i.animate(u,s,t.options.easing).animate(d,s/2,t.options.easing,function(){e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)
}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var i=e(this),n=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"show"),r=t.options.direction||"left";e.effects.save(i,n),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var o="up"==r||"down"==r?"top":"left",s="up"==r||"left"==r?"pos":"neg",l=t.options.distance||("top"==o?i.outerHeight(!0):i.outerWidth(!0));"show"==a&&i.css(o,"pos"==s?isNaN(l)?"-"+l:-l:l);var c={};c[o]=("show"==a?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()
}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var i=e(this),n=e(t.options.to),a=n.offset(),r={top:a.top,left:a.left,height:n.innerHeight(),width:n.innerWidth()},o=i.offset(),s=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(r,t.duration,t.options.easing,function(){s.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),define("jqueryui",function(){}),define("helpers",["lodash","jquery","context","layout/loading-bar","jqueryui"],function(e,t,i,n){var a={init:function(){t.postJson=function(e,i,n){t.post(e,i,n,"json")
}},getMainContainer:function(){console.warn("deprecated, use section instead");var e;return i.section||(e=t(".section-container").tabs("options","selected"),t(".content-panel").eq(e).find(".content-block")),t("#panel-"+i.section+" .content-block")},getMainContainerSelector:function(){console.warn("deprecated, use section instead");var e=this.getMainContainer();return e&&e.length>0?e.selector:!1},selectTabByName:function(e){console.warn("deprecated, use section instead"),t("#"+e).click()},getTabIndexByName:function(e){console.warn("deprecated, use section instead");for(var i=t("div#tabs ul.ui-tabs-nav li a"),n=0;n<i.length;){var a=i[n];if(a&&a.id&&a.id===e)return n;
n++}return-1},openTab:function(e,i,n){console.warn("deprecated, use section instead"),n=n||!0;var a=this.getTabIndexByUrl(i),r=t("#tabs");-1==a&&(r.tabs("add",i,e),a=r.tabs("length")-1),n&&r.tabs("select",a)},getTabIndexByUrl:function(e){console.warn("deprecated, use section instead");var i=t("#tabs ul.ui-tabs-nav li a"),n=0,a=-1;return i.each(function(){var i=t.data(this,"href.tabs");return e===i?void(a=n):void n++}),a},closeTab:function(e){console.warn("deprecated, use section instead"),e>-1&&t("#tabs").tabs("remove",e)},updateTabUrl:function(e,t,i){console.warn("deprecated, use section instead");var n=this.getTabIndexByName(t);e.tabs("url",n,i),e.tabs("enable",n)
},loading:function(){console.warn("deprecated, this should be automated"),t(window).on("click",function(e){return e.stopPropagation(),e.preventDefault(),!1}),n.start()},loaded:function(){console.warn("deprecated, this should be automated"),t(window).off("click"),n.stop()},_load:function(e,i,n){i=i||"",n?n.nc=(new Date).getTime():n={nc:(new Date).getTime()},t(e).hide().empty().show(),-1===i.indexOf("?")?t(e).load(i,n):(i+="&"+t.param(n),t(e).load(i))},_href:function(e){return e.indexOf("?")>-1?e+"&nc="+(new Date).getTime():e+"?nc="+(new Date).getTime()},_autoFx:function(){console.warn("deprecated"),setTimeout(function(){t(".auto-highlight").effect("highlight",{color:"#9FC9FF"},2500)
},1e3),setTimeout(function(){t(".auto-hide").fadeOut("slow")},3e3),setTimeout(function(){t(".auto-slide").slideUp(1500)},11e3)},textCutter:function(e,n){console.warn("deprecated, use css instead"),n||(n=100),t(e).each(function(){t(this).text().length>n&&!t(this).hasClass("text-cutted")&&(t(this).prop("title",t(this).text()),t(this).css("cursor","pointer"),t(this).html(t(this).text().substring(0,n)+"[...<img src='"+i.taobase_www+"img/bullet_add.png' />]"),t(this).addClass("text-cutted"))})},createMessage:function(e){console.warn("deprecated, use feedback instead"),t("#info-box").length?t("#info-box").html(e).show():t("body").append("<div id='info-box' class='ui-widget-header ui-corner-all auto-slide' >"+e+"</div>"),this._autoFx()
},createErrorMessage:function(e){this.createMessage(e),t("#info-box").addClass("ui-state-error")},createInfoMessage:function(e){this.createMessage(e),t("#info-box").removeClass("ui-state-error")},isFlashPluginEnabled:function(){return"undefined"!=typeof navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")!==!1},loadCss:function(e){console.warn("deprecated");var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},_url:function(t,n,a,r){n=n||i.module,a=a||i.extension;var o="",s=0,l=0;
return e.isString(r)?o="?"+r:e.isObject(r)&&e.forIn(r,function(t,i){0===s?o="?":o+="&",e.isArray(t)?(l=0,e.each(t,function(e){0!==l&&(o+="&"),o+=i+"[]="+encodeURIComponent(e),l++})):o+=i+"="+encodeURIComponent(t),s++}),i.root_url+a+"/"+n+"/"+t+o}};return a}),define("taoQtiItem/qtiItem/core/qtiClasses",[],function(){return{_container:"taoQtiItem/qtiItem/core/Container",assessmentItem:"taoQtiItem/qtiItem/core/Item",responseProcessing:"taoQtiItem/qtiItem/core/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",stylesheet:"taoQtiItem/qtiItem/core/Stylesheet",math:"taoQtiItem/qtiItem/core/Math",img:"taoQtiItem/qtiItem/core/Img",object:"taoQtiItem/qtiItem/core/Object",outcomeDeclaration:"taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiItem/core/variables/ResponseDeclaration",rubricBlock:"taoQtiItem/qtiItem/core/RubricBlock",associableHotspot:"taoQtiItem/qtiItem/core/choices/AssociableHotspot",gap:"taoQtiItem/qtiItem/core/choices/Gap",gapImg:"taoQtiItem/qtiItem/core/choices/GapImg",gapText:"taoQtiItem/qtiItem/core/choices/GapText",hotspotChoice:"taoQtiItem/qtiItem/core/choices/HotspotChoice",hottext:"taoQtiItem/qtiItem/core/choices/Hottext",inlineChoice:"taoQtiItem/qtiItem/core/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiItem/core/choices/SimpleChoice",associateInteraction:"taoQtiItem/qtiItem/core/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",endAttemptInteraction:"taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction",extendedTextInteraction:"taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiItem/core/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiItem/core/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiItem/core/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiItem/core/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiItem/core/interactions/OrderInteraction",prompt:"taoQtiItem/qtiItem/core/interactions/Prompt",selectPointInteraction:"taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiItem/core/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiItem/core/interactions/UploadInteraction",feedbackBlock:"taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock",feedbackInline:"taoQtiItem/qtiItem/core/feedbacks/FeedbackInline",modalFeedback:"taoQtiItem/qtiItem/core/feedbacks/ModalFeedback",customInteraction:"taoQtiItem/qtiItem/core/interactions/CustomInteraction",infoControl:"taoQtiItem/qtiItem/core/PortableInfoControl"}
}),define("taoQtiItem/qtiItem/core/Loader",["lodash","class","taoQtiItem/qtiItem/core/qtiClasses","taoQtiItem/qtiItem/core/Element"],function(e,t,i,n){function a(e,t){e.typeIdentifier=t.typeIdentifier,e.markup=t.markup,e.entryPoint=t.entryPoint,e.properties=t.properties,e.libraries=t.libraries}var r=t.extend({init:function(e,t){this.qti={},this.classesLocation={},this.item=e||null,this.setClassesLocation(t||i)},setClassesLocation:function(t){return e.extend(this.classesLocation,t),this},getRequiredClasses:function(t){var i=[];for(var n in t)"qtiClass"===n&&"_container"!==t[n]&&"relatedItem"!==n?i.push(t[n]):"object"==typeof t[n]&&(i=e.union(i,this.getRequiredClasses(t[n])));
return i},loadRequiredClasses:function(t,i,n){var a=this.getRequiredClasses(t,n),r=[];for(var o in a){var s=a[o];if(!this.classesLocation[s])throw new Error("missing qti class location declaration : "+s);r.push(this.classesLocation[s])}var l=this;require(r,function(){e.each(arguments,function(e){l.qti[e.prototype.qtiClass]=e}),i.call(l,l.qti)})},getLoadedClasses:function(){return e.keys(this.qti)},loadItemData:function(t,i){var n=this;n.loadRequiredClasses(t,function(a){if("object"==typeof t&&"assessmentItem"===t.qtiClass){n.item=new a.assessmentItem(t.serial,t.attributes||{}),n.loadContainer(n.item.getBody(),t.body);for(var r in t.outcomes){var o=n.buildOutcome(t.outcomes[r]);
o&&n.item.addOutcomeDeclaration(o)}for(var r in t.feedbacks){var s=n.buildElement(t.feedbacks[r]);s&&n.item.addModalFeedback(s)}for(var r in t.stylesheets){var l=n.buildElement(t.stylesheets[r]);l&&n.item.addStylesheet(l)}for(var r in t.responses){var c=n.buildResponse(t.responses[r]);if(c){n.item.addResponseDeclaration(c);var d=t.responses[r].feedbackRules;d&&e.forIn(d,function(e,t){c.feedbackRules[t]=n.buildSimpleFeedbackRule(e)})}}t.responseProcessing&&n.item.setResponseProcessing(n.buildResponseProcessing(t.responseProcessing)),n.item.setNamespaces(t.namespaces)}"function"==typeof i&&i.call(n,n.item)})},loadElement:function(e,t){var i=this;i.loadRequiredClasses(e,function(){var n=i.buildElement(e);
"function"==typeof t&&t.call(i,n)})},loadElements:function(e,t){var i=this;if(!i.item)throw"QtiLoader : cannot load elements in empty item";this.loadRequiredClasses(e,function(){var n=i.item.getComposingElements();for(var a in e){var r=e[a];r&&r.qtiClass&&r.serial&&n[r.serial]&&i.loadElementData(n[r.serial],r)}"function"==typeof t&&t.call(i,i.item)})},buildResponse:function(t){var i=this.buildElement(t);return i.template=t.howMatch||null,i.defaultValue=t.defaultValue||null,i.correctResponse=t.correctResponses||null,i.mapEntries=e.size(t.mapping)?t.mapping:e.size(t.areaMapping)?t.areaMapping:{},i.mappingAttributes=t.mappingAttributes||{},i},buildSimpleFeedbackRule:function(e){var t=this.buildElement(e);
return e.condition&&(t.condition=e.condition),e.comparedValue&&(t.comparedValue=e.comparedValue),t.comparedOutcome=this.item.responses[e.comparedOutcome]||null,t.feedbackOutcome=this.item.outcomes[e.feedbackOutcome]||null,t.feedbackThen=this.item.modalFeedbacks[e.feedbackThen]||null,t.feedbackElse=this.item.modalFeedbacks[e.feedbackElse]||null,t},buildOutcome:function(e){var t=this.buildElement(e);return t.defaultValue=e.defaultValue||null,t},buildResponseProcessing:function(e){var t=this.buildElement(e);return e&&e.processingType&&("custom"===e.processingType?(t.xml=e.data,t.processingType="custom"):t.processingType="templateDriven"),t},loadContainer:function(e,t){if(!n.isA(e,"_container"))throw"bodyObject must be a QTI Container";
if(!t||"string"!=typeof t.body||"array"!=typeof t.elements&&"object"!=typeof t.elements)throw"wrong bodydata format";for(var i in t.elements){var a=t.elements[i],r=this.buildElement(a);r&&e.setElement(r,t.body)}e.body(t.body)},buildElement:function(e){var t=null;if(!(e&&e.qtiClass&&e.serial))throw"wrong elementData format";var i=e.qtiClass;if(!this.qti[i])throw"the qti element class does not exist: "+i;return t=new this.qti[i](e.serial),this.loadElementData(t,e),t},loadElementData:function(t,i){return t.setAttributes(e.clone(i.attributes)||{}),t.body&&i.body&&t.bdy&&this.loadContainer(t.getBody(),i.body),t.object&&i.object&&t.object&&this.loadObjectData(t.object,i.object),n.isA(t,"interaction")?this.loadInteractionData(t,i):n.isA(t,"choice")?this.loadChoiceData(t,i):n.isA(t,"math")?this.loadMathData(t,i):n.isA(t,"infoControl")&&this.loadPicData(t,i),t
},loadInteractionData:function(e,t){n.isA(e,"blockInteraction")&&t.prompt&&this.loadContainer(e.prompt.getBody(),t.prompt),this.buildInteractionChoices(e,t),n.isA(e,"customInteraction")&&this.loadPciData(e,t)},buildInteractionChoices:function(e,t){if(t.choices){if(n.isA(e,"matchInteraction"))for(var i=0;2>i;i++){if(!t.choices[i])throw"missing match set #"+i;var a=t.choices[i];for(var r in a){var o=this.buildElement(a[r]);o&&e.addChoice(o,i)}}else for(var r in t.choices){var o=this.buildElement(t.choices[r]);o&&e.addChoice(o)}if(n.isA(e,"graphicGapMatchInteraction")&&t.gapImgs)for(var r in t.gapImgs){var s=this.buildElement(t.gapImgs[r]);s&&e.addGapImg(s)}}},loadChoiceData:function(e,t){n.isA(e,"textVariableChoice")?e.val(t.text):n.isA(e,"gapImg")||n.isA(e,"containerChoice")
},loadObjectData:function(e,t){e.setAttributes(t.attributes),t._alt&&(e._alt="object"===t._alt.qtiClass?r.buildElement(t._alt):t._alt)},loadMathData:function(e,t){e.ns=t.ns||{},e.setMathML(t.mathML||""),e.annotations=t.annotations||{}},loadPciData:function(e,t){a(e,t)},loadPicData:function(e,t){a(e,t)}});return r}),define("taoQtiItem/qtiCreator/model/helper/event",["jquery","taoQtiItem/qtiItem/core/Element"],function(e){return{choiceCreated:function(t,i){e(document).trigger("choiceCreated.qti-widget",{choice:t,interaction:i})},deleted:function(t,i){t.isset()&&t.unset(),e(document).off("."+t.getSerial()),e(document).trigger("deleted.qti-widget",{element:t,parent:i})
},getList:function(){return["containerBodyChange","containerElementAdded","elementCreated.qti-widget","attributeChange.qti-widget","choiceCreated.qti-widget","correctResponseChange.qti-widget","mapEntryChange.qti-widget","mapEntryRemove.qti-widget","deleted.qti-widget","choiceTextChange.qti-widget","responseTemplateChange.qti-widget","mappingAttributeChange.qti-widget","feedbackRuleConditionChange.qti-widget","feedbackRuleCreated.qti-widget","feedbackRuleRemoved.qti-widget","feedbackRuleElseCreated.qti-widget","feedbackRuleElseRemoved.qti-widget"]}}}),define("taoQtiItem/qtiCreator/model/helper/invalidator",["lodash"],function(e){var t={completelyValid:function(e){var t,i,n=e.getRelatedItem();
n&&(t=e.getSerial(),i=n.data("invalid")||{},delete i[t],n.data("invalid",i))},valid:function(t,i){var n,a=t.getRelatedItem(),r=t.getSerial();if(a){if(n=a.data("invalid")||{},!i)throw new Error('missing required argument "key"');n[r]&&n[r][i]&&(delete n[r][i],e.size(n[r])||delete n[r],a.data("invalid",n))}},invalid:function(e,t,i,n){var a,r=e.getRelatedItem(),o=e.getSerial();if(r){if(a=r.data("invalid")||{},!t)throw new Error('missing required arguments "key"');a[o]||(a[o]={}),a[o][t]={message:i||"",stateName:n||"active"},r.data("invalid",a)}},isValid:function(e){var t,i=e.getRelatedItem(),n=e.getSerial();return i?(t=i.data("invalid")||{},!t[n]):!0}};return t}),define("taoQtiItem/qtiCreator/model/mixin/editable",["lodash","jquery","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/model/helper/invalidator"],function(e,t,i,n,a){var r=function(t){var r=!1,o=t.getRelatedItem();
if(!o)throw"no related item found";var s=o.find(t.getSerial());if(s){var l=s.parent;i.isA(l,"interaction")?("gapImg"===t.qtiClass?l.removeGapImg(t):i.isA(t,"choice")&&l.removeChoice(t),r=!0):"body"===s.location&&e.isFunction(l.initContainer)?(e.isFunction(t.beforeRemove)&&t.beforeRemove(),l.getBody().removeElement(t),r=!0):i.isA(l,"_container")&&(e.isFunction(t.beforeRemove)&&t.beforeRemove(),l.removeElement(t),r=!0),r&&(t.data("removed",!0),a.completelyValid(t),n.deleted(t,l))}return r},o=function(e,t,n){if(e[t]){var r,o="";"string"==typeof n?(o=n,r=i.getElementBySerial[o]):n instanceof i&&(o=n.getSerial(),r=n),o&&(a.completelyValid(r),delete e[t][o],i.unsetElement(o))
}return e},s={init:function(t,i){"object"==typeof t&&(i=t,t="");var n={};e.isFunction(this.getDefaultAttributes)&&e.extend(n,this.getDefaultAttributes()),e.extend(n,i),this._super(t,n)},attr:function(e,i){var n=this._super(e,i);return void 0!==e&&void 0!==i&&t(document).trigger("attributeChange.qti-widget",{element:this,key:e,value:i}),n},remove:function(){if(0===arguments.length)return r(this);if(2===arguments.length)return o(this,arguments[0],arguments[1]);throw"invalid number of argument given"}};return s}),define("taoQtiItem/qtiCreator/model/qtiClasses",["lodash","taoQtiItem/qtiItem/core/qtiClasses"],function(e,t){return e.defaults({assessmentItem:"taoQtiItem/qtiCreator/model/Item",_container:"taoQtiItem/qtiCreator/model/Container",img:"taoQtiItem/qtiCreator/model/Img",math:"taoQtiItem/qtiCreator/model/Math",object:"taoQtiItem/qtiCreator/model/Object",rubricBlock:"taoQtiItem/qtiCreator/model/RubricBlock",modalFeedback:"taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/model/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCreator/model/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCreator/model/interactions/MatchInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction",simpleChoice:"taoQtiItem/qtiCreator/model/choices/SimpleChoice",simpleAssociableChoice:"taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice",inlineChoice:"taoQtiItem/qtiCreator/model/choices/InlineChoice",mediaInteraction:"taoQtiItem/qtiCreator/model/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/model/interactions/UploadInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCreator/model/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/model/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction",graphicInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",hotspotChoice:"taoQtiItem/qtiCreator/model/choices/HotspotChoice",gapImg:"taoQtiItem/qtiCreator/model/choices/GapImg",associableHotspot:"taoQtiItem/qtiCreator/model/choices/AssociableHotspot",gapMatchInteraction:"taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/model/interactions/HottextInteraction",hottext:"taoQtiItem/qtiCreator/model/choices/Hottext",gapText:"taoQtiItem/qtiCreator/model/choices/GapText",gap:"taoQtiItem/qtiCreator/model/choices/Gap",responseDeclaration:"taoQtiItem/qtiCreator/model/variables/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCreator/model/ResponseProcessing",customInteraction:"taoQtiItem/qtiCreator/model/interactions/CustomInteraction"},t)
}),define("taoQtiItem/qtiCreator/model/helper/container",["lodash","taoQtiItem/qtiCreator/model/qtiClasses"],function(e,t){var i={createElements:function(i,n,a){var r=/{{([a-z_]+)\.?([a-z_]*):new}}/gi,o={};n.replace(r,function(e,i){if(!t[i])throw"missing required class : "+i;o[i]=t[i]}),require(e.values(o),function(){var t={};for(var o in arguments)t[arguments[o].prototype.qtiClass]=arguments[o];var s={},l=n.replace(r,function(e,n,a){if(t[n]){var r=new t[n];return i.getRenderer()&&r.setRenderer(i.getRenderer()),s[r.getSerial()]=r,a&&(r.typeIdentifier=a),r.placeholder()}return e});i.setElements(s,l);var c=$(document);e.each(s,function(t){e.isFunction(t.buildIdentifier)&&t.buildIdentifier(),e.isFunction(t.afterCreate)&&t.afterCreate(),c.trigger("elementCreated.qti-widget",{parent:i.parent(),element:t})
}),"function"==typeof a&&a.call(i,s)})}};return i}),define("taoQtiItem/qtiCreator/model/mixin/editableContainer",["taoQtiItem/qtiCreator/model/helper/container"],function(e){var t={createElements:function(t,i){var n=this;e.createElements(n.getBody(),t,function(e){i.call(n,e)})}};return t}),define("taoQtiItem/qtiItem/core/IdentifiedElement",["taoQtiItem/qtiItem/core/Element"],function(e){var t=e.extend({buildIdentifier:function(e,t){void 0===t&&(t=!0);var i=this.getRelatedItem();if(!i)throw"cannot build identifier of an element that is not attached to an assessment item";var n="",a=1,r=i.getUsedIdentifiers();e?(e=e.replace(/_[0-9]+$/gi,"_"),e=e.replace(/[^a-zA-Z0-9_]/gi,"_"),e=e.replace(/(_)+/gi,"_"),t&&(n="_"+a)):(e=this.qtiClass,n="_"+a);
do{var o=!1,s=e+n;r[s]&&(o=!0,n="_"+a,a++)}while(o);return this.attr("identifier",s),this},id:function(e){return e||this.attr("identifier")||this.buildIdentifier(e),this.attr("identifier",e)}});return t}),define("taoQtiItem/qtiItem/mixin/Mixin",[],function(){return{augment:function(e,t,i){if("function"==typeof e&&"object"==typeof t)for(var n in t)if(Object.hasOwnProperty(e.prototype,n)){if(i&&i.append){var a=e.prototype[n];e.prototype[n]=function(){return t[n].apply(this,arguments),a.apply(this,arguments)}}}else e.prototype[n]=t[n]}}}),define("taoQtiItem/qtiItem/core/Container",["taoQtiItem/qtiItem/core/Element","lodash","jquery","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i,n){var a=e.extend({qtiClass:"_container",init:function(e){if(e&&"string"!=typeof e)throw"the body of a container must be a string";
this.bdy="",this.body(e||""),this.elements={},this._super()},body:function(e){if("undefined"==typeof e)return this.bdy;if("string"!=typeof e)throw"body must be a string";this.bdy=e,i(document).trigger("containerBodyChange",{body:e,container:this})},setElements:function(t,n){var a=!1;for(var r in t){var o=t[r];if(!(o instanceof e))throw a=!1,"expected a qti element";-1===n.indexOf(o.placeholder())&&(n+=o.placeholder()),o.setRelatedItem(this.getRelatedItem()||null),this.elements[o.getSerial()]=o,i(document).trigger("containerElementAdded",{element:o,container:this}),a=!0}return this.body(n),a},setElement:function(e,t){return this.setElements([e],t)},removeElement:function(t){var i="";
return"string"==typeof t?i=t:t instanceof e&&(i=t.getSerial()),delete this.elements[i],this.body(this.body().replace("{{"+i+"}}","")),this},getElements:function(i){var n={};if("string"==typeof i)for(var a in this.elements)e.isA(this.elements[a],i)&&(n[a]=this.elements[a]);else n=t.clone(this.elements);return n},getElement:function(e){return this.elements[e]?this.elements[e]:null},getComposingElements:function(){var e=this.getElements(),i={};for(var n in e)i[n]=e[n],i=t.extend(i,e[n].getComposingElements());return i},render:function(){var e=n.getOptionsFromArguments(arguments),t=e.renderer||this.getRenderer(),i=[],a=this.body();for(var r in this.elements){var o=this.elements[r];
if("function"!=typeof o.render)throw"render() is not defined for the qti element: "+r;"_container"===o.qtiClass?a=a.replace(o.placeholder(),o.render(t)):(a=a.replace(o.placeholder(),"{{{"+r+"}}}"),i[r]=o.render(t))}if(t.isRenderer)return this._super({body:t.renderDirect(a,i),contentModel:this.contentModel||"flow"},t,e.placeholder);throw"invalid qti renderer for qti container"},postRender:function(e,t,i){i=i||this.getRenderer();for(var n in this.elements){var a=this.elements[n];"function"==typeof a.postRender&&a.postRender(e,"",i)}this._super(e,t,i)},toArray:function(){var e={serial:this.serial,body:this.bdy,elements:{}};for(var t in this.elements)e.elements[t]=this.elements[t].toArray();
return e},find:function(e,i){var n=null;return this.elements[e]?n={parent:i||this,element:this.elements[e],location:"body"}:t.each(this.elements,function(t){return n=t.find(e),n?!1:void 0}),n}});return a}),define("taoQtiItem/qtiItem/mixin/Container",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/core/Container"],function(e,t){var i={initContainer:function(e){this.bdy=new t(e||""),this.bdy.setRelatedItem(this.getRelatedItem()||null),this.bdy.contentModel="blockStatic"},getBody:function(){return this.bdy},body:function(e){var t=this.bdy.body(e);return e?this:t},setElement:function(e,t){return this.bdy.setElement(e,t),this},removeElement:function(e){return this.bdy.removeElement(e)
}};return{augment:function(t){e.augment(t,i)},methods:i}}),define("taoQtiItem/qtiItem/mixin/ContainerItemBody",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/mixin/Container","lodash"],function(e,t,i){var n={};return i.extend(n,t.methods),i.extend(n,{initContainer:function(e){t.methods.initContainer.call(this,e),this.bdy.contentModel="itemBody"}}),{augment:function(t){e.augment(t,n)},methods:n}}),define("taoQtiItem/qtiItem/core/Item",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/core/IdentifiedElement","taoQtiItem/qtiItem/mixin/ContainerItemBody","lodash","jquery","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n,a,r){var o=t.extend({qtiClass:"assessmentItem",init:function(e,t){this._super(e,t),this.relatedItem=this,this.stylesheets={},this.responses={},this.outcomes={},this.modalFeedbacks={},this.namespaces={},this.responseProcessing=null
},getInteractions:function(){var t=[],i=this.getComposingElements();for(var n in i)e.isA(i[n],"interaction")&&t.push(i[n]);return t},addResponseDeclaration:function(t){if(!e.isA(t,"responseDeclaration"))throw"is not a qti response declaration";return t.setRelatedItem(this),this.responses[t.getSerial()]=t,this},getResponseDeclaration:function(e){for(var t in this.responses)if(this.responses[t].attr("identifier")===e)return this.responses[t];return null},addOutcomeDeclaration:function(t){if(!e.isA(t,"outcomeDeclaration"))throw"is not a qti outcome declaration";return t.setRelatedItem(this),this.outcomes[t.getSerial()]=t,this},addModalFeedback:function(t){if(!e.isA(t,"modalFeedback"))throw"is not a qti modal feedback";
return t.setRelatedItem(this),this.modalFeedbacks[t.getSerial()]=t,this},getComposingElements:function(){var t=this._super(),i=this;return n.each(["responses","outcomes","modalFeedbacks","stylesheets"],function(e){for(var a in i[e]){var r=i[e][a];t[a]=r,t=n.extend(t,r.getComposingElements())}}),this.responseProcessing instanceof e&&(t[this.responseProcessing.getSerial()]=this.responseProcessing),t},find:function(e){var t=this._super(e);return t||(t=r.findInCollection(this,["responses","outcomes","modalFeedbacks","stylesheets"],e)),t},getResponses:function(){return n.clone(this.responses)},getRelatedItem:function(){return this},setNamespaces:function(e){this.namespaces=e
},getNamespaces:function(){return n.clone(this.namespaces)},addStylesheet:function(t){if(!e.isA(t,"stylesheet"))throw"is not a qti stylesheet declaration";return t.setRelatedItem(this),this.stylesheets[t.getSerial()]=t,this},removeStyleSheet:function(e){return delete this.stylesheets[e.getSerial()],this},stylesheetExists:function(e){var t=!1;return n.each(this.stylesheets,function(i){return i.attr("href")===e?(t=!0,!1):void 0}),t},setResponseProcessing:function(t){if(!e.isA(t,"responseProcessing"))throw"is not a response processing";return t.setRelatedItem(this),this.responseProcessing=t,this},toArray:function(){var e=this._super();e.outcomes={};for(var t in this.outcomes)e.outcomes[t]=this.outcomes[t].toArray();
e.responses={};for(var t in this.responses)e.responses[t]=this.responses[t].toArray();e.stylesheets={};for(var t in this.stylesheets)e.stylesheets[t]=this.stylesheets[t].toArray();return e.namespaces=this.namespaces,e},isEmpty:function(){var e=this.body().trim();if(e){var t=a("<div>").html(e),i=t.children();return 1===i.length&&i.hasClass("empty")?!0:!1}return!0}});return i.augment(o),o}),define("taoQtiItem/qtiItem/core/Stylesheet",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i){var n=e.extend({qtiClass:"stylesheet",render:function(){var e=i.getOptionsFromArguments(arguments),n=e.renderer||this.getRenderer(),a={},r=n.getOption("baseUrl")||"",o=this.attr("href");
return o.match(/^http/i)||(a.attributes={href:r+o}),this._super(t.merge(a,e.data),e.placeholder,e.subclass,n)}});return n}),define("taoQtiItem/qtiCreator/model/Stylesheet",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/Stylesheet"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{href:"css/tao-user-styles.css",title:"",type:"text/css",media:"all"}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/ResponseProcessing",["taoQtiItem/qtiItem/core/Element","lodash"],function(e){var t=e.extend({qtiClass:"responseProcessing",processingType:"",xml:""});return t}),define("taoQtiItem/qtiCreator/model/ResponseProcessing",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/ResponseProcessing"],function(e,t,i){var n={};
return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{}},setProcessingType:function(t){this.processingType!==t&&("custom"===this.processingType&&e.each(this.getRelatedItem().getResponses(),function(e){e.setTemplate("MATCH_CORRECT")}),this.processingType=t)}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/variables/VariableDeclaration",["taoQtiItem/qtiItem/core/IdentifiedElement"],function(e){var t=e.extend({init:function(e,t){this._super(e,t),this.defaultValue=null},is:function(e){return"variableDeclaration"===e||this._super(e)},toArray:function(){var e=this._super();return e.defaultValue=this.defaultValue,e}});return t}),define("taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",["taoQtiItem/qtiItem/core/variables/VariableDeclaration"],function(e){return e.extend({qtiClass:"outcomeDeclaration"})
}),define("taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/variables/OutcomeDeclaration"],function(e,t,i){var n={};return e.extend(n,t),i.extend(n)}),define("taoQtiItem/qtiItem/core/feedbacks/ModalFeedback",["taoQtiItem/qtiItem/core/IdentifiedElement","taoQtiItem/qtiItem/mixin/Container"],function(e,t){var i=e.extend({qtiClass:"modalFeedback",is:function(e){return"feedback"===e||this._super(e)}});return t.augment(i),i}),define("taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/feedbacks/ModalFeedback"],function(e,t,i){var n={};
return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{title:"modal feedback title",showHide:"show"}}}),i.extend(n)}),define("taoQtiItem/qtiCreator/model/Item",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableContainer","taoQtiItem/qtiItem/core/Item","taoQtiItem/qtiCreator/model/Stylesheet","taoQtiItem/qtiCreator/model/ResponseProcessing","taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration","taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback"],function(e,t,i,n,a,r,o,s){var l={};return e.extend(l,t),e.extend(l,i),e.extend(l,{getDefaultAttributes:function(){return{identifier:"myItem_1",title:"Item title",adaptive:!1,timeDependent:!1}
},createResponseProcessing:function(){var e=new r;return e.processingType="templateDriven",this.setResponseProcessing(e),e},createStyleSheet:function(t){if(t&&e.isString(t)){var i=new a({href:t});return i.setRenderer(this.getRenderer()),this.addStylesheet(i),i}throw'missing or invalid type for the required arg "href"'},createOutcomeDeclaration:function(e){var t=e.identifier||"";delete e.identifier;var i=new o(e);return this.addOutcomeDeclaration(i),i.buildIdentifier(t),i},createModalFeedback:function(e){var t=e.identifier||"";delete e.identifier;var i=new s(e);return this.addModalFeedback(i),i.buildIdentifier(t),i.body("Some feedback text."),i},deleteResponseDeclaration:function(t){var i;
return e.isString(t)?i=t:t&&"responseDeclaration"===t.qtiClass&&(i=t.getSerial()),delete this.responses[i],this}}),n.extend(l)}),define("taoQtiItem/qtiCreator/helper/itemLoader",["jquery","helpers","taoQtiItem/qtiItem/core/Loader","taoQtiItem/qtiCreator/model/Item","taoQtiItem/qtiCreator/model/qtiClasses"],function(e,t,i,n,a){var r=function(e){var t=e.lastIndexOf("#");return e.substr(t+1)},o={loadItem:function(o,s){o.uri&&e.ajax({url:t._url("getItemData","QtiCreator","taoQtiItem"),dataType:"json",data:{uri:o.uri}}).done(function(e){if(e.itemData&&"assessmentItem"===e.itemData.qtiClass){var t=(new i).setClassesLocation(a),l=e.itemData;t.loadItemData(l,function(e){e.isEmpty()&&e.body(""),s(e,this.getLoadedClasses())
})}else{var c=(new n).id(r(o.uri)),d=c.createOutcomeDeclaration({cardinality:"single",baseType:"float"});d.buildIdentifier("SCORE",!1),c.createResponseProcessing(),s(c)}})}};return o});var Handlebars=function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return s[e]||"&amp;"}function i(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function n(e){return e instanceof o?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(l,t):e):""}function a(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var r={},o=e,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;
r.extend=i;var d=Object.prototype.toString;r.toString=d;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var u;r.isFunction=u;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return r.isArray=h,r.escapeExpression=n,r.isEmpty=a,r}(e),i=function(){function e(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),r=0;r<i.length;r++)this[i[r]]=a[i[r]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var t,i=["description","fileName","lineNumber","message","name","number","stack"];
return e.prototype=new Error,t=e}(),n=function(e,t){function i(e,t){this.helpers=e||{},this.partials=t||{},n(this)}function n(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse||function(){},a=i.fn;return h(t)&&(t=t.call(this)),t===!0?a(this):t===!1||null==t?n(this):u(t)?t.length>0?e.helpers.each(t,i):n(this):a(t)}),e.registerHelper("each",function(e,t){var i,n=t.fn,a=t.inverse,r=0,o="";if(h(e)&&(e=e.call(this)),t.data&&(i=g(t.data)),e&&"object"==typeof e)if(u(e))for(var s=e.length;s>r;r++)i&&(i.index=r,i.first=0===r,i.last=r===e.length-1),o+=n(e[r],{data:i});
else for(var l in e)e.hasOwnProperty(l)&&(i&&(i.key=l,i.index=r,i.first=0===r),o+=n(e[l],{data:i}),r++);return 0===r&&(o=a(this)),o}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){return h(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(n,t)})}function a(e,t){m.log(e,t)}var r={},o=e,s=t,l="1.3.0";r.VERSION=l;var c=4;
r.COMPILER_REVISION=c;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=d;var u=o.isArray,h=o.isFunction,p=o.toString,f="[object Object]";r.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:a,registerHelper:function(e,t,i){if(p.call(e)===f){if(i||t)throw new s("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===f?o.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var i=m.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)
}}};r.logger=m,r.log=a;var g=function(e){var t={};return o.extend(t,e),t};return r.createFrame=g,r}(t,i),a=function(e,t,i){function n(e){var t=e&&e[0]||1,i=h;if(t!==i){if(i>t){var n=p[i],a=p[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new u("No environment passed to template");var i=function(e,i,n,a,r,o){var s=t.VM.invokePartial.apply(this,arguments);
if(null!=s)return s;if(t.compile){var l={helpers:a,partials:r,data:o};return r[i]=t.compile(e,{data:void 0!==o},t),r[i](n,l)}throw new u("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:d.escapeExpression,invokePartial:i,programs:[],program:function(e,t,i){var n=this.programs[e];return i?n=o(e,t,i):n||(n=this.programs[e]=o(e,t)),n},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i={},d.extend(i,t),d.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,a){a=a||{};var r,o,s=a.partial?a:t;a.partial||(r=a.helpers,o=a.partials);var l=e.call(n,s,i,r,o,a.data);
return a.partial||t.VM.checkRevision(n.compilerInfo),l}}function r(e,t,i){var n=Array.prototype.slice.call(arguments,3),a=function(e,a){return a=a||{},t.apply(this,[e,a.data||i].concat(n))};return a.program=e,a.depth=n.length,a}function o(e,t,i){var n=function(e,n){return n=n||{},t(e,n.data||i)};return n.program=e,n.depth=0,n}function s(e,t,i,n,a,r){var o={partial:!0,helpers:n,partials:a,data:r};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(i,o):void 0}function l(){return""}var c={},d=e,u=t,h=i.COMPILER_REVISION,p=i.REVISION_CHANGES;return c.checkRevision=n,c.template=a,c.programWithDepth=r,c.program=o,c.invokePartial=s,c.noop=l,c
}(t,i,n),r=function(e,t,i,n,a){var r,o=e,s=t,l=i,c=n,d=a,u=function(){var e=new o.HandlebarsEnvironment;return c.extend(e,o),e.SafeString=s,e.Exception=l,e.Utils=c,e.VM=d,e.template=function(t){return d.template(t,e)},e},h=u();return h.create=u,r=h}(n,e,i,t,a),o=function(e){function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var i,n=e,a={ProgramNode:function(e,i,n,r){var o,s;3===arguments.length?(r=n,n=null):2===arguments.length&&(r=i,i=null),t.call(this,r),this.type="program",this.statements=e,this.strip={},n?(s=n[0],s?(o={first_line:s.firstLine,last_line:s.lastLine,last_column:s.lastColumn,first_column:s.firstColumn},this.inverse=new a.ProgramNode(n,i,o)):this.inverse=new a.ProgramNode(n,i),this.strip.right=i.left):i&&(this.strip.left=i.right)
},MustacheNode:function(e,i,n,r,o){if(t.call(this,o),this.type="mustache",this.strip=r,null!=n&&n.charAt){var s=n.charAt(3)||n.charAt(2);this.escaped="{"!==s&&"&"!==s}else this.escaped=!!n;this.sexpr=e instanceof a.SexprNode?e:new a.SexprNode(e,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,i,n){t.call(this,n),this.type="sexpr",this.hash=i;var a=this.id=e[0],r=this.params=e.slice(1),o=this.eligibleHelper=a.isSimple;this.isHelper=o&&(r.length||i)},PartialNode:function(e,i,n,a){t.call(this,a),this.type="partial",this.partialName=e,this.context=i,this.strip=n
},BlockNode:function(e,i,a,r,o){if(t.call(this,o),e.sexpr.id.original!==r.path.original)throw new n(e.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=e,this.program=i,this.inverse=a,this.strip={left:e.strip.left,right:r.strip.right},(i||a).strip.left=e.strip.right,(a||i).strip.right=r.strip.left,a&&!i&&(this.isInverse=!0)},ContentNode:function(e,i){t.call(this,i),this.type="content",this.string=e},HashNode:function(e,i){t.call(this,i),this.type="hash",this.pairs=e},IdNode:function(e,i){t.call(this,i),this.type="ID";for(var a="",r=[],o=0,s=0,l=e.length;l>s;s++){var c=e[s].part;if(a+=(e[s].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new n("Invalid path: "+a,this);
".."===c?o++:this.isScoped=!0}else r.push(c)}this.original=a,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(e,i){t.call(this,i),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,i){t.call(this,i),this.type="DATA",this.id=e},StringNode:function(e,i){t.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,i){t.call(this,i),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,i){t.call(this,i),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e
},CommentNode:function(e,i){t.call(this,i),this.type="comment",this.comment=e}};return i=a}(i),s=function(){var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,i,n,a,r,o){var s=o.length-1;
switch(r){case 1:return new a.ProgramNode(o[s-1],this._$);case 2:return new a.ProgramNode([],this._$);case 3:this.$=new a.ProgramNode([],o[s-1],o[s],this._$);break;case 4:this.$=new a.ProgramNode(o[s-2],o[s-1],o[s],this._$);break;case 5:this.$=new a.ProgramNode(o[s-1],o[s],[],this._$);break;case 6:this.$=new a.ProgramNode(o[s],this._$);break;case 7:this.$=new a.ProgramNode([],this._$);break;case 8:this.$=new a.ProgramNode([],this._$);break;case 9:this.$=[o[s]];break;case 10:o[s-1].push(o[s]),this.$=o[s-1];break;case 11:this.$=new a.BlockNode(o[s-2],o[s-1].inverse,o[s-1],o[s],this._$);break;case 12:this.$=new a.BlockNode(o[s-2],o[s-1],o[s-1].inverse,o[s],this._$);
break;case 13:this.$=o[s];break;case 14:this.$=o[s];break;case 15:this.$=new a.ContentNode(o[s],this._$);break;case 16:this.$=new a.CommentNode(o[s],this._$);break;case 17:this.$=new a.MustacheNode(o[s-1],null,o[s-2],e(o[s-2],o[s]),this._$);break;case 18:this.$=new a.MustacheNode(o[s-1],null,o[s-2],e(o[s-2],o[s]),this._$);break;case 19:this.$={path:o[s-1],strip:e(o[s-2],o[s])};break;case 20:this.$=new a.MustacheNode(o[s-1],null,o[s-2],e(o[s-2],o[s]),this._$);break;case 21:this.$=new a.MustacheNode(o[s-1],null,o[s-2],e(o[s-2],o[s]),this._$);break;case 22:this.$=new a.PartialNode(o[s-2],o[s-1],e(o[s-3],o[s]),this._$);break;case 23:this.$=e(o[s-1],o[s]);break;case 24:this.$=new a.SexprNode([o[s-2]].concat(o[s-1]),o[s],this._$);
break;case 25:this.$=new a.SexprNode([o[s]],null,this._$);break;case 26:this.$=o[s];break;case 27:this.$=new a.StringNode(o[s],this._$);break;case 28:this.$=new a.IntegerNode(o[s],this._$);break;case 29:this.$=new a.BooleanNode(o[s],this._$);break;case 30:this.$=o[s];break;case 31:o[s-1].isHelper=!0,this.$=o[s-1];break;case 32:this.$=new a.HashNode(o[s],this._$);break;case 33:this.$=[o[s-2],o[s]];break;case 34:this.$=new a.PartialNameNode(o[s],this._$);break;case 35:this.$=new a.PartialNameNode(new a.StringNode(o[s],this._$),this._$);break;case 36:this.$=new a.PartialNameNode(new a.IntegerNode(o[s],this._$));break;case 37:this.$=new a.DataNode(o[s],this._$);break;
case 38:this.$=new a.IdNode(o[s],this._$);break;case 39:o[s-2].push({part:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 40:this.$=[{part:o[s]}];break;case 43:this.$=[];break;case 44:o[s-1].push(o[s]);break;case 47:this.$=[o[s]];break;case 48:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,n=[0],a=[null],r=[],o=this.table,s="",l=0,c=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,b,y,C,I,E={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=o[m]&&o[m][p]),"undefined"==typeof g||!g.length||!g[0]){var w="";
if(!d){I=[];for(b in o[m])this.terminals_[b]&&b>2&&I.push("'"+this.terminals_[b]+"'");w=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:I})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),a.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,d>0&&d--);
break;case 2:if(y=this.productions_[g[1]][1],E.$=a[a.length-y],E._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},h&&(E._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(E,s,c,l,this.yy,g[1],a,r),"undefined"!=typeof v)return v;y&&(n=n.slice(0,-1*y*2),a=a.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),a.push(E.$),r.push(E._$),C=o[n[n.length-2]][n[n.length-1]],n.push(C);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);
this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);
this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this
},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,n,a;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(i=this._input.match(this.rules[r[o]]),!i||t&&!(i[0].length>t[0].length)||(t=i,n=o,this.options.flex));o++);return t?(a=t[0].match(/(?:\r\n?|\n).*/g),a&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})
},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i,n){function a(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(a(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(a(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;
break;case 1:return 14;case 2:return this.popState(),14;case 3:return a(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return a(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=a(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=a(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;
case 28:return 33;case 29:return 40;case 30:return t.yytext=a(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e
}();return i.lexer=n,t.prototype=i,i.Parser=t,new t}();return e=t}(),l=function(e,t){function i(e){return e.constructor===r.ProgramNode?e:(a.yy=r,a.parse(e))}var n={},a=e,r=t;return n.parser=a,n.parse=i,n}(s,o),c=function(e){function t(){}function i(e,t,i){if(null==e||"string"!=typeof e&&e.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=i.parse(e),a=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(a,t)}function n(e,t,i){function n(){var n=i.parse(e),a=(new i.Compiler).compile(n,t),r=(new i.JavaScriptCompiler).compile(a,t,void 0,!0);
return i.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var a;return function(e,t){return a||(a=n()),a.call(this,e,t)}}var a={},r=e;return a.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,i,n=this.opcodes,a=[],r=0,o=n.length;o>r;r++)if(e=n[r],"DECLARE"===e.opcode)a.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var s=0;s<e.args.length;s++)i=e.args[s],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),t.push(i);a.push(e.opcode+" "+t.join(" "))}return a.join("\n")},equals:function(e){var t=this.opcodes.length;
if(e.opcodes.length!==t)return!1;for(var i=0;t>i;i++){var n=this.opcodes[i],a=e.opcodes[i];if(n.opcode!==a.opcode||n.args.length!==a.args.length)return!1;for(var r=0;r<n.args.length;r++)if(n.args[r]!==a.args[r])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(i=0;t>i;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(e)
},accept:function(e){var t,i=e.strip||{};return i.left&&this.opcode("strip"),t=this[e.type](e),i.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,i=0,n=t.length;n>i;i++)this.accept(t[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,i=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var a=0,r=i.depths.list.length;r>a;a++)t=i.depths.list[a],2>t||this.addDepth(t-1);return n},block:function(e){var t=e.mustache,i=e.program,n=e.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));
var a=t.sexpr,r=this.classifySexpr(a);"helper"===r?this.helperSexpr(a,i,n):"simple"===r?(this.simpleSexpr(a),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(a,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,i,n=e.pairs;this.opcode("pushHash");for(var a=0,r=n.length;r>a;a++)t=n[a],i=t[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",t[0]);
this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,i){var n=e.id,a=n.parts[0],r=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",a,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")
},helperSexpr:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),a=e.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",n.length,a);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+a,e);this.opcode("invokeHelper",n.length,a,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var i=1,n=e.parts.length;n>i;i++)this.opcode("lookup",e.parts[i])
},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,i=0,n=t.length;n>i;i++)this.opcode("lookup",t[i])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))
},classifySexpr:function(e){var t=e.isHelper,i=e.eligibleHelper,n=this.options;if(i&&!t){var a=e.id.parts[0];n.knownHelpers[a]?t=!0:n.knownHelpersOnly&&(i=!1)}return t?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t,i=e.length;i--;)t=e[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,i){var n=e.params;return this.pushParams(n),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.hash(e.hash):this.opcode("emptyHash"),n}},a.precompile=i,a.compile=n,a
}(i),d=function(e,t){function i(e){this.value=e}function n(){}var a,r=e.COMPILER_REVISION,o=e.REVISION_CHANGES,s=e.log,l=t;n.prototype={nameLookup:function(e,t){var i,a;return 0===e.indexOf("depth")&&(i=!0),a=/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+a+")":a},compilerInfo:function(){var e=r,t=o[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,i,n){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);
var a,r=e.opcodes;this.i=0;for(var o=r.length;this.i<o;this.i++)a=r[this.i],"DECLARE"===a.opcode?this[a.name]=a.value:this[a.opcode].apply(this,a.args),a.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,i="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(i+=" data = data || {};"),e.push(i)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e
},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,r=this.environment.depths.list.length;r>a;a++)n.push("depth"+this.environment.depths.list[a]);
var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),e)return n.push(o),Function.apply(this,n);var l="function "+(this.name||"")+"("+n.join(",")+") {\n  "+o+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",i=0,n=this.source.length;n>i;i++){var a=this.source[i];a.appendToBuffer?e=e?e+"\n    + "+a.content:a.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=a+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))
},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))
},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)
},invokeHelper:function(e,t,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(e,t,!0),a=this.nameLookup("depth"+this.lastContext,t,"context"),r="helper = "+n.name+" || "+a;n.paramsInit&&(r+=","+n.paramsInit),this.push("("+r+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,e,t),n=this.lastHelper=this.nameLookup("helpers",e,"helper"),a=this.nameLookup("depth"+this.lastContext,e,"context"),r=this.nextStack();
i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+r+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+a+"; "+r+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),t=this.popStack());var a=this.hash;t&&a.contexts.push("'"+e+"': "+t),i&&a.types.push("'"+e+"': "+i),a.values.push("'"+e+"': ("+n+")")
},compiler:n,compileChildren:function(e,t){for(var i,n,a=e.children,r=0,o=a.length;o>r;r++){i=a[r],n=new this.compiler;var s=this.matchExistingProgram(i);null==s?(this.context.programs.push(""),s=this.context.programs.length,i.index=s,i.name="program"+s,this.context.programs[s]=n.compile(i,t,this.context),this.context.environments[s]=i):(i.index=s,i.name="program"+s)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;i>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,i=this.environment.children[e],n=i.depths.list,a=[i.index,i.name,"data"],r=0,o=n.length;o>r;r++)t=n[r],a.push(1===t?"depth0":"depth"+(t-1));
return(0===n.length?"self.program(":"self.programWithDepth(")+a.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,n,a,r="",o=this.isInline();
if(o){var s=this.popStack(!0);if(s instanceof i)t=s.value,a=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+s+"),",t=this.topStack()}}else t=this.topStack();var c=e.call(this,t);return o?(a||this.popStack(),n&&this.stackSlot--,this.push("("+r+c+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+r+c+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;
if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var a=e[t];a instanceof i?this.compileStack.push(a):this.pushStack(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof i)return n.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return n},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof i?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'
},setupHelper:function(e,t,i){var n=[],a=this.setupParams(e,n,i),r=this.nameLookup("helpers",t,"helper");return{params:n,paramsInit:a,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(n).join(", ")}},setupOptions:function(e,t){var i,n,a,r=[],o=[],s=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),n=this.popStack(),a=this.popStack(),(a||n)&&(a||(this.context.aliases.self="this",a="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),r.push("inverse:"+n),r.push("fn:"+a));for(var l=0;e>l;l++)i=this.popStack(),t.push(i),this.options.stringParams&&(s.push(this.popStack()),o.push(this.popStack()));
return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+s.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(e,t,i){var n="{"+this.setupOptions(e,t).join(",")+"}";return i?(this.useRegister("options"),t.push("options"),"options="+n):(t.push(n),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),d=n.RESERVED_WORDS={},u=0,h=c.length;h>u;u++)d[c[u]]=!0;
return n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},a=n}(n,i),u=function(e,t,i,n,a){var r,o=e,s=t,l=i.parser,c=i.parse,d=n.Compiler,u=n.compile,h=n.precompile,p=a,f=o.create,m=function(){var e=f();return e.compile=function(t,i){return u(t,i,e)},e.precompile=function(t,i){return h(t,i,e)},e.AST=s,e.Compiler=d,e.JavaScriptCompiler=p,e.Parser=l,e.parse=c,e};return o=m(),o.create=m,r=o}(r,o,l,c,d);return u}();define("handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("taoQtiItem/qtiItem/helper/interactionHelper",["lodash","taoQtiItem/qtiItem/core/Element"],function(e,t){return{convertChoices:function(i,n){var a=[],r=this;
return e.each(i,function(i){if(t.isA(i,"choice"))switch(n){case"serial":a.push(i.getSerial());break;case"identifier":a.push(i.id());break;default:a.push(i)}else e.isArray(i)&&a.push(r.convertChoices(i,n))}),a},findChoices:function(t,i,n){var a=[],r=this;return e.each(i,function(i){var o;e.isString(i)?"serial"===n?(o=t.getChoice(i),o&&a.push(o)):"identifier"===n?(o=t.getChoiceByIdentifier(i),o&&a.push(o)):a.push(i):a.push(e.isArray(i)?r.findChoices(t,i,n):i)}),a},shuffleChoices:function(e){var i=[],n={},a=0;for(var r in e){if(!t.isA(e[r],"choice"))throw"invalid element in array: is not a qti choice";var o=e[r];o.attr("fixed")&&(n[a]=o),i.push(o),a++}for(var s=0;s<i.length-1;s++)if(!n[s]){var l=-1;
do l=s+Math.floor(Math.random()*(i.length-s));while(n[l]);var c=i[l];i[l]=i[s],i[s]=c}return i},serialToIdentifier:function(e,t){var i=e.getChoice(t);return i?i.id():""}}}),define("taoQtiItem/qtiRunner/core/Renderer",["lodash","jquery","handlebars","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/interactionHelper"],function(e,t,i,n,a){var r=function(t){var i=!0;if("object"!=typeof t)return!1;var n=!1;if(t.qtiClass)if(e.indexOf(o,t.qtiClass)>=0)n=!0;else{var a=t.qtiClass.indexOf(".");if(a>0){var r=t.qtiClass.slice(0,a),s=t.qtiClass.slice(a+1);l[r]&&e.indexOf(l[r],s)>=0&&(n=!0)}}if(!n)throw i=!1,new Error("invalid qti class name in renderer declaration : "+t.qtiClass);
if(!t.template)throw i=!1,new Error("missing template in renderer declaration : "+t.qtiClass);return i},o=["_container","assessmentItem","stylesheet","responseDeclaration","outcomeDeclaration","responseProcessing","_simpleFeedbackRule","img","math","object","modalFeedback","rubricBlock","associateInteraction","choiceInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","endAttemptInteraction","customInteraction","prompt","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice","infoControl"],s={assessmentItem:["stylesheet","_container","prompt","modalFeedback"],rubricBlock:["_container"],associateInteraction:["simpleAssociableChoice"],choiceInteraction:["simpleChoice"],gapMatchInteraction:["gap","gapText"],graphicAssociateInteraction:["associableHotspot"],graphicGapMatchInteraction:["associableHotspot","gapImg"],graphicOrderInteraction:["hotspotChoice"],hotspotInteraction:["hotspotChoice"],hottextInteraction:["hottext"],inlineChoiceInteraction:["inlineChoice"],matchInteraction:["simpleAssociableChoice"],orderInteraction:["simpleChoice"]},l={simpleAssociableChoice:["associateInteraction","matchInteraction"],simpleChoice:["choiceInteraction","orderInteraction"]},c=function(c){c=c||{},this.isRenderer=!0,this.name="",this.shuffleChoices=void 0!==c.shuffleChoices?c.shuffleChoices:!0,this.shuffledChoices=[];
var d={},u={},h=function(e){var t=null;if(u[e])t=u[e];else{var i=e.indexOf(".");i>0&&(e=e.slice(0,i),u[e]&&(t=u[e]))}return t};this.setOption=function(e,t){return"string"==typeof e&&(c[e]=t),this},this.setOptions=function(t){return e.extend(c,t),this},this.getOption=function(e){return"string"==typeof e&&c[e]?c[e]:null},this.renderTpl=function(e,t,i){var n="",a=!1,r=i||e.qtiClass,o=h(r);if(o&&"function"==typeof o.template&&(n=o.template(t),a=!0),!a)throw new Error("no renderer template loaded under the class name : "+r);return n},this.getData=function(e,t,i){var n=t,a=i||e.qtiClass,r=h(a);return r&&"function"==typeof r.getData&&(n=r.getData.call(this,e,t)),n},this.renderDirect=function(e,t){return i.compile(e)(t)
},this.getContainer=function(e,t,i){var n=null,a=i||e.qtiClass,r=h(a);if(!r)throw"no renderer found for the class : "+e.qtiClass;return n=r.getContainer(e,t)},this.postRender=function(e,t,i){var n=!1,a=i||e.qtiClass,r=h(a);return r&&"function"==typeof r.render&&(n=r.render.call(this,e,t)),n},this.setResponse=function(e,i,n){var a=!1,r=n||e.qtiClass,o=h(r);if(!o)throw"no renderer registered under the name : "+r;if("function"==typeof o.setResponse){a=o.setResponse.call(this,e,i);var s=o.getContainer.call(this,e);s instanceof t&&s.length&&s.trigger("responseSet",[e,i])}return a},this.getResponse=function(e,t){var i=!1,n=t||e.qtiClass,a=h(n);if(!a)throw"no renderer registered under the name : "+n;
return"function"==typeof a.getResponse&&(i=a.getResponse.call(this,e)),i},this.resetResponse=function(e,t){var i=!1,n=t||e.qtiClass,a=h(n);if(!a)throw"no renderer registered under the name : "+n;return"function"==typeof a.resetResponse&&(i=a.resetResponse.call(this,e)),i},this.getLoadedRenderers=function(){return u},this.register=function(t){e.extend(d,t)},this.load=function(t,i){var n=[];if(i){if(!e.isArray(i))throw new Error('invalid argument type: expected array for arg "requireClasses"');i=e.intersection(i,o),e.each(i,function(t){var n=s[t];n&&(i=e.union(i,n))});for(var a in i){var c=i[a];if(l[c]){var h=e.intersection(i,l[c]);e.each(h,function(e){if(d[c+"."+e])n.push(d[c+"."+e]);
else{if(!d[c])throw new Error(this.name+" : missing qti class location declaration: "+c+", subclass: "+e);n.push(d[c])}})}else if(d[c]===!1)u[c]=!1;else{if(!d[c])throw new Error(this.name+" : missing qti class location declaration: "+c);n.push(d[c])}}}else n=e.values(d);var p=this;return require(n,function(){e.each(arguments,function(e){r(e)&&(u[e.qtiClass]=e)}),"function"==typeof t&&t.call(p,u)}),this},this.setShuffledChoices=function(e,t,i){n.isA(e,"interaction")&&(this.shuffledChoices[e.getSerial()]=a.findChoices(e,t,i))},this.getShuffledChoices=function(t,i,r){var o,s=[];if(n.isA(t,"interaction")){var l=t.getSerial();if(!this.shuffledChoices[l]||i)if(n.isA(t,"matchInteraction")){this.shuffledChoices[l]=[];
for(var c=0;2>c;c++)this.shuffledChoices[l].push(a.shuffleChoices(t.getChoices(c)))}else this.shuffledChoices[l]=a.shuffleChoices(t.getChoices());o=this.shuffledChoices[l],s="serial"===r||"identifier"===r?a.convertChoices(o,r):e.clone(o)}return s},this.getRenderers=function(){return u},this.getLocations=function(){return d}};return{build:function(e,t){var i=function(){c.apply(this,arguments),this.register(e),this.name=t||""};return i.prototype=c.prototype,i}}}),define("taoQtiItem/qtiDefaultRenderer/renderers/config",[],function(){return{name:"defaultRenderer",locations:{_container:"taoQtiItem/qtiDefaultRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiDefaultRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing",math:"taoQtiItem/qtiDefaultRenderer/renderers/Math",object:"taoQtiItem/qtiDefaultRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback",rubricBlock:"taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction",prompt:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice"}}
}),define("taoQtiItem/qtiCommonRenderer/renderers/config",["lodash","taoQtiItem/qtiDefaultRenderer/renderers/config"],function(e,t){var i=e.extend(e.clone(t.locations),{assessmentItem:"taoQtiItem/qtiCommonRenderer/renderers/Item",_container:"taoQtiItem/qtiCommonRenderer/renderers/Container",_simpleFeedbackRule:!1,stylesheet:"taoQtiItem/qtiCommonRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing",img:"taoQtiItem/qtiCommonRenderer/renderers/Img",math:"taoQtiItem/qtiCommonRenderer/renderers/Math",object:"taoQtiItem/qtiCommonRenderer/renderers/Object",rubricBlock:"taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",modalFeedback:"taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",prompt:"taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt",choiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",orderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",textEntryInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",hottext:"taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",gap:"taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",gapText:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapText","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",inlineChoice:"taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice",hottextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",hotspotInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",gapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",selectPointInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",mediaInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",gapImg:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg",graphicAssociateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction",customInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/CustomInteraction.amd",infoControl:"taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl"});
return{name:"commonRenderer",locations:i}}),define("taoQtiItem/qtiCreator/renderers/config",["lodash","taoQtiItem/qtiCommonRenderer/renderers/config"],function(e,t){var i=e.defaults({_container:"taoQtiItem/qtiCreator/renderers/Container",assessmentItem:"taoQtiItem/qtiCreator/renderers/Item",rubricBlock:"taoQtiItem/qtiCreator/renderers/RubricBlock",img:"taoQtiItem/qtiCreator/renderers/Img",math:"taoQtiItem/qtiCreator/renderers/Math",object:"taoQtiItem/qtiCreator/renderers/Object",modalFeedback:"taoQtiItem/qtiCreator/renderers/ModalFeedback",choiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction",orderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction",matchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction",associateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction",textEntryInteraction:"taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction",hotspotInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction",selectPointInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction",graphicAssociateInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction",mediaInteraction:"taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction",sliderInteraction:"taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction",extendedTextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction",gapMatchInteraction:"taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction",hottextInteraction:"taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction",customInteraction:"taoQtiItem/qtiCreator/renderers/interactions/CustomInteraction",gap:"taoQtiItem/qtiCreator/renderers/choices/Gap",gapText:"taoQtiItem/qtiCreator/renderers/choices/GapText",hottext:"taoQtiItem/qtiCreator/renderers/choices/Hottext"},t.locations);
return{name:"creatorRenderer",locations:i}}),define("taoQtiItem/qtiCreator/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiCreator/renderers/config"],function(e,t){return e.build(t.locations,t.name)}),define("util/dom",["jquery"],function(e){return{contains:function(t){return t instanceof e&&(t=t[0]),e.contains(document,t)}}}),define("taoQtiItem/qtiCreator/helper/creatorRenderer",["taoQtiItem/qtiCreator/renderers/Renderer","helpers","jquery","util/dom"],function(e,t,i,n){var a=null,r=function(){return a&&a.getOption("bodyElementOptionForm")&&n.contains(a.getOption("bodyElementOptionForm"))||(a=new e({baseUrl:"",lang:"",uri:"",shuffleChoices:!1,itemOptionForm:i("#item-editor-item-property-bar .panel"),interactionOptionForm:i("#item-editor-interaction-property-bar .panel"),choiceOptionForm:i("#item-editor-choice-property-bar .panel"),responseOptionForm:i("#item-editor-response-property-bar .panel"),bodyElementOptionForm:i("#item-editor-body-element-property-bar .panel"),textOptionForm:i("#item-editor-text-property-bar .panel"),modalFeedbackOptionForm:i("#item-editor-modal-feedback-property-bar .panel"),mediaManager:{appendContainer:"#mediaManager",browseUrl:t._url("files","ItemContent","taoItems"),uploadUrl:t._url("upload","ItemContent","taoItems"),deleteUrl:t._url("delete","ItemContent","taoItems"),downloadUrl:t._url("download","ItemContent","taoItems"),fileExistsUrl:t._url("fileExists","ItemContent","taoItems")}})),a
};return{get:function(){return r()},setOption:function(e,t){r().setOption(e,t)},setOptions:function(e){r().setOptions(e)}}}),define("normalize",[],function(){function e(e,i,a){if(e.match(s)||e.match(o))return e;e=r(e);var l=a.match(o),c=i.match(o);return!c||l&&l[1]==c[1]&&l[2]==c[2]?n(t(e,i),a):t(e,i)}function t(e,t){if("./"==e.substr(0,2)&&(e=e.substr(2)),e.match(s)||e.match(o))return e;var i=t.split("/"),n=e.split("/");for(i.pop();curPart=n.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function n(e,t){var n=t.split("/");for(n.pop(),t=n.join("/")+"/",i=0;t.substr(i,1)==e.substr(i,1);)i++;for(;"/"!=t.substr(i,1);)i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");
var a=e.split("/");for(out="";n.shift();)out+="../";for(;curPart=a.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var a=/([^:])\/+/g,r=function(e){return e.replace(a,"$1/")},o=/[^\:\/]*:\/\/([^\/])*/,s=/^(\/|data:)/,l=function(t,i,n){i=r(i),n=r(n);for(var a,o,t,s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;a=s.exec(t);){o=a[3]||a[2]||a[5]||a[6]||a[4];var l;l=e(o,i,n);var c=a[5]||a[6]?1:0;t=t.substr(0,s.lastIndex-o.length-c-1)+l+t.substr(s.lastIndex-c-1),s.lastIndex=s.lastIndex+(l.length-o.length)}return t};return l.convertURIBase=e,l.absoluteURI=t,l.relativeURI=n,l}),define("css",[],function(){if("undefined"==typeof window)return{load:function(e,t,i){i()
}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,n=!0;t[1]||t[7]?i=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?n=!1:t[4]&&(i=parseInt(t[4])<18);var a={};a.pluginBuilder="./css-builder";var r,o,s,l=function(){r=document.createElement("style"),e.appendChild(r),o=r.styleSheet||r.sheet},c=0,d=[],u=function(e){c++,32==c&&(l(),c=0),o.addImport(e),r.onload=h},h=function(){s();var e=d.shift();return e?(s=e[1],void u(e[0])):void(s=null)},p=function(e,t){if(o&&o.addImport||l(),o&&o.addImport)s?d.push([e,t]):(u(e),s=t);else{r.textContent='@import "'+e+'";';
var i=setInterval(function(){try{r.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},f=function(t,i){var a=document.createElement("link");if(a.type="text/css",a.rel="stylesheet",n)a.onload=function(){a.onload=function(){},setTimeout(i,7)};else var r=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==a.href)return clearInterval(r),i()}},10);a.href=t,e.appendChild(a)};return a.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},a.load=function(e,t,n){(i?p:f)(t.toUrl(e+".css"),n)},a}),define("css!taoQtiItemCss/qti",[],function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiCommonRenderer/renderers/config","css!taoQtiItemCss/qti"],function(e,t){return e.build(t.locations,t.name)
}),define("text",["module"],function(e){var t,i,n,a,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,h=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")
},createXhr:f.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=o[t];try{e=new ActiveXObject(i)}catch(n){}if(e){o=[i];break}}return e},parseName:function(e){var t,i,n,a=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(a="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,a){var r,o,s,l=t.xdRegExp.exec(e);return l?(r=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(r&&r!==i||o&&o.toLowerCase()!==n.toLowerCase()||(s||o)&&s!==a)):!0
},finishLoad:function(e,i,n,a){n=i?t.strip(n):n,f.isBuild&&(p[e]=n),a(n)},load:function(e,i,n,a){if(a.isBuild&&!a.inlineText)return void n();f.isBuild=a.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),s=i.toUrl(o),l=f.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void n():void(!c||l(s,d,u,h)?t.get(s,function(i){t.finishLoad(e,r.strip,i,n)},function(e){n.error&&n.error(e)}):i([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)}))},write:function(e,i,n){if(p.hasOwnProperty(i)){var a=t.jsEscape(p[i]);n.asModule(e+"!"+i,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,i,n,a,r){var o=t.parseName(i),s=o.ext?"."+o.ext:"",l=o.moduleName+s,c=n.toUrl(o.moduleName+s)+".js";
t.load(l,n,function(){var i=function(e){return a(c,e)};i.asModule=function(e,t){return a.asModule(e,c,t)},t.write(e,l,i,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var a=i.readFileSync(e,"utf8");0===a.indexOf("ï»¿")&&(a=a.substring(1)),t(a)}catch(r){n(r)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,i,n,a){var r,o=t.createXhr();if(o.open("GET",e,!0),a)for(r in a)a.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),a[r]);f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(){var t,a;4===o.readyState&&(t=o.status,t>399&&600>t?(a=new Error(e+" HTTP status: "+t),a.xhr=o,n(a)):i(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,e))
},o.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,a="utf-8",r=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),a)),l="";try{for(i=new java.lang.StringBuffer,n=s.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=s.readLine());)i.append(o),i.append(n);l=String(i.toString())}finally{s.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,o,s,l={};
r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(s,1,0,!1),o=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),o.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(i.available(),l),o.close(),i.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")
},buildMap={};return{load:function(e,t,i,n){!n.isBuild||n.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){n.isBuild?(buildMap[e]=t,i(t)):i(jsonParse(t))},i.error,{accept:"application/json"}):i(null)},normalize:function(e,t){return-1!==e.indexOf(CACHE_BUST_FLAG)&&(e=cacheBust(e)),t(e)},write:function(e,t,i){if(t in buildMap){var n=buildMap[t];i('define("'+e+"!"+t+'", function(){ return '+n+";});\n")}}}}),define("json!i18ntr/messages.json",function(){return{serial:"0c124291bca92f317a64c4b74ad54129",date:1412695021,version:"2.7",translations:{" has been deleted successfully":" a Ã©tÃ© supprimÃ© avec succÃ¨s."," has been installed":" a Ã©tÃ© installÃ©e."," next":" suivant"," of the instance ":" de l'instance"," requires a subgrid adapter":" requiert un adaptateur de sous-grille","%s (%s kb)":"%s (%s kb)","%s extension(s) to install.":"%s extension(s) Ã  installer.","(empty)":"(vide)","> Extension %s succesfully installed.":"> Extension %s installÃ©e avec succÃ¨s.","> Installation done.":"> Installation terminÃ©e.","A fatal error occured during the installation process.":"Une erreur fatale s'est produite pendant l'installation.","A joint initiative of CRP Henri Tudor and the University of Luxembourg":"Une collaboration du CRP Henri Tudor et de l'UniversitÃ© du Luxembourg","A similar resource has already been versioned":"Une ressource similaire est dÃ©jÃ  versionnÃ©e","Access Denied":"AccÃ¨s refusÃ©","Access denied. Please renew your authentication!":"AccÃ¨s refusÃ©. Veuillez renouveler votre authentification !",Actions:"Actions",Add:"Ajouter","Add / Edit lists":"Ajouter / Modifier les listes","Add a user":"Ajouter un utilisateur","Add grades":"Ajouter des niveaux","Add property":"Ajouter une propriÃ©tÃ©","add repository":"ajouter dÃ©pÃ´t","Add the source file.":" Ajoutez le fichier source.","Advanced Mode":"Mode avancÃ©",All:"Tout",all:"tout","All (the complete TAO Module)":"Tout (le module TAO au complet)","All data will be removed in ":"Toutes les donnÃ©es seront dÃ©truites dans ","All rights reserved.":"Tous droits rÃ©servÃ©s.","Allowed files types: ":"Types de fichiers acceptÃ©s : ","Allows the management of the repositories":"Permet la gestion des dÃ©pÃ´ts.","Alpha version":"Version alpha","An error occured during user deletion":"Une erreur est survenue durant la suppression de l'utilisateur",and:"et","Are you sure to delete the versioned resource?\nThe history will be lost as well.":"Ãtes-vous sÃ»r de vouloir supprimer la ressource versionnÃ©e ?\nL'historique sera Ã©galement perdu.","Assign User to role":"Assigner Utilisateur Ã  un rÃ´le",Author:"Auteur",Authoring:"Ãditeur ","Available Extensions":"Extensions disponibles","Beta version":"Version bÃªta",Browse:"Naviguer","Build processes to drive activities into a workflow.":"CrÃ©er des processus pour assembler des activitÃ©s dans un workflow.",Calendar:"Calendrier",Cancel:"Annuler","Change password":"Changer le mot de passe","Change the password":"Modifier le mot de passe","Check All":"Cocher Tout","Check all":"Cocher tout","Choose export format":"Format d'export","Choose import format":"Format d'import",Class:"Classe ","class selected":"classe sÃ©lectionnÃ©e","Click the Save button to confirm deletion.":"Cliquer sur le bouton Enregistrer pour confirmer la suppression.","Close tab":"Fermer l'onglet",Column:"Colonne","Combine a selection of items into tests.":"Combiner une sÃ©lection d'items en tests.",Comment:"Commentaire","Commit message : ":"Message de modification : ",Confirm:"Confirmer",Create:"CrÃ©er","Create a list":"CrÃ©er une liste","Create and design items and exercises.":"Concevoir des items et exercices.","Create instance of ":"CrÃ©er une instance de ","Create items, manage item and test banks, organize cohorts and deliveries, prepare reports, set up workflows.":"CrÃ©ez des items, gÃ©rez des banques d'items et de tests, organisez des groupes et des passations, prÃ©parez des rapports, mettez en place des workflows.",CSV:"CSV","CSV Options":"Options CSV","Current class + Subclasses":"Classes et sous-classes courantes","Current class only":"Classe courante seulement","Current language":"Langue courante","Data imported successfully":"DonnÃ©es importÃ©es avec succÃ¨s.","Data Lang.":"Langue des donnÃ©es","Data Language":"Langue des donnÃ©es","Data language":"Langue des donnÃ©es",Date:"Date",day:"jour",days:"jours","Define the default values":"DÃ©finir les valeurs par dÃ©faut",Delete:"Supprimer","delete":"supprimer","Delete property":"Supprimer la propriÃ©tÃ©","Delete user":"Supprimer l'utilisateur",Deliveries:"Passations","Delivery results":"RÃ©sultats de la passation","DEMO Sandbox":"Bac Ã  sable DÃMO ","Do you wish to install the following extension(s):\n%s?":"Souhaitez-vous installer le(s) extension(s) suivante(s) :\n%s ?","Don't set":"Ne pas insÃ©rer",Download:"TÃ©lÃ©charger","Download content":"TÃ©lÃ©charger le contenu",duplicate:"Dupliquer","e-mail":"courriel",Edit:"Modifier",edit:"Modifier","Edit a user":"Ãditer un utilisateur","Edit Comment":"Ãditer le commentaire","Edit Instance":"Modifier Instance","Edit property into parent class ":"Ãditer une propriÃ©tÃ© dans la classe parente ","Edit user":"Modifier l'utilisateur",element:"Ã©lÃ©ment",Element:"ÃlÃ©ment","element deleted":"Ã©lÃ©ment supprimÃ©",Error:"Erreur","Error during file import":"Erreur pendant l'import du fichier","Exclusive (OR)":"Exclusif (OU)","export":"exporter",Export:"Exporter","Export ":"Export","Extension ":"L'extension ","Extensions manager":"Gestionnaire d'extensions","Field delimiter":"SÃ©parateur de champ","Field encloser":"ClÃ´ture de champ",File:"Fichier","File name":"Nom de fichier","File path":"Chemin du fichier","File repository":"DÃ©pÃ´t de fichiers","File revision":"RÃ©vision du fichier","File sources":"Sources du fichier",Filter:"Filtrer","Filter results":"Filtrer les rÃ©sultats","Filtering mode":"Mode de filtrage",Filters:"Filtres",Finish:"Finir","First Name":"PrÃ©nom","First row column names":"Noms de colonne en premiÃ¨re ligne","Generating cache...":"GÃ©nÃ©ration du cache...","Go Back":"Revenir","Group test takers according to global features and classifications.":"Rassembler les participants selon leurs caractÃ©ristiques.",Groups:"Groupes",hour:"heure",hours:"heures",Import:"Importer","Import ":"Import","Import failed":"L'import a Ã©chouÃ©","Inclusive (AND)":"Inclusif (ET)","Inspect Results":"Examen des rÃ©sultats",Install:"Installer","Installation done.":"Installation terminÃ©e.","Installation...":"Installation...","Installed Extensions":"Extensions installÃ©es","Installing extension %s...":"Installation de l'extension %s...","Instance saved":"Instance enregistrÃ©e","Interface Language":"Langue de l'interface","Interface language":"Langue de l'interface","Invalid date range":"PÃ©riode invalide","Invalid field length":"La longueur du champ est invalide","Invalid field range":"Le rang du champ est invalide","Invalid file size":"Taille du fichier invalide","Invalid file type!":"Type de fichier invalide","Invalid login or password. Please try again.":"Identifiant ou mot de passe invalide. Veuillez rÃ©essayer.",Items:"Items","Javascript is required to run this software. Please activate it in your browser.":"Ce logiciel nÃ©cessite Javascript. Veuillez l'activer dans votre navigateur.",Label:"LibellÃ©",Language:"Langue","Language not supported":"Langue non supportÃ©e","Last Name":"Nom",List:"Liste","List - Multiple choice - Check box":"Liste - Choix multiple - Case Ã  cocher","List - Single choice - Drop down":"Liste - Choix unique - Liste dÃ©roulante","List - Single choice - Radio button":"Liste - Choix multiple - Bouton radio","list deleted":"liste supprimÃ©e","List Options":"Options de la liste","list saved":"liste sauvegardÃ©e","list the users":"lister les utilisateurs","List values":"Liste des valeurs",Lists:"Listes",Loaded:"ChargÃ©","Loaded at Startup":"ChargÃ© au DÃ©marrage",Local:"Local","Local Data (the local namespace containing only the data inserted by the users)":"DonnÃ©e locales (l'espace de nom local comprenant seulement les donnÃ©es insÃ©rÃ©es par les utilisateurs)","Log in":"Se connecter","Log Out":"Se dÃ©connecter","Logged in as:":"ConnectÃ© en tant que : ",Login:"Identifiant","Login available":"Identifiant disponible","Login failed":"Connexion Ã©chouÃ©e",Mail:"Courriel","Manage campaigns":"GÃ©rer les campagnes","Manage content of the property ":"GÃ©rer le contenu de la propriÃ©tÃ© ","Manage data list":"Gestion des listes","Manage groups":"Gestion des groupes","Manage items":"Gestion des items","Manage processes":"Gestion des processus","Manage Results":"Gestion des rÃ©sultats","Manage roles":"GÃ©rer les rÃ´les","Manage Roles and apply them to users.":"GÃ¨re des RÃ´les et les applique aux utilisateurs.","Manage services":"Gestion des services","Manage test takers":"Gestion des participants","Manage tests":"Gestion des tests","Manage the versioned content : ":"GÃ©rer le contenu versionnÃ© : ","Manage users":"GÃ©rer les utilisateurs","Manage Versioned File":"GÃ©rer les fichiers versionnÃ©s","Map the properties to the CSV columns":"Choisissez les propriÃ©tÃ©s relatives aux colonnes CSV","maximum value: ":"Valeur maximale :","Media Manager":"MÃ©diathÃ¨que","Meta Data":"MÃ©ta-donnÃ©es","meta data":"mÃ©ta-donnÃ©es","minimum value: ":"Valeur minimale :",minute:"minute",minutes:"minutes","Monitor processes":"Suivi des processus",move:"DÃ©placer","Move to":"DÃ©placer vers","Moving this element will remove the following properties:":"Le dÃ©placement de cet Ã©lÃ©ment va supprimer les propriÃ©tÃ©s suivantes :","Multiple values delimiter":"DÃ©limiteur de valeurs multiples","must be after or the same as: ":"doit Ãªtre aprÃ¨s ou la mÃªme que :","must be after: ":"doit Ãªtre aprÃ¨s :","must be before or the same as: ":"doit Ãªtre avant ou la mÃªme que","must be before: ":"doit Ãªtre avant :","My settings":"Mes paramÃ¨tres","My settings (%s)":"Mes paramÃ¨tres (%s)",Name:"Nom",Namespaces:"Espaces de nom","new":"nouveau","new class":"CrÃ©er classe","New element":"Nouvel Ã©lÃ©ment","New password":"Nouveau mot de passe","new role":"nouveau rÃ´le",Next:"Suivant",No:"Non","No extensions available.":"Pas d'extension disponible.","no file":"pas de fichier","no label":"sans Ã©tiquette","No result found":"Aucun rÃ©sultat n'a Ã©tÃ© trouvÃ©","Nothing imported":"Aucune donnÃ©e n'a Ã©tÃ© importÃ©e","Nothing to install !":"Rien Ã  installer !","Number of elements":"Nombre d'Ã©lÃ©ments","Old Password":"Ancien mot de passe",Ontology:"Ontologie",Open:"Ouvrir","Option instanceUri is not an option !!":"L'option instanceUri n'est pas une option !!","Option ownerUri is not an option !!":"L'option ownerUri n'est pas une option !!","Option propertyUri is not an option !!":"L'option propertyuri nest pas une option !!",Options:"Options",Password:"Mot de passe","Password *":"Mot de passe *","Password changed":"Mot de passÃ© modifiÃ©","Passwords are not matching":"Les mots de passe ne correspondent pas","Please confirm deletion":"Veuilez confirmer la suppression","Please confirm property deletion!":"Veuillez confirmer la suppression de la propriÃ©tÃ©","Please confirm user deletion":"Veuillez confirmer la suppression de l'utilisateur.","Please confirm you want to delete this list element.":"Veuillez confirmer la suppression de cet Ã©lÃ©ment de la liste.","Please confirm you want to delete this list. This operation is not reversible.":"Veuillez confirmer votre dÃ©cision de supprimer cette liste. Cette opÃ©ration est irrÃ©versible.","Please report bugs, ideas, comments, any feedback on the TAO Forge":"Merci de rapporter vos bugs, idÃ©es, commentaires<br/>ou toute rÃ©action sur la Forge TAO.","Please upload an RDF file.":"Veuillez tÃ©lÃ©verser un fichier RDF.","Prepare, publish deliveries sessions.":"PrÃ©parer et publier des sessions de passations de test.","Preparing installation...":"PrÃ©paration de l'installation...","Process authoring":"Ãditeur de processus",Processes:"Processus",Property:"PropriÃ©tÃ©",RDF:"RDF","Record and manage test takers.":"Enregistrer et gÃ©rer les participants.",Recursive:"RÃ©cursivitÃ©",Remove:"Supprimer","Remove content":"Supprimer le contenu","remove repository":"supprimer dÃ©pÃ´t",Rename:"Renommer","Repeat new password":"RÃ©pÃ©tition du nouveau mot de passe","Repeat password *":"RÃ©pÃ©ter le mot de passe","Repository saved":"DÃ©pÃ´t enregistrÃ©","Repository saved and disabled":"DÃ©pÃ´t enregistrÃ© et dÃ©sactivÃ©","Repository saved and enabled":"DÃ©pÃ´t enregistrÃ© et activÃ©","Repository saved, but unable to disable":"DÃ©pÃ´t enregistrÃ© mais impossible Ã  dÃ©sactiver","Repository saved, but unable to enable":"DÃ©pÃ´t enregistrÃ© mais impossible Ã  activer",Requires:"NÃ©cessite","Resource saved":"Ressource enregistrÃ©e",Results:"RÃ©sultats","Revision control":"ContrÃ´le de rÃ©vision","Right click the tree to manage your lists":"Utilisez le clic droit pour gÃ©rer vos listes","Role saved":"RÃ´le enregistrÃ©",Roles:"RÃ´les","Roles library":"BibliothÃ¨que de rÃ´les",Save:"Enregistrer",Search:"Rechercher",search:"recherche","Search results":"RÃ©sultats de la recherche",select:"choisir",Select:"Choisir","Select a language":"SÃ©lectionner un langage","Select the element destination":"Choisir l'Ã©lÃ©ment de destination",selected:"sÃ©lectionnÃ©","Selected file:":"Fichier sÃ©lectionnÃ© :","Selection saved successfully":"SÃ©lection enregistrÃ©e avec succÃ¨s",Settings:"RÃ©glages","Settings updated":"RÃ©glages mis Ã  jour","Simple Mode":"Mode simple","Start upload":"DÃ©marrer le tÃ©lÃ©chargement","Supported export formats":"Formats d'export supportÃ©s","System Settings":"ParamÃ¨tres systÃ¨me","TAO Back Office":"Outils d'administration TAO","TAO Delivery Server":"Serveur de Passation TAO","TAO Home":"Menu principal TAO",Tests:"Tests","Text - Long - Box":"Texte - Long - BoÃ®te","Text - Long - HTML editor":"Texte - Long - Ãditeur HTML","Text - Short - Field":"Texte - Long - Champ","The column ":"La colonne ","the file was not uploaded successfully":"le fichier n'a pas Ã©tÃ© tÃ©lÃ©versÃ© correctement","The format of this field is not valid.":"Le format de ce champ est invalide.","The uploaded file is too large":"Le fichier tÃ©lÃ©chargÃ© est trop volumineux","The value of this field must be a valide date format, e.g. YYYY-MM-DD":"La valeur de ce champs doit Ãªtre formatÃ©e telle une date valide, ex. AAAA-MM-JJ","The value of this field must be an integer":"La valeur de ce champ doit Ãªtre un nombre entier.","The value of this field must be numeric":"La valeur de ce champ doit Ãªtre numÃ©rique","This field is required":"Ce champ est requis.","This field is too long":"Ce champ est trop long.","This field is too short":"Ce champ est trop court.","This Login is already in use":"Cet identifiant est dÃ©jÃ  utilisÃ©","This role is still given to one or more users. Please remove the role to these users first.":"Ce rÃ´le est encore affectÃ© Ã  un ou plusieurs utilisateurs. Veuillez d'abord retirer le rÃ´le pour ce(s) utilisateur(s).","This should equal ":"Cela devrait valoir ","This should not equal ":"Cela ne devrait pas valoir ",Translate:"Traduire","Translate to":"Traduire en","Translation parameters":"ParamÃ¨tres de la traductions","Translation saved":"Traduction enregistrÃ©e",Type:"Type","UI Lang.":"Langue Interface","Unable to change passwords in demo mode":"Impossible de changer les mots de passe en mode dÃ©monstration","Uncheck all":"DÃ©cocher tout","Uncheck All":"DÃ©cocher tout","Unknown Error":"Erreur Inconnue",Upload:"TÃ©lÃ©verser","Upload a new content":"TÃ©lÃ©verser un nouveau contenu","Upload File":"TÃ©lÃ©verser le fichier","Upload the file to version":"TÃ©lÃ©verser le ficher Ã  la version","Use default value":"Utiliser la valeur par dÃ©faut","Use the * character to replace any string":"Utilisez le caractÃ¨re (*) pour remplacer n'importe quelle chaÃ®ne",User:"Utilisateur","User added":"Utilisateur ajoutÃ©","User deleted successfully":"Utilisateur supprimÃ© avec succÃ¨s.","User Management":"Gestion des utilisateurs","User saved":"Utilisateur enregistrÃ©","User Settings":"ParamÃ¨tres Utilisateur",Users:"Utilisateurs",Version:"Version",Versioning:"Gestion des versions","View and format the collected results.":"Visualiser et formater les donnÃ©es collectÃ©es.","Welcome to TAO!":"Bienvenue dans TAO !",Yes:"Oui","You cannot modify this property":"Cette propriÃ©tÃ© ne peut pas Ãªtre modifiÃ©e.","An error occured while saving the item":"Une erreur est survenue pendant la sauvegarde de l'item","As the owner of this resource, you may release the lock":"En tant que propriÃ©taire de la ressource, vous pouvez la dÃ©verrouiller.",Back:"Retour","Class saved":"Classe enregistrÃ©e","clean up":"nettoyer",close:"fermer","Download item content":"TÃ©lÃ©charger le contenu de l'item","Edit Item":"Editer une question","Edit item":"Modifier un item","Edit item class":"Ãdition de la classe item","import":"Importer","Item Locked":"Item verrouillÃ©","Item Locked:":"Item verrouillÃ© :","Item saved":"Item enregistrÃ©","Item saving failed":"La sauvegarde de l'item a Ã©chouÃ©","Item successfully saved":"L'item a Ã©tÃ© enregistrÃ© avec succÃ¨s.","Items library":"Banque d'items",lists:"Listes","Lock Owner:":"PropriÃ©taire du verrou :","Locking Date:":"Date de verrouillage :","new item":"CrÃ©er item","No item type selected for the current item.":"Pas de modÃ¨le d'item sÃ©lectionnÃ© pour cet item.","Not yet available":"Pas encore disponible","Please contact the owner of the resource to unlock it":"Veuillez contacter le propriÃ©taire de la ressource pour la dÃ©verrouiller.","Please select first the item type!":"Veuillez sÃ©lectionner d'abord un type d'item !",preview:"AperÃ§u",Preview:"AperÃ§u ","PREVIEW BOX":"AperÃ§u","Preview Console":"Moniteur de prÃ©visualisation",ReleaseLock:"DÃ©verrouiller","show/hide":"montrer/cacher","The Items module enables the creation and design of items and exercises.":"Le module <i>Items</i> permet la crÃ©ation et le design d'items et d'exercices.","This item is currently being edited and has been locked":"Cet item est en cours d'Ã©dition et a Ã©tÃ© verrouillÃ©.","Validation has failed":"La validation a Ã©chouÃ©","-- Any kind of file --":"-- Tout type de fichier --","A choice must be selected":"Une option doit Ãªtre sÃ©lectionnÃ©e","A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.":'Un "rubric bloc" correspond Ã  une partie d\'une question reprÃ©sentant les instructions communes que diffÃ©rents acteurs peuvent voir concernant cet item. Les "rubric block" ne peuvent pas contenir d\'interaction.',"Actual size":"Taille courante","Adapt to item size":"Adapter Ã  la taille de l'item","Adapt to screen size":"Adapter Ã  la taille de l'Ã©cran","Add a modal feedback":"Ajouter un retour modal","Add a QTI XML file":"Ajouter un fichier QTI XML","Add a zip file containing QTI items":"Ajouter un fichier zip contenant des items QTI","Add another option":"Ajouter une autre option","Add choice":"Ajouter un/des choix","Add else feedback":"Ajouter un retour alternatif","Add new pairs":"Ajouter de nouvelles paires","Add Style Sheet":"Ajouter une feuille de style","Alignment (optional)":"Alignement (optionnel)","Allowed number of associations":"Nombre d'associations permises","Allowed number of choices":"Nombre d'options permise","Allowed number of matches":"Nombre d'associations permises","Allowed number of uses":"Nombre d'utilisations permises","An error occured at the level of the QTI model.":"Une erreur est survenue au niveau du modÃ¨le QTI.","An error occured while extracting the ZIP archive representing the IMS Content Package.":"Une erreur est apparue pendant l'extraction de l'archive ZIP reprÃ©sentant le contenu d'un paquet IMS.","An error occured while parsing IMS QTI data.":"Une erreur est survenue pendant la lecture des donnÃ©es IMS QTI.","An unexpected error occured during the import of the IMS QTI Item Package.":"Une erreur inattendue est survenue pendant l'import du paquet d'items IMS QTI. ","An unexpected error occured while dealing with Response Processing.":"Une erreur inattendue est survenue au niveau du traitement des rÃ©ponses.",Appearance:"Aspect",Associate:"Association","Associate Interaction":"Associer Interaction","association pairs":"Paires","audio/mpeg":"audio/mpeg",autostart:"dÃ©marrage automatique","Background color":"Couleur d'arriÃ¨re-plan",Block:"Bloc",block:"bloc","Border color":"Couleur des bordures","Browse your computer and select the appropriate file.":"Naviger sur l'ordinateur et sÃ©lectionner le fichier appropriÃ©.","Browse...":"Naviguer...","Change the width of the item. By default the item has a width of 100% and adapts to the size of any screen. The maximal width is by default 1024px - this will also change when you set a custom with.":"Changer la largeur d'une question. Par dÃ©faut, la question a une largeur de 100% et s'adapte Ã  la taille de n'importe quel Ã©cran. La largeur maximale est de 1024px par dÃ©faut (ceci changera Ã©galement lorsque l'on spÃ©cifie une largeur explicite).",Choice:"Choix","Choice Interaction":"Choix de l'Interaction","Choice Properties":"Choisir les propriÃ©tÃ©s",choices:"Choix",Choices:"Choix","Click again to remove":"Clicker Ã  nouveau pour effacer","Click to display interaction widget":"Clicker pour afficher le widget d'interaction",Close:"Fermer",correct:"exact",Correct:"Correct","Create assocations and fill the score in the form below":"CrÃ©er des associations et mentionner les scores dans le formulaire ci-dessous","Create gap":"CrÃ©er une boÃ®te","Create hottext":"CrÃ©er un hottext","CSV file":"fichier CSV","Currently conversion from MathML to LaTeX is not available. Editing MathML here will have the LaTex code discarded.":"La conversion de MathML en LaTeX n'est pas disponible pour l'instant.","Custom Response Processing Mode":'Mode "Custom Response Processing"',"default":"par dÃ©faut",Default:"DÃ©fault","Define correct response":"DÃ©finir la rÃ©ponse correcte","define prompt":"definir l'invite","Define the correct response.":"DÃ©finir la rÃ©ponse correcte","Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.":"PrÃ©ciser si une option doit Ãªtre sÃ©lectionnÃ©e par le candidat pour former une rÃ©ponse valide.","Define whether the item should be time dependent on delivery.":"PrÃ©ciser si le temps de rÃ©ponse Ã  la question doit Ãªtre contraint lors de la passation.","Defined width":"DÃ©finir la largeur","Delete else statement":"DÃ©finir la clause alternative (else)","Delete this modal feedback":"Effacer le retour modal",Description:"Description","Desktop preview":"Portable","Disable this stylesheet temporarily":"DÃ©sactiver temporairement la feuille de style",Display:"Afficher","Display larger editor":"Afficher un Ã©diteur plus grand",done:"terminÃ©","Donât show this again!":"Ne plus afficher ceci!","Download this stylesheet":"TÃ©lÃ©charger la feuille de style","Draw a circle on the image":"Dessiner un cercle sur l'image","Draw a free form on the image":"Dessiner une forme libre sur l'image","Draw a rectangle on the image":"Dessiner un rectangle sur l'image","Draw an ellipsis on the image":"Dessiner une ellipse sur l'image","Drop the target to select a point":"DÃ©poser la cible au point sÃ©lectionÃ©","e.g. 13":"p. ex. 13","e.g. 960":"p. ex. 960","edit choices":"Ã©diter une option","Edit math expression using LaTex type setting system, e.g. e^{i \\pi} = -1":"Editer une expression mathÃ©matique en format LaTeX, p. ex. e^{i \\pi}=-1","Edit math expression using MathML":"Editer l'expression en MathML","Edit stylesheet label":"Editer l'Ã©tiquette de la feuille de style","Edit Widget":"Editer le widget","Editing Mode":"Mode Ã©dition","Editing this element is not supported currently.":"L'edition de l'Ã©lÃ©ment n'est pas supportÃ©e pour l'instant.","Element Properties":"PropriÃ©tÃ©s de l'Ã©lÃ©ment",elements:"Ã©lÃ©ments","End Attempt":"Essai de fin","Enlarge font size":"Agrandir la taille de police","Export QTI 2.1 Package":"Exporter le paquet QTI 2.1","Extended Text":"Texte Ã©tendu","Extended Text Interaction":"Interaction texte Ã©tendu","Failed to save item":"L'enregistrement de la question a Ã©chouÃ©",Feedback:"Retour","File Upload":"TÃ©lÃ©charger le fichier","Flash video":"vidÃ©o en Flash","Font family":"Type de police","Font size":"Taille de police",Format:"Format",Gap:"BoÃ®te","Gap Match":"Remplir la boÃ®te","Gap Match Interaction":"Interaction Gap Match",Gaps:"BoÃ®tes","GIF image":"Image GIF","Graphic Associate":"Association graphique","Graphic Associate Interaction":"Interaction Graphic Associate","Graphic Gap":"BoÃ®te graphique","Graphic Gap Interaction":"Interaction BoÃ®te graphique","Graphic Order":"Ordonnancement graphique","Graphic Order Interaction":"Interaction d'ordre graphique","he maximum number of associations that the candidate is allowed to make.":"Le nombre maximum d'associations que le candidat est autorisÃ© de faire.",Height:"Hauteur","Height (optional)":"Hauteur (optionnelle)",Hotspot:"Hotspot","Hotspot Interaction":"Interaction hotspot",Hottext:"Hottext","Hottext Interaction":"Interaction hottext","How the math expression should be displayed.":"Mode d'affichage de l'expression mathÃ©matique","How the math expression should be edited":"Mode d'Ã©dition de l'expression mathÃ©matique","identical pair already exists":"Des pairs identiques existent dÃ©jÃ ",Identifier:"Identifiant",identifier:"identifiant","If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.":"Si il est spÃ©cifiÃ©, le masque dÃ©fini par une expression rÃ©guliÃ¨re la syntaxe que doit respecter le candidat pour que sa rÃ©ponse soit valide. La plus grande attention est de rigueur afin d'assurer que le format demandÃ© soit compris clairement par le candidat, particuliÃ¨rement lorsque la vÃ©rification de la validitÃ© de la rÃ©ponse est requise pour progresser dans le test. Ceci peut Ãªtre assurÃ© en fournissant un exemple de rÃ©ponse dans l'invite.","If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.":"Si l'interaction textuelle est attachÃ©e Ã  une variable de rÃ©ponse de type numÃ©rique, alors l'attribut de base doit Ãªtre utilisÃ© pour dÃ©terminer la base numÃ©rique dans laquelle la valeur fournie par le candidat doit Ãªtre interprÃ©tÃ©e. ","Import a QTI 2.X Package":"Importer un paquet QTI 2.X","Import QTI 2.X Item":"Importer un paquet QTI 2.X","In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.":"Dans le rendu visuel, les interactions textuelles sont typiquement reprÃ©sentÃ©es par des boites vides dans lesquelles le candidat Ã©crit sa rÃ©ponse. Les moteurs de test doivent utiliser cet attribut (si il est spÃ©cifiÃ©) plutÃ´t que leur champs de texte par dÃ©faut.",incorrect:"incorrect",inline:"inline","Inline Choice":"Choix inline","Inline Choice Interaction":"Interaction 'choix en ligne'","Inline interactions need to be inserted into a text block.":"Les interactions inline doivent Ãªtre insÃ©rÃ©es dans un bloc de texte.","Interaction Background":"ArriÃ¨re-plan de l'interaction","Interaction Properties":"PropriÃ©tÃ©s de l'interaction","invalid identifier":"identifiant invalide","Invalid pattern":"Motif invalide","Is this choice the correct response?":"Cette option est-elle la rÃ©ponse correcte?","Is this pair the correct response?":"Cette pair est-elle la rÃ©ponse correcte?","Item creator":"Editeur de question","Item Properties":"PropriÃ©tÃ©s de la question","Item width":"Largeur de la question","JPEG image":"Image JPEG",Landscape:"Paysage",LaTex:"LaTex",Latex:"Latex","leave empty":"laisser vide",left:"gauche",loop:"boucler","Lower Bound":"Borne infÃ©rieure","Mapping default":"Correspondance par dÃ©faut",Match:"Correspondance","Match Interaction":"Interaction Correspondance",MathML:"MathML",Max:"Max","Maximal score for this interaction.":"Score maximum pour cette interaction.","Maximum choices reached":"Nombre maximum d'options sÃ©lectionnÃ©es","Maximum number of choices reached.":"Le nombre maximum permis est atteint.",Media:"Media","Media file path or YouTube video address":"Chemin du fichier mÃ©dia ou adresse d'une video YouTube","Media Interaction":"Interaction MÃ©dia","Microsoft Excel file":"Fichier Microsoft Excel","Microsoft Powerpoint file":"Fichier Microsoft powerpoint","Microsoft Word file":"Fichier Microsoft Word","Mime type":"Mime type","Mime Type":"Mime Type","MIME-type":"MIME-type",Min:"Min","Minimal  score for this interaction.":"Score minimum pour cette interaction.","Mobile preview":"Mobile","Modal feedback is shown to the candidate directly following response processing.":"Le retour modal est affichÃ© au candidat directement aprÃ¨s le traitement de la rÃ©ponse.","Modal Feedback Prop.":"PropriÃ©tÃ© du retour modal.","Modal Feedbacks":"Retours modaux","MP4 video":"vidÃ©o MP4","MPEG video":"vidÃ©o MPEG","new option":"Nouvelle option","no configuration property needed":"pas de propriÃ©tÃ© de configuration requise","No file selected":"Pas de fichier sÃ©lectionnÃ©","No Items could be imported from the given IMS QTI package.":"Aucune question n'a pu Ãªtre importÃ©e du paquet IMS QTI.","No value set":"Aucune valeur dÃ©finie","None defined yet.":"Pas encore dÃ©fini.","Number of associations":"Nombre d'associations","Number of choices":"Nombre d'options","one association pair":"une paire",Order:"Ordre","Order Interaction":"Interaction Ordre","Pair scoring":"Donner un score aux paires","PDF file":"Fichier PDF","Plain text":"Texte non-fomatÃ©","Please define association pairs and their scores below.":"DÃ©finir les paires et leur score.","Please define the correct association pairs below.":"DÃ©finir les paires correctes ci-dessous.","Please define the correct order in the box to the right.":"DÃ©finir l'ordre correct dans la boÃ®te de droite.","Please define the correct response and the score below.":"DÃ©finir la rÃ©ponse correcte et le score ci-dessous.","Please define the correct response below.":"DÃ©finir la rÃ©ponse correcte ci-dessous.","Please define the correct response using the slider.":"DÃ©finit la rÃ©ponse correcte en faisant glisser le bouton.","Please enter the score for the given hottexts.":"Entrer les scores associÃ©s aux hottexts.","Please fill the gap with the correct choices below.":"DÃ©poser correctement les options dans les boÃ®tes ci-dessous.","Please fill the gap with the correct choices.":"DÃ©poser correctement les options dans les boÃ®tes.","Please fill the gap with the images below, then edit the score for each gap/image pair.":"DÃ©poser correctement les images dans les boÃ®tes, et Ã©diter le score pour chaque paire.","Please fill the gap with the texts below, then edit the score for each pair.":"DÃ©poser correctement les textes dans les boÃ®tes et Ã©diter les scores de chaque paire.","Please order the choices below to set the correct answer":"Ordonner correctement les option ci-dessous pour spÃ©cifier la rÃ©ponse attendue","Please select the correct hotspot choices below.":"SÃ©lectionner les hotspot corrects ci-dessous.","Please select the correct hottext choices below.":"SÃ©lectionner les hottext corrects ci-dessous.","Please set the correct associations by linking the choices.":"DÃ©finir les associations attendues en les reliant entre elles.","Please the score of each hotspot choice.":"DÃ©finir le score de chaque hotspot","Please type the correct response below.":"Entrer la rÃ©ponse correcte ci-dessous.","PNG image":"Image PNG",Portrait:"Portrait","Pre-formatted text":"Texte pre-formattÃ©","Preparing CSS, please waitâ¦":"Feuille de style en prÃ©paration, patientez...",Print:"Imprimer","QTI Item":"Item QTI","QTI Package":"Paquet QTI","QTI Package 2.0":"Paquet QTI 2.0","QTI Package 2.1":"Paquet QTI 2.1",Question:"Question","Quick Preview":"PrÃ©visualisation rapide","Quicktime video":"VidÃ©o Quicktime","Reduce font size":"RÃ©duire la taille de police",remove:"retirer","Remove custom background color":"Retourner Ã  la couleur d'arriÃ¨re-plan par dÃ©faut","Remove custom border color":"Retourner Ã  la couleur des bordures par dÃ©faut","Remove custom font family":"Retourner au type de police par dÃ©faut","Remove custom font size":"Retourner Ã  la taille de police par dÃ©faut","Remove custom item width":"Retourner Ã  la largeur de question par dÃ©faut","Remove custom text color":"Retourner Ã  la couleur du texte par dÃ©faut","Remove Message":"Supprimer le message","Remove pair":"Supprimer la paire","Remove the selected shape":"Supprimer la forme sÃ©lectionnÃ©e","Remove this message":"Supprimer ce message","Remove this stylesheet":"Supprimer cette feuille de style",required:"NÃ©cessaire",Response:"RÃ©ponse","Response identifier":"Identifiant de rÃ©ponse","Response processing":"Traitement de la rÃ©ponse","Response Properties":"PropriÃ©tÃ©s de la rÃ©ponse",right:"droit","Rollback on...":"RÃ©tablir quand...",Rubric:"Rubrique","Rubric Block":"Bloc de rubrique","Scale ":"Echelle",score:"score",Score:"Score","Score range":"Gamme du score","Score value":"Valeur du score","Select a ":"SÃ©lectionner un ","select a choice":"choisir une option","Select an image first":"SÃ©lectionner d'abord une image","Select an image first.":"SÃ©lectionner d'abord une image.","Select an image.":"SÃ©lectionner une image.","Select another area to complete the association":"SÃ©lectionner une autre zone pour terminer l'association","select correct choice":"SÃ©lectionner une option correcte","Select image":"SÃ©lectionner une image","Select media":"SÃ©lectionner un mÃ©dia","Select media file":"SÃ©lectionner un fichier mÃ©dia","Select Point":"SÃ©lectionner un point","Select Point Interaction":"SÃ©lectionnez le point d'interaction","Select the area to add an image":"SÃ©lectionner une zone Ã  ajouter Ã  l'image","Select the way the response of your interaction should be processed":"SÃ©lectionner le mode de traitement souhaitÃ© de votre rÃ©ponse","Select this area":"SÃ©lectionner cette zone","Select this area to start an association":"sÃ©lectionner cette zone pour dÃ©buter une paire","Set the score for this response":"DÃ©finir le score pour cette rÃ©ponse","Shuffle choices":"MÃ©langer les choix","Size and position":"Taille et position",Slider:"GlissiÃ¨re","Slider Interaction":"Interaction Slider","some text ...":"un texte ...",Step:"Ãtape","Style Editor":"Editeur de style","Style Sheet <b>%s</b> removed<br> Click <i>Add Style Sheet</i> to re-apply.":"La feuille de style <b>%s</b> a Ã©tÃ© retirÃ©e<br> Clicker <i>Ajouter une feuille de style</i> pour appliquer Ã  nouveau.","Style Sheet Manager":"Gestionnaire de feuilles de style","SVG image":"Image SVG","Table headings":"En-tÃªte de tableau","TAO default styles":"Styles TAO par dÃ©faut","Text Block":"Block de texte","Text Block Properties":"PropriÃ©tÃ©s du block de texte","Text color":"Couleur du texte","Text Entry":"Champ de texte","Text Entry Interaction":"Interaction textuelle","The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).":"L'attribut d'auto-dÃ©marrage spÃ©cifie si l'objet mÃ©dia doit commencer immÃ©diatement aprÃ¨s que le candidat ait commencÃ© la session de l'item (marquÃ©) ou si l'objet mÃ©dia doit dÃ©buter sous le contrÃ´le du candidat (non-marquÃ©).","The default value from the target set to be used when no explicit mapping for a source value is given.":"La valeur par dÃ©faut parmi les valeurs cibles qui doit Ãªtre utilisÃ©e lorsqu'aucune correspondance explicite n'a Ã©tÃ© donnÃ©e pour une valeur source.","The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.":"L'attribut longueur attendue donne une indication au candidat a propos de la longueur moyenne de la rÃ©ponse attendue, mesurÃ©e en nombre de caractÃ¨res. Ceci ne constitue pas une contrainte de validitÃ©.","The file path to the image.":"Le chemin vers le fichier de l'image.","The file path to the media.":"Le chemin vers le mÃ©dia.","the following Qti Element is currently not supported in TAO":"cet Ã©lÃ©ment QTI n'est pour le moment pas supportÃ© par TAO","The highlighted choice cannot be associated more than %d time(s).":"L'option mise en Ã©vidence ne peut Ãªtre associÃ©e plus de %d fois.",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.':'L\'identifiant de l\'option. Il ne doit Ãªtre utilisÃ© par aucune autre option ou variable dans un item. Un identifiant est une chaÃ®ne de caractÃ¨res qui commence par une lettre ou un soulignÃ© ("_") et qui contient seulement des lettres, des soulignÃ©s, des tirets ("-"), des points ("."), des nombres, des "CombiningChars and Extenders".','The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.':'L\'identifiant d\'une option. Il ne peut Ãªtre utilisÃ© par aucune autre variable de rÃ©ponse ou d\'item. Un identifiant est une chaÃ®ne de caractÃ¨res qui commence par une lettre ou un soulignÃ© ("_") et qui contient seulement des lettres, des soulignÃ©s, des tirets ("-"), des points ("."), des nombres, des "CombiningChars and Extenders".','The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.':'L\'identifiant du retour modal. Il ne peut Ãªtre utilisÃ© par aucune autre variable de rÃ©ponse ou d\'item. Un identifiant est une chaÃ®ne de caractÃ¨res qui commence par une lettre ou un soulignÃ© ("_") et qui contient seulement des lettres, des soulignÃ©s, des tirets ("-"), des points ("."), des nombres, des "CombiningChars and Extenders".','The IMS Manifest file could not be validated:\n%s", implode($eStrs, "\n':'Le manifeste IMS n\'a pas pu Ãªtre validÃ©:\n%s",implode($eStrs, "\n',"The IMS QTI Item could not be imported.":"L'item IMS QTI n'a pas pu Ãªtre importÃ©.","The item needs to be saved before it can be previewed":"La question doit Ãªtre sauvÃ©e avant de pouvoir Ãªtre prÃ©visualisÃ©e","The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).":"L'attribut de boucle est utilisÃ© pour diffuser le mÃ©dia en continu. Dans le mode continu, une fois le dÃ©marrage de l'objet mÃ©dia, il doit fonctionner continÃ»ment (jusqu'au maximum de diffusions spÃ©cifiÃ©).","The lower bound of the slider":"La borne infÃ©rieure de la glissiÃ¨re","The maximum number of association is unlimited.":"Le nombre de paires est illimitÃ©.","The maximum number of choices that the candidate is allowed to select to form a valid response.":"Le nombre maximum d'options que le candidat peut sÃ©lectionner pour rÃ©pondre.","The maximum number of choices that the candidate is allowed to select.":"Le nombre maximum d'options que le candidat peut sÃ©lectionner.","The maximum number of choices this choice may be associated with.":"Le nombre maximum d'options qui peuvent Ãªtre associÃ©es Ã  cette option.","The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.":"Le nombre maximum d'options auxquelles cette option-ci peut Ãªtre associÃ©e. Si la valeur est 0, il n'y a pas de restriction.","The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.":"L'objet mÃ©dia ne peut pas Ãªtre diffusÃ© plus de fois que ne le spÃ©cifie l'attribut maxPlay. Il ne doit pas Ãªtre possible pour le candidat de visualiser ou d'entendre le mÃ©dia plus de maxPlay fois. une valeur de 0 (par dÃ©faut) ne spÃ©cifie aucune limitation.","The MIME-type attribute describes which kind of file may be uploaded.":"Le MIME-type dÃ©fini le type de fichier mÃ©dia qui peut Ãªtre tÃ©lÃ©chargÃ©.","The minimum number of answers is ":"Le nombre minimum de rÃ©ponses est","The minimum number of associations that the candidate is required to make to form a valid response.":"Le nombre minimum de paires que le candidat doit produire pour former une rÃ©ponse valide.","The minimum number of choices that the candidate is required to select to form a valid response.":"Le nombre minimum d'options que le candidat doit sÃ©lectionner pour former une rÃ©ponse valide.","The minimum number of choices this choice must be associated with to form a valid response.":"Le nombre minimum d'options auxquelles cette option-ci doit Ãªtre associÃ©e pour former une rÃ©ponse valide.","The number of units corresponding to a step on the slider":"Le nombre d'unitÃ©s correspondant Ã  un incrÃ©ment de la glissiÃ¨re","The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.":"L'identifiant principal de la question. Il doit correspondre Ã  une entrÃ©e dans les mÃ©tadonnÃ©es de l'item.","The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.":"Le but d'utilisation de la rubrique, en tant que passage de lecture identique pour plusieurs items, ou comme instruction commune Ã  une section du test par exemple.",'The QTI class "%1$s" located at line "%2$d" is currently not supported.':'La classe QTI "%1$s" Ã  la ligne "%2$d" n\'est pas supportÃ©e actuellement.',"The selected file is ready to be sent.":"Le fichier sÃ©lectionnÃ© est prÃªt Ã  Ãªtre envoyÃ©.","The text to be displayed if the image is not available.":"Le texte Ã  afficher si l'image est indisponible.","The upper bound of the slider":"La borne supÃ©rieure de la glissiÃ¨re","The ZIP archive containing the IMS QTI Item cannot be extracted.":"L'archive ZIP doit contenant l'item IMS QTI ne peut Ãªtre dÃ©compressÃ©e.","There was a problem downloading your CSS, please try again.":"Un problÃ¨me est survenu lors du tÃ©lÃ©chargement de votre CSS. Faites une nouvelle tentative.","this identifier is already in use":"cet identifiant est dÃ©jÃ  utilisÃ©","This preview may be scaled to fit your screen. The final rendering may differ.":"La prÃ©visualisation peut Ãªtre mise Ã  l'Ã©chelle to correspondre Ã  votre Ã©cran. Le rendu final peut Ãªtre diffÃ©rent.","Time dependent":"DÃ©pendance du temps",Title:"LibellÃ©",undo:"revenir en arriÃ¨re",Undo:"Revenir en arriÃ¨re","Upload Interaction":"TÃ©lÃ©charger une interaction","Upper Bound":"Borne supÃ©rieure","Used to control the format of the text entered by the candidate.":"UtilisÃ© pour contrÃ´ler le format du texte entrÃ© par le candidat.","WAV audio":"Fichier audio WAV",Width:"Largeur","Width (optional)":"Largeur (optionnelle)","Windows Media audio":"Windows Media audio","Windows Media video":"Windows Media video",XHTML:"XHTML","You can select maximum":"Vous pouvez sÃ©lectionner au maximum","You can use maximum ' + max + ' choices":"Vous pouvez sÃ©lectionner au maximum ' + max + ' options","You have deleted":"Vous avez effacÃ©","You have deleted an element":"Vous avez effacÃ© un Ã©lÃ©ment","You have deleted an element.":"Vous avez effacÃ© un Ã©lÃ©ment.","You may make as many association pairs as you want.":"Vous pouvez crÃ©er autant de paires que nÃ©cessaire.","You must select %1$d to %2$d choices.":"Vous devez sÃ©lectionner entre %1$d et %2$d options.","You must select 0 to %d choices.":"Vous devez sÃ©lectionner entre 0 et %d options.","You must select at least":"Vous devez sÃ©lectionner au moins","You must select exactly":"Vous devez sÃ©lectionner exactement","You must select exactly %d choice(s).":"Vous devez sÃ©lectionner exactement %d option(s).","You must use at least ' + min + ' choices":"Vous devez utiliser au moins ' + min + ' option(s)","You need to make at least":"Vous devez faire au moins","Your item has been saved":"Votre item a Ã©tÃ© sauvÃ©","ZIP file":"Fichier ZIP","Edit test class":"Modifier la classe du test","new test":"CrÃ©er test","Test properties":"PropriÃ©tÃ©s du test","Test saved":"Test enregistrÃ©","Tests library":"Tests","The Test mode (sequencing, scoring, cumulating, etc.) and layout are also configured here.":"Le mode de test (sÃ©quence, notation, cumul, etc.) et les canevas sont Ã©galement configurÃ©s ici.","The Tests module allows to combine a selection of Items to a Test.":"Le module <i>Tests</i> permet de combiner la sÃ©lection d'items Ã  un test.","A qti testpackage":"Un paquet test QTI","Add the source file":"Ajouter le fichier source","An item involved in the test cannot be read or is not QTI compliant.":"Un item impliquÃ© dans le test ne peut Ãªtre lu ou n'est pas conforme Ã  QTI.","An item involved in the test cannot be written.":"Un item impliquÃ© dans le test ne peut Ãªtre Ã©crit.","An unknown error occured while compiling QTI test '%s'.":"Une erreur inconnue s'est produite pendant la compilation du QTI test '%s'. ","Author QTI test":"Auteur du test QTI","Authoring %s', get_data('label":"Ãdition de %s', get_data('label",Individual:"Individuel",Linear:"LinÃ©aire",'No more attempts allowed for item "%s".':"Une tentative sur l'item \"%s\" n'est plus permise.","Non Linear":"Non linÃ©aire","QTI Test: %s', get_data('label":"QTI Test : %s', get_data('label",Shuffle:"MÃ©langer",Simultaneous:"SimultanÃ©",Test:"Test","The QTI test could not be retrieved correctly.":"Le test QTI n'a pu Ãªtre rÃ©cupÃ©rÃ© correctement.","The QTI-XML test could not be written correctly.":"Le test QTI-XML n'a pu Ãªtre Ã©crit correctement.","Upload a QTI 2.1 Test Package File":"Envoyer un fichier paquet de test QTI 2.1","(still undefined)":"(encore indÃ©fini)","[TAO Notification System] Workflow":"[SystÃ¨me de Notifications TAO] Workflow","Active Process":"Processus actif","Advanced Users":"Utilisateurs AvancÃ©s","An error occured during request processing":"Une erreur s'est produite lors de la demande de traitement","Cannot create process execution":"Impossible de crÃ©er une exÃ©cution de processus","Check pending tasks for assessment preparation.":"VÃ©rifiez les tÃ¢ches en attente pour la prÃ©paration de l'Ã©valuation.","created by":"crÃ©Ã© par",Else:"Autrement","execution of":"exÃ©cution de","Finished Process":"Processus terminÃ©",Forward:"Suivant",Home:"Accueil",If:"Si","If there is no available activity or there are more than one. You will be redirected to the process main page.":"S'il n'y a pas ou plus d'une activitÃ© disponible, vous serez redirigÃ© vers la page principale.","Initialize new Process":"Initialiser un nouveau processus","Launch Process":"Lancement du processus","Loading next activity...":"Chargement de la prochaine activitÃ©...",Logout:"DÃ©connexion","My roles":"Mes rÃ´les","No process definition uri given":"Pas de dÃ©finition de processus pour l'uri donnÃ©e","No variable code given":"Pas de code de variable donnÃ©",Pause:"Pause","Please confirm the deletion of the activity":"Veuillez confirmer la suppression de l'activitÃ©.","Please login to access the selected activity.":"Veuillez vous identifier pour accÃ©der Ã  l'activitÃ© sÃ©lectionnÃ©e.","Process Finished":"Processus terminÃ©","Process initialization":"Initialisation du processus","Process Tree:":"Arbre des processus:","Redirect immediately":"Rediriger immÃ©diatement","Redirection in ":"Redirection dans ",seconds:"secondes","Start/Resume the case":"DÃ©marrer / Reprendre le cas",Status:"Statut","TAO - An Open and Versatile Computer-Based Assessment Platform":"TAO - Une Plate-Forme d'Ãvaluation AssistÃ©e par Ordinateur Libre et Modulable","TAO Process Engine":"Moteur de Processus TAO","The activity provided in the url is no longer the up-to-date.":"L'activitÃ© fournie dans l'url n'est plus Ã  jour.","The link may be outdated.":"Le lien n'est plus valide.","The Processes module allows to create Processes.":"Le module Processus vous permet de crÃ©er des processus organisÃ©s sous forme d'activitÃ©s liÃ©es par des connecteurs.","The resource is not a process definition":"La ressource n'est pas une dÃ©finition de processus","The resource is not a process execution":"La ressource n'est pas une exÃ©cution de processus","The resource is not an activity execution":"La ressource n'est pas une exÃ©cution d'activitÃ©","The variable with the code '.$code.' does not exists":"La variable avec le code '.$code.' n'existe pas\n\nmsgid ",Then:"Alors","type??":"type??","Unable to log in the user":"Impossible d'identifer l'utilisateur","User Id.":"ID utilisateur","User logged in successfully":"Utilisateur identifiÃ©","User name:":"Nom d'utilisateur :","Welcome to TAO Process Engine":"Bienvenue dans le moteur de processus TAO","Workflow Engine":"Moteur de Processus","WorkflowEngine Process Browser ":"Navigateur de processus","You will be redirected to the current activity if you are allowed to.":"Vous serez redirigÃ© vers l'activitÃ© courante si vous en avez la permission.","Edit subject":"Modifier le participant","Edit subject class":"Modifier la classe participant","new test taker":"CrÃ©er participant","Test taker saved":"Participant enregistrÃ©","Test takers":"Participants","Test takers library":"Participants","Test takers may be assigned to sets according to the relevant assessment context (Human resources management, education, edumetric monitoring, etc.).":"Les participants peuvent Ãªtre assignÃ©s Ã  des ensembles selon le contexte dâÃ©valuation (gestion des ressources humaines, Ã©ducation, contrÃ´le d'Ã©dumÃ©trie, etc.).","The Test takers module allows to record and manage  test takers.":"Le module <i>Participants</i> vous permet d'ajouter et de gÃ©rer les sujets des tests.","Edit group class":"Modifier la classe Groupe","Group saved":"Groupe enregistrÃ©","Groups library":"Groupes","new group":"CrÃ©er groupe","Select group test takers":"Choisissez les participants du groupe","The Groups module allows to group Test takers according to global features and classifications.":"Le module <i>Groupes</i> vous permet de grouper les participants en fonction de propriÃ©tÃ©s globales et de classifications."," seconds":" secondes","# Collected Results":"# RÃ©sultats CollectÃ©s","# Collected Score Variables":"# Variables score collectÃ©es","# data collected":"# donnÃ©es collectÃ©es","# Distinct Test Takers":"# test takers distincts","# Distinct variable types":"# types de variable distincts","Add All grades":"Ajouter tous les grades","Add All responses":"Ajouter toutes les rÃ©ponses","Add Test Taker":"Ajouter le participant","All results of passed Tests with their referring Subject, Group and Item specific data, as well as the individual data collected during Test execution are stored and managed here.":"Les rÃ©sultats de tous les tests passÃ©s avec les donnÃ©es des participants, groupes et items, ainsi que les donnÃ©es rÃ©cupÃ©rÃ©es pendant le dÃ©roulement de chaque test sont collectÃ©s et gÃ©rÃ©s ici.",Anonymise:"Anonymiser",Average:"Moyenne","Collected Results":"RÃ©sultats CollectÃ©s","custom table":"table personnalisÃ©e","Data Collection per Variable":"Collection de donnÃ©es par variable","Data collection statistics :":"Statistiques de la collection de donnÃ©es :",Delivery:"Passation","Delivery Result":"RÃ©sultat de dÃ©livrance","Edit result class":"Modifier la classe de rÃ©sultat","Frequency per Score":"FrÃ©quence par score",Item:"Item","Observed performances per distinc score variable types ":"Performances observÃ©es par types de variables de score distincts ","Print Report":"Imprimer Rapport","Remove All grades":"Supprimer tous les grades","Remove All responses":"Supprimer toutes les rÃ©ponses","Report generated from the following subset of results : ":"Rapport gÃ©nÃ©rÃ© Ã  partir du sous-ensemble de rÃ©sultats suivant : ","Results distribution":"Distribution des rÃ©sultats","Results library":"RÃ©sultats","Results Selection Filters":"Filtres de sÃ©lection des rÃ©sultats","score average":"moyenne de score","Score average per Variable":"Score moyen par variable","Score per Observation":"Score par observation","Scores and response rates statistics":"Scores et statistiques de taux de rÃ©ponse","summary report":"Rapport rÃ©sumÃ©","Test taker":"Participant","The class you have selected contains no results to be analysed, please select a different class":"La classe sÃ©lectionnÃ©e ne contient pas de rÃ©sultat Ã  analyser, veuillez en choisir une autre.","The number of observations is too low":"Le nombre d'observations est trop faible.","There was a problem generating your report, please try again.":"Un problÃ¨me s'est produit Ã  la gÃ©nÃ©ration du rapport, veuillez rÃ©essayer.","Total Standard Deviation":"DÃ©viation standard totale",VariableName:"Nom de variable","View result":"Voir le rÃ©sultat","We are preparing your report, please wait...":"Nous prÃ©parons votre rapport, veuillez patienter...","An error occured during history deletion":"Une erreur s'est produite lors de la suppression de l'historique","An undefined error has occured":"Une erreur indÃ©finie s'est produite.","Assigned Tests":"Tests assignÃ©s","Attempt(s)":"Tentative(s)","Completed Tests":"Tests complÃ©tÃ©s","Delete History":"Supprimer l'historique","Deliveries library":"Passations","Delivery Class saved":"Classe de passation enregistrÃ©e","delivery executions":"exÃ©cutions de passations","Delivery properties":"PropriÃ©tÃ©s de la passation","Delivery saved":"Passations enregistrÃ©es","Edit delivery class":"Ãdition de la classe de passation","Execution History":"Historique d'exÃ©cution",History:"Historique","History deleted successfully":"Historique supprimÃ© avec succÃ¨s","new delivery":"CrÃ©er passation","Paused Tests":"Tests mis en pause","Please confirm history deletion":"Veuillez confirmer la suppression de l'historique","Recompile the delivery":"Recompiler la passation","Select a test":"Choisissez un test.","Test Taker":"Participant","The Deliveries module allows users to define tests deliveries parameters.":"Le module <i>Passations</i> permet aux utilisateurs de dÃ©finir les paramÃ¨tres de passations de tests.","There are currently":"Il y a en ce moment","There is currently no delivery execution.":"Il n'y aucune passation en cours d'exÃ©cution.",Time:"Temps",Unlimited:"IllimitÃ©","View History":"Voir l'Historique","Register your test-takers, manage their personal data, and assign them to groups.":"Enregistrez vos participants, gÃ©rez leurs donnÃ©es personnelles et assignez-les Ã  des groupes.","Add to delivery campaign":"Ajouter Ã  la campagne de dÃ©livrance",Campaign:"Campagne","Campaign Class saved":"Classe Campagne enregistrÃ©e","Campaign saved":"Campagne enregistrÃ©e.","Campaigns library":"BibliothÃ¨que de campagnes","Edit Campaign":"Modifier la campagne","Edit campaign class":"Modifier la classe campagne","For instance, it is a way to organize deliveries with a common objectives.":"Par exemple, c'est un moyen d'organiser des passations avec un objectif commun.","new campaign":"Nouvelle campagne","The Campaign Management Section allows to add, edit and assign Deliveries to Delivery Campaigns.":"La section de gestion de campagnes permet d'ajouter, de modifier et d'assigner des dÃ©livrances aux campagnes de dÃ©livrances.","Access Control Mode":"Mode de contrÃ´le d'accÃ¨s",Activity:"ActivitÃ©","Activity Editor":"Ãditeur d'activitÃ©s","Activity menu: select an action from the context menu.":"Menu activitÃ© : sÃ©lectionnez une action depuis le menu contextuel.","Activity or Connector":"ActivitÃ©","Activity Variables":"Variables de l'activitÃ©","Add a variable":"Ajouter une variable","Browse Tests":"Naviguer dans les tests",cancel:"annuler","check code":"vÃ©rifier le code","checking the code...":"vÃ©rification du code...","Close all":"Fermer tout",Code:"Code","Code already used":"Code dÃ©jÃ  en cours d'utilisation",Compilation:"Compilation",Connector:"Connecteur","Connector Type":"Type de connecteur",Constant:"Constante",Country:"Pays","create new activity":"crÃ©er une nouvelle activitÃ©","create new connector":"crÃ©er un nouveau connecteur","Current activities":"ActivitÃ©s en cours","Current Activities":"ActivitÃ©s en cours","Current User":"Utilisateur courant","Do you want to change the connector type? \n THe child connectors will be deleted.":"Voulez vous changer le type du connecteur? \nLes connecteurs enfants seront supprimÃ©s.","Formal Parameter":"ParamÃ¨tre formel",IF:"SI","Input Parameters":"ParamÃ¨tres d'entrÃ©e","interactive service saved":"service interactif enregistrÃ©","loading...":"chargement...","Merge to ":"Fusionner vers","Monitoring processes":"Gestion des processus","new process":"nouveau processus","newly edited":"nouvellement Ã©ditÃ©",ok:"ok","Open all":"Ouvrir tout","Output Parameters":"ParamÃ¨tres de sortie","please choose another one":"veuillez en choisir un autre","Please confirm deletion.\n Warning: related resources might be affected.":"Veuillez confirmer la suppression.\n Attention : les ressources liÃ©es pourraient en Ãªtre affectÃ©es.","Please confirm the deletion of the connector: \n child connectors will be delete at the same time":"Veuillez confirmer la suppression du connecteur : \n les connecteurs enfant seront supprimÃ©s en mÃªme temps","Please select a delivery before authoring it":"Veuillez sÃ©lectionner une dÃ©livrance afin de l'Ã©diter.","Please select a process before authoring it":"Veuillez sÃ©lectionner un processus afin de l'Ã©diter",Positionning:"Positionnement","Process Definition":"DÃ©finition de processus","Process Execution":"ExÃ©cution de processus","Process History":"Historique de processus","Process Property":"PropriÃ©tÃ© de processus","Process saved":"Processus enregistrÃ©","Process Variable":"Variable de processus","Process Variables":"Variables du processus","Processes library":"BibliothÃ¨que de processus",reload:"rafraichir","reloading form...":"rechargement du formulaire...","Restricted to":"limitÃ© Ã ",Role:"RÃ´le",save:"enregistrer","Service Definition":"DÃ©finition du service","Service library":"BibliothÃ¨que de services","Set the activity as a final one will delete its following connector. \n Are you sure?":"Placer l'activitÃ© en tant que finale supprimera les connecteurs suivants.\nEtes vous sÃ»r?","Started Time":"DÃ©marrage","Sure?":"SÃ»r?","the chosen code has already been used for the process variable":"le code choisi est dÃ©jÃ  en cours d'utilisation pour une autre variable","Unable to delete the process execution.\nClose process before delete it.":"Impossible de supprimer l'exÃ©cution du processus tant qu'il est ouvert.",Unit:"UnitÃ©",Value:"Valeur",Variables:"Variables",VFF:"VFF","VFF version":"Version VFF",XLIFF:"XLIFF","XLIFF version":"Version XLIFF"}}
}),define("core/format",["lodash"],function(e){var t=/(%[sdj])/g;return function(i){var n=Array.prototype.slice.call(arguments,1);return e.reduce(i.match(t),function(e,t,a){var r="";if(n[a]){switch(t){case"%d":r=Number(n[a]);break;case"%j":try{r=JSON.stringify(n[a]).replace(/"/g,"")}catch(o){}break;default:r=n[a]}i=i.replace(t,r)}return i},i)}}),define("i18n",["lodash","json!i18ntr/messages.json","context","core/format"],function(e,t,i,n){var a=t.translations,r=function(e){var t=a[e]?a[e]:e;return arguments.length>1&&(t=n.apply(null,arguments)),t};return r}),define("tpl",["handlebars","i18n","lodash"],function(e,t,i){var n={},a=".tpl";return e.registerHelper("__",function(e){return t(e)
}),e.registerHelper("join",function(e,t,n,a){var r="";return t="string"==typeof t?t:"=",n="string"==typeof n?n:" ",a="string"==typeof a?a:'"',i.forIn(e,function(e,o){null!==e||void 0!==e?"boolean"==typeof e?e=e?"true":"false":"object"==typeof e&&(e=i.values(e).join(" ")):e="",r+=o+t+a+e+a+n}),r&&r.substring(0,r.length-1),r}),e.registerHelper("for",function(e,t,n,a){var r="";e=parseInt(e),t=parseInt(t),n=parseInt(n);for(var o=e;t>o;o+=n)r+=a.fn(i.extend({},this,{i:o}));return r}),e.registerHelper("equal",function(e,t,i){return e==t?i.fn(this):i.inverse(this)}),{load:function(t,i,r,o){a=a||o.extension,o.isBuild?(n[t]=fs.readFileSync(i.toUrl(t+a)).toString(),r()):i(["text!"+t+a],function(t){r(e.compile(t))
})},write:function(t,i,a){if(i in n){var r=e.precompile(n[i]);a("define('tpl!"+i+"', ['handlebars'], function(Handlebars){ \nreturn Handlebars.template("+r.toString()+");\n});\n")}}}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div id="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" class="small feedback-info item-instruction">\n    <span class="icon-info icon"></span><span class="instruction-message">',(o=i.message)?r=o.call(t,{hash:{},data:a}):(o=t&&t.message,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+"</span>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/helpers/Instruction",["lodash","taoQtiItem/qtiItem/helper/util","tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction"],function(e,t,i){var n=["info","warning","error","success"],a=function(e,i,n){this.interaction=e,this.defaultMessage=i||"",this.currentMessage="",this.level="info",this.serial=t.buildSerial("instruction_"),this.callback=n,this.$dom=null,this.state=!1};return a.isValidLevel=function(t){return e.indexOf(n,t)>=0},a.prototype.setState=function(e){this.state=e},a.prototype.checkState=function(e){return this.state===e},a.prototype.getId=function(){return this.serial},a.prototype.create=function(e){e.append(i({message:this.defaultMessage,serial:this.serial})),this.$dom=e.find("#"+this.serial)
},a.prototype.update=function(e){var t=e&&e.level?e.level:"",i=e&&e.message?e.message:"",n=e&&e.timeout?e.timeout:0,r=e&&"function"==typeof e.start?e.start:null,o=e&&"function"==typeof e.stop?e.stop:null;if(t&&a.isValidLevel(t)&&(this.$dom.removeClass("feedback-"+this.level).addClass("feedback-"+t),this.$dom.find(".icon").removeClass("icon-"+this.level).addClass("icon-"+t),this.level=t),i&&(this.$dom.find(".instruction-message").html(i),this.currentMessage=i),n){var s=this;r&&r.call(s),s.timer=setTimeout(function(){o&&o.call(s),s.timer=null},n)}},a.prototype.setLevel=function(e,t){var i={level:e};t&&(i.timeout=parseInt(t),i.stop=function(){this.setLevel("info")
}),this.update(i)},a.prototype.getLevel=function(){return this.level},a.prototype.setMessage=function(e,t){this.update({message:e,timeout:t})},a.prototype.reset=function(){this.update({level:"info",message:this.defaultMessage}),this.state=!1},a.prototype.validate=function(e){"function"==typeof this.callback&&this.callback.call(this,e)},a}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/notification",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="small feedback-',(o=i.level)?r=o.call(t,{hash:{},data:a}):(o=t&&t.level,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+' item-notification">\n    <span class="icon-',(o=i.level)?r=o.call(t,{hash:{},data:a}):(o=t&&t.level,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'"></span><span class="feedback-message">',(o=i.message)?r=o.call(t,{hash:{},data:a}):(o=t&&t.message,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'</span>\n    <span title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Remove Message",s):u.call(t,"__","Remove Message",s)))+'" class="icon-close close-trigger"></span>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/helpers/Helper",["lodash","jquery","i18n","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCommonRenderer/helpers/Instruction","tpl!taoQtiItem/qtiCommonRenderer/tpl/notification"],function(e,t,i,n,a,r){var o={},s={},l=t(),c=function(e){var t=e.getSerial(),i="[data-serial="+t+"]";return n.isA(e,"choice")?i=".qti-choice"+i:n.isA(e,"interaction")&&(i=".qti-interaction"+i),i};return{setContext:function(e){l=e},getContainer:function(e,i){var n=e.getSerial();return i instanceof t&&i.length?i.find(c(e)):l instanceof t&&l.length?l.find(c(e)):((!o[n]||o[n].length)&&(o[n]=t(c(e))),o[n])},validateInstructions:function(t,i){var n=t.getSerial();
s[n]&&e.each(s[n],function(e){e.validate(i)})},appendInstruction:function(e,t,i){var n=e.getSerial(),r=new a(e,t,i);return s[n]||(s[n]={}),s[n][r.getId()]=r,r.create(this.getContainer(e).find(".instruction-container")),r},removeInstructions:function(e){s[e.getSerial()]={},this.getContainer(e).find(".instruction-container").empty()},resetInstructions:function(t){var i=t.getSerial();s[i]&&e.each(s[i],function(e){e.reset()})},minMaxChoiceInstructions:function(t,n){var a,r=this,o=n.min||0,s=n.max||0,l=n.getResponse,c=n.onError||e.noop(),d=n.choiceCount===!1?!1:e.size(t.getChoices()),u=!1;if(!e.isFunction(l))throw"invalid parameter getResponse";s>0&&(d===!1||d>s)&&(s===o?(u=!0,a=1>=s?i("You must select exactly %d choice",s):i("You must select exactly %d choices",s),r.appendInstruction(t,a,function(e){l(t).length>=s?(this.setLevel("success"),this.checkState("fulfilled")&&this.update({level:"warning",message:i("Maximum choices reached"),timeout:2e3,start:function(){c(e)
},stop:function(){this.update({level:"success",message:a})}}),this.setState("fulfilled")):this.reset()})):s>o&&(a=1>=s?i("You can select maximum %d choice",s):i("You can select maximum %d choices",s),r.appendInstruction(t,a,function(e){l(t).length>=s?(this.setLevel("success"),this.setMessage(i("Maximum choices reached")),this.checkState("fulfilled")&&this.update({level:"warning",timeout:2e3,start:function(){c(e)},stop:function(){this.setLevel("info")}}),this.setState("fulfilled")):this.reset()}))),!u&&o>0&&(d===!1||d>o)&&(a=1>=o?i("You must at least %d choice",o):i("You must select at least %d choices",s),r.appendInstruction(t,a,function(){l(t).length>=o?this.setLevel("success"):this.reset()
}))},appendNotification:function(e,t,i){if(i=i||"info",a.isValidLevel(i)){var n=this.getContainer(e);n.find(".notification-container").prepend(r({level:i,message:t}));var o=n.find(".item-notification:first"),s=function(){o.fadeOut()};return o.find(".close-trigger").on("click",s),setTimeout(s,2e3),o}},removeNotifications:function(e){this.getContainer(e).find(".item-notification").remove()},triggerResponseChangeEvent:function(e,t){this.getContainer(e).trigger("responseChange",[{interaction:e,response:e.getResponse()},t])},targetBlank:function(e){e.on("click","a",function(e){e.preventDefault();var i=t(this).attr("href");i&&i.match(/^http/i)&&window.open(i,"_blank")
})}}}),define("taoQtiItem/qtiCreator/helper/commonRenderer",["taoQtiItem/qtiCommonRenderer/renderers/Renderer","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){var i=null,n=new e({baseUrl:"",shuffleChoices:!0}),a={render:function(e,t){a.setContext(t),n.load(function(){t.append(e.render(this)),e.postRender({},"",this)},e.getUsedClasses())},get:function(){return n},setOption:function(e,t){n.setOption(e,t)},setOptions:function(e){n.setOptions(e)},setContext:function(e){i=e,t.setContext(e)},restoreContext:function(){t.setContext(i),i=null}};return a}),define("taoQtiItem/qtiCreator/helper/qtiElements",["jquery","lodash","i18n"],function(e,t,i){var n={};
return n.classes={itemBody:{parents:["bodyElement"],contains:["block"],"abstract":!0},atomicBlock:{parents:["blockStatic","bodyElement","flowStatic"],contains:["inline"],"abstract":!0},atomicInline:{parents:["bodyElement","flowStatic","inlineStatic"],contains:["inline"],"abstract":!0},simpleBlock:{parents:["blockStatic","bodyElement","flowStatic"],contains:["block"],"abstract":!0},simpleInline:{parents:["bodyElement","flowStatic","inlineStatic"],contains:["inline"],"abstract":!0},flowStatic:{parents:["flow"],"abstract":!0},blockStatic:{parents:["block"],"abstract":!0},inlineStatic:{parents:["inline"],"abstract":!0},flow:{parents:["objectFlow"],"abstract":!0},tableCell:{parents:["bodyElement"],contains:["flow"],"abstract":!0},caption:{parents:["bodyElement"],contains:["inline"],xhtml:!0},col:{parents:["bodyElement"],xhtml:!0},colgroup:{parents:["bodyElement"],contains:["col"],xhtml:!0},div:{parents:["blockStatic","bodyElement","flowStatic"],contains:["flow"],xhtml:!0},dl:{parents:["blockStatic","bodyElement","flowStatic"],contains:["dlElement"],xhtml:!0},dt:{parents:["dlElement"],contains:["inline"],xhtml:!0},dd:{parents:["dlElement"],contains:["flow"],xhtml:!0},hr:{parents:["blockStatic","bodyElement","flowStatic"],xhtml:!0},math:{parents:["blockStatic","flowStatic","inlineStatic"],xhtml:!0},li:{parents:["bodyElement"],contains:["flow"],xhtml:!0},ol:{parents:["blockStatic","bodyElement","flowStatic"],contains:["li"],xhtml:!0},ul:{parents:["blockStatic","bodyElement","flowStatic"],contains:["li"],xhtml:!0},object:{parents:["bodyElement","flowStatic","inlineStatic"],contains:["objectFlow"],xhtml:!0},param:{parents:["objectFlow"],xhtml:!0},table:{parents:["blockStatic","bodyElement","flowStatic"],contains:["caption","col","colgroup","thead","tfoot","tbody"],xhtml:!0},tbody:{parents:["bodyElement"],contains:["tr"],xhtml:!0},tfoot:{parents:["bodyElement"],contains:["tr"],xhtml:!0},thead:{parents:["bodyElement"],contains:["tr"],xhtml:!0},td:{parents:["tableCell"],xhtml:!0},th:{parents:["tableCell"],xhtml:!0},tr:{parents:["bodyElement"],contains:["tableCell"],xhtml:!0},a:{parents:["simpleInline"],xhtml:!0},abbr:{parents:["simpleInline"],xhtml:!0},acronym:{parents:["simpleInline"],xhtml:!0},b:{parents:["simpleInline"],xhtml:!0},big:{parents:["simpleInline"],xhtml:!0},cite:{parents:["simpleInline"],xhtml:!0},code:{parents:["simpleInline"],xhtml:!0},dfn:{parents:["simpleInline"],xhtml:!0},em:{parents:["simpleInline"],xhtml:!0},i:{parents:["simpleInline"],xhtml:!0},kbd:{parents:["simpleInline"],xhtml:!0},q:{parents:["simpleInline"],xhtml:!0},samp:{parents:["simpleInline"],xhtml:!0},small:{parents:["simpleInline"],xhtml:!0},span:{parents:["simpleInline"],xhtml:!0},strong:{parents:["simpleInline"],xhtml:!0},sub:{parents:["simpleInline"],xhtml:!0},sup:{parents:["simpleInline"],xhtml:!0},tt:{parents:["simpleInline"],xhtml:!0},"var":{parents:["simpleInline"],xhtml:!0},blockquote:{parents:["simpleBlock"],xhtml:!0},address:{parents:["atomicBlock"],xhtml:!0},h1:{parents:["atomicBlock"],xhtml:!0},h2:{parents:["atomicBlock"],xhtml:!0},h3:{parents:["atomicBlock"],xhtml:!0},h4:{parents:["atomicBlock"],xhtml:!0},h5:{parents:["atomicBlock"],xhtml:!0},h6:{parents:["atomicBlock"],xhtml:!0},p:{parents:["atomicBlock"],xhtml:!0},pre:{parents:["atomicBlock"],xhtml:!0},img:{parents:["atomicInline"],xhtml:!0,attributes:["src","alt","longdesc","height","width"]},br:{parents:["atomicInline"],xhtml:!0},infoControl:{parents:["blockStatic","bodyElement","flowStatic"],qti:!0},textRun:{parents:["inlineStatic","flowstatic"],qti:!0},feedbackInline:{parents:["simpleInline","feedbackElement"],qti:!0},feedbackBlock:{parents:["simpleBlock"],qti:!0},rubricBlock:{parents:["simpleBlock"],qti:!0},blockInteraction:{parents:["block","flow","interaction"],qti:!0},inlineInteraction:{parents:["inline","flow","interaction"],qti:!0},gap:{parents:["inlineStatic"],qti:!0},hottext:{parents:["flowstatic","inlineStatic"],contains:["inlineStatic"],qti:!0},printedVariable:{parents:["bodyElement","flowStatic","inlineStatic","textOrVariable"],qti:!0},prompt:{parents:["bodyElement"],contains:["inlineStatic"],qti:!0},templateElement:{parents:["bodyElement"],qti:!0},templateBlock:{parents:["blockStatic","flowStatic","templateElement"],contains:["blockStatic"],qti:!0},templateInline:{parents:["inlineStatic","flowStatic","templateElement"],contains:["inlineStatic"],qti:!0},choiceInteraction:{parents:["blockInteraction"],qti:!0},associateInteraction:{parents:["blockInteraction"],qti:!0},orderInteraction:{parents:["blockInteraction"],qti:!0},matchInteraction:{parents:["blockInteraction"],qti:!0},hottextInteraction:{parents:["blockInteraction"],qti:!0},gapMatchInteraction:{parents:["blockInteraction"],qti:!0},mediaInteraction:{parents:["blockInteraction"],qti:!0},sliderInteraction:{parents:["blockInteraction"],qti:!0},uploadInteraction:{parents:["blockInteraction"],qti:!0},drawingInteraction:{parents:["blockInteraction"],qti:!0},graphicInteraction:{parents:["blockInteraction"],qti:!0},hotspotInteraction:{parents:["graphicInteraction"],qti:!0},graphicAssociateInteraction:{parents:["graphicInteraction"],qti:!0},graphicOrderInteraction:{parents:["graphicInteraction"],qti:!0},graphicGapMatchInteraction:{parents:["graphicInteraction"],qti:!0},selectPointInteraction:{parents:["graphicInteraction"],qti:!0},textEntryInteraction:{parents:["stringInteraction","inlineInteraction"],qti:!0},extendedTextInteraction:{parents:["stringInteraction","blockInteraction"],qti:!0},inlineChoiceInteraction:{parents:["inlineInteraction"],qti:!0},customInteraction:{parents:["block","flow","interaction"],qti:!0},_container:{parents:["block"],qti:!0}},n.cache={containable:{},children:{},parents:{}},n.getAllowedContainersElements=function(t,i){var a=n.getAllowedContainers(t),r="";
for(var o in a)a[o].qti||(r+=a[o]+", ");return r&&(r=r.substring(0,r.length-2)),e(r,i?i:e(document)).filter(":not([data-qti-type])")},n.getAllowedContainers=function(e){if(n.cache.containable[e])var i=n.cache.containable[e];else{var i=[],a=n.getParentClasses(e,!0);for(var r in n.classes){var o=n.classes[r];if(o.contains){var s=t.intersection(o.contains,a);s.length&&(o.abstract||i.push(r),i=t.union(i,n.getChildClasses(r,!0)))}}n.cache.containable[e]=i}return i},n.getAllowedContents=function(e,i,a){var r=[];a=a||{};var o=n.classes[e];if(o&&o.contains)for(var s in o.contains){var l=o.contains[s];if(!a[l]){a[l]=!0,r.push(l);var c=n.getChildClasses(l,!0);for(var s in c){var d=c[s];
a[d]||(a[d]=!0,r.push(d),i&&(r=t.union(r,n.getAllowedContents(d,!0,a))))}i&&(r=t.union(r,n.getAllowedContents(l,!0,a)))}}var u=n.getParentClasses(e,!0);for(var s in u)r=t.union(r,n.getAllowedContents(u[s],i,a));return t.uniq(r,!1)},n.isAllowedClass=function(e,i){var a=n.getAllowedContents(e);return t.indexOf(a,i)>=0},n.getParentClasses=function(e,i){if(i&&n.cache.parents[e])var a=n.cache.parents[e];else{var a=[];if(n.classes[e]&&(a=n.classes[e].parents,i)){for(var r in a)a=t.union(a,n.getParentClasses(a[r],i));a=t.uniq(a,!1)}n.cache.parents[e]=a}return a},n.getChildClasses=function(e,i,a){var r=a?a:"all";if(i&&n.cache.children[e]&&n.cache.children[e][r])var o=n.cache.children[e][r];
else{var o=[];for(var s in n.classes){var l=n.classes[s];t.indexOf(l.parents,e)>=0&&(a?l[a]&&o.push(s):o.push(s),i&&(o=t.union(o,n.getChildClasses(s,i,a))))}n.cache.children[e]||(n.cache.children[e]={}),n.cache.children[e][r]=o}return o},n.isBlock=function(e){return n.is(e,"block")},n.isInline=function(e){return n.is(e,"inline")},n.is=function(e,i){if(e===i)return!0;var a=n.getParentClasses(e,!0);return t.indexOf(a,i)>=0},n.getAvailableAuthoringElements=function(){return{choiceInteraction:{label:i("Choice Interaction"),description:i("Select a single (radio buttons) or multiple (check boxes) responses among a set of choices."),icon:"icon-choice","short":i("Choice"),qtiClass:"choiceInteraction",tags:["Common Interactions","mcq"]},orderInteraction:{label:i("Order Interaction"),icon:"icon-order",description:i("Arrange a list of choices in the correct order."),"short":i("Order"),qtiClass:"orderInteraction",tags:["Common Interactions","ordering"]},associateInteraction:{label:i("Associate Interaction"),icon:"icon-associate",description:i("Create pair(s) from a series of choices."),"short":i("Associate"),qtiClass:"associateInteraction",tags:["Common Interactions","association"]},matchInteraction:{label:i("Match Interaction"),icon:"icon-match",description:i("Create association(s) between two sets of choices displayed in a table (row and column)."),"short":i("Match"),qtiClass:"matchInteraction",tags:["Common Interactions","association"]},hottextInteraction:{label:i("Hottext Interaction"),icon:"icon-hottext",description:i("Select one or more text parts (hottext) within a text."),"short":i("Hottext"),qtiClass:"hottextInteraction",tags:["Common Interactions","text"]},gapMatchInteraction:{label:i("Gap Match Interaction"),icon:"icon-gap-match",description:i(" Fill in the gaps in a text from a set of choices."),"short":i("Gap Match"),qtiClass:"gapMatchInteraction",tags:["Common Interactions","text","association"]},sliderInteraction:{label:i("Slider Interaction"),icon:"icon-slider",description:i("Select a value within a numerical range."),"short":i("Slider"),qtiClass:"sliderInteraction",tags:["Common Interactions","special"]},extendedTextInteraction:{label:i("Extended Text Interaction"),icon:"icon-extended-text",description:i("Collect open-ended information in one or more text area(s) (strings or numeric values)."),"short":i("Extended Text"),qtiClass:"extendedTextInteraction",tags:["Common Interactions","text"]},uploadInteraction:{label:i("File Upload Interaction"),icon:"icon-upload",description:i("Upload a file (e.g. document, picture...) as a response."),"short":i("File Upload"),qtiClass:"uploadInteraction",tags:["Common Interactions","special"]},mediaInteraction:{label:i("Media Interaction"),icon:"icon-media",description:i("Control the playing parameters (auto-start, loop) of a video or audio file and report the number of time it has been played."),"short":i("Media"),qtiClass:"mediaInteraction",tags:["Common Interactions","media"]},_container:{label:i("Text Block Interaction"),icon:"icon-font",description:i("Block contains the content (stimulus) of the item such as text or image. It is also required for Inline Interactions."),"short":i("Block"),qtiClass:"_container",tags:["Inline Interactions","text"]},inlineChoiceInteraction:{label:i("Inline Choice Interaction"),icon:"icon-inline-choice",description:i("Select a choice from a drop-down list."),"short":i("Inline Choice"),qtiClass:"inlineChoiceInteraction",tags:["Inline Interactions","inline-interactions","mcq"]},textEntryInteraction:{label:i("Text Entry Interaction"),icon:"icon-text-entry",description:i("Collect open-ended information in a short text input (strings or numeric values)."),"short":i("Text Entry"),qtiClass:"textEntryInteraction",tags:["Inline Interactions","inline-interactions","text"]},hotspotInteraction:{label:i("Hotspot Interaction"),icon:"icon-hotspot",description:i("Select one or more areas (hotspots) displayed on an picture."),"short":i("Hotspot"),qtiClass:"hotspotInteraction",tags:["Graphic Interactions","mcq"]},graphicOrderInteraction:{label:i("Graphic Order Interaction"),icon:"icon-graphic-order",description:i("Order the areas (hotspots) displayed on a picture."),"short":i("Graphic Order"),qtiClass:"graphicOrderInteraction",tags:["Graphic Interactions","ordering"]},graphicAssociateInteraction:{label:i("Graphic Associate Interaction"),icon:"icon-graphic-associate",description:i("Create association(s) between areas (hotspots) displayed on a picture."),"short":i("Graphic Associate"),qtiClass:"graphicAssociateInteraction",tags:["Graphic Interactions","association"]},graphicGapMatchInteraction:{label:i("Choice Interaction"),icon:"icon-graphic-gap",description:i("Fill in the gaps on a picture with a set of image choices."),"short":i("Graphic Gap"),qtiClass:"graphicGapMatchInteraction",tags:["Graphic Interactions","association"]},selectPointInteraction:{label:i("Select Point Interaction"),icon:"icon-select-point",description:i("Position one or more points on a picture (response areas are not displayed)."),"short":i("Select Point"),qtiClass:"selectPointInteraction",tags:["Graphic Interactions"]}}
},n}),define("util/strPad",[],function(){var e=function(e,t,i,n){var a,r="",o=function(e,t){for(var i="";i.length<t;)i+=e;return i=i.substr(0,t)};return e=e.toString(),e+="",i=void 0!==i?i:" ","STR_PAD_LEFT"!==n&&"STR_PAD_RIGHT"!==n&&"STR_PAD_BOTH"!==n&&(n="STR_PAD_RIGHT"),(a=t-e.length)>0&&("STR_PAD_LEFT"===n?e=o(i,a)+e:"STR_PAD_RIGHT"===n?e+=o(i,a):"STR_PAD_BOTH"===n&&(r=o(i,Math.ceil(a/2)),e=r+e+r,e=e.substr(0,t))),e};return e}),define("json!taoQtiItem/qtiCreator/editor/resources/device-list.json",function(){return{tablets:{"193986c3715c81838870f908fa98d69a":{label:"Amazon Kindle Fire HDX 7â³",width:960,height:600},"4e8eafab11aad1486992d7ee2c8c16ca":{label:"Apple iPad",width:1024,height:768},"5aac2932d9ad00d6d8a1604b8f9e4e8d":{label:"Google Nexus 10, Motorola Xoom, Xyboard",width:1280,height:800},"9805d9753ad08c7630a9ee5418aa6c6c":{label:"Google Nexus 7",width:966,height:604},d4a431cedf4705d6bf2cba6d5788378b:{label:"Samsung Galaxy Tab 7.7, 8.9, 10.1",width:1280,height:800}},phones:{"1b89338531ef0155c8d6abc2ac02c81a":{label:"Apple iPhone 3GS",width:320,height:480,scaleFactor:1,dpWidth:320,dpHeight:480},"3f89da99d84214cde7df87ebe0699a6f":{label:"Apple iPhone 4",width:640,height:960,scaleFactor:2,dpWidth:320,dpHeight:1920},"0d36971a5b98b367f54ced708c9af849":{label:"Apple iPhone 5",width:640,height:1136,scaleFactor:2,dpWidth:320,dpHeight:2272},"026beffcc051af995660ebdede986ace":{label:"BlackBerry Z10",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},fd2dd53e667d6d49e4fa73356fa941dd:{label:"BlackBerry Z30",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"707584c1ae17d9b5b2cbe8603c91c147":{label:"Google Nexus 4",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},"91823264de952e7f2347e07db5c4058b":{label:"Google Nexus 5",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},cd69817a6e147e8a4677389e56fcf568:{label:"Google Nexus S",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"75994faa6a38e31e99b53fcd75534a33":{label:"HTC Evo, Touch HD, Desire HD, Desire",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0cab4dfccdfc880687cb608cfe4159db":{label:"HTC One X, EVO LTE",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},c4ff41fcba24d74fc21dc3490ca1edc9:{label:"HTC Sensation, Evo 3D",width:540,height:960,scaleFactor:1.5,dpWidth:360,dpHeight:1440},fa969a5e0dd2de53700eeee4ba4ba142:{label:"LG Optimus 2X, Optimus 3D, Optimus Black",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"33c4f9364e295ec03531f3a3425819cf":{label:"LG Optimus G",width:768,height:1280,scaleFactor:2,dpWidth:384,dpHeight:2560},bc47f5275f0efd56fee52d43a8082981:{label:"LG Optimus LTE, Optimus 4X HD",width:720,height:1280,scaleFactor:1.7,dpWidth:424,dpHeight:2176},"0732887e6e324fd10777b735520a34cf":{label:"LG Optimus One",width:320,height:480,scaleFactor:1.5,dpWidth:213,dpHeight:720},"2e38a78364f09d0da0e9e1a3a68e7fb0":{label:"Motorola Defy, Droid, Droid X, Milestone",width:480,height:854,scaleFactor:1.5,dpWidth:320,dpHeight:1281},bd4b78dddc7c9625a4141a1b1ddabb87:{label:"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2",width:540,height:960,scaleFactor:1,dpWidth:540,dpHeight:960},"3bf1edf21cfa81006183d2b02974c84e":{label:"Motorola Droid Razr HD",width:720,height:1280,scaleFactor:1,dpWidth:720,dpHeight:1280},ab5a352e0e016b97dac986f06c394f55:{label:"Nokia C5, C6, C7, N97, N8, X7",width:360,height:640,scaleFactor:1,dpWidth:360,dpHeight:640},"4826fb7d7257aeaac992ce699df41b3c":{label:"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"0a691ab20add7c432200f8fa6527b488":{label:"Samsung Galaxy Note",width:800,height:1280,scaleFactor:2,dpWidth:400,dpHeight:2560},"9c23ee31be29960fbac9e9bbfc2fc7b0":{label:"Samsung Galaxy Note 3",width:1080,height:1920,scaleFactor:2,dpWidth:540,dpHeight:3840},"92177c0508c1d73905a58e2338f2a81f":{label:"Samsung Galaxy Note II",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"5222b8866dc4cc606725e16ffcc0a783":{label:"Samsung Galaxy S III, Galaxy Nexus",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"37c1541e2bd55cfd0f4073b0ccdf68b3":{label:"Samsung Galaxy S, S II, W",width:480,height:800,scaleFactor:1.5,dpWidth:320,dpHeight:1200},"2f7f64b7dda0144907ff300e83eed465":{label:"Samsung Galaxy S4",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760},"9c24f9057744dad56043702a9703127f":{label:"Sony Xperia S, Ion",width:720,height:1280,scaleFactor:2,dpWidth:360,dpHeight:2560},"0a8b2732a016a9395c3af5f12dd9c0da":{label:"Sony Xperia Sola, U",width:480,height:854,scaleFactor:1,dpWidth:480,dpHeight:854},"5a153d7f53d82dcb0801f041574a6a43":{label:"Sony Xperia Z, Z1",width:1080,height:1920,scaleFactor:3,dpWidth:360,dpHeight:5760}},screens:{"9e523ae15b61dc766f5c818726881ecf":{label:"1920 Ã 1080",width:1920,height:1080,dpWidth:1920,dpHeight:1080,scaleFactor:1},"07769cd8d0a7d09818b2f0b018042fb7":{label:"1366 Ã 768",width:1366,height:768,dpWidth:1366,dpHeight:768,scaleFactor:1},"72d5478a24194f98b9378e8e0fd65737":{label:"1280 Ã 1024",width:1280,height:1024,dpWidth:1280,dpHeight:1024,scaleFactor:1},b7a6dd5900cc72e61f0d3479c7e314ec:{label:"1280 Ã 800",width:1280,height:800,dpWidth:1280,dpHeight:800,scaleFactor:1},"43193b0ff671a37d8232ab664190a125":{label:"1024 Ã 768",width:1024,height:768,dpWidth:1024,dpHeight:768,scaleFactor:1},c29e48814af5443ff5688d9e967ce917:{label:"800 Ã 600",width:800,height:600,dpWidth:800,dpHeight:600,scaleFactor:1}}}
}),define("tpl!taoQtiItem/qtiCreator/tpl/preview/preview",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\r\n                        <option value="',(a=i.value)?n=a.call(e,{hash:{},data:t}):(a=e&&e.value,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+'" ',n=i["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=">",(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+"</option>\r\n                        "}function o(){return'selected="selected"'}function s(e,t){var n,a,r="";return r+='\r\n                        <option value="',(a=i.value)?n=a.call(e,{hash:{},data:t}):(a=e&&e.value,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+'" data-value="',(a=i.dataValue)?n=a.call(e,{hash:{},data:t}):(a=e&&e.dataValue,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+'" ',n=i["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=">",(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+"</option>\r\n                        "
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h="function",p=this.escapeExpression,f=this,m=i.helperMissing;return u+='<div class="preview-overlay tao-scope overlay preview-',(c=i.previewType)?l=c.call(t,{hash:{},data:a}):(c=t&&t.previewType,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+' item-no-print"\r\n     style="overflow-x: hidden;display:none">\r\n    <div class="preview-container-outer">\r\n        <form class="preview-utility-bar plain">\r\n            <div class="preview-utility-bar-inner grid-row">\r\n\r\n                <div class="col-4">\r\n                    <input type="hidden" value="" data-value="" class="standard-device-selector preview-device-selector" data-target="standard">\r\n                    <select class="preview-type-selector">\r\n                        ',l=i.each.call(t,t&&t.previewTypes,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='\r\n                    </select>\r\n                </div>\r\n                <div class="col-6 standard-only device-type-and-orientation"></div>\r\n                <div class="col-6 desktop-only device-type-and-orientation">\r\n                    <select class="desktop-device-selector preview-device-selector" data-target="desktop">\r\n                        ',l=i.each.call(t,t&&t.desktopDevices,{hash:{},inverse:f.noop,fn:f.program(4,s,a),data:a}),(l||0===l)&&(u+=l),u+='\r\n                    </select>\r\n                </div>\r\n                <div class="col-6 mobile-only device-type-and-orientation">\r\n                    <select class="mobile-device-selector preview-device-selector" data-target="mobile">\r\n                        ',l=i.each.call(t,t&&t.mobileDevices,{hash:{},inverse:f.noop,fn:f.program(4,s,a),data:a}),(l||0===l)&&(u+=l),u+='\r\n                    </select>\r\n                    <select tabindex="-1" class="mobile-orientation-selector orientation-selector"\r\n                            data-target="mobile">\r\n                        <option value="landscape">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Landscape",d):m.call(t,"__","Landscape",d)))+'</option>\r\n                        <option value="portrait">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Portrait",d):m.call(t,"__","Portrait",d)))+'</option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-2">\r\n                    <!--label>\r\n                        <input type="checkbox"/>\r\n                        <span class="icon-checkbox"></span>\r\n                        '+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Scale ",d):m.call(t,"__","Scale ",d)))+'\r\n                    </label-->\r\n                        <span class="btn-info small preview-closer rgt">\r\n                            '+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Close",d):m.call(t,"__","Close",d)))+'\r\n                            <span class="icon-close r"></span>\r\n                        </span>\r\n                </div>\r\n            </div>\r\n            <div class="preview-message-box">\r\n                <div class="feedback-info small">\r\n                    <span class="icon-info"></span>\r\n                    '+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"This preview may be scaled to fit your screen. The final rendering may differ.",d):m.call(t,"__","This preview may be scaled to fit your screen. The final rendering may differ.",d)))+'\r\n                    <a href="#">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Donât show this again!",d):m.call(t,"__","Donât show this again!",d)))+'</a>\r\n                    <span title="'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Remove this message",d):m.call(t,"__","Remove this message",d)))+'" class="icon-close close-trigger"></span>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <div class="preview-canvas">\r\n\r\n            <div class="preview-scale-container">\r\n                <div class="',(c=i.previewType)?l=c.call(t,{hash:{},data:a}):(c=t&&t.previewType,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+"-preview-frame preview-outer-frame ",(c=i.previewType)?l=c.call(t,{hash:{},data:a}):(c=t&&t.previewType,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'-preview-landscape">\r\n                    <div class="',(c=i.previewType)?l=c.call(t,{hash:{},data:a}):(c=t&&t.previewType,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'-preview-container preview-container">\r\n                        <div class="preview-item-container"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div id="preview-console">\r\n        <span class="icon-close preview-console-closer" title="'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Close console",d):m.call(t,"__","Close console",d)))+'"></span>\r\n\r\n        <div class="preview-console-header grid-row clearfix">\r\n            <div class="col-12">\r\n                <button type="button" class="btn-info small rgt" id="preview-submit-button">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Submit",d):m.call(t,"__","Submit",d)))+'</button>\r\n            </div>\r\n        </div>\r\n        <div class="preview-console-body clear">\r\n            <ul></ul>\r\n        </div>\r\n    </div>\r\n</div>'
})}),define("urlParser",["lodash"],function(e){function t(n){this.url=n;var a=document.createElement("a");a.href=n,this.data=e.pick(a,i),this.params=t.extractParams(this.data.search)}var i=["hash","host","hostname","pathname","port","protocol","search"];return t.extractParams=function(e){var t={};return e.replace(/^\?/,"").replace(/([^=&]+)=([^&]*)/g,function(e,i,n){t[decodeURIComponent(i)]=decodeURIComponent(n)}),t},t.prototype.get=function(t){return e.contains(i,t)?this.data[t]:!1},t.prototype.getParams=function(){return this.params},t.prototype.setParams=function(t){e.isObject(t)&&(this.params=t)},t.prototype.addParam=function(e,t){e&&(this.params[e]=t)},t.prototype.getPaths=function(){return this.data.pathname.replace(/^\/|\/$/g,"").split("/")
},t.prototype.getUrl=function(t){var i="";return t=t||[],this.data&&(this.data.hostname&&!e.contains(t,"host")&&(i+=(this.data.protocol?this.data.protocol:"http:")+"//"+this.data.hostname.replace(/\/$/,""),this.data.port&&80!==this.data.port&&"80"!==this.data.port&&"0"!==this.data.port&&(i+=":"+this.data.port)),/\/$/.test(i)||/^\//.test(this.data.pathname)||(i+="/"),i+=this.data.pathname,this.params&&!e.contains(t,"params")&&(i+="?",e.forEach(this.params,function(e,t){i+=encodeURIComponent(t)+"="+encodeURIComponent(e)+"&"}),i=i.substring(0,i.length-1)),this.data.hash&&!e.contains(t,"hash")&&(i+=this.data.hash)),i},t.prototype.getBaseUrl=function(){var e=this.getUrl(["params","hash"]),t=this.getPaths(),i=t[t.length-1];
return t.length>0&&/\.[a-z]+$/.test(i)&&(e=e.replace(i,"").replace(/\/\/$/,"/")),e},t.prototype.checkCORS=function(e){if(e=e||new t(window.location),e instanceof t)return this.get("protocol")===e.get("protocol")&&this.get("hostname")===e.get("hostname")&&this.get("port")===e.get("port");throw new Error("parsedUrl parameter must be an instanceof UrlParser")},t}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n<li data-css-res="',(a=i.path)?n=a.call(e,{hash:{},data:t}):(a=e&&e.path,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'">\n    <span class="icon-preview style-sheet-toggler" title="',(a=i.title)?n=a.call(e,{hash:{},data:t}):(a=e&&e.title,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'"></span>\n    <span class="file-label truncate" title="',(a=i.editLabelTxt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.editLabelTxt,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'">',(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'</span>\n    <input type="text" class="style-sheet-label-editor" value="',(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'">\n    <span class="icon-bin" title="',(a=i.deleteTxt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.deleteTxt,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'" data-role="css-delete"></span>\n    <span class="icon-download" title="',(a=i.downloadTxt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.downloadTxt,n=typeof a===s?a.call(e,{hash:{},data:t}):a),r+=l(n)+'" data-role="css-download"></span>\n</li>\n'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s="function",l=this.escapeExpression,c=this;return o=i.each.call(t,t&&t.stylesheets,{hash:{},inverse:c.noop,fn:c.program(1,r,a),data:a}),o||0===o?o:""})}),function(e){e.extend({fileDownload:function(t,i){function n(){if(-1!=document.cookie.indexOf(l.cookieName+"="+l.cookieValue)){m.onSuccess(t);var i=new Date(1e3);return document.cookie=l.cookieName+"=; expires="+i.toUTCString()+"; path="+l.cookiePath,void r(!1)}if(v||g)try{var o;if(o=v?v.document:a(g),o&&null!=o.body&&o.body.innerHTML.length>0){var s=!0;if(y&&y.length>0){var c=e(o.body).contents().first();c.length>0&&c[0]===y[0]&&(s=!1)
}if(s)return m.onFail(o.body.innerHTML,t),void r(!0)}}catch(d){return m.onFail("",t),void r(!0)}setTimeout(n,l.checkInterval)}function a(e){var t=e[0].contentWindow||e[0].contentDocument;return t.document&&(t=t.document),t}function r(e){setTimeout(function(){v&&(u&&v.close(),d&&(e?(v.focus(),v.close()):v.focus()))},0)}function o(e){return e.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")}var s=function(){alert("A file download error has occurred, please try again.")},l=e.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(){},failCallback:s,httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},i),c=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),d=!1,u=!1,h=!1;
/ip(ad|hone|od)/.test(c)?d=!0:-1!=c.indexOf("android")?u=!0:h=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(c.substr(0,4));
var p=l.httpMethod.toUpperCase();if(u&&"GET"!=p)return void(e().dialog?e("<div>").html(l.androidPostUnsupportedMessageHtml).dialog(l.dialogOptions):alert(l.androidPostUnsupportedMessageHtml));var f=null;l.preparingMessageHtml&&(f=e("<div>").html(l.preparingMessageHtml).dialog(l.dialogOptions));var m={onSuccess:function(e){f&&f.dialog("close"),l.successCallback(e)},onFail:function(t,i){f&&f.dialog("close"),l.failMessageHtml?(e("<div>").html(l.failMessageHtml).dialog(l.dialogOptions),l.failCallback!=s&&l.failCallback(t,i)):l.failCallback(t,i)}};null!==l.data&&"string"!=typeof l.data&&(l.data=e.param(l.data));var g,v,b,y;if("GET"===p){if(null!==l.data){var C=t.indexOf("?");
-1!=C?"&"!==t.substring(t.length-1)&&(t+="&"):t+="?",t+=l.data}d||u?(v=window.open(t),v.document.title=l.popupWindowTitle,window.focus()):h?window.location(t):g=e("<iframe>").hide().attr("src",t).appendTo("body")}else{var I="";null!==l.data&&e.each(l.data.replace(/\+/g," ").split("&"),function(){var e=this.split("="),t=l.encodeHTMLEntities?o(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(t){var i=e[1]||"";i=l.encodeHTMLEntities?o(decodeURIComponent(e[1])):decodeURIComponent(e[1]),I+='<input type="hidden" name="'+t+'" value="'+i+'" />'}}),h?(y=e("<form>").appendTo("body"),y.hide().attr("method",l.httpMethod).attr("action",t).html(I)):(d?(v=window.open("about:blank"),v.document.title=l.popupWindowTitle,b=v.document,window.focus()):(g=e("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),b=a(g)),b.write("<html><head></head><body><form method='"+l.httpMethod+"' action='"+t+"'>"+I+"</form>"+l.popupWindowTitle+"</body></html>"),y=e(b).find("form")),y.submit()
}setTimeout(n,l.checkInterval)}})}(jQuery),define("lib/jquery.fileDownload",function(){}),define("taoQtiItem/qtiCreator/editor/styleEditor/styleEditor",["jquery","lodash","helpers","i18n","urlParser","tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler","lib/jquery.fileDownload"],function(e,t,i,n,a,r){var o,s=function(e){return i._url(e,"QtiCssAuthoring","taoQtiItem")},l=function(e){return e.substring(e.lastIndexOf("/")+1)},c=function(e,i){var c,d={},u=function(){var t=e("#item-editor-user-styles");return t.length?t.empty():(t=e("<style>",{id:"item-editor-user-styles"}),e("head").append(t)),t}(),h={title:n("Disable this stylesheet temporarily"),deleteTxt:n("Remove this stylesheet"),editLabelTxt:n("Edit stylesheet label"),downloadTxt:n("Download this stylesheet"),preparingMessageHtml:n("Preparing CSS, please waitâ¦"),failMessageHtml:n("There was a problem downloading your CSS, please try again."),isInValidLocalTxt:n("This stylesheet has not been found on the server. you may want to delete this reference")},p="",f=function(e){var i,n,a,r,o="";
if(t.isEmpty(d))return g();for(i in d)if(d.hasOwnProperty(i)){o+=i+"{";for(n in d[i])if(d[i].hasOwnProperty(n))if(t.isPlainObject(d[i][n]))for(a in d[i][n]){o+=n+"{";for(r in d[i][n])o+=r+":"+d[i][n][a]+";";o+="}"}else o+=n+":"+d[i][n]+";";o+="}\n"}return e||u.text(o),o},m=function(i,n,a){d[i]=d[i]||{},a?d[i][n]=a:(delete d[i][n],0===t.size(d[i])&&delete d[i]),f(),e(document).trigger("stylechange.qti-creator")},g=function(){return d={},u.text(""),!1},v=function(){return y(),e.post(s("save"),t.extend({},o,{cssJson:JSON.stringify(d),stylesheetUri:p.attr("href")}))},b=function(i){y(),e.fileDownload(s("download"),{preparingMessageHtml:h.preparingMessageHtml,failMessageHtml:h.failMessageHtml,successCallback:function(){},httpMethod:"POST",data:t.extend({},o,{stylesheetUri:i})})
},y=function(){if(!o)throw new Error("Missing itemConfig, did you call styleEditor.init()?");return!0},C=function(n){var o,s,p,f,m=[],g=function(t,n,a,s){var l=a&&!s,c={path:n.attr("href"),label:n.attr("title")||o,title:h.title,deleteTxt:h.deleteTxt,downloadTxt:h.downloadTxt,editLabelTxt:l?h.isInValidLocalTxt:h.editLabelTxt};return m.push(c),p=e(r({stylesheets:m})),p.data("stylesheetObj",n),e("#style-sheet-toggler").append(p),l?(p.addClass("not-available"),void p.find('[data-role="css-download"], .style-sheet-toggler').css("visibility","hidden")):(u.before(t),void setTimeout(function(){e(i).trigger("customcssloaded.styleeditor",[d]),e(window).trigger("resize")
},a?500:3500))};t.isString(n)&&(n=c.createStyleSheet(n)),o=l(n.attr("href")),s=function(){var t=e(n.render()),i=t.attr("href"),a=i.indexOf("?")>-1?"&":"?";return t.attr("href",i+a+(new Date).getTime().toString()),t}(),f=new a(s.attr("href")),f.checkCORS()?e.when(e.ajax(s.attr("href"))).then(function(){g(s,n,!0,!0)},function(){g(s,n,!0,!1)}):g(s,n,!1)},I=function(){var e;for(var t in c.stylesheets)c.stylesheets.hasOwnProperty(t)&&(e=c.stylesheets[t],"tao-user-styles.css"!==l(e.attr("href"))?C(c.stylesheets[t]):p=e);p||(p=c.createStyleSheet("style/custom/tao-user-styles.css"))},E=function(){e("link[data-serial]").remove()},w=function(){return c},x=function(n,a){c=n,o={uri:a.uri,lang:a.lang,baseUrl:a.baseUrl},E(),I();
var r=e("#item-editor-item-resizer").data("target"),l=p.attr("href");c.data("responsive",!0),e.when(e.getJSON(s("load"),t.extend({},o,{stylesheetUri:l}))).then(function(t){d=t,f(),d.length&&c.data("responsive",!(!d[r]||!d[r].width)),e(i).trigger("customcssloaded.styleeditor",[d])})},T=function(){return d};return{apply:m,save:v,download:b,erase:g,init:x,create:f,getItem:w,getStyle:T,addStylesheet:C}}(e,document);return c}),define("iframeNotifier",["jquery"],function(){function e(e){return!(!window.__knownParent__||!e||e===window)}var t={parent:function(t,i){if(e(window.parent)&&window.parent.$){var n=window.parent.$;n(window.parent.document).trigger(t,i||[])}},top:function(t,i){if(e(window.top)&&window.top.$){var n=window.top.$;
n(window.top.document).trigger(t,i||[])}}};return t}),define("jquery.sizechange",["jquery","lodash"],function(e,t){function i(){return window.MutationObserver||window.WebKitMutationObserver||!1}function n(){var e=document.createElement("p"),t=!1;if(e.addEventListener)e.addEventListener("DOMAttrModified",function(){t=!0},!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",function(){t=!0})}return e.setAttribute("id","__dummy_domtest_target"),t}e.fn.sizeChange=function(a){var r=this,o=!1;if(a=a||e.noop(),0===r.length)return r;var s=t.throttle(function(e){a(),t.delay(e,1),e(),r.find("img").one("load",function(){a()})},10);if(i()){var l=window.MutationObserver||window.WebKitMutationObserver,c={childList:"IFRAME"!==this[0].nodeName,subtree:!0,attributes:!0,attributeFilter:["style","width","heigh"]},d=new l(function(e){for(var t in e)if(null!==e[t].addedNodes||null!==e[t].attributeName)return h(),void s(u)
}),u=function(){r.each(function(){d.observe(this,c)})},h=function(){d.disconnect()};u()}else{if(!n())throw new Error("Event listening not supported");var p=function(){o=!1};r.on("DOMAttrModified",function(e){"style"!==e.attrName||o||(o=!0,s(p))}),r.on("DOMNodeRemoved DOMNodeInserted DOMNodeInsertedIntoDocument DOMNodeRemovedFromDocument",function(e){1!==e.target.nodeType||o||(o=!0,s(p))})}return this}}),define("iframeResizer",["jquery","iframeNotifier","jquery.sizechange"],function(e,t){var i={autoHeight:function(t,i,n){var a=this;return i=i||"body",n=n||0,t.on("load",function(){var r=t.contents(),o=r.height(),s=!1,l=function(){s===!1&&(s=!0,setTimeout(function(){a._adaptHeight(t,o,n),s=!1
},1))};a._adaptHeight(t,o);try{e(r[0].document).find("img");var c=function(){var e=r.height();e>o&&(o=e,l()),e>o&&(o=e,l())};r.find(i).sizeChange(function(){c()}),r[0].resize(function(){c()})}catch(d){setInterval(function(){var e=r.height();e>o&&(o=e,l())},10)}}),t},eventHeight:function(t,i){var n=this;!i||parseInt(i,10)<10,t.on("load.eventHeight",function(){var e=parseInt(t.contents().height(),10)-parseInt(t.height(),10);e>i&&(i=e),n._adaptHeight(t,t.contents().height()+i)}),e(document).on("heightchange",function(e,a,r){r=r||0,n._adaptHeight(t,a+r+i)})},_notifyParent:function(e,i){t.parent("heightchange",[e,i||0])},_adaptHeight:function(e,t,i){e.height(t),this._notifyParent(t,i)
}};return i}),define("taoQtiItem/qtiCreator/helper/itemSerializer",["lodash"],function(){var e={serialize:function(e){var t="";if(e)try{t=JSON.stringify(e.toArray())}catch(i){console.error(i)}return t}};return e}),define("core/pluginifier",["jquery","lodash"],function(e,t){var i={options:function(i,n,a){return this.each(function(){var n=e(this),r=n.data(i);r&&n.data(i,t.merge(r,a))})},disable:function(t,i){return this.each(function(){var n=e(this),a=n.data(t);a&&n.addClass(a.disableClass||"disabled").trigger("disable."+i)})},enable:function(t,i){return this.each(function(){var n=e(this),a=n.data(t);a&&n.removeClass(a.disableClass||"disabled").trigger("enable."+i)
})}},n={register:function(n,a,r){r=r||{};var o=r.ns||n.toLowerCase(),s=r.dataNs||"ui."+o,l=r.expose||[];return t.isFunction(e.fn[n])?e.error("A plugin named "+n+" is already registered"):t.isPlainObject(a)&&t.isFunction(a.init)?(t.assign(a,t.transform(i,function(e,n,a){t.isFunction(n)&&(e[a]=t.partial(i[a],s,o))})),t.forEach(l,function(i){var n=i,r=i;/^_/.test(l)?r=r.replace(/^_/,""):n="_"+n,t.isFunction(a[n])&&!t.isFunction(a[r])&&(a[r]=function(){var t=arguments;return this.each(function(){a[n].apply(a,[e(this)].concat(t))})})}),void(e.fn[n]=function(t){if(a[t]){if(!/^_/.test(t))return a[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Trying to call a private method `"+t+"`")
}else if("object"==typeof t||!t)return a.init.apply(this,arguments);e.error("Method "+t+" does not exist on plugin")})):e.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}};return n}),define("core/dataattrhandler",["jquery","lodash"],function(e,t){var i={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},n=[":radio",":checkbox"],a=function(e){return!e.is(n.join(","))},r=function(n,o){var s=this;this.options=t.defaults(o,i);var l="[data-"+n+"]";return t.has(this.options,"namespace")&&t.isString(this.options.namespace)?(this.options.container&&this.options.container.selector&&(l=this.options.container.selector+" "+l),this.options.inner&&(l+=" "+this.options.inner),void e(document).off(this.options.listenerEvent,l).on(this.options.listenerEvent,l,function(t){var i=e(t.target);
if(s.options.bubbled===!0||i.is(l)){var o,c;void 0===i.data(n)&&(s.options.inner||s.options.bubbled)&&(c=i,i=i.parents("[data-"+n+"]")),o=s.options.useTarget===!0?r.getTarget(n,i):s.options.inner?c:void 0,i.data(s.options.namespace)||("function"==typeof s.createPlugin&&s.createPlugin(i,o),i.is(":radio")&&i.attr("name")&&e(':radio[name="'+i.attr("name")+'"]').not(i).on(s.options.listenerEvent,function(e){"function"==typeof s.callPluginMethod&&s.callPluginMethod(i,o),a(i)&&e.preventDefault()})),"function"==typeof s.callPluginMethod&&s.callPluginMethod(i,o),a(i)&&t.preventDefault()}})):e.error("The plugin data namespace option is required")};return r.prototype.init=function(e){return this.createPlugin=e,this
},r.prototype.trigger=function(e){return this.callPluginMethod=e,this},r.getTarget=function(i,n){var a=/^(\+|>|~|:parent|<)/,r=[],o=n.attr("data-"+i)||n.attr("href")||n.attr("attrName");if(!t.isEmpty(o)){var s=a.exec(o);if(null!==s){var l=o.replace(a,"");r=":parent"===s[0]||"<"===s[0]?n.parents(l):"~"===s[0]?n.siblings(l):"+"===s[0]?n.next(l):e(l,n)}else r=e(o)}return r},r}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function(e,t,i){var n="modal",a="ui."+n,r={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:!1,vCenter:!0},o={init:function(t){return t=e.extend(!0,{},r,t),e(this).each(function(){var i=e(this);
t.modalOverlay="__modal-bg-"+(i.attr("id")||(new Date).getTime()),i.data(a,t),0===e("#"+t.modalOverlay).length&&e("<div/>").attr({id:t.modalOverlay,"class":t.modalOverlayClass}).insertAfter(i),0!==e("."+t.modalCloseClass,i).length||t.disableClosing||e('<div class="'+t.modalCloseClass+'"><span class="icon-close"></span></div>').appendTo(i),t.startClosed||o._open(i),i.trigger("create."+n)})},_bindEvents:function(t){var i=t.data(a);"responsive"===i.width&&e(window).on("resize."+n,function(e){e.preventDefault(),o._resize(t)}),i.disableClosing||(e("."+i.modalCloseClass,t).on("click."+n,function(e){e.preventDefault(),o._close(t)}),e("#"+i.modalOverlay).on("click."+n,function(e){e.preventDefault(),o._close(t)
}),e(document).on("keydown."+n,function(e){27===e.keyCode&&(e.preventDefault(),o._close(t))}))},_unBindEvents:function(t){var i=t.data(a);"responsive"===i.width&&e(window).off("resize."+n),t.off("click."+n),i.disableClosing||(e("."+i.modalCloseClass,t).off("click."+n),e("#"+i.modalOverlay).off("click."+n),e(document).off("keydown."+n))},_open:function(t){var i=t.outerHeight(),r=e(window).height(),s=t.data(a);if("undefined"!=typeof s){var l=s.vCenter||i>r?40:(r-i)/2;o._resize(t),t.css({top:"-"+i+"px",display:"block"}),e("#"+s.modalOverlay).fadeIn(300),t.animate({opacity:"1",top:l+"px"}),t.addClass("opened"),o._bindEvents(t),t.trigger("opened."+n)}},_close:function(t){var i=t.data(a);
o._unBindEvents(t),e("#"+i.modalOverlay).fadeOut(300),t.animate({opacity:"0",top:"-1000px"},500,function(){t.css("display","none")}),t.removeClass("opened"),t.trigger("closed."+n)},_resize:function(t){var i=t.data(a),n=parseInt(e(window).width(),10),r="responsive"===i.width?.7*n:parseInt(i.width,10);i.minWidth&&r<i.minWidth&&(r=i.minWidth),t.css({width:r+"px"})}};return t.register(n,o,{expose:["open","close"]}),function(e){new i("modal",{container:e,listenerEvent:"click",namespace:a}).init(function(e,t){t.modal()})}}),!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),n=-1,a=this.length;++n<a&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this
}})}(jQuery),function(e,t){function i(t){var i=e(document.createTextNode(""));t.before(i),i.before(t),i.remove()}function n(e){function t(e){return $[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function a(e,t){for(var i=0,n=t.length;n>i;i+=1)if(o(e,t[i]))return i;return-1}function r(){var t=e(L);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function o(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function s(t,i){var n,a,r;if(null===t||t.length<1)return[];for(n=t.split(i),a=0,r=n.length;r>a;a+=1)n[a]=e.trim(n[a]);
return n}function l(e){return e.outerWidth(!1)-e.width()}function c(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var a=e.data(i,n);a!==t&&i.val()!==a&&(e.removeData(i,n),i.trigger("keyup-change"))})}function d(i){i.on("mousemove",function(i){var n=Q;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function u(e,i,n){n=n||t;var a;return function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout(function(){i.apply(n,t)},e)}}function h(e,t){var i=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){a(e.target,t.get())>=0&&i(e)
})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus();var a=i.offsetWidth>0||i.offsetHeight>0;a&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var a=document.selection.createRange();n=document.selection.createRange().text.length,a.moveStart("character",-t.value.length),i=a.text.length-n}return{offset:i,length:n}}function m(e){e.preventDefault(),e.stopPropagation()
}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!N){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);N=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),N.attr("class","select2-sizer"),e("body").append(N)}return N.text(t.val()),N.width()}function b(t,i,n){var a,r,o=[];a=e.trim(t.attr("class")),a&&(a=""+a,e(a.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),a=e.trim(i.attr("class")),a&&(a=""+a,e(a.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(r=n(this),r&&o.push(r))
})),t.attr("class",o.join(" "))}function y(e,t,i,a){var r=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),o=t.length;return 0>r?void i.push(a(e)):(i.push(a(e.substring(0,r))),i.push("<span class='select2-match'>"),i.push(a(e.substring(r,r+o))),i.push("</span>"),void i.push(a(e.substring(r+o,e.length))))}function C(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function I(i){var n,a=null,r=i.quietMillis||100,o=i.url,s=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,r=o,c=i.transport||e.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);
n=n?n.call(s,l.term,l.page,l.context):null,r="function"==typeof r?r.call(s,l.term,l.page,l.context):r,a&&"function"==typeof a.abort&&a.abort(),i.params&&(e.isFunction(i.params)?e.extend(u,i.params.call(s)):e.extend(u,i.params)),e.extend(u,{url:r,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var n={hasError:!0,jqXHR:e,textStatus:t,errorThrown:i};l.callback(n)}}),a=c.call(s,u)},r)}}function E(t){var i,n,a=t,r=function(e){return""+e.text};e.isArray(a)&&(n=a,a={results:n}),e.isFunction(a)===!1&&(n=a,a=function(){return n});var o=a();return o.text&&(r=o.text,e.isFunction(r)||(i=o.text,r=function(e){return e[i]
})),function(t){var i,n=t.term,o={results:[]};return""===n?void t.callback(a()):(i=function(a,o){var s,l;if(a=a[0],a.children){s={};for(l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);s.children=[],e(a.children).each2(function(e,t){i(t,s.children)}),(s.children.length||t.matcher(n,r(s),a))&&o.push(s)}else t.matcher(n,r(a),a)&&o.push(a)},e(a().results).each2(function(e,t){i(t,o.results)}),void t.callback(o))}}function w(i){var n=e.isFunction(i);return function(a){var r=a.term,o={results:[]},s=n?i(a):i;e.isArray(s)&&(e(s).each(function(){var e=this.text!==t,i=e?this.text:this;(""===r||a.matcher(r,i))&&o.results.push(e?this:{id:this,text:this})}),a.callback(o))}}function x(t,i){if(e.isFunction(t))return!0;
if(!t)return!1;if("string"==typeof t)return!0;throw new Error(i+" must be a string, function, or falsy value")}function T(t,i){if(e.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(i,n)}return t}function _(t){var i=0;return e.each(t,function(e,t){t.children?i+=_(t.children):i++}),i}function k(e,i,n,a){var r,s,l,c,d,u=e,h=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(s=-1,l=0,c=a.tokenSeparators.length;c>l&&(d=a.tokenSeparators[l],s=e.indexOf(d),!(s>=0));l++);if(0>s)break;if(r=e.substring(0,s),e=e.substring(s+d.length),r.length>0&&(r=a.createSearchChoice.call(this,r,i),r!==t&&null!==r&&a.id(r)!==t&&null!==a.id(r))){for(h=!1,l=0,c=i.length;c>l;l++)if(o(a.id(r),a.id(i[l]))){h=!0;
break}h||n(r)}}return u!==e?e:void 0}function R(){var t=this;e.each(arguments,function(e,i){t[i].remove(),t[i]=null})}function D(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var O,q,S,K,A,N,M,P,Q={x:0,y:0},O={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case O.LEFT:case O.RIGHT:case O.UP:case O.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case O.SHIFT:case O.CTRL:case O.ALT:return!0
}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},L="<div class='select2-measure-scrollbar'></div>",$={"â¶":"A",ï¼¡:"A",Ã:"A",Ã:"A",Ã:"A",áº¦:"A",áº¤:"A",áºª:"A",áº¨:"A",Ã:"A",Ä:"A",Ä:"A",áº°:"A",áº®:"A",áº´:"A",áº²:"A",È¦:"A",Ç :"A",Ã:"A",Ç:"A",áº¢:"A",Ã:"A",Çº:"A",Ç:"A",È:"A",È:"A",áº :"A",áº¬:"A",áº¶:"A",á¸:"A",Ä:"A",Èº:"A",â±¯:"A",ê²:"AA",Ã:"AE",Ç¼:"AE",Ç¢:"AE",ê´:"AO",ê¶:"AU",ê¸:"AV",êº:"AV",ê¼:"AY","â·":"B",ï¼¢:"B",á¸:"B",á¸:"B",á¸:"B",É:"B",Æ:"B",Æ:"B","â¸":"C",ï¼£:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ã:"C",á¸:"C",Æ:"C",È»:"C",ê¾:"C","â¹":"D",ï¼¤:"D",á¸:"D",Ä:"D",á¸:"D",á¸:"D",á¸:"D",á¸:"D",Ä:"D",Æ:"D",Æ:"D",Æ:"D",ê¹:"D",Ç±:"DZ",Ç:"DZ",Ç²:"Dz",Ç:"Dz","âº":"E",ï¼¥:"E",Ã:"E",Ã:"E",Ã:"E",á»:"E",áº¾:"E",á»:"E",á»:"E",áº¼:"E",Ä:"E",á¸:"E",á¸:"E",Ä:"E",Ä:"E",Ã:"E",áºº:"E",Ä:"E",È:"E",È:"E",áº¸:"E",á»:"E",È¨:"E",á¸:"E",Ä:"E",á¸:"E",á¸:"E",Æ:"E",Æ:"E","â»":"F",ï¼¦:"F",á¸:"F",Æ:"F",ê»:"F","â¼":"G",ï¼§:"G",Ç´:"G",Ä:"G",á¸ :"G",Ä:"G",Ä :"G",Ç¦:"G",Ä¢:"G",Ç¤:"G",Æ:"G","ê ":"G",ê½:"G",ê¾:"G","â½":"H",ï¼¨:"H",Ä¤:"H",á¸¢:"H",á¸¦:"H",È:"H",á¸¤:"H",á¸¨:"H",á¸ª:"H",Ä¦:"H",â±§:"H",â±µ:"H","ê":"H","â¾":"I",ï¼©:"I",Ã:"I",Ã:"I",Ã:"I",Ä¨:"I",Äª:"I",Ä¬:"I",Ä°:"I",Ã:"I",á¸®:"I",á»:"I",Ç:"I",È:"I",È:"I",á»:"I",Ä®:"I",á¸¬:"I",Æ:"I","â¿":"J",ï¼ª:"J",Ä´:"J",É:"J","â":"K",ï¼«:"K",á¸°:"K",Ç¨:"K",á¸²:"K",Ä¶:"K",á¸´:"K",Æ:"K",â±©:"K",ê:"K",ê:"K",ê:"K","ê¢":"K","â":"L",ï¼¬:"L",Ä¿:"L",Ä¹:"L",Ä½:"L",á¸¶:"L",á¸¸:"L",Ä»:"L",á¸¼:"L",á¸º:"L",Å:"L",È½:"L",â±¢:"L",â± :"L",ê:"L",ê:"L",ê:"L",Ç:"LJ",Ç:"Lj","â":"M",ï¼­:"M",á¸¾:"M",á¹:"M",á¹:"M",â±®:"M",Æ:"M","â":"N",ï¼®:"N",Ç¸:"N",Å:"N",Ã:"N",á¹:"N",Å:"N",á¹:"N",Å:"N",á¹:"N",á¹:"N",È :"N",Æ:"N","ê":"N","ê¤":"N",Ç:"NJ",Ç:"Nj","â":"O",ï¼¯:"O",Ã:"O",Ã:"O",Ã:"O",á»:"O",á»:"O",á»:"O",á»:"O",Ã:"O",á¹:"O",È¬:"O",á¹:"O",Å:"O",á¹:"O",á¹:"O",Å:"O",È®:"O",È°:"O",Ã:"O",Èª:"O",á»:"O",Å:"O",Ç:"O",È:"O",È:"O",Æ :"O",á»:"O",á»:"O",á» :"O",á»:"O",á»¢:"O",á»:"O",á»:"O",Çª:"O",Ç¬:"O",Ã:"O",Ç¾:"O",Æ:"O",Æ:"O",ê:"O",ê:"O",Æ¢:"OI",ê:"OO",È¢:"OU","â":"P",ï¼°:"P",á¹:"P",á¹:"P",Æ¤:"P",â±£:"P",ê:"P",ê:"P",ê:"P","â":"Q",ï¼±:"Q",ê:"Q",ê:"Q",É:"Q","â":"R",ï¼²:"R",Å:"R",á¹:"R",Å:"R",È:"R",È:"R",á¹:"R",á¹:"R",Å:"R",á¹:"R",É:"R",â±¤:"R",ê:"R","ê¦":"R",ê:"R","â":"S",ï¼³:"S",áº:"S",Å:"S",á¹¤:"S",Å:"S",á¹ :"S",Å :"S",á¹¦:"S",á¹¢:"S",á¹¨:"S",È:"S",Å:"S","â±¾":"S","ê¨":"S",ê:"S","â":"T",ï¼´:"T",á¹ª:"T",Å¤:"T",á¹¬:"T",È:"T",Å¢:"T",á¹°:"T",á¹®:"T",Å¦:"T",Æ¬:"T",Æ®:"T",È¾:"T",ê:"T",ê¨:"TZ","â":"U",ï¼µ:"U",Ã:"U",Ã:"U",Ã:"U",Å¨:"U",á¹¸:"U",Åª:"U",á¹º:"U",Å¬:"U",Ã:"U",Ç:"U",Ç:"U",Ç:"U",Ç:"U",á»¦:"U",Å®:"U",Å°:"U",Ç:"U",È:"U",È:"U",Æ¯:"U",á»ª:"U",á»¨:"U",á»®:"U",á»¬:"U",á»°:"U",á»¤:"U",á¹²:"U",Å²:"U",á¹¶:"U",á¹´:"U",É:"U","â":"V",ï¼¶:"V",á¹¼:"V",á¹¾:"V",Æ²:"V",ê:"V",É:"V",ê :"VY","â":"W",ï¼·:"W",áº:"W",áº:"W",Å´:"W",áº:"W",áº:"W",áº:"W",â±²:"W","â":"X",ï¼¸:"X",áº:"X",áº:"X","â":"Y",ï¼¹:"Y",á»²:"Y",Ã:"Y",Å¶:"Y",á»¸:"Y",È²:"Y",áº:"Y",Å¸:"Y",á»¶:"Y",á»´:"Y",Æ³:"Y",É:"Y",á»¾:"Y","â":"Z",ï¼º:"Z",Å¹:"Z",áº:"Z",Å»:"Z",Å½:"Z",áº:"Z",áº:"Z",Æµ:"Z",È¤:"Z","â±¿":"Z",â±«:"Z",ê¢:"Z","â":"a",ï½:"a",áº:"a",Ã :"a",Ã¡:"a",Ã¢:"a",áº§:"a",áº¥:"a",áº«:"a",áº©:"a",Ã£:"a",Ä:"a",Ä:"a",áº±:"a",áº¯:"a",áºµ:"a",áº³:"a",È§:"a",Ç¡:"a",Ã¤:"a",Ç:"a",áº£:"a",Ã¥:"a",Ç»:"a",Ç:"a",È:"a",È:"a",áº¡:"a",áº­:"a",áº·:"a",á¸:"a",Ä:"a",â±¥:"a",É:"a",ê³:"aa",Ã¦:"ae",Ç½:"ae",Ç£:"ae",êµ:"ao",ê·:"au",ê¹:"av",ê»:"av",ê½:"ay","â":"b",ï½:"b",á¸:"b",á¸:"b",á¸:"b",Æ:"b",Æ:"b",É:"b","â":"c",ï½:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ã§:"c",á¸:"c",Æ:"c",È¼:"c",ê¿:"c",â:"c","â":"d",ï½:"d",á¸:"d",Ä:"d",á¸:"d",á¸:"d",á¸:"d",á¸:"d",Ä:"d",Æ:"d",É:"d",É:"d",êº:"d",Ç³:"dz",Ç:"dz","â":"e",ï½:"e",Ã¨:"e",Ã©:"e",Ãª:"e",á»:"e",áº¿:"e",á»:"e",á»:"e",áº½:"e",Ä:"e",á¸:"e",á¸:"e",Ä:"e",Ä:"e",Ã«:"e",áº»:"e",Ä:"e",È:"e",È:"e",áº¹:"e",á»:"e",È©:"e",á¸:"e",Ä:"e",á¸:"e",á¸:"e",É:"e",É:"e",Ç:"e","â":"f",ï½:"f",á¸:"f",Æ:"f",ê¼:"f","â":"g",ï½:"g",Çµ:"g",Ä:"g",á¸¡:"g",Ä:"g",Ä¡:"g",Ç§:"g",Ä£:"g",Ç¥:"g",É :"g","ê¡":"g",áµ¹:"g",ê¿:"g","â":"h",ï½:"h",Ä¥:"h",á¸£:"h",á¸§:"h",È:"h",á¸¥:"h",á¸©:"h",á¸«:"h",áº:"h",Ä§:"h",â±¨:"h",â±¶:"h",É¥:"h",Æ:"hv","â":"i",ï½:"i",Ã¬:"i",Ã­:"i",Ã®:"i",Ä©:"i",Ä«:"i",Ä­:"i",Ã¯:"i",á¸¯:"i",á»:"i",Ç:"i",È:"i",È:"i",á»:"i",Ä¯:"i",á¸­:"i",É¨:"i",Ä±:"i","â":"j",ï½:"j",Äµ:"j",Ç°:"j",É:"j","â":"k",ï½:"k",á¸±:"k",Ç©:"k",á¸³:"k",Ä·:"k",á¸µ:"k",Æ:"k",â±ª:"k",ê:"k",ê:"k",ê:"k","ê£":"k","â":"l",ï½:"l",Å:"l",Äº:"l",Ä¾:"l",á¸·:"l",á¸¹:"l",Ä¼:"l",á¸½:"l",á¸»:"l",Å¿:"l",Å:"l",Æ:"l",É«:"l",â±¡:"l",ê:"l",ê:"l",ê:"l",Ç:"lj","â":"m",ï½:"m",á¸¿:"m",á¹:"m",á¹:"m",É±:"m",É¯:"m","â":"n",ï½:"n",Ç¹:"n",Å:"n",Ã±:"n",á¹:"n",Å:"n",á¹:"n",Å:"n",á¹:"n",á¹:"n",Æ:"n",É²:"n",Å:"n","ê":"n","ê¥":"n",Ç:"nj","â":"o",ï½:"o",Ã²:"o",Ã³:"o",Ã´:"o",á»:"o",á»:"o",á»:"o",á»:"o",Ãµ:"o",á¹:"o",È­:"o",á¹:"o",Å:"o",á¹:"o",á¹:"o",Å:"o",È¯:"o",È±:"o",Ã¶:"o",È«:"o",á»:"o",Å:"o",Ç:"o",È:"o",È:"o",Æ¡:"o",á»:"o",á»:"o",á»¡:"o",á»:"o",á»£:"o",á»:"o",á»:"o",Ç«:"o",Ç­:"o",Ã¸:"o",Ç¿:"o",É:"o",ê:"o",ê:"o",Éµ:"o",Æ£:"oi",È£:"ou",ê:"oo","â":"p",ï½:"p",á¹:"p",á¹:"p",Æ¥:"p",áµ½:"p",ê:"p",ê:"p",ê:"p","â ":"q",ï½:"q",É:"q",ê:"q",ê:"q","â¡":"r",ï½:"r",Å:"r",á¹:"r",Å:"r",È:"r",È:"r",á¹:"r",á¹:"r",Å:"r",á¹:"r",É:"r",É½:"r",ê:"r","ê§":"r",ê:"r","â¢":"s",ï½:"s",Ã:"s",Å:"s",á¹¥:"s",Å:"s",á¹¡:"s",Å¡:"s",á¹§:"s",á¹£:"s",á¹©:"s",È:"s",Å:"s",È¿:"s","ê©":"s",ê:"s",áº:"s","â£":"t",ï½:"t",á¹«:"t",áº:"t",Å¥:"t",á¹­:"t",È:"t",Å£:"t",á¹±:"t",á¹¯:"t",Å§:"t",Æ­:"t",Ê:"t",â±¦:"t",ê:"t",ê©:"tz","â¤":"u",ï½:"u",Ã¹:"u",Ãº:"u",Ã»:"u",Å©:"u",á¹¹:"u",Å«:"u",á¹»:"u",Å­:"u",Ã¼:"u",Ç:"u",Ç:"u",Ç:"u",Ç:"u",á»§:"u",Å¯:"u",Å±:"u",Ç:"u",È:"u",È:"u",Æ°:"u",á»«:"u",á»©:"u",á»¯:"u",á»­:"u",á»±:"u",á»¥:"u",á¹³:"u",Å³:"u",á¹·:"u",á¹µ:"u",Ê:"u","â¥":"v",ï½:"v",á¹½:"v",á¹¿:"v",Ê:"v",ê:"v",Ê:"v",ê¡:"vy","â¦":"w",ï½:"w",áº:"w",áº:"w",Åµ:"w",áº:"w",áº:"w",áº:"w",áº:"w",â±³:"w","â§":"x",ï½:"x",áº:"x",áº:"x","â¨":"y",ï½:"y",á»³:"y",Ã½:"y",Å·:"y",á»¹:"y",È³:"y",áº:"y",Ã¿:"y",á»·:"y",áº:"y",á»µ:"y",Æ´:"y",É:"y",á»¿:"y","â©":"z",ï½:"z",Åº:"z",áº:"z",Å¼:"z",Å¾:"z",áº:"z",áº:"z",Æ¶:"z",È¥:"z",É:"z",â±¬:"z",ê£:"z",Î:"Î",Î:"Î",Î:"Î",Î:"Î",Îª:"Î",Î:"Î",Î:"Î¥",Î«:"Î¥",Î:"Î©",Î¬:"Î±",Î­:"Îµ",Î®:"Î·",Î¯:"Î¹",Ï:"Î¹",Î:"Î¹",Ï:"Î¿",Ï:"Ï",Ï:"Ï",Î°:"Ï",Ï:"Ï",Ï:"Ï"};
M=e(document),A=function(){var e=1;return function(){return e++}}(),q=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,a,o=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+A()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=e("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(T(i.containerCss,this.opts.element)),this.container.addClass(T(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(o),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),d(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)
})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,a){var r=n.scrollTop();a>0&&0>=r-a?(n.scrollTop(0),m(e)):0>a&&n.get(0).scrollHeight-n.scrollTop()+a<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(e))
}),c(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2-focused")}),a.on("blur",function(){a.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var s=i.element.prop("disabled");
s===t&&(s=!1),this.enable(!s);var l=i.element.prop("readonly");l===t&&(l=!1),this.readonly(l),P=P||r(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),n=this;this.close(),e.length&&e[0].detachEvent&&n._sync&&e.each(function(){this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),R.call(this,"container","liveRegion","dropdown","results","search")
},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,a,r,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=a=i.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,a,r){var o,s=this.opts.id,l=this.liveRegion;
(o=function(n,a,d){var u,h,p,f,m,g,v,b,y,C;n=i.sortResults(n,a,r);var I=[];for(u=0,h=n.length;h>u;u+=1)p=n[u],m=p.disabled===!0,f=!m&&s(p)!==t,g=p.children&&p.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+d),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+A()),b.attr("role","option"),C=i.formatResult(p,b,r,c.opts.escapeMarkup),C!==t&&(b.html(C),v.append(b)),g&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(p.children,y,d+1),v.append(y)),v.data("select2-data",p),I.push(v[0]);
a.append(I),l.text(i.formatMatches(n.length))})(a,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(r=i.id,i.id=function(e){return e[r]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(a?(i.query=this.bind(function(e){var i,a,r,o={results:[],more:!1},s=e.term;r=function(t,i){var n;t.is("option")?e.matcher(s,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){r(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(a=this.getPlaceholderOption(),a&&(i=i.not(a))),i.each2(function(e,t){r(t,o.results)
}),e.callback(o)}),i.id=function(e){return e.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=I.call(i.element,i.ajax)):"data"in i?i.query=E(i.data):"tags"in i&&(i.query=w(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var a=[];e(s(t.val(),i.separator)).each(function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each(function(){return o(this.id,t.id)?(t=this,!1):void 0}),a.push(t)}),n(a)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");
if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,a=this;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element))
}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",a._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(t){e.each(t,a._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()
},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1
},positionDropdown:function(){var t,i,n,a,r,o=this.dropdown,s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),u=e(window),h=u.width(),p=u.height(),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=s.top+l,v=s.left,b=m>=g+d,y=s.top-d>=u.scrollTop(),C=o.outerWidth(!1),I=f>=v+C,E=o.hasClass("select2-drop-above");E?(i=!0,!y&&b&&(n=!0,i=!1)):(i=!1,!b&&y&&(n=!0,i=!0)),n&&(o.hide(),s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=s.top+l,v=s.left,C=o.outerWidth(!1),I=f>=v+C,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),C=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:P.width),C>c?c=C:C=c,d=o.outerHeight(!1),I=f>=v+C):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),g-=t.top,v-=t.left),I||(v=s.left+this.container.outerWidth(!1)-C),a={left:v,width:c},i?(a.top=s.top-d,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=e.extend(a,T(this.opts.dropdownCss,this.opts.element)),o.css(a)
},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),M.on("mousemove.select2Event",function(e){Q.x=e.pageX,Q.y=e.pageY}),!0):!1},opening:function(){var t,n=this.containerEventName,a="scroll."+n,r="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart",function(n){i(t);
var a,r=e("#select2-drop");r.length>0&&(a=r.data("select2"),a.opts.selectOnBlur&&a.selectHighlighted({noFocus:!0}),a.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+a+" "+o,function(){s.opened()&&s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,n="resize."+t,a="orientationchange."+t;
this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(a)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),M.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)
},ensureHighlightVisible:function(){var t,i,n,a,r,o,s,l,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),l=(n.offset()||{}).top||0,a=l+n.outerHeight(!0),i===t.length-1&&(s=c.find("li.select2-more-results"),s.length>0&&(a=s.offset().top+s.outerHeight(!0))),r=c.offset().top+c.outerHeight(!0),a>r&&c.scrollTop(c.scrollTop()+(a-r)),o=l-c.offset().top,0>o&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;
var a=e(i[n]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,n,r=this.findHighlightableChoices();return 0===arguments.length?a(r.filter(".select2-highlighted")[0],r.get()):(t>=r.length&&(t=r.length-1),0>t&&(t=0),this.removeHighlight(),i=e(r[t]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),n=i.data("select2-data"),void(n&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")
},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,a=this,r=this.search.val(),o=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:o,matcher:this.opts.matcher,callback:this.bind(function(e){a.opened()&&(a.opts.populateResults.call(this,t,e.results,{term:r,page:n,context:o}),a.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(T(a.opts.formatLoadMore,a.opts.element,n+1)),window.setTimeout(function(){a.loadMoreIfNeeded()
},10)):i.remove(),a.positionDropdown(),a.resultsPage=n,a.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(d.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.text():h.opts.formatMatches(d.find(".select2-result-selectable").length))}function a(e){d.html(e),n()}var r,s,l,c=this.search,d=this.results,u=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!o(p,f))&&(e.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;
var m=this.getMaximumSelectionSize();if(m>=1&&(r=this.data(),e.isArray(r)&&r.length>=m&&x(u.formatSelectionTooBig,"formatSelectionTooBig")))return void a("<li class='select2-selection-limit'>"+T(u.formatSelectionTooBig,u.element,m)+"</li>");if(c.val().length<u.minimumInputLength)return a(x(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void a(x(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");
u.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+T(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),s=this.tokenize(),s!=t&&null!=s&&c.val(s),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(r){var s;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(r.hasError!==t&&x(u.formatAjaxError,"formatAjaxError"))return void a("<li class='select2-ajax-error'>"+T(u.formatAjaxError,u.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>");if(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==c.val()&&(s=this.opts.createSearchChoice.call(h,c.val(),r.results),s!==t&&null!==s&&h.id(s)!==t&&null!==h.id(s)&&0===e(r.results).filter(function(){return o(h.id(this),h.id(s))
}).length&&this.opts.createSearchChoicePosition(r.results,s)),0===r.results.length&&x(u.formatNoMatches,"formatNoMatches"))return void a("<li class='select2-no-results'>"+T(u.formatNoMatches,u.element,c.val())+"</li>");d.empty(),h.opts.populateResults.call(this,d,r.results,{term:c.val(),page:this.resultsPage,context:null}),r.more===!0&&x(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.escapeMarkup(T(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()
},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)
},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,n,a,r,o,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),r=0,o=n.length;o>r;r+=1)if(s=n[r].replace(/\s/g,""),a=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==a&&a.length>=1)return a[1];
return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),S=D(q,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));
return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(a=this.search.val().length,i.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))
},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),R.call(this,"selection","focusser")
},initContainer:function(){var t,n,a=this.container,r=this.dropdown,o=A();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=a.find(".select2-choice"),this.focusser=a.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===O.PAGE_UP||e.which===O.PAGE_DOWN)return void m(e);
switch(e.which){case O.UP:case O.DOWN:return this.moveHighlight(e.which===O.UP?-1:1),void m(e);case O.ENTER:return this.selectHighlighted(),void m(e);case O.TAB:return void this.selectHighlighted({noFocus:!0});case O.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==O.TAB&&!O.isControl(e)&&!O.isFunctionKey(e)&&e.which!==O.ESC){if(this.opts.openOnEnter===!1&&e.which===O.ENTER)return void m(e);if(e.which==O.DOWN||e.which==O.UP||e.which==O.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;
return this.open(),void m(e)}return e.which==O.DELETE||e.which==O.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(n){i(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(n)
})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")
})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();
else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(i,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected&&!this.disabled
});t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var a=i.val(),r=null;t.query({matcher:function(e,i,n){var s=o(a,t.id(n));return s&&(r=n),s},callback:e.isFunction(n)?function(){n(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")
}},postprocessResults:function(e,t,i){var n=0,a=this;if(this.findHighlightableChoices().each2(function(e,t){return o(a.id(t.data("select2-data")),a.opts.element.val())?(n=e,!1):void 0}),i!==!1&&this.highlight(t===!0&&n>=0?n:0),t===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(_(e.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();
this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),a.empty(),null!==e&&(i=this.opts.formatSelection(e,a,this.opts.escapeMarkup)),i!==t&&a.append(i),n=this.opts.formatSelectionCssClass(e,a),n!==t&&a.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")
},val:function(){var e,i=!1,n=null,a=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=a.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:r});else{if(!e&&0!==e)return void this.clear(i);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){a.opts.element.val(e?a.id(e):""),a.updateSelection(e),a.setPlaceholder(),i&&a.triggerChange({added:e,removed:r})
})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(arguments.length>1&&(n=arguments[1]),void(e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n)))}}),K=D(q,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var a=s(i.val(),t.separator),r=[];t.query({matcher:function(i,n,s){var l=e.grep(a,function(e){return o(e,t.id(s))}).length;return l&&r.push(s),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<a.length;i++)for(var s=a[i],l=0;l<r.length;l++){var c=r[l];if(o(s,t.id(c))){e.push(c),r.splice(l,1);
break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),R.call(this,"searchContainer","selection")},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);
var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+A()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;
var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),a=i.next(".select2-search-choice:not(.select2-locked)"),r=f(this.search);if(i.length&&(e.which==O.LEFT||e.which==O.RIGHT||e.which==O.BACKSPACE||e.which==O.DELETE||e.which==O.ENTER)){var o=i;return e.which==O.LEFT&&n.length?o=n:e.which==O.RIGHT?o=a.length?a:null:e.which===O.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),o=n.length?n:a):e.which==O.DELETE?this.unselect(i.first())&&(this.search.width(10),o=a.length?a:null):e.which==O.ENTER&&(o=null),this.selectChoice(o),m(e),void(o&&o.length||this.open())}if((e.which===O.BACKSPACE&&1==this.keydowns||e.which==O.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);
if(this.selectChoice(null),this.opened())switch(e.which){case O.UP:case O.DOWN:return this.moveHighlight(e.which===O.UP?-1:1),void m(e);case O.ENTER:return this.selectHighlighted(),void m(e);case O.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case O.ESC:return this.cancel(e),void m(e)}if(e.which!==O.TAB&&!O.isControl(e)&&!O.isFunctionKey(e)&&e.which!==O.BACKSPACE&&e.which!==O.ESC){if(e.which===O.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===O.PAGE_UP||e.which===O.PAGE_DOWN)&&m(e),e.which===O.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()
})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())
})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)
},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")
},updateSelection:function(t){var i=[],n=[],r=this;e(t).each(function(){a(r.id(this),i)<0&&(i.push(r.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,i){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),i&&i.noFocus||this.focusSearch())
},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,a,r=!i.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?o:s,c=this.id(i),d=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),a=this.opts.formatSelectionCssClass(i,l.find("div")),a!=t&&l.addClass(a),r&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())
})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var i,n,r=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(i),o.choice=i,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(n=a(this.id(i),r))>=0;)r.splice(n,1),this.setVal(r),this.select&&this.postprocessResults();
return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),r=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),s=this;r.each2(function(e,t){var i=s.id(t.data("select2-data"));a(i,n)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&s.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&x(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")
},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,i,n,a,r=l(this.search);e=v(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,a=i-(t-n)-r,e>a&&(a=i-r),40>a&&(a=i-r),0>=a&&(a=e),this.search.width(Math.floor(a))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){a(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)o(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i>0&&i--,e.splice(n,1),n--);
return{added:t,removed:e}},val:function(i,n){var a,r=this;if(0===arguments.length)return this.getVal();if(a=this.data(),a.length||(a=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,r.id);r.setVal(i),r.updateSelection(t),r.clearSearch(),n&&r.triggerChange(r.buildChangeDetails(a,r.data()))
})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,a,r=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")
}).get():(a=this.data(),t||(t=[]),n=e.map(t,function(e){return r.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),void(i&&this.triggerChange(this.buildChangeDetails(a,this.data()))))}}),e.fn.select2=function(){var i,n,r,o,s,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.prop("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),n=s?new window.Select2["class"].multi:new window.Select2["class"].single,n.init(i);
else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(a(l[0],c)<0)throw"Unknown method: "+l[0];if(o=t,n=e(this).data("select2"),n===t)return;if(r=l[0],"container"===r?o=n.container:"dropdown"===r?o=n.dropdown:(h[r]&&(r=h[r]),o=n[r].apply(n,l.slice(1))),a(l[0],d)>=0||a(l[0],u)>=0&&1==l.length)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var a=[];return y(e.text,i.term,a,n),a.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e
},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;
return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more resultsâ¦"
},formatSearching:function(){return"Searchingâ¦"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:I,local:E,tags:w},util:{debounce:u,markMatch:y,escapeMarkup:C,stripDiacritics:n},"class":{"abstract":q,single:S,multi:K}}}}(jQuery),define("select2",function(){}),jQuery.cookie=function(e,t,i){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var o=jQuery.trim(a[r]);if(o.substring(0,e.length+1)==e+"="){n=decodeURIComponent(o.substring(e.length+1));break}}return n
}i=i||{},null===t&&(t="",i.expires=-1);var s="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+24*i.expires*60*60*1e3)):l=i.expires,s="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",u=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,c,d,u].join("")},define("jquery.cookie",function(){}),define("taoQtiItem/qtiCreator/editor/preview",["jquery","lodash","i18n","util/strPad","taoQtiItem/qtiCreator/helper/commonRenderer","json!taoQtiItem/qtiCreator/editor/resources/device-list.json","tpl!taoQtiItem/qtiCreator/tpl/preview/preview","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","helpers","iframeResizer","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/helper/itemSerializer","ui/modal","select2","jquery.cookie"],function(e,t,i,n,a,r,o,s,l,c,d,u){var h,p,f,m,g,v,b,y="landscape",C="desktop",I={desktop:i("Desktop preview"),mobile:i("Mobile preview"),standard:i("Actual size")},E=e(document),w=e(window),x=e(document.body),T={width:w.innerWidth(),height:w.innerHeight()},_={width:0,height:0},k=1,R=!1,D=function(e){var i="mobile"===e?r.tablets:r.screens,n=[];
return t.forEach(i,function(e){_={width:Math.max(_.width,e.width),height:Math.max(_.height,e.height)},n.push({value:e.label,label:e.label,dataValue:[e.width,e.height].join(","),selected:C===e.label})}),n},O=function(){m=h.add(h.find(".preview-scale-container").find('[class*="'+C+'"]'))},q=function(e){if(e!==C){var t=new RegExp(C,"g");m.each(function(){this.className=this.className.replace(t,e)}),C=e}},S=function(t){if(t!==y){var i=new RegExp(y,"g"),n=e(".preview-outer-frame")[0];n.className=n.className.replace(i,t),y=t}},K=function(){var t=e(".preview-scale-container"),i="standard"===C?1:k,n=t.width()*i,a=(T.width-n)/2;t.css({left:a,"-webkit-transform":"scale("+i+","+i+")","-ms-transform":"scale("+i+","+i+")",transform:"scale("+i+","+i+")","-webkit-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"})
},A=function(){e(".preview-canvas").css({paddingTop:e(".preview-utility-bar").outerHeight()+5})},N=function(){var e={x:1,y:1},t={width:_.width+150,height:_.height+275};t.width>T.width&&(e.x=T.width/t.width),t.height>T.height&&(e.y=T.height/t.height),k=Math.min(e.x,e.y)},M=function(){var t=h.find(".preview-device-selector");t.on("change",function(){for(var t,i=e(this),n="select"===this.nodeName.toLowerCase()?this.options[this.selectedIndex]:this,a=i.data("target"),r=e(n).data("value").split(","),o=r.length,s=h.find("."+a+"-preview-container");o--;)r[o]=parseFloat(r[o]);return t="mobile"===a&&"portrait"===y?{width:r[1],height:r[0]}:{width:r[0],height:r[1]},t.width===s.width()&&t.height===s.height()?!1:(q(a),s.css(t),K(),void F())
}),t.each(function(){"select"===this.nodeName.toLowerCase()&&e(this).select2({minimumResultsForSearch:-1})})},P=function(){e("select.orientation-selector").on("change",function(){var t,i=e(this).data("target"),n=e("."+i+"-preview-frame"),a=n.find("."+i+"-preview-container"),r=e(this).val();return r===y?!1:(t={height:a.width(),width:a.height()},a.css(t),K(),F(),void S(r))}).select2({minimumResultsForSearch:-1})},Q=function(){var t=h.find(".preview-closer"),i=g.find(".close-trigger"),n=g.find("a"),r=e("#preview-iframe");t.on("click",function(){a.setContext(e(".item-editor-item")),h.hide(),r.off("load").attr("src","about:blank")}),E.keyup(function(e){27===e.keyCode&&t.trigger("click")
}),i.on("click",function(){g.hide(),A(),K()}),n.on("click",function(t){t.preventDefault(),e.cookie("hidePreviewFeedback",!0,{expires:1e3,path:"/"}),i.trigger("click")})},L=function(){var e=[];return t(I).forEach(function(t,i){e.push({value:i,label:t,selected:C===i})}),e},$=function(){e("select.preview-type-selector").on("change",function(){var t=e(this),i=t.val();q(i),e("."+i+"-device-selector").trigger("change")}).select2({minimumResultsForSearch:-1})},F=function(){var t=e(".preview-container"),i=function(){return i=t.find("iframe"),i.height(""),i}(),n=i.contents().outerHeight(),a=t.innerHeight();"standard"!==C?a>n&&(n=a):t.height(n+10),i.height(n)},B=function(t){var i=e(".standard-device-selector"),n=(i.val()?i.val().split(","):"")||[w.width().toString()],a=n.join(",");
n[1]=t||n[1]||"1200",i.val(a).data("value",a)},z=function(){var e=v.find(".preview-console-body"),t=e.find("ul"),i=v.find(".preview-console-closer");v.off("updateConsole").on("updateConsole",function(a,r,o){var s=new Date,l=[n(s.getHours(),2,"0","STR_PAD_LEFT"),n(s.getMinutes(),2,"0","STR_PAD_LEFT"),n(s.getSeconds(),2,"0","STR_PAD_LEFT")].join(":"),c='<span class="log-time">'+n(l,12," ")+'</span> <span class="log-type">'+n(r,18," ")+'</span> <span class="log-message">'+n(o,18," ")+"</span>";t.append("<li><pre>"+c+"</pre></li>"),e.is(":visible")?t.scrollTop(1e4):e.slideDown("slow",function(){i.show(),t.scrollTop(1e4)})}),i.on("click",function(){e.slideUp("slow",function(){i.hide()
})})},H=function(){e(".preview-overlay").remove(),p=null,h=e(o({mobileDevices:D("mobile"),desktopDevices:D("desktop"),previewTypes:L(),previewType:C})),x.append(h),b=parseInt(e(".preview-container").css("max-width"),10),g=h.find(".preview-message-box"),e.cookie("hidePreviewFeedback")&&g.hide(),v=h.find("#preview-console"),z(),B(),O(),M(),P(),$(),Q(),N(),q(C),S(y),w.on("resize orientationchange",function(){T={width:w.innerWidth(),height:w.innerHeight()},B(),N(),K()})},j=function(){{var t=e(".preview-modal-feedback"),i=t.find(".cancel"),n=t.find(".save");t.find(".modal-close")}t.modal({width:500}),n.on("click",function(){h.trigger("save.preview"),t.modal("close")
}),i.on("click",function(){t.modal("close")})},W=function(t,i){var n=function(){var n=l._url("index","QtiPreview","taoQtiItem")+"?uri="+encodeURIComponent(i.itemUri)+"&twosix=1";return e.ajax({url:n,dataType:"html"}).done(function(t){e(".preview-item-container").html(t)}),C=e(t).data("preview-type")||"desktop",h.show(),h.height(E.outerHeight()),h.find("select:visible").trigger("change"),K(),A(),!0};if(!R){var a=u.serialize(i.element);(f!==a||""===a)&&(f=a,R=!0)}R?(j(),h.on("save.preview",function(){h.off("save.preview"),R=!1,e.when(s.save(),i.save()).done(function(){n()})})):n()},U=function(t,i){var n=function(){f=u.serialize(i.element)};setTimeout(n,500),e("#save-trigger").on("click.qti-creator",n),H(),E.on("stylechange.qti-creator",function(){R=!0
}),e(t).on("click",function(){W(this,i)})};return{init:U}}),define("taoQtiItem/qtiCreator/editor/preparePrint",["jquery"],function(e){"use strict";var t=function(){function t(t){return t.siblings().each(function(){e(this).addClass("item-no-print")}),t.parent()}for(var i=t(e("#item-editor-scope").parent());i.length&&"body"!==i.get(0).nodeName.toLowerCase();)i=t(i);e("#item-editor-toolbar, .item-editor-sidebar").addClass("item-no-print")};return e("#print-trigger").on("click",function(){window.print()}),t}),define("json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json",function(){return{"sans-serif":['Arial, "Helvetica Neue", Helvetica, sans-serif','"Avant Garde", Avantgarde, "Century Gothic", CenturyGothic, "AppleGothic", sans-serif','Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif','Candara, Calibri, Segoe, "Segoe UI", Optima, Arial, sans-serif','"Century Gothic", CenturyGothic, AppleGothic, sans-serif','Corbel, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", "Bitstream Vera Sans", "Liberation Sans", Verdana, "Verdana Ref", sans-serif','"Franklin Gothic Medium", "Franklin Gothic", "ITC Franklin Gothic", Arial, sans-serif','Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif','Futura, "Century Gothic", AppleGothic, "Trebuchet MS", sans-serif','Geneva, Verdana, "Lucida Sans", "Lucida Grande", "Lucida Sans Unicode", sans-serif','"Gill Sans", "Gill Sans MT", Calibri, sans-serif','"Helvetica Neue", Helvetica, Arial, sans-serif','Impact, Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "Arial Black", sans-serif','"Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif','Optima, Segoe, "Segoe UI", Candara, Calibri, Arial, sans-serif','"Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif',"Tahoma, Verdana, Segoe, sans-serif",'"Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif',"Verdana, Geneva, Tahoma, sans-serif"],serif:['Baskerville, "Baskerville Old Face", "Hoefler Text", Garamond, "Times New Roman", serif','"Big Caslon", "Book Antiqua", "Palatino Linotype", Georgia, serif','"Bodoni MT", Didot, "Didot LT STD", "Hoefler Text", Garamond, "Times New Roman", serif','"Book Antiqua", Palatino, "Palatino Linotype", "Palatino LT STD", Georgia, serif','"Calisto MT", "Bookman Old Style", Bookman, "Goudy Old Style", Garamond, "Hoefler Text", "Bitstream Charter", Georgia, serif','Cambria, "Hoefler Text", Utopia, "Liberation Serif", "Nimbus Roman No9 L Regular", Times, "Times New Roman", serif','Constantia, "Lucida Bright", Lucidabright, "Lucida Serif", Lucida, "DejaVu Serif", "Bitstream Vera Serif", "Liberation Serif", Georgia, serif','Didot, "Didot LT STD", "Hoefler Text", Garamond, "Times New Roman", serif','Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif','Georgia, Palatino," Palatino Linotype", Times, "Times New Roman", serif','"Goudy Old Style", Garamond, "Big Caslon", "Times New Roman", serif','"Hoefler Text", "Baskerville old face", Garamond, "Times New Roman", serif','"Lucida Bright", Georgia, serif','"Palatino Linotype", Palatino, Palladio, "URW Palladio L", "Book Antiqua", Baskerville, "Bookman Old Style", "Bitstream Charter", "Nimbus Roman No9 L", Garamond, "Apple Garamond", "ITC Garamond Narrow", "New Century Schoolbook", "Century Schoolbook", "Century Schoolbook L", Georgia, serif','Perpetua, Baskerville, "Big Caslon", "Palatino Linotype", Palatino, "URW Palladio L", "Nimbus Roman No9 L", serif','Rockwell, "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif','"Times New Roman", TimesNewRoman, Times, Baskerville, Georgia, serif'],monospace:['"Andale Mono", AndaleMono, monospace','Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace','"Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace','"Lucida Console", "Lucida Sans Typewriter", Monaco, "Bitstream Vera Sans Mono", monospace','Monaco, Consolas, "Lucida Console", monospace','"Rockwell Extra Bold", "Rockwell Bold", monospace']}
}),define("taoQtiItem/qtiCreator/editor/styleEditor/fontSelector",["jquery","json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","i18n","select2"],function(e,t,i,n){"use strict";var a=function(){var a,r,o,s,l=e("select#item-editor-font-selector"),c=l.data("target"),d=e(c),u=function(e){return e.replace(/"/g,"'").replace(/, /g,",")},h=function(e){return e.substring(0,e.indexOf(",")).replace(/'/g,"")},p=l.parent().find('[data-role="font-selector-reset"]'),f=0,m=function(e){return e=e.replace(/-/g," "),(e+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(e){return e.toUpperCase()
})},g=function(t){var i=t.element;return t.id?'<span style="font-size: 12px;'+e(i).attr("style")+'">'+t.text+"</span>":t.text},v=function(){i.apply(c,"font-family"),l.select2("val",d.css("font-family"))};l.append('<option value="">'+n("Default")+"</option>");for(a in t)if(t.hasOwnProperty(a)){for(r=e("<optgroup>",{label:m(a)}),s=t[a].length,f=0;s>f;f++)t[a][f]=u(t[a][f]),o=e("<option>",{value:t[a][f],text:h(t[a][f])}).css({fontFamily:t[a][f]}),r.append(o);l.append(r)}p.on("click",v),l.select2({formatResult:g,formatSelection:g,width:"resolve"}),e(document).on("customcssloaded.styleeditor",function(e,t){}),l.on("change",function(){i.apply(c,"font-family",e(this).val())
})};return a}),jQuery.fn.farbtastic=function(e){return $.farbtastic(this,e),this},jQuery.farbtastic=function(e,t){if(e.length){var e=$(e).get(0);return e.farbtastic||(e.farbtastic=new jQuery._farbtastic(e,t))}},jQuery._farbtastic=function(e,t){var i=this,n=$("<div>",{"class":"farbtastic"}),a=$("<div>",{"class":"color"}),r=$("<div>",{"class":"wheel"}),o=$("<div>",{"class":"overlay"}),s=$("<div>",{"class":"h-marker marker"}),l=$("<div>",{"class":"sl-marker marker"});e=$(e),$(n).append(a),$(n).append(r),$(n).append(o),$(n).append(s),$(n).append(l),e.append(n),i.wheel=r.get(0),i.radius=70,i.square=o.width(),i.width=n.width(),i.linkTo=function(e){return"object"==typeof i.callback&&$(i.callback).unbind("keyup",i.updateValue),i.color=null,"function"==typeof e?i.callback=e:("object"==typeof e||"string"==typeof e)&&(i.callback=$(e),i.callback.bind("keyup",i.updateValue),i.callback.get(0).value&&i.setColor(i.callback.get(0).value)),this
},i.updateValue=function(){this.value&&this.value!=i.color&&i.setColor(this.value)},i.setColor=function(e){var t=i.unpack(e);return i.color!=e&&t&&(i.color=e,i.rgb=t,i.hsl=i.RGBToHSL(i.rgb),i.updateDisplay()),this},i.setHSL=function(e){return i.hsl=e,i.rgb=i.HSLToRGB(e),i.color=i.pack(i.rgb),i.updateDisplay(),this},i.widgetCoords=function(e){var t,n,a=e.target||e.srcElement,r=i.wheel;if("undefined"!=typeof e.offsetX){for(var o={x:e.offsetX,y:e.offsetY},s=a;s;)s.mouseX=o.x,s.mouseY=o.y,o.x+=s.offsetLeft,o.y+=s.offsetTop,s=s.offsetParent;for(var s=r,l={x:0,y:0};s;){if("undefined"!=typeof s.mouseX){t=s.mouseX-l.x,n=s.mouseY-l.y;break}l.x+=s.offsetLeft,l.y+=s.offsetTop,s=s.offsetParent
}for(s=a;s;)s.mouseX=void 0,s.mouseY=void 0,s=s.offsetParent}else{var o=i.absolutePosition(r);t=(e.pageX||0*(e.clientX+$("html").get(0).scrollLeft))-o.x,n=(e.pageY||0*(e.clientY+$("html").get(0).scrollTop))-o.y}return{x:t-i.width/2,y:n-i.width/2}},i.mousedown=function(e){document.dragging||($(document).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),document.dragging=!0);var t=i.widgetCoords(e);return i.circleDrag=2*Math.max(Math.abs(t.x),Math.abs(t.y))>i.square,i.mousemove(e),!1},i.mousemove=function(e){var t=i.widgetCoords(e);if(i.circleDrag){var n=Math.atan2(t.x,-t.y)/6.28;0>n&&(n+=1),i.setHSL([n,i.hsl[1],i.hsl[2]])}else{var a=Math.max(0,Math.min(1,-(t.x/i.square)+.5)),r=Math.max(0,Math.min(1,-(t.y/i.square)+.5));
i.setHSL([i.hsl[0],a,r])}return!1},i.mouseup=function(){$(document).unbind("mousemove",i.mousemove),$(document).unbind("mouseup",i.mouseup),document.dragging=!1},i.updateDisplay=function(){var t=6.28*i.hsl[0];$(".h-marker",n).css({left:Math.round(Math.sin(t)*i.radius+i.width/2)+"px",top:Math.round(-Math.cos(t)*i.radius+i.width/2)+"px"}),$(".sl-marker",n).css({left:Math.round(i.square*(.5-i.hsl[1])+i.width/2)+"px",top:Math.round(i.square*(.5-i.hsl[2])+i.width/2)+"px"}),$(".color",n).css("backgroundColor",i.pack(i.HSLToRGB([i.hsl[0],1,.5]))),"object"==typeof i.callback?($(i.callback).css({backgroundColor:i.color,color:i.hsl[2]>.5?"#000":"#fff"}),$(i.callback).each(function(){this.value&&this.value!=i.color&&(this.value=i.color)
})):"function"==typeof i.callback&&i.callback.call(i,i.color),e.trigger("colorchange.farbtastic",[i.color])},i.absolutePosition=function(e){var t={x:e.offsetLeft,y:e.offsetTop};if(e.offsetParent){var n=i.absolutePosition(e.offsetParent);t.x+=n.x,t.y+=n.y}return t},i.pack=function(e){var t=Math.round(255*e[0]),i=Math.round(255*e[1]),n=Math.round(255*e[2]);return"#"+(16>t?"0":"")+t.toString(16)+(16>i?"0":"")+i.toString(16)+(16>n?"0":"")+n.toString(16)},i.unpack=function(e){return 7==e.length?[parseInt("0x"+e.substring(1,3))/255,parseInt("0x"+e.substring(3,5))/255,parseInt("0x"+e.substring(5,7))/255]:4==e.length?[parseInt("0x"+e.substring(1,2))/15,parseInt("0x"+e.substring(2,3))/15,parseInt("0x"+e.substring(3,4))/15]:void 0
},i.HSLToRGB=function(e){var t,i,n=e[0],a=e[1],r=e[2];return i=.5>=r?r*(a+1):r+a-r*a,t=2*r-i,[this.hueToRGB(t,i,n+.33333),this.hueToRGB(t,i,n),this.hueToRGB(t,i,n-.33333)]},i.hueToRGB=function(e,t,i){return i=0>i?i+1:i>1?i-1:i,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(.66666-i)*6:e},i.RGBToHSL=function(e){var t,i,n,a,r,o,s=e[0],l=e[1],c=e[2];return t=Math.min(s,Math.min(l,c)),i=Math.max(s,Math.max(l,c)),n=i-t,o=(t+i)/2,r=0,o>0&&1>o&&(r=n/(.5>o?2*o:2-2*o)),a=0,n>0&&(i==s&&i!=l&&(a+=(l-c)/n),i==l&&i!=c&&(a+=2+(c-s)/n),i==c&&i!=s&&(a+=4+(s-l)/n),a/=6),[a,r,o]},$("*",n).mousedown(i.mousedown),i.setColor("#123456"),t&&i.linkTo(t)},define("taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic",function(){}),define("taoQtiItem/qtiCreator/editor/styleEditor/colorSelector",["jquery","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","i18n","taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic"],function(e,t,i){"use strict";
function n(e){if(!_.isString(e))return e;var t=/rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i.exec(e);return _.isArray(t)&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}var a=function(){var a,r=e("#item-editor-color-picker"),o=r.find(".color-picker"),s=r.find("#color-picker-container"),l=r.find("#color-picker-title"),c=r.find("#color-picker-input"),d=r.find(".reset-button"),u=r.find(".color-trigger"),h=r.find("label"),p="color",f=e(document),m=function(e,t){l.text(t.parent().find("label").text())},g=function(){u.each(function(){var a,r=e(this),o=r.data("target"),s=e(o),l=t.getStyle()||{};
l[o]&&l[o][r.data("value")]?(a=l[o][r.data("value")],r.css("background-color",a),r.attr("title",n(a))):s.css(r.data("value"))?(a=s.css(r.data("value")),r.css("background-color",a),r.attr("title",n(a))):(r.css("background-color",""),r.attr("title",i("No value set")))})};a=e.farbtastic(o).linkTo(c),o.on("colorchange.farbtastic",function(e,i){t.apply(o.prop("target"),p,i),g()}),g(),u.add(h).on("click",function(){{var t=e(this),i="label"===this.nodeName.toLowerCase()?t.parent().find(".color-trigger"):t;i.css("background-color")}o.prop("target",i.data("target")),s.hide(),p=i.data("value"),m(p,i),a.setColor(n(i.css("background-color"))),s.show()}),f.on("mouseup",function(t){return e(t.target).hasClass("closer")?(s.hide(),!1):s.is(t.target)||0!==s.has(t.target).length?void 0:(s.hide(),!1)
}),f.on("keyup",function(e){return 27===e.keyCode?(s.hide(),!1):void 0}),d.on("click",function(){var i=e(this),n=i.parent().find(".color-trigger"),a=n.data("target"),r=n.data("value");t.apply(a,r),g()}),f.on("customcssloaded.styleeditor",g)};return a}),define("taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger",["jquery","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor"],function(e,t){"use strict";var i=function(){var i=e("#item-editor-font-size-changer"),n=i.data("target"),a=n+" .item-title",r=n+" .qti-itemBody",o=parseInt(e(a).css("font-size"),10),s=parseInt(e(r).css("font-size"),10),l=o-s,c=i.parents(".reset-group").find('[data-role="font-size-reset"]'),d=e("#item-editor-font-size-text"),u=function(){var e=s+l;
t.apply(a,"font-size",e.toString()+"px"),t.apply(r,"font-size",s.toString()+"px")};i.find("a").on("click",function(t){if(t.preventDefault(),"reduce"===e(this).data("action")){if(10>=s)return;s--}else s++;u(),d.val(s),e(this).parent().blur()}),d.on("keydown",function(e){var t=e.keyCode;return _.contains([8,37,39,46],t)||t>=48&&57>=t||t>=96&&105>=t}),d.on("blur",function(){s=parseInt(this.value,10),u()}),d.on("keydown",function(e){var t=e.keyCode;13===t&&d.trigger("blur")}),c.on("click",function(){d.val(""),t.apply(a,"font-size"),t.apply(r,"font-size")}),e(document).on("customcssloaded.styleeditor",function(t,i){i[r]&&i[r]["font-size"]?(d.val(parseInt(i[r]["font-size"],10)),d.trigger("blur")):d.val(parseInt(e(r).css("font-size"),10))
})};return i}),function(e){function t(e){throw new RangeError("noUiSlider: "+e)}function i(e,i,n){(e[i]||e[n])&&e[i]===e[n]&&t("(Link) '"+i+"' can't match '"+n+"'.'")}function n(e){return Math.max(Math.min(e,100),0)}function a(e,t){return Math.round(e/t)*t}function r(e,t){return 100/(t-e)}function o(e,t){return typeof e==typeof t}function s(t){return t instanceof e||e.zepto&&e.zepto.isZ(t)}function l(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function c(t){return e.isArray(t)?t:[t]}function d(e,t,i){e.addClass(t),setTimeout(function(){e.removeClass(t)},i)}function u(e,t){return 100*t/(e[1]-e[0])}function h(e,t){return u(e,e[0]<0?t+Math.abs(e[0]):t-e[0])
}function p(e,t){return t*(e[1]-e[0])/100+e[0]}function f(e,t){if(t>=e.xVal.slice(-1)[0])return 100;for(var i,n,a,o,s=1;t>=e.xVal[s];)s++;return i=e.xVal[s-1],n=e.xVal[s],a=e.xPct[s-1],o=e.xPct[s],a+h([i,n],t)/r(a,o)}function m(e,t){if(t>=100)return e.xVal.slice(-1)[0];for(var i,n,a,o,s=1;t>=e.xPct[s];)s++;return i=e.xVal[s-1],n=e.xVal[s],a=e.xPct[s-1],o=e.xPct[s],p([i,n],(t-a)*r(a,o))}function g(e,t){for(var i,n,r=1;t>=e.xPct[r];)r++;return e.snap?(i=e.xPct[r-1],n=e.xPct[r],t-i>(n-i)/2?n:i):e.xSteps[r-1]?e.xPct[r-1]+a(t-e.xPct[r-1],e.xSteps[r-1]):t}function v(e){e.preventDefault();var t,i,n=0===e.type.indexOf("touch"),a=0===e.type.indexOf("mouse"),r=0===e.type.indexOf("pointer"),o=e;
return 0===e.type.indexOf("MSPointer")&&(r=!0),e.originalEvent&&(e=e.originalEvent),n&&(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY),(a||r)&&(r||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,i=e.clientY+window.pageYOffset),o.points=[t,i],o.cursor=a,o}function b(n){void 0===n&&(n={}),"object"!=typeof n&&t("(Format) 'format' option must be an object.");var a={};e(W).each(function(e,i){void 0===n[i]?a[i]=U[e]:o(n[i],U[e])?("decimals"===i&&(n[i]<0||n[i]>7)&&t("(Format) 'format.decimals' option must be between 0 and 7."),a[i]=n[i]):t("(Format) 'format."+i+"' must be a "+typeof U[e]+".")
}),i(a,"mark","thousand"),i(a,"prefix","negative"),i(a,"prefix","negativeBefore"),this.settings=a}function y(t,i){if(!(this instanceof y))throw new Error("Link: Don't use Link as a function. Use the 'new' keyword.");if(!t)throw new RangeError("Link: missing parameters.");this.formatting=t.format||{},this.update=!i;var n=this,a=t.target||function(){},r=t.method,o="string"==typeof a&&0===a.indexOf("-tooltip-"),l="string"==typeof a&&0!==a.indexOf("-"),c="function"==typeof a,d=s(a),u=d&&a.is("input, select, textarea"),h=d&&"function"==typeof r,p=d&&"string"==typeof r&&a[r];if(o)return this.method=r||"html",void(this.el=e(a.replace("-tooltip-","")||"<div/>")[0]);if(l)return this.method="val",this.el=document.createElement("input"),this.el.name=a,void(this.el.type="hidden");
if(c)return this.target=!1,void(this.method=a);if(d){if(r&&(h||p))return this.target=a,void(this.method=r);if(!r&&u)return this.method="val",this.target=a,void this.target.on("change",function(t){function i(e,t,i){return[i?e:t,i?t:e]}var a=i(null,e(t.target).val(),n.N);n.obj.val(a,{link:n})});if(!r&&!u)return this.method="html",void(this.target=a)}throw new RangeError("Link: Invalid Link.")}function C(e,i){l(i)||t("'step' is not numeric."),e.xSteps[0]=i}function I(i,n){("object"!=typeof n||e.isArray(n))&&t("'range' is not an object."),e.each(n,function(n,a){var r;"number"==typeof a&&(a=[a]),e.isArray(a)||t("'range' contains invalid value."),r="min"===n?0:"max"===n?100:parseFloat(n),l(r)&&l(a[0])||t("'range' value isn't numeric."),i.xPct.push(r),i.xVal.push(a[0]),r?i.xSteps.push(isNaN(a[1])?!1:a[1]):isNaN(a[1])||(i.xSteps[0]=a[1])
}),e.each(i.xSteps,function(e,t){return t?void(i.xSteps[e]=u([i.xVal[e],i.xVal[e+1]],t)/r(i.xPct[e],i.xPct[e+1])):!0})}function E(i,n){"number"==typeof n&&(n=[n]),(!e.isArray(n)||!n.length||n.length>2)&&t("'start' option is incorrect."),i.handles=n.length,i.start=n}function w(e,i){e.snap=i,"boolean"!=typeof i&&t("'snap' option must be a boolean.")}function x(e,i){"lower"===i&&1===e.handles?e.connect=1:"upper"===i&&1===e.handles?e.connect=2:i===!0&&2===e.handles?e.connect=3:i===!1?e.connect=0:t("'connect' option was doesn't match handle count.")}function T(e,i){switch(i){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:t("'orientation' option is invalid.")
}}function _(e,i){e.xPct.length>2&&t("'margin' option is only supported on linear sliders."),e.margin=u(e.xVal,i),l(i)||t("'margin' option must be numeric.")}function k(e,i){switch(i){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:t("'direction' option was not recognized.")}}function R(e,i){"string"!=typeof i&&t("'behaviour' must be a string containing options.");var n=i.indexOf("tap")>=0,a=i.indexOf("extend")>=0,r=i.indexOf("drag")>=0,o=i.indexOf("fixed")>=0,s=i.indexOf("snap")>=0;e.events={tap:n||s,extend:a,drag:r,fixed:o,snap:s}}function D(i,n,a){i.ser=[n.lower,n.upper],i.formatting=new b(n.format),e.each(i.ser,function(i,r){e.isArray(r)||t("'serialization."+(i?"upper":"lower")+"' must be an array."),e.each(r,function(){this instanceof y||t("'serialization."+(i?"upper":"lower")+"' can only contain Link instances."),this.N=i,this.obj=a,this.scope=this.scope||a,this.formatting=new b(e.extend({},n.format,this.formatting))
})}),i.dir&&i.handles>1&&i.ser.reverse()}function O(i,n){var a,r={xPct:[],xVal:[],xSteps:[!1],margin:0};return a={step:{r:!1,t:C},range:{r:!0,t:I},start:{r:!0,t:E},snap:{r:!1,t:w},connect:{r:!0,t:x},orientation:{r:!1,t:T},margin:{r:!1,t:_},direction:{r:!0,t:k},behaviour:{r:!0,t:R},serialization:{r:!0,t:D}},i=e.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},i),i.serialization=e.extend({lower:[],upper:[],format:{}},i.serialization),e.each(a,function(e,a){if(void 0===i[e]){if(!a.r)return!0;t("'"+e+"' is required.")}a.t(r,i[e],n)}),r.style=r.ort?"top":"left",r}function q(t,i){var n=e("<div><div/></div>").addClass(j[2]),a=["-lower","-upper"];
return t.dir&&a.reverse(),n.children().addClass(j[3]+" "+j[3]+a[i]),n}function S(t,i){return i.el&&(i=new y({target:e(i.el).clone().appendTo(t),method:i.method,format:i.formatting},!0)),i}function K(e,t,i){var n,a=[];for(a.push(new y({format:i},!0)),n=0;n<e.length;n++)a.push(S(t,e[n]));return a}function A(e,t){var i,n=[];for(i=0;i<e.handles;i++)n[i]=K(e.ser[i],t[i].children(),e.formatting);return n}function N(e,t,i){switch(e){case 1:t.addClass(j[7]),i[0].addClass(j[6]);break;case 3:i[1].addClass(j[6]);case 2:i[0].addClass(j[7]);case 0:t.addClass(j[6])}}function M(e,t){var i,n=[];for(i=0;i<e.handles;i++)n.push(q(e,i).appendTo(t));return n}function P(t,i){return i.addClass([j[0],j[8+t.dir],j[4+t.ort]].join(" ")),e("<div/>").appendTo(i).addClass(j[1])
}function Q(t,i,a){function r(){return I[["width","height"][i.ort]]()}function o(e){var t,i=[x.val()];for(t=0;t<e.length;t++)x.trigger(e[t],i)}function s(t,a,r){var o=t[0]!==w[0][0]?1:0,s=T[0]+i.margin,l=T[1]-i.margin;return r&&w.length>1&&(a=o?Math.max(a,s):Math.min(a,l)),100>a&&(a=g(i,a)),a=n(parseFloat(a.toFixed(7))),a===T[o]?1===w.length?!1:a===s||a===l?0:!1:(t.css(i.style,a+"%"),t.is(":first-child")&&t.toggleClass(j[17],a>50),T[o]=a,i.dir&&(a=100-a),e(E[o]).each(function(){this.write(i,a,t.children(),x)}),!0)}function l(e,t,i){var a=e+t[0],r=e+t[1];return i?(0>a&&(r+=Math.abs(a)),r>100&&(a-=r-100),[n(a),n(r)]):[a,r]}function c(e,t,i){i||d(x,j[14],300),s(e,t,!1),o(["slide","set","change"])
}function u(e,t,n,a){return e=e.replace(/\s/g,B+" ")+B,t.on(e,function(e){var t=x.attr("disabled");return t=!(void 0===t||null===t),x.hasClass(j[14])||t?!1:(e=v(e),e.calcPoint=e.points[i.ort],void n(e,a))})}function h(e,t){var i,n=t.handles||w,a=!1,c=100*(e.calcPoint-t.start)/r(),d=n[0][0]!==w[0][0]?1:0;i=l(c,t.positions,n.length>1),a=s(n[0],i[d],1===n.length),n.length>1&&(a=s(n[1],i[d?0:1],!1)||a),a&&o(["slide"])}function p(t){e("."+j[15]).removeClass(j[15]),t.cursor&&e("body").css("cursor","").off(B),F.off(B),x.removeClass(j[12]),o(["set","change"])}function m(t,i){1===i.handles.length&&i.handles[0].children().addClass(j[15]),t.stopPropagation(),u(H.move,F,h,{start:t.calcPoint,handles:i.handles,positions:[T[0],T[w.length-1]]}),u(H.end,F,p,null),t.cursor&&(e("body").css("cursor",e(t.target).css("cursor")),w.length>1&&x.addClass(j[12]),e("body").on("selectstart"+B,!1))
}function b(t){var n,a=t.calcPoint,o=0;t.stopPropagation(),e.each(w,function(){o+=this.offset()[i.style]}),o=o/2>a||1===w.length?0:1,a-=I.offset()[i.style],n=100*a/r(),c(w[o],n,i.events.snap),i.events.snap&&m(t,{handles:[w[o]]})}function y(e){var t=e.calcPoint<I.offset()[i.style],n=t?0:100;t=t?0:w.length-1,c(w[t],n,!1)}function C(e){var t,i;if(!e.fixed)for(t=0;t<w.length;t++)u(H.start,w[t].children(),m,{handles:[w[t]]});e.tap&&u(H.start,I,b,{handles:w}),e.extend&&(x.addClass(j[16]),e.tap&&u(H.start,x,y,{handles:w})),e.drag&&(i=I.find("."+j[7]).addClass(j[10]),e.fixed&&(i=i.add(I.children().not(i).children())),u(H.start,i,m,{handles:w}))}var I,E,w,x=e(t),T=[-1,-1];
if(!x.is(":empty"))throw new Error("Slider was already initialized.");I=P(i,x),w=M(i,I),E=A(i,w),N(i.connect,x,w),C(i.events),t.vSet=function(t,n,a,r,l){var c,u;for(i.dir&&i.handles>1&&t.reverse(),l&&d(x,j[14],300),c=0;c<(w.length>1?3:1);c++)u=a||E[c%2][0],u=u.valueOf(t[c%2]),u!==!1&&(u=f(i,u),i.dir&&(u=100-u),s(w[c%2],u,!0)!==!0&&e(E[c%2]).each(function(){this.write(i,T[c%2],w[c%2].children(),x,r)}));return n===!0&&o(["set"]),this},t.vGet=function(){var e,t=[];for(e=0;e<i.handles;e++)t[e]=E[e][0].saved;return 1===t.length?t[0]:i.dir&&i.handles>1?t.reverse():t},t.destroy=function(){return e.each(E,function(){e.each(this,function(){this.target&&this.target.off(B)
})}),e(this).off(B).removeClass(j.join(" ")).empty(),a},x.val(i.start)}function L(e){if(this.length){var t=O(e,this);return this.each(function(){Q(this,t,e)})}}function $(t){return this.each(function(){var i=e(this).val(),n=this.destroy(),a=e.extend({},n,t);e(this).noUiSlider(a),n.start===a.start&&e(this).val(i)})}var F=e(document),B=".nui",z=e.fn.val,H=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},j=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","noUi-extended","noUi-stacking"],W=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore"],U=[2,".","","","",function(e){return e
},function(e){return e},"-",""];b.prototype.v=function(e){return this.settings[e]},b.prototype.to=function(e){function t(e){return e.split("").reverse().join("")}e=this.v("encoder")(e);var i="",n="",a="",r="";return 0>e&&(i=this.v("negative"),n=this.v("negativeBefore")),e=Math.abs(e).toFixed(this.v("decimals")).toString(),e=e.split("."),0===parseFloat(e)&&(e[0]="0"),this.v("thousand")?(a=t(e[0]).match(/.{1,3}/g),a=t(a.join(t(this.v("thousand"))))):a=e[0],this.v("mark")&&e.length>1&&(r=this.v("mark")+e[1]),n+this.v("prefix")+i+a+r+this.v("postfix")},b.prototype.from=function(e){function t(e){return e.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var i;return null===e||void 0===e?!1:(e=e.toString(),i=e.replace(new RegExp("^"+t(this.v("negativeBefore"))),""),e!==i?(e=i,i="-"):i="",e=e.replace(new RegExp("^"+t(this.v("prefix"))),""),this.v.negative&&(i="",e=e.replace(new RegExp("^"+t(this.v("negative"))),"-")),e=e.replace(new RegExp(t(this.v("postfix"))+"$"),"").replace(new RegExp(t(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),e=this.v("decoder")(parseFloat(i+e)),isNaN(e)?!1:e)
},y.prototype.write=function(e,t,i,n,a){this.update&&a===!1||(t=m(e,t),t=this.format(t),this.saved=t,"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,i,n):this.target[this.method](t,i,n))},y.prototype.format=function(e){return this.formatting.to(e)},y.prototype.valueOf=function(e){return this.formatting.from(e)},e.noUiSlider={Link:y},e.fn.noUiSlider=function(e,t){return(t?$:L).call(this,e)},e.fn.val=function(){var t,i,n,a,r=Array.prototype.slice.call(arguments,0);return r.length?("object"==typeof r[1]?(t=r[1].set,i=r[1].link,n=r[1].update,a=r[1].animate):r[1]===!0&&(t=!0),this.each(function(){e(this).hasClass(j[0])?this.vSet(c(r[0]),t,i,n,a):z.apply(e(this),r)
})):this.hasClass(j[0])?this[0].vGet():z.apply(this)}}(window.jQuery||window.Zepto),define("nouislider",function(){}),define("taoQtiItem/qtiCreator/editor/styleEditor/itemResizer",["jquery","lodash","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","nouislider","jqueryui"],function(e,t,i){var n=function(n){var a=e("#item-editor-item-resizer"),r=a.data("target"),o=e(r),s=o.width(),l=a.find('[name="item-width-prompt"]'),c=a.find(".slider-box"),d=a.find("#item-editor-item-resizer-slider"),u=e("#item-editor-item-resizer-text"),h=a.find('[data-role="item-width-reset"]'),p={range:{min:Math.min(768,s),max:Math.max(1200,s)},start:s},f=function(){a.find('[value="no-slider"]').trigger("click")
},m=function(e){e=parseInt(e).toString()+"px",i.apply(r,"width",e),i.apply(r,"max-width","none"),n.data("widget").$container.trigger("resize.itemResizer")};l.on("click",function(){"slider"===this.value?(m(o.width()),u.val(o.width()),c.slideDown(),d.val(o.width()).trigger("slide"),n.data("responsive",!1)):(d.val(p.start),c.slideUp(),u.val(""),i.apply(r,"width"),i.apply(r,"max-width"),n.data("responsive",!0))}),d.noUiSlider(p),d.on("slide",function(){var e=Math.round(d.val());u.val(e),m(e)}),u.on("keydown",function(e){var i=e.keyCode;return t.contains([8,37,39,46],i)||i>=48&&57>=i||i>=96&&105>=i}),u.on("blur",function(){m(this.value)}),h.on("click",f),e(document).on("customcssloaded.styleeditor",function(e,t){var i;
t[r]&&t[r].width?(i=parseInt(t[r].width,10),u.val(i),d.val(i),a.find('[value="slider"]').trigger("click")):u.val(o.width())})};return n}),define("tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="feedback-',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+' popup">\n    <span class="icon-',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'"></span>\n    ',(o=i.message)?r=o.call(t,{hash:{},data:a}):(o=t&&t.message,r=typeof o===c?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(l+=r),l+='\n    <span title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Remove Message",s):u.call(t,"__","Remove Message",s)))+'" class="icon-close close-trigger"></span>\n</div>'
})}),define("ui/resourcemgr/fileBrowser",["jquery","lodash"],function(e,t){var i="resourcemgr";return function(n){function a(e,i,n){var a=r(e,i);a&&(a.children||a.empty)?n(a):l(i).done(function(r){e.path?r.children?(t.find(a.children,"path")||(e.empty=!0),o(e,i,r.children)):e.empty=!0:e=t.merge(e,r),n(r)})}function r(e,i){var n;return e&&(e.path===i?n=e:e.children&&t.forEach(e.children,function(e){return n=r(e,i),n?!1:void 0})),n}function o(e,i,n){var a=!1;return e&&(e.path===i?e.children=n:e.children&&t.forEach(e.children,function(e){return a=o(e,i,n),a?!1:void 0})),a}function s(e,i){var n=!1,a=[];return e&&e.children&&(a=t.remove(e.children,function(t){return t.path===i||t.name&&e.path+t.name===i
}),n=a.length>0,n||t.forEach(e.children,function(e){return n=s(e,i),n?!1:void 0})),n}function l(i){var a={};return a[n.pathParam]=i,e.getJSON(n.browseUrl,t.merge(a,n.params))}function c(i,n,a){var r;a&&i&&i.path&&(r=e('<li><a data-path="'+i.path+'" href="#">'+i.path.split("/").pop()+"</a></li>").appendTo(n)),i&&i.children&&t.isArray(i.children)&&!i.empty&&t.forEach(i.children,function(e){c(e,n,!0)})}var d=n.root||"/",u=n.$target,h="#"+u.attr("id")+" .file-browser",p=e(".file-browser",u),f=e(".folders",p),m={};f.append('<li class="active"><a class="root-folder" data-path="/" href="#">'+d+"</a></li>"),a(m,d,function(t){var n=e(".root-folder",f),a=e("<ul></ul>").insertAfter(n);
t.children&&n.addClass("opened"),c(t,a),u.trigger("folderselect."+i,[d,t.children])}),e(h).off("click",".folders a").on("click",".folders a",function(n){n.preventDefault();var o=e(this),s=e(".folders li",p),l=o.data("path"),d=r(m,l);s.removeClass("active"),o.parent("li").addClass("active"),a(d,l,function(n){if(n){var a=o.siblings("ul");!a.length&&n.children&&t.find(n.children,"path")&&!n.empty?(a=e("<ul></ul>").insertAfter(o),c(n,a),o.addClass("opened")):a.length&&("none"===a.css("display")?(a.show(),o.addClass("opened")):(a.hide(),o.removeClass("opened"))),u.trigger("folderselect."+i,[l,n.children])}})}),u.on("filenew."+i,function(e,n,a){var o=r(m,a);o&&(o.children||(o.children=[]),t.find(o.children,{name:n.name})||(o.children.push(n),u.trigger("folderselect."+i,[a,o.children,n])))
}),u.on("filedelete."+i,function(e,t){s(m,t)})}}),define("util/bytes",[],function(){var e={hrSize:function(e){var t=["B","kB","MB","GB","TB"],i=0,n=1024;for(e=e||0;e>=n;)e/=n,i++;return e.toFixed(2)+t[i]}};return e}),define("json!core/mimetypes.json",function(){return{video:{category:"media",mimes:["application/ogg","video/*"],extensions:["avi","mp4","ogg","mpeg","flv"]},audio:{category:"media",mimes:["audio/*"],extensions:["mp3","wav","aac"]},image:{category:"media",mimes:["image/*"],extensions:["png","jpg","jpeg","gif","svg","ico"]},flash:{category:"media",mimes:["application/x-shockwave-flash"],extensions:["flv","swf"]},geogebra:{category:"media",mimes:["application/vnd.geogebra.file","application/vnd.geogebra.tool"],extensions:["ggb","ggt"]},rdf:{category:"sources",mimes:["application/rdf+xml"],extensions:["rdf"]},xml:{category:"sources",mimes:["application/xml","application/xml-dtd"],extensions:["xml","dtd","qti"]},html:{category:"sources",mimes:["text/html","text/xhtml","application/xhtml+xml"],extensions:["html","htm","html5","xhtml"]},font:{category:"sources",mimes:["application/font-woff"],extensions:["woff","eot","ttf"]},js:{category:"sources",mimes:["application/javascript","application/json","text/javascript"],extensions:["js","json"]},css:{category:"sources",mimes:["text/css"],extensions:["css","sass","scss","less"]},shell:{category:"sources",mimes:["application/x-sh"],extensions:["sh"]},mathml:{category:"sources",mimes:["application/mathml+xml"],extensions:["mathml"]},pdf:{category:"document",mimes:["application/pdf"],extensions:["pdf"]},office:{category:"document",mimes:["application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-excel","application/msword"],extensions:["doc","odt","docx","xls","xlsx","ods","ppt","pptx","odp"]},text:{category:["document"],mimes:["text/*"],extensions:["txt","csv"]},archive:{category:"archive",mimes:["application/zip","application/gzip","application/rar","application/x-7z-compressed","application/x-bzip","application/x-bzip2"],extensions:["zip","gz","bz","bz2","rar","p7z","7z"]}}
}),define("core/mimetype",["lodash","json!core/mimetypes.json"],function(e,t){return{getFileType:function(i){var n,a,r,o=i.mime;return o&&(n=e.findKey(t,{mimes:[o]}),n||(n=e.findKey(t,{mimes:[o.replace(/\/.*$/,"/*")]}))),n||(a=i.name.match(/\.([0-9a-z]+)(?:[\?#]|$)/i),a&&a.length>1&&(r=a[1],n=e.findKey(t,{extensions:[r]}))),n},getCategory:function(e){return t[e]?t[e].category:void 0}}}),define("ui/previewer",["jquery","lodash","i18n","core/mimetype","core/pluginifier","mediaElement"],function(e,t,i,n,a){var r="previewer",o="ui."+r,s={containerClass:"previewer"},l={placeHolder:t.template("<p class='nopreview' data-type='${type}'>${desc}</p>"),youtubeTemplate:t.template("<video preload='none'><source type='video/youtube' src='${url}'/></video>"),videoTemplate:t.template("<video src='${url}' type='${mime}' preload='none' width='290px' height='300px'></video>"),audioTemplate:t.template("<audio src='${url}' type='${mime}'></audio>"),imageTemplate:t.template("<img src='${url}' alt='${name}' />"),pdfTemplate:t.template("<object data='${url}#toolbar=0' type='application/pdf'><a href='${url} target='_blank'>${name}</a></object>"),flashTemplate:t.template("<object data='${url}' type='application/x-shockwave-flash'><param name='movie' value='${url}'></param></object>"),mathmlTemplate:t.template("<iframe src='${url}'></iframe>"),generate:function(e,i){var n=this[e+"Template"];
return t.isFunction(n)?n(i):void 0}},c={init:function(i){var n=c;return i=t.defaults(i||{},s),this.each(function(){var t=e(this);t.data(o)?t.previewer("update",i):(t.hasClass(i.containerClass)||t.addClass(i.containerClass),t.data(o,i),n._update(t),t.trigger("create."+r))})},update:function(i){return this.each(function(){var n=e(this),a=n.data(o);n.data(o,t.merge(a,i)),c._update(n)})},_update:function(a){var s=c;if(s.meSkipUpdate===!0)return void(s.meSkipUpdate=!1);var d,u=a.data(o);if(u){var h,p=u.type||n.getFileType({mime:u.mime,name:u.url});u.url&&(u.name||(u.name=u.url.substring(u.url.lastIndexOf("/")+1,u.url.lastIndexOf("."))),h=l.generate(p,u)),h||(h=l.placeHolder(t.merge({desc:i("No preview available")},u))),d=e(h),a.empty().html(d),u.width&&d.attr("width",u.width),u.height&&d.attr("height",u.height),("audio"===p||"video"===p)&&u.url&&(d.attr("width",290),d.attr("height",300),d.mediaelementplayer({pauseOtherPlayers:!1,width:290,height:300,videoWidth:290,videoHeight:300,success:function(t,i){t.load(),e("body").off("keydown.mediaelement"),e("body").on("keydown.mediaelement",function(e){27===e.keyCode&&void 0!==s.oldMediaElement&&s.oldMediaElement.setSrc("")
}),e("#mediaManager .actions a:nth-child(1)").off("mousedown.mediaelement"),e("#mediaManager .actions a:nth-child(1)").on("mousedown.mediaelement",function(){s.meSkipUpdate=!0,s.oldMediaElement.setSrc("")}),e("#mediaManager .actions a:nth-child(3)").off("mousedown.mediaelementdel"),e("#mediaManager .actions a:nth-child(3)").on("mousedown.mediaelementdel",function(){void 0!==s.oldMediaElement&&(s.oldMediaElement.setSrc(""),s.meSkipUpdate=!0,void 0!==s.oldMediaElementDom&&e(s.oldMediaElementDom).closest(".mejs-container").remove())});var n="#mediaManager .icon-close, #mediaManager .upload-switcher, #mediaManager .select-action, #mediaManager .files li>span";e(n).off("mousedown.mediaelement"),e(n).on("mousedown.mediaelement",function(t){t.stopPropagation();
var i=!1;e(t.target).children().first().hasClass("icon-undo")&&(s.oldMediaElement.setSrc(s.oldMediaElementSrc),s.oldMediaElement.load(),s.oldMediaElement.play(),s.oldMediaElement.pause(),i=!0),void 0!==s.oldMediaElement&&i===!1&&s.oldMediaElement.setSrc("")}),s.oldMediaElement=t,s.oldMediaElementSrc=t.src,s.oldMediaElementDom=i}})),a.trigger("update."+r)}},oldMediaElement:void 0,oldMediaElementSrc:void 0,oldMediaElementDom:void 0,meSkipUpdate:!1,destroy:function(){this.each(function(){{var t=e(this);t.data(o)}t.trigger("destroy."+r)})}};return a.register(r,c),function(t){t.find("[data-preview]").each(function(){var t=e(this);t.previewer({url:t.data("preview"),type:t.data("preview-type"),mime:t.data("preview-mime"),width:t.width(),height:t.height()})
})}}),define("ui/resourcemgr/filePreview",["jquery","lodash","util/bytes","ui/previewer"],function(e,t,i){var n="resourcemgr";return function(a){function r(e){c.previewer(e),d.text(e.type+" ("+e.mime+")"),u.text(i.hrSize(e.size)),h.html('<a href="'+e.url+'">'+e.file+"</a>"),p.removeAttr("disabled")}function o(){c.previewer("update",{url:!1}),d.empty(),u.empty(),h.empty(),p.attr("disabled","disabled")}var s=a.$target,l=e(".file-preview",s),c=e(".previewer",s),d=e(".prop-type",l),u=e(".prop-size",l),h=e(".prop-url",l),p=e(".select-action",l),f=[];s.on("fileselect."+n,function(e,t){t&&t.file?(r(t),f=t):o()}),s.on("filedelete."+n,function(){o()}),p.on("click",function(e){e.preventDefault(),s.trigger("select."+n,[[t.pick(f,["file","type","mime","size"])]])
})}}),function(){function e(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}}var t,i,n={};t=this,null!=t&&(i=t.async),n.noConflict=function(){return t.async=i,n};var a=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)},r=function(e,t){if(e.map)return e.map(t);var i=[];return a(e,function(e,n,a){i.push(t(e,n,a))}),i},o=function(e,t,i){return e.reduce?e.reduce(t,i):(a(e,function(e,n,a){i=t(i,e,n,a)}),i)},s=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,n.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)
}:n.nextTick):"function"==typeof setImmediate?(n.nextTick=function(e){setImmediate(e)},n.setImmediate=n.nextTick):(n.nextTick=function(e){setTimeout(e,0)},n.setImmediate=n.nextTick),n.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var r=0;a(t,function(a){i(a,e(function(e){e?(n(e),n=function(){}):(r+=1,r>=t.length&&n(null))}))})},n.forEach=n.each,n.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,a=function(){t(e[n],function(t){t?(i(t),i=function(){}):(n+=1,n>=e.length?i(null):a())})};a()},n.forEachSeries=n.eachSeries,n.eachLimit=function(e,t,i,n){var a=l(t);a.apply(null,[e,i,n])},n.forEachLimit=n.eachLimit;var l=function(e){return function(t,i,n){if(n=n||function(){},!t.length||0>=e)return n();
var a=0,r=0,o=0;!function s(){if(a>=t.length)return n();for(;e>o&&r<t.length;)r+=1,o+=1,i(t[r-1],function(e){e?(n(e),n=function(){}):(a+=1,o-=1,a>=t.length?n():s())})}()}},c=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.each].concat(t))}},d=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(i))}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.eachSeries].concat(t))}},h=function(e,t,i,n){var a=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i,n){a[e.index]=n,t(i)})
},function(e){n(e,a)})};n.map=c(h),n.mapSeries=u(h),n.mapLimit=function(e,t,i,n){return p(t)(e,i,n)};var p=function(e){return d(e,h)};n.reduce=function(e,t,i,a){n.eachSeries(e,function(e,n){i(t,e,function(e,i){t=i,n(e)})},function(e){a(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,i,a){var o=r(e,function(e){return e}).reverse();n.reduce(o,t,i,a)},n.foldr=n.reduceRight;var f=function(e,t,i,n){var a=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i&&a.push(e),t()})},function(){n(r(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=c(f),n.filterSeries=u(f),n.select=n.filter,n.selectSeries=n.filterSeries;
var m=function(e,t,i,n){var a=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i||a.push(e),t()})},function(){n(r(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=c(m),n.rejectSeries=u(m);var g=function(e,t,i,n){e(t,function(e,t){i(e,function(i){i?(n(e),n=function(){}):t()})},function(){n()})};n.detect=c(g),n.detectSeries=u(g),n.some=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e&&(i(!0),i=function(){}),n()})},function(){i(!1)})},n.any=n.some,n.every=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e||(i(!1),i=function(){}),n()})},function(){i(!0)})},n.all=n.every,n.sortBy=function(e,t,i){n.map(e,function(e,i){t(e,function(t,n){t?i(t):i(null,{value:e,criteria:n})
})},function(e,t){if(e)return i(e);var n=function(e,t){var i=e.criteria,n=t.criteria;return n>i?-1:i>n?1:0};i(null,r(t.sort(n),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var i=s(e);if(!i.length)return t(null);var r={},l=[],c=function(e){l.unshift(e)},d=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e)return void l.splice(t,1)},u=function(){a(l.slice(0),function(e){e()})};c(function(){s(r).length===i.length&&(t(null,r),t=function(){})}),a(i,function(i){var l=e[i]instanceof Function?[e[i]]:e[i],h=function(e){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1&&(o=o[0]),e){var l={};a(s(r),function(e){l[e]=r[e]}),l[i]=o,t(e,l),t=function(){}
}else r[i]=o,n.setImmediate(u)},p=l.slice(0,Math.abs(l.length-1))||[],f=function(){return o(p,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(i)};if(f())l[l.length-1](h,r);else{var m=function(){f()&&(d(m),l[l.length-1](h,r))};c(m)}})},n.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var a=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=e.next();r.push(o?a(o):t),n.setImmediate(function(){e.apply(null,r)})}}};a(n.iterator(e))()};var v=function(e,t,i){if(i=i||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);
i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var n={};e.each(s(t),function(e,i){t[e](function(t){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),n[e]=a,i(t)})},function(e){i(e,n)})}};n.parallel=function(e,t){v({map:n.map,each:n.each},e,t)},n.parallelLimit=function(e,t,i){v({map:p(t),each:l(t)},e,i)},n.series=function(e,t){if(t=t||function(){},e.constructor===Array)n.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};n.eachSeries(s(e),function(t,n){e[t](function(e){var a=Array.prototype.slice.call(arguments,1);a.length<=1&&(a=a[0]),i[t]=a,n(e)
})},function(e){t(e,i)})}},n.iterator=function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var b=function(e,t,i,n){var a=[];e(t,function(e,t){i(e,function(e,i){a=a.concat(i||[]),t(e)})},function(e){n(e,a)})};n.concat=c(b),n.concatSeries=u(b),n.whilst=function(e,t,i){e()?t(function(a){return a?i(a):void n.whilst(e,t,i)}):i()},n.doWhilst=function(e,t,i){e(function(a){return a?i(a):void(t()?n.doWhilst(e,t,i):i())
})},n.until=function(e,t,i){e()?i():t(function(a){return a?i(a):void n.until(e,t,i)})},n.doUntil=function(e,t,i){e(function(a){return a?i(a):void(t()?i():n.doUntil(e,t,i))})},n.queue=function(t,i){function r(e,t,r,o){t.constructor!==Array&&(t=[t]),a(t,function(t){var a={data:t,callback:"function"==typeof o?o:null};r?e.tasks.unshift(a):e.tasks.push(a),e.saturated&&e.tasks.length===i&&e.saturated(),n.setImmediate(e.process)})}void 0===i&&(i=1);var o=0,s={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,push:function(e,t){r(s,e,!1,t)},unshift:function(e,t){r(s,e,!0,t)},process:function(){if(o<s.concurrency&&s.tasks.length){var i=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),o+=1;
var n=function(){o-=1,i.callback&&i.callback.apply(i,arguments),s.drain&&s.tasks.length+o===0&&s.drain(),s.process()},a=e(n);t(i.data,a)}},length:function(){return s.tasks.length},running:function(){return o}};return s},n.cargo=function(e,t){var i=!1,o=[],s={tasks:o,payload:t,saturated:null,empty:null,drain:null,push:function(e,i){e.constructor!==Array&&(e=[e]),a(e,function(e){o.push({data:e,callback:"function"==typeof i?i:null}),s.saturated&&o.length===t&&s.saturated()}),n.setImmediate(s.process)},process:function l(){if(!i){if(0===o.length)return void(s.drain&&s.drain());var n="number"==typeof t?o.splice(0,t):o.splice(0),c=r(n,function(e){return e.data});s.empty&&s.empty(),i=!0,e(c,function(){i=!1;
var e=arguments;a(n,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return o.length},running:function(){return i}};return s};var y=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&a(i,function(t){console[e](t)}))}]))}};n.log=y("log"),n.dir=y("dir"),n.memoize=function(e,t){var i={},n={};t=t||function(e){return e};var a=function(){var a=Array.prototype.slice.call(arguments),r=a.pop(),o=t.apply(null,a);o in i?r.apply(null,i[o]):o in n?n[o].push(r):(n[o]=[r],e.apply(null,a.concat([function(){i[o]=arguments;
var e=n[o];delete n[o];for(var t=0,a=e.length;a>t;t++)e[t].apply(null,arguments)}])))};return a.memo=i,a.unmemoized=e,a},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=function(e,t,i){for(var a=[],r=0;e>r;r++)a.push(r);return n.map(a,t,i)},n.timesSeries=function(e,t,i){for(var a=[],r=0;e>r;r++)a.push(r);return n.mapSeries(a,t,i)},n.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,i=Array.prototype.slice.call(arguments),a=i.pop();n.reduce(e,i,function(e,i,n){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,i){a.apply(t,[e].concat(i))
})}};var C=function(e,t){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),a=n.pop();return e(t,function(e,t){e.apply(i,n.concat([t]))},a)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};n.applyEach=c(C),n.applyEachSeries=u(C),n.forever=function(e,t){function i(n){if(n){if(t)return t(n);throw n}e(i)}i()},"undefined"!=typeof define&&define.amd?define("async",[],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t.async=n}(),define("tpl!ui/resourcemgr/tpl/fileSelect",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";
return o+='\n<li data-type="',(a=i.type)?n=a.call(e,{hash:{},data:t}):(a=e&&e.type,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" data-file="',(a=i.path)?n=a.call(e,{hash:{},data:t}):(a=e&&e.path,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" data-mime="',(a=i.mime)?n=a.call(e,{hash:{},data:t}):(a=e&&e.mime,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" data-size="',(a=i.size)?n=a.call(e,{hash:{},data:t}):(a=e&&e.size,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" data-url="',(a=i.url)?n=a.call(e,{hash:{},data:t}):(a=e&&e.url,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'"> \n    <span class="desc truncate">',(a=i.name)?n=a.call(e,{hash:{},data:t}):(a=e&&e.name,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'</span>\n    <div class="actions">\n        <div class="tlb">\n            <div class="tlb-top">\n                <span class="tlb-box">\n                    <span class="tlb-bar">\n                        <span class="tlb-start"></span>\n                        <span class="tlb-group">\n                            <a href="#" class="tlb-button-off select" title="'+c((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Select this file",r):d.call(e,"__","Select this file",r)))+'"><span class="icon-move-item"></span></a>\n                            <a href="',(a=i.downloadUrl)?n=a.call(e,{hash:{},data:t}):(a=e&&e.downloadUrl,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" download="',(a=i.name)?n=a.call(e,{hash:{},data:t}):(a=e&&e.name,n=typeof a===l?a.call(e,{hash:{},data:t}):a),o+=c(n)+'" target="_blank" class="tlb-button-off download" title="'+c((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Download this file",r):d.call(e,"__","Download this file",r)))+'"><span class="icon-download"></span></a>\n                            <a href="#" class="tlb-button-off" title="'+c((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Remove this file",r):d.call(e,"__","Remove this file",r)))+'" data-delete=":parent li"><span class="icon-bin"></span></a>\n                        </span>\n                        <span class="tlb-end"></span>\n                    </span>  \n                </span>   \n            </div>\n        </div>\n    </div>\n</li>\n'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s="",l="function",c=this.escapeExpression,d=i.helperMissing,u=this;return o=i.each.call(t,t&&t.files,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(s+=o),s+="\n"})}),define("tpl!ui/feedback/feedback",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="feedback feedback-',(o=i.level)?r=o.call(t,{hash:{},data:a}):(o=t&&t.level,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+' popup">\n    <span class="icon-',(o=i.level)?r=o.call(t,{hash:{},data:a}):(o=t&&t.level,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'"></span>\n    <div>\n        ',(o=i.msg)?r=o.call(t,{hash:{},data:a}):(o=t&&t.msg,r=typeof o===c?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(l+=r),l+='\n    </div>\n    <span title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Collapse Message",s):u.call(t,"__","Collapse Message",s)))+'" class="icon-remove"></span>\n    <span title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Remove Message",s):u.call(t,"__","Remove Message",s)))+'" class="icon-close" data-close=":parent .feedback"></span>\n</div>\n'
})}),define("ui/feedback",["jquery","lodash","tpl!ui/feedback/feedback"],function(e,t,i){function n(e,i){return t(i).functions().forEach(function(t){e[t]=function(){return i[t].apply(e,arguments)}}),e}var a,r=[],o={"volatile":["info","success"],persistent:["warning","error"]},s=t(o).values().flatten().value(),l={created:"created",displayed:"displayed",closed:"closed",merged:"merged",collapsed:"collapsed"},c={timeout:1e4},d={level:null,category:null,message:function(e,n,a){return e&&t.contains(s,e)||(e="info"),this.setState(l.created),this.level=e,this.category=t.findKey(o,[this.level]),this.options=t.defaults(a||{},c),this.content=i({level:e,msg:n}),this._trigger("create"),this
},info:function(e,t){return this.message("info",e,t).open()},success:function(e,t){return this.message("success",e,t).open()},warning:function(e,t){return this.message("warning",e,t).open()},error:function(e,t){return this.message("error",e,t).open()},open:function(){return this._trigger(),t(r).reject({id:this.id}).invoke("close"),this.display(),this},close:function(){this.isInState(l.displayed)&&(this.setState(l.closed),e("#"+this.id).remove(),this._trigger(),t.remove(r,{_state:l.closed}))},display:function(){var t=this;return this.content&&(this.setState(l.displayed),e(this.content).attr("id",this.id).appendTo(this._container),this._trigger(),this.options.timeout>=0&&setTimeout(function(){t.close()
},this.options.timeout)),this},merge:function(){var e=t.find(r,{category:"persistent"});return e?(this.setState(l.merged),void this._trigger()):this.display()},collapse:function(){this._trigger()},_trigger:function(e){var i=e||this._trigger.caller.name;this._container.trigger(i+".feedback",[this]),t.isFunction(this.options[i])&&this.options[i].call(this)}},u={_state:null,isInState:function(e){return t.isString(e)||(e=[e]),t.contains(e,this._state)},setState:function(e){if(!t.contains(l,e))throw new Error("Unkown state "+e);this._state=e}},h=function(i){var o;if(a||(a=e("#feedback-box")),o=i||a,!o||!o.length)throw new Error("The feedback needs to belong to an existing container");
var s=t.extend({id:"feedback-"+(r.length+1),_container:o},u);return r.push(s),n(s,d)};return h}),define("tpl!ui/uploader/uploader",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"multiple"}function o(e,t){var n,a,r="";return r+="\n                    "+p((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Drag files here",a):h.call(e,"__","Drag files here",a)))+"\n                "}function s(e,t){var n,a,r="";return r+="\n                    "+p((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Drag file here",a):h.call(e,"__","Drag file here",a)))+"\n                "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var l,c,d,u="",h=i.helperMissing,p=this.escapeExpression,f=this;return u+='<form class="uploader">\n    <div class="file-upload grid-row">\n        <span class="btn-info btn-browse small col-4"><span class="icon-folder-open"></span>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Browse...",d):h.call(t,"__","Browse...",d)))+'</span>\n        <span class="file-name col-8 truncate placeholder">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"No file selected",d):h.call(t,"__","No file selected",d)))+'</span>\n        <input type="file" name="content" ',l=i["if"].call(t,t&&t.multiple,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='>\n    </div>\n    <!--<div class="grid-row" style="display:none;">-->\n        <!--<ul class="file-list"></ul>-->\n    <!--</div>-->\n    <div class="grid-row"> \n        <div class="file-drop col-12" data-drop-msg="'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Drop the files to upload",d):h.call(t,"__","Drop the files to upload",d)))+'">\n            <div class="dragholder">\n                ~ '+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"or",d):h.call(t,"__","or",d)))+" ~\n                <br />\n                ",l=i["if"].call(t,t&&t.multiple,{hash:{},inverse:f.program(5,s,a),fn:f.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+='\n            </div>\n        </div>\n    </div>\n    <div class="grid-row">\n        <div class="progressbar col-12"></div>\n        <br />\n    </div>\n    <div class="grid-row">\n        <button class="btn-info btn-reset small"><span class="icon-eraser"></span>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Reset",d):h.call(t,"__","Reset",d)))+'</button>\n        <button class="btn-success btn-upload small"><span class="icon-upload"></span>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Upload",d):h.call(t,"__","Upload",d)))+"</button>\n    </div>\n</form>\n"
})}),define("tpl!ui/uploader/fileEntry",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<li data-file-name="',(o=i.name)?r=o.call(t,{hash:{},data:a}):(o=t&&t.name,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    ',(o=i.name)?r=o.call(t,{hash:{},data:a}):(o=t&&t.name,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'\n    <span class="size">',(o=i.size)?r=o.call(t,{hash:{},data:a}):(o=t&&t.size,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'</span>\n    <span class="status"></span>\n    <a href="#" data-delete=":parent li"><span class="icon-close"></span></a>\n</li>\n'
})}),define("ui/filesender",["jquery","lodash"],function(e,t){var i={_opts:{frame:"__postFrame_",loaded:function(){}},_init:function(n){var a,r,o,s=i,l=t.defaults(n,s._opts),c="undefined"!=typeof XMLHttpRequest&&(new XMLHttpRequest).upload,d=this,u=l.frame;if(d&&d.is("form")||e.error("This plugin can only be called on a FORM element"),d.attr("action")||l.url&&0!==l.url.trim().length||e.error("An url is required in the options or at least an action "),a=d.find("input[type='file']"),0===a.length&&e.error("This plugin is used to post files, your form should include an input element of type file."),c)r=new XMLHttpRequest,o=new FormData,r.open("POST",l.url,!0),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t=e.parseJSON(r.responseText);
t.error?"function"==typeof l.failed&&l.failed(t.error):"function"==typeof l.loaded&&l.loaded(t)}else"function"==typeof l.failed&&l.failed()},o.append(a.attr("name"),l.file||a[0].files[0]),r.send(o);else{u+=d.attr("id")?d.attr("id"):d.attr("name")?d.attr("name"):(new Date).getTime(),e("#"+u).remove();var h=e("<iframe />");h.attr({name:u,id:u}).css("display","none"),d.attr({action:l.url,method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data",target:u}).append(h),e("#"+u,d).on("load",function(){var t=e.parseJSON(e(this).contents().text());"function"==typeof l.loaded&&l.loaded(t),e(this).off("load"),e(this).off("error"),e(this).remove()}).on("error",function(){"function"==typeof l.failed&&l.failed(),e(this).off("load"),e(this).off("error"),e(this).remove()
}),d.submit()}}};e.fn.sendfile=function(e){return i._init.call(this,e)}});var swfobject=function(){function e(){if(!z){try{var e=M.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}z=!0;for(var i=L.length,n=0;i>n;n++)L[n]()}}function t(e){z?e():L[L.length]=e}function i(e){if(typeof N.addEventListener!=R)N.addEventListener("load",e,!1);else if(typeof M.addEventListener!=R)M.addEventListener("load",e,!1);else if(typeof N.attachEvent!=R)v(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){Q?a():r()}function a(){var e=M.getElementsByTagName("body")[0],t=g(D);
t.setAttribute("type",S);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=R){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),W.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,r()}()}else r()}function r(){var e=$.length;if(e>0)for(var t=0;e>t;t++){var i=$[t].id,n=$[t].callbackFn,a={success:!1,id:i};if(W.pv[0]>0){var r=m(i);if(r)if(!b($[t].swfVersion)||W.wk&&W.wk<312)if($[t].expressInstall&&s()){var d={};d.data=$[t].expressInstall,d.width=r.getAttribute("width")||"0",d.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(d.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(d.align=r.getAttribute("align"));
for(var u={},h=r.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(u[h[f].getAttribute("name")]=h[f].getAttribute("value"));l(d,u,i,n)}else c(r),n&&n(a);else C(i,!0),n&&(a.success=!0,a.ref=o(i),n(a))}else if(C(i,!0),n){var g=o(i);g&&typeof g.SetVariable!=R&&(a.success=!0,a.ref=g),n(a)}}}function o(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=R)t=i;else{var n=i.getElementsByTagName(D)[0];n&&(t=n)}return t}function s(){return!H&&b("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function l(e,t,i,n){H=!0,x=n||null,T={success:!1,id:i};var a=m(i);if(a){"OBJECT"==a.nodeName?(E=d(a),w=null):(E=a,w=i),e.id=K,(typeof e.width==R||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==R||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";
var r=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+M.title;if(typeof t.flashvars!=R?t.flashvars+="&"+o:t.flashvars=o,W.ie&&W.win&&4!=a.readyState){var s=g("div");i+="SWFObjectNew",s.setAttribute("id",i),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}u(e,t,i)}}function c(e){if(W.ie&&W.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)
}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=g("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(D)[0];if(i){var n=i.childNodes;if(n)for(var a=n.length,r=0;a>r;r++)1==n[r].nodeType&&"PARAM"==n[r].nodeName||8==n[r].nodeType||t.appendChild(n[r].cloneNode(!0))}}return t}function u(e,t,i){var n,a=m(i);if(W.wk&&W.wk<312)return n;if(a)if(typeof e.id==R&&(e.id=i),W.ie&&W.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');
a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",F[F.length]=e.id,n=m(e.id)}else{var c=g(D);c.setAttribute("type",S);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&h(c,u,t[u]);a.parentNode.replaceChild(c,a),n=c}return n}function h(e,t,i){var n=g("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)
}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=M.getElementById(e)}catch(i){}return t}function g(e){return M.createElement(e)}function v(e,t,i){e.attachEvent(t,i),B[B.length]=[e,t,i]}function b(e){var t=W.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function y(e,t,i,n){if(!W.ie||!W.mac){var a=M.getElementsByTagName("head")[0];if(a){var r=i&&"string"==typeof i?i:"screen";if(n&&(_=null,k=null),!_||k!=r){var o=g("style");
o.setAttribute("type","text/css"),o.setAttribute("media",r),_=a.appendChild(o),W.ie&&W.win&&typeof M.styleSheets!=R&&M.styleSheets.length>0&&(_=M.styleSheets[M.styleSheets.length-1]),k=r}W.ie&&W.win?_&&typeof _.addRule==D&&_.addRule(e,t):_&&typeof M.createTextNode!=R&&_.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function C(e,t){if(j){var i=t?"visible":"hidden";z&&m(e)?m(e).style.visibility=i:y("#"+e,"visibility:"+i)}}function I(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=R?encodeURIComponent(e):e}{var E,w,x,T,_,k,R="undefined",D="object",O="Shockwave Flash",q="ShockwaveFlash.ShockwaveFlash",S="application/x-shockwave-flash",K="SWFObjectExprInst",A="onreadystatechange",N=window,M=document,P=navigator,Q=!1,L=[n],$=[],F=[],B=[],z=!1,H=!1,j=!0,W=function(){var e=typeof M.getElementById!=R&&typeof M.getElementsByTagName!=R&&typeof M.createElement!=R,t=P.userAgent.toLowerCase(),i=P.platform.toLowerCase(),n=/win/.test(i?i:t),a=/mac/.test(i?i:t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;
if(typeof P.plugins!=R&&typeof P.plugins[O]==D)l=P.plugins[O].description,!l||typeof P.mimeTypes!=R&&P.mimeTypes[S]&&!P.mimeTypes[S].enabledPlugin||(Q=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=R)try{var c=new ActiveXObject(q);c&&(l=c.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(d){}return{w3:e,pv:s,wk:r,ie:o,win:n,mac:a}}();!function(){W.w3&&((typeof M.readyState!=R&&"complete"==M.readyState||typeof M.readyState==R&&(M.getElementsByTagName("body")[0]||M.body))&&e(),z||(typeof M.addEventListener!=R&&M.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(M.attachEvent(A,function(){"complete"==M.readyState&&(M.detachEvent(A,arguments.callee),e())
}),N==top&&!function(){if(!z){try{M.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),W.wk&&!function(){return z?void 0:/loaded|complete/.test(M.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;e>t;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var i=F.length,n=0;i>n;n++)p(F[n]);for(var a in W)W[a]=null;W=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}()}return{registerObject:function(e,t,i,n){if(W.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=i,a.callbackFn=n,$[$.length]=a,C(e,!1)}else n&&n({success:!1,id:e})
},getObjectById:function(e){return W.w3?o(e):void 0},embedSWF:function(e,i,n,a,r,o,c,d,h,p){var f={success:!1,id:i};W.w3&&!(W.wk&&W.wk<312)&&e&&i&&n&&a&&r?(C(i,!1),t(function(){n+="",a+="";var t={};if(h&&typeof h===D)for(var m in h)t[m]=h[m];t.data=e,t.width=n,t.height=a;var g={};if(d&&typeof d===D)for(var v in d)g[v]=d[v];if(c&&typeof c===D)for(var y in c)typeof g.flashvars!=R?g.flashvars+="&"+y+"="+c[y]:g.flashvars=y+"="+c[y];if(b(r)){var I=u(t,g,i);t.id==i&&C(i,!0),f.success=!0,f.ref=I}else{if(o&&s())return t.data=o,void l(t,g,i,p);C(i,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){j=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}
},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return W.w3?u(e,t,i):void 0},showExpressInstall:function(e,t,i,n){W.w3&&s()&&l(e,t,i,n)},removeSWF:function(e){W.w3&&p(e)},createCSS:function(e,t,i,n){W.w3&&y(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return I(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return I(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var e=m(K);e&&E&&(e.parentNode.replaceChild(E,e),w&&(C(w,!0),W.ie&&W.win&&(E.style.display="block")),x&&x(T)),H=!1
}}}}();define("polyfill/swfobject",function(){}),function(e){var t=e.Callbacks("once unique memory"),i=0,n=null;if(window.FileReader)return void(e.fn.fileReader=function(){return this});e.fn.fileReader=function(i){i=e.extend(e.fn.fileReader.defaults,i);var n=this;return t.add(function(){return a(n,i)}),e.isFunction(i.callback)&&t.add(i.callback),FileAPIProxy.ready||FileAPIProxy.init(i),this},e.fn.fileReader.defaults={id:"fileReaderSWFObject",multiple:null,accept:null,label:null,extensions:null,filereader:"files/filereader.swf",expressInstall:null,debugMode:!1,callback:!1};var a=function(t,a){return t.each(function(t,r){r=e(r);var o,s,l=r.attr("id");l||(l="flashFileInput"+i,i++),o=r.parent("label"),s=o.length>0?o:r,s.attr("id",s.attr("id")||l),a.multiple=!!(null===a.multiple?r.attr("multiple"):a.multiple),a.accept=null===a.accept?r.attr("accept"):a.accept,FileAPIProxy.inputs[l]=r,FileAPIProxy.swfObject.add(s.attr("id"),a.multiple,a.accept,a.label,a.extensions),s.css("z-index",0).mouseover(function(e){l!==n&&(e=e||window.event,n=l,FileAPIProxy.swfObject.mouseover(s.attr("id")),FileAPIProxy.container.height(s.outerHeight()).width(s.outerWidth()).css(s.offset()))
}).click(function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})})};window.FileAPIProxy={ready:!1,init:function(i){var a=this;this.debugMode=i.debugMode,this.container=e("<div>").attr("id",i.id).wrap("<div>").parent().css({position:"fixed",width:"1px",height:"1px",display:"inline-block",background:"transparent","z-index":99999}).on("mouseover mouseout mousedown mouseup",function(t){n&&e("#"+n).trigger(t.type)}).appendTo("body"),swfobject.embedSWF(i.filereader,i.id,"100%","100%","10",i.expressInstall,{debugMode:i.debugMode?!0:""},{wmode:"transparent",allowScriptAccess:"sameDomain"},{},function(i){a.swfObject=i.ref,e(a.swfObject).css({display:"block",outline:0}).attr("tabindex",0),a.ready&&t.fire(),a.ready=i.success&&"function"==typeof i.ref.add
})},swfObject:null,container:null,inputs:{},readers:{},onFileInputEvent:function(e){if(this.debugMode&&console.info("FileInput Event ",e.type,e),e.target in this.inputs){var t=this.inputs[e.target];e.target=t[0],"change"===e.type&&(e.files=new FileList(e.files),e.target={files:e.files}),t.trigger(e)}window.focus()},onFileReaderEvent:function(e){if(this.debugMode&&console.info("FileReader Event ",e.type,e,e.target in this.readers),e.target in this.readers){var t=this.readers[e.target];e.target=t,t._handleFlashEvent.call(t,e)}},onFileReaderError:function(e){this.debugMode&&console.log(e)},onSWFReady:function(){return this.container.css({position:"absolute"}),this.ready="function"==typeof this.swfObject.add,this.ready&&t.fire(),!0
}},window.FileReader=function(){this.EMPTY=0,this.LOADING=1,this.DONE=2,this.readyState=0,this.result=null,this.error=null,this.onloadstart=null,this.onprogress=null,this.onload=null,this.onabort=null,this.onerror=null,this.onloadend=null,this._callbacks={loadstart:e.Callbacks("unique"),progress:e.Callbacks("unique"),abort:e.Callbacks("unique"),error:e.Callbacks("unique"),load:e.Callbacks("unique"),loadend:e.Callbacks("unique")},this._id=null},window.FileReader.prototype={readAsBinaryString:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsBinaryString")},readAsText:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsText")
},readAsDataURL:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsDataURL")},readAsArrayBuffer:function(){throw"Whoops FileReader.readAsArrayBuffer is unimplemented"},abort:function(){this.result=null,this.readyState!==this.EMPTY&&this.readyState!==this.DONE&&FileAPIProxy.swfObject.abort(this._id)},addEventListener:function(e,t){e in this._callbacks&&this._callbacks[e].add(t)},removeEventListener:function(e,t){e in this._callbacks&&this._callbacks[e].remove(t)},dispatchEvent:function(t){if(t.target=this,t.type in this._callbacks){var i=this["on"+t.type];e.isFunction(i)&&i(t),this._callbacks[t.type].fire(t)}return!0},_register:function(e){this._id=e.input+"."+e.name,FileAPIProxy.readers[this._id]=this
},_start:function(e){if(this._register(e),this.readyState===this.LOADING)throw{type:"InvalidStateError",code:11,message:"The object is in an invalid state."}},_handleFlashEvent:function(e){switch(e.type){case"loadstart":this.readyState=this.LOADING;break;case"loadend":this.readyState=this.DONE;break;case"load":this.readyState=this.DONE,this.result=FileAPIProxy.swfObject.result(this._id);break;case"error":this.result=null,this.error={name:"NotReadableError",message:"The File cannot be read!"}}this.dispatchEvent(new FileReaderEvent(e))}},FileReaderEvent=function(e){this.initEvent(e)},FileReaderEvent.prototype={initEvent:function(t){e.extend(this,{type:null,target:null,currentTarget:null,eventPhase:2,bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,timeStamp:(new Date).getTime()},t)
},stopPropagation:function(){},stopImmediatePropagation:function(){},preventDefault:function(){}},FileList=function(e){if(e){for(var t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}else this.length=0},FileList.prototype={item:function(e){return e in this?this[e]:null}}}(jQuery),define("filereader",function(){}),define("ui/uploader",["jquery","lodash","i18n","async","core/pluginifier","context","util/bytes","tpl!ui/uploader/uploader","tpl!ui/uploader/fileEntry","ui/filesender","filereader","jqueryui"],function(e,t,i,n,a,r,o,s,l){var c="uploader",d="ui."+c,u={upload:!0,read:!1,multiple:!1,uploadQueueSize:3,browseBtnClass:"btn-browse",uploadBtnClass:"btn-upload",resetBtnClass:"btn-reset",fileNameClass:"file-name",dropZoneClass:"file-drop",progressBarClass:"progressbar",dragOverClass:"drag-hover",defaultErrMsg:i("Unable to upload file"),fileSelect:function(e,i){return t.isFunction(i)?i(e):e
}},h={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span")},p={init:function(i){var n=p;return i=t.defaults(i||{},u),this.each(function(){var a=e(this);if(!a.data(d)){a.html(s(i)),i.$input=e("input[type=file]",a),i.$browseBtn=e("."+i.browseBtnClass,a),i.$fileName=e("."+i.fileNameClass,a),i.$dropZone=e("."+i.dropZoneClass,a),i.$progressBar=e("."+i.progressBarClass,a),i.$form=a.children("form"),i.$uploadBtn=e("."+i.uploadBtnClass,a),i.$resetBtn=e("."+i.resetBtnClass,a),i.useDropZone=h.dnd,i.dropZonePlaceholder=i.$dropZone.html(),i.fileNamePlaceholder=i.$fileName.text(),i.files=[],a.data(d,i),n._reset(a);var o=function(e){var i=[];
t.forEach(e.target.files,function(e){i.push(e)}),n._selectFiles(a,i)},l=function(e){e.preventDefault(),e.stopPropagation(),i.$dropZone.addClass(i.dragOverClass)},u=function(e){e.preventDefault(),e.stopPropagation(),i.$dropZone.removeClass(i.dragOverClass)};i.read&&!h.filereader?i.$input.fileReader({id:"fileReaderSWFObject",filereader:r.taobase_www+"js/lib/polyfill/filereader.swf",callback:function(){i.$input.on("change",o)}}):i.$input.on("change",o),i.$input.on("mousedown",function(t){return t.preventDefault(),e(this).blur(),!1}),i.useDropZone?(e(document).off("drop."+c).on("drop."+c,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1}),e(document).off("dragover."+c).on("dragover."+c,function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1
}),i.$dropZone.on("dragover",l).on("dragend",u).on("dragleave",u).on("drop",function(e){return u(e),n._selectFiles(a,t.values(e.target.files||e.originalEvent.files||e.originalEvent.dataTransfer.files),i.$dropZone.children("ul").length>0),!1})):i.$dropZone.hide(),a.on("fileselect."+c,function(){0===i.files.length&&n._reset(a),i.upload&&i.$uploadBtn.off("click").on("click",function(e){e.preventDefault(),n._upload(a,i.files)}).removeProp("disabled"),i.read&&n._read(a,i.files),i.$resetBtn.off("click").on("click",function(e){e.preventDefault(),n._reset(a)}).removeProp("disabled")}),a.trigger("create."+c)}})},_selectFiles:function(n,a,r){var s,u=this,h=n.data(d),p=function(){var e=h.files.length;
h.$fileName.text(e+" "+i(e>1?"files selected":"file selected")).removeClass("placeholder")};a.length<=0&&!r&&u._reset(n),a.length>0&&h.fileSelect.call(n,a,function(i){h.files=r?h.files.concat(i):i,h.useDropZone?(p(),s=t.reduce(i,function(e,t){return e+l({name:t.name,size:o.hrSize(t.size)})},""),r?h.$dropZone.children("ul").append(s):h.$dropZone.html("<ul>"+s+"</ul>"),h.$dropZone.off("delete.delter","li").on("delete.deleter","li",function(i){var a=e(i.target).data("file-name");h.$dropZone.off("deleted.deleter").one("deleted.deleter",function(){h.files=t.reject(h.files,{name:a}),0===h.files.length?u._reset(n):p()})})):(h.files=h.files.slice(0,1),h.$fileName.text(a[0].name).removeClass("placeholder")),n.trigger("fileselect."+c)
})},_files:function(e){var t=[],i=e.data(d);return i&&(t=i.files),t},_reset:function(e){var t=e.data(d);t.$fileName.text(t.fileNamePlaceholder).addClass("placeholder"),t.$dropZone.empty().html(t.dropZonePlaceholder),t.$uploadBtn.prop("disabled",!0),t.$resetBtn.prop("disabled",!0),t.$progressBar&&t.$progressBar.removeClass("success").progressbar({value:0}),e.trigger("reset."+c)},_upload:function(i){var a,r,o,s,l=[],u=i.data(d);u&&u.files.length&&(a=u.files.length,r=e("ul",u.$dropZone),o=e("li:first",r).outerHeight(),s=n.queue(function(t,i){var n=e('li[data-file-name="'+t.name+'"]',r),a=e(".status",n),s=r.children().index(n);u.$dropZone.stop(!0,!0).animate({scrollTop:s*o},25),a.removeClass("success").removeClass("error").addClass("sending"),u.$form.sendfile({url:u.uploadUrl,file:t,loaded:function(e){a.removeClass("sending").removeClass("error").addClass("success"),i(null,e)
},failed:function(e){e=e||u.defaultErrMsg,a.removeClass("sending").removeClass("success").addClass("error").attr("title",e),i(new Error(e))}})},u.uploadQueueSize||1),u.$uploadBtn.prop("disabled",!0),u.$resetBtn.prop("disabled",!0),u.$progressBar.progressbar({value:0}),t.forEach(u.files,function(e,n){t.delay(function(){s.push(e,function(t,r){var o=(n+1)/a*100;t?(l.push(t),i.trigger("fail."+c,[e,t])):i.trigger("upload."+c,[e,r]),u.$progressBar.progressbar({value:o}),o>=100&&(u.$progressBar.addClass(l.length===a?"error":l.length>0?"warning":"success"),i.trigger("end."+c))})},50)}))},_read:function(e){var i=e.data(d);i&&i.files.length&&t.forEach(i.files,function(t){var n=(t.name,t.size,t.type,new FileReader);
n.onload=function(n){i.$progressBar.progressbar({value:100}),e.trigger("readend."+c,[t,n.target.result])},n.onloadstart=function(){i.$progressBar.progressbar({value:0}),e.trigger("readstart."+c,[t])},i.$progressBar.length&&(n.onprogress=function(e){var t=Math.ceil(Math.round(e.loaded)/Math.round(e.total)*100);i.$progressBar.progressbar({value:t})}),n.readAsDataURL(t)})},destroy:function(){this.each(function(){var t=e(this);e(document).off("drop."+c).off("dragover."+c),t.empty(),t.trigger("destroy."+c)})}};a.register(c,p,{expose:["reset","selectFiles","upload","read"]})}),define("ui/resourcemgr/fileSelector",["jquery","lodash","async","i18n","core/mimetype","tpl!ui/resourcemgr/tpl/fileSelect","ui/feedback","ui/uploader"],function(e,t,i,n,a,r,o){function s(e){var i=e.replace(/\/$/,"").split("/"),n=i.length-1;
return t.map(i,function(e,t){return e&&n>t?e[0]:e}).join("/")}function l(e,t){var i=e.clone().detach().css({position:"absolute",visibility:"hidden","text-overflow":"clip",width:"auto"}).text(t).insertAfter(e),n=i.width();return i.remove(),n>e.width()}var c="resourcemgr";return function(d){function u(a){var r=[],s=e(".upload-switcher a",g);y.on("upload.uploader",function(e,t,i){m.trigger("filenew."+c,[i,a])}),y.on("fail.uploader",function(e,t,i){r.push(n("Unable to upload file %s : %s",t.name,i))}),y.on("end.uploader",function(){0===r.length?t.delay(l,500):o().error("<ul><li>"+r.join("</li><li>")+"</li></ul>"),r=[]}),y.uploader({upload:!0,multiple:!0,uploadUrl:d.uploadUrl+"?"+e.param(d.params)+"&"+d.pathParam+"="+a,fileSelect:function(n,r){var s=n.length,l=[];
if(v.find("li > .desc").each(function(){l.push(e(this).text().toLowerCase())}),d.params.filters){var c=d.params.filters.split(",");n=t.filter(n,function(e){return t.contains(c,e.type)}),n.length!==s&&o().error("Unauthorized files have been removed")}i.filter(n,function(i,n){var r=!0;d.fileExistsUrl?e.getJSON(d.fileExistsUrl+"?"+e.param(d.params)+"&"+d.pathParam+"="+a+"/"+i.name,function(e){e&&e.exists===!0&&(r=window.confirm("Do you want to override "+i.name+"?")),n(r)}):(t.contains(l,i.name.toLowerCase())&&(r=window.confirm("Do you want to override "+i.name+"?")),n(r))},r)}}),m.on("folderselect."+c,function(t,i){a=i,y.uploader("options",{uploadUrl:d.uploadUrl+"?"+e.param(d.params)+"&"+d.pathParam+"="+a})
}),s.click(function(e){e.preventDefault(),l()});var l=function(){"none"===v.css("display")?(y.hide(),v.show(),s.filter(".upload").css({display:"inline-block"}),s.filter(".listing").hide(),E.text(n("Browse folders:"))):(v.hide(),b.hide(),y.show(),s.filter(".upload").hide(),s.filter(".listing").css({display:"inline-block"}),E.text(n("Upload into:")),y.uploader("reset"))}}function h(e,t){v.empty(),t.length?(b.hide(),v.append(r({files:t})),p()):"none"!==v.css("display")&&b.show()}function p(){var t=v.innerWidth();e("li",v).each(function(){var i=e(this),n=e(".actions",i).outerWidth(!0);e(".desc",i).width(t-(n+60))})}var f=d.root||"/",m=d.$target,g=e(".file-selector",m),v=e(".files",g),b=e(".empty",g),y=e(".file-upload-container",g),C="#"+m.attr("id")+" .file-selector",I=g.find("h1 > .title"),E=e(".file-browser > h1",m);
u(f),m.on("folderselect."+c,function(i,n,r,o){var c;I.text(l(I,n)?s(n):n),t.isArray(r)&&(c=t.filter(r,function(e){return!!e.name}).map(function(t){return t.type=a.getFileType(t),t.path=(n+"/"+t.name).replace("//","/"),t.downloadUrl=d.downloadUrl+"?"+e.param(d.params)+"&"+d.pathParam+"="+t.path,t}),h(n,c),o&&e('li[data-file="'+o.path+'"]').trigger("click"))}),e(window).on("resize.resourcemgr",t.throttle(p,10)),e(C).off("click",".files li").on("click",".files li",function(i){var n=e(this),a=e(".files > li",g),r=t.clone(n.data());e.contains(n.find(".actions")[0],i.target)||i.preventDefault(),a.removeClass("active"),n.addClass("active"),m.trigger("fileselect."+c,[r])
}),e(C).off("click",".files li a.select").on("click",".files li a.select",function(i){i.preventDefault(),m.trigger("select."+c,[[t.pick(e(this).parents("li").data(),["file","type","mime","size"])]])}),v.on("delete.deleter",function(i,n){var a,r={};"deleter"===i.namespace&&n.length&&(a=n.data("file"),e(this).one("deleted.deleter",function(){r[d.pathParam]=a,e.getJSON(d.deleteUrl,t.merge(r,d.params)),m.trigger("filedelete."+c,[a])}))})}}),define("tpl!ui/resourcemgr/tpl/layout",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;
return l+='<div class="resourcemgr modal">\n\n    <h2>',(o=i.title)?r=o.call(t,{hash:{},data:a}):(o=t&&t.title,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'</h2>\n    \n<!-- left section: items selection -->\n    <section class="file-browser">\n        \n        <h1>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Browse resources",s):u.call(t,"__","Browse resources",s)))+'</h1>\n        <ul class="folders"></ul>\n    </section>\n \n<!-- test editor  -->\n    <section class="file-selector">\n        <h1>\n            <div class="title lft"></div>\n            <div class="upload-switcher rgt">\n                <a href="#" class="btn-info small upload"><span class="icon-add"></span>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Add file(s)",s):u.call(t,"__","Add file(s)",s)))+'</a>\n                <a href="#" class="btn-info small listing"><span class="icon-undo"></span>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Back to listing",s):u.call(t,"__","Back to listing",s)))+'</a>\n            </div>\n        </h1>\n        \n        <div class="empty">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"No files",s):u.call(t,"__","No files",s)))+'\n        </div>\n\n        <ul class="files"></ul>\n\n        <div class="file-upload-container"></div>\n    \n    </section>   \n\n    <section class="file-preview">\n        <h1>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Preview",s):u.call(t,"__","Preview",s)))+'</h1>\n        <div class="previewer">\n            <p class="nopreview">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"No Preview available",s):u.call(t,"__","No Preview available",s)))+'</p>\n        </div>\n       \n        <h2 class="toggler" data-toggle="~ .file-properties">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File Properties",s):u.call(t,"__","File Properties",s)))+'</h2>\n        <div class="file-properties">\n\n            <div class="grid-row">\n                <div class="col-2">\n                    '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Type",s):u.call(t,"__","Type",s)))+'\n                </div>\n                <div class="col-10 prop-type"></div>\n            </div>\n\n            <div class="grid-row">\n                <div class="col-2">\n                    '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Size",s):u.call(t,"__","Size",s)))+'\n                </div>\n                <div class="col-10 prop-size"></div>\n            </div>\n            \n            <div class="grid-row">\n                <div class="col-2">\n                    '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"URL",s):u.call(t,"__","URL",s)))+'\n                </div>\n                <div class="col-10 prop-url">\n                    <a href="#" target="_blank"></a>\n                </div>\n            </div>\n        </div>\n\n        <h2 class="toggler" data-toggle="~ .actions">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Actions",s):u.call(t,"__","Actions",s)))+'</h2>\n        <div class="actions">\n            <button class="btn-success select-action small" disabled>\n                <span class="icon-move-item"></span>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select",s):u.call(t,"__","Select",s)))+"\n            </button>\n        </div>\n    </section>\n</div>\n"
})}),define("ui/resourcemgr",["jquery","lodash","core/pluginifier","core/dataattrhandler","ui/modal","ui/resourcemgr/fileBrowser","ui/resourcemgr/filePreview","ui/resourcemgr/fileSelector","tpl!ui/resourcemgr/tpl/layout"],function(e,t,i,n,a,r,o,s,l){var c="resourcemgr",d="ui."+c,u={root:"/",open:!0,appendContainer:".tao-scope:first",title:""},h={init:function(i){var n=h;return i=t.defaults(i,u),this.each(function(){var a,l=e(this);l.data(d)?(i=l.data(d),i.open&&n._open(l)):(l.data(d,i),t.functions(i).forEach(function(e){l.on(e+"."+c,function(){i[e].apply(l,arguments)})}),a=i.$target||n._createTarget(l),a.modal({startClosed:!0,minWidth:900}),a.on("select."+c,function(e,t){n._close(l),l.trigger(e,[t])
}),a.on("closed.modal",function(){l.trigger("close."+c)}),r(i),s(i),o(i),l.trigger("create."+c,[a[0]]),i.open&&n._open(l))})},_createTarget:function(t){var i=t.data(d);return i&&(i.targetId="resourcemgr-"+e(document).find(".resourcemgr").length,i.$target=e(l({title:i.title||""})),i.$target.attr("id",i.targetId).css("display","none").appendTo(i.appendContainer),t.data(d,i)),i.$target},_open:function(e){var t=e.data(d);t&&t.$target&&(t.$target.modal("open"),e.trigger("open."+c))},_close:function(e){var t=e.data(d);t&&t.$target&&(t.$target.modal("close"),e.trigger("close."+c))},destroy:function(){this.each(function(){var t=e(this),i=t.data(d);i.bindEvent!==!1&&t.off(i.bindEvent),i.targetId&&e("#"+i.targetId).remove(),e(window).off("resize.resourcemgr"),t.trigger("destroy."+c)
})}};i.register(c,h)}),define("taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler",["jquery","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","i18n","helpers","lodash","taoQtiItem/qtiCreator/model/Stylesheet","tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup","ui/resourcemgr"],function(e,t,i,n,a,r,o){"use strict";var s=e(document),l=function(){var a=function(a){var o=e("#style-sheet-toggler"),c=e("#stylesheet-uploader"),d=e("[data-custom-css]"),u=function(t){t=e(t);var i=t.closest("li"),n=i.data("stylesheetObj")||new r({href:i.data("css-res")}),a=i.find(".style-sheet-label-editor"),o=a.prev(".file-label"),s=a.val();return{li:i,input:a,label:s,labelBox:o,isCustomCss:!!i.data("custom-css"),isDisabled:i.find(".icon-preview").hasClass("disabled"),stylesheetObj:n,cssUri:n.attr("href")}
};c.on("click",function(){c.resourcemgr({appendContainer:"#mediaManager",root:"/",browseUrl:n._url("files","ItemContent","taoItems"),uploadUrl:n._url("upload","ItemContent","taoItems"),deleteUrl:n._url("delete","ItemContent","taoItems"),downloadUrl:n._url("download","ItemContent","taoItems"),fileExistsUrl:n._url("fileExists","ItemContent","taoItems"),params:{uri:a.uri,lang:a.lang,filters:"text/css"},pathParam:"path",select:function(e,i){var n,a=i.length;for(n=0;a>n;n++)t.addStylesheet(i[n].file)}})});var h=function(n){var a=u(n),r=a.isDisabled?"disabled-href":"href",o=e("head link");t.getItem().removeStyleSheet(a.stylesheetObj),o.filter("["+r+'*="'+a.cssUri+'"]').remove(),a.li.remove(),e(".feedback-info").hide(),l({message:i("Style Sheet <b>%s</b> removed<br> Click <i>Add Style Sheet</i> to re-apply.").replace("%s",a.label),type:"info"}),s.trigger("customcssloaded.styleeditor",[t.getStyle()])
},p=function(e){var t=u(e);t.labelBox.hide(),t.input.show()},f=function(e){t.download(u(e).cssUri)},m=function(t){var i=u(t),n=e.trim(i.input.val());return n?(i.stylesheetObj.attr("title",n),i.input.hide(),void i.labelBox.html(n).show()):(i.stylesheetObj.attr("title",""),!1)},g=function(i){var n,a=u(i),r="disabled-href",o="href";a.isCustomCss?a.isDisabled?(t.create(),d.removeClass("not-available")):(t.erase(),d.addClass("not-available")):(a.isDisabled&&(r="href",o="disabled-href"),n=e("link["+o+'$="'+a.cssUri+'"]'),n.attr(r,n.attr(o)).removeAttr(o)),e(i).toggleClass("disabled")};o.on("click",function(e){var t=e.target,i=t.className;i.indexOf("icon-bin")>-1?h(e.target):i.indexOf("file-label")>-1?p(e.target):i.indexOf("icon-preview")>-1?g(e.target):i.indexOf("icon-download")>-1&&f(e.target)
}),o.on("keydown","input",function(t){13===t.keyCode&&e(t.target).trigger("blur")}),o.on("blur","input",function(e){m(e.target)})},l=function(t){var i=e(o(t)),n=i.find(".close-trigger");return e("body").append(i),n.on("click",function(){i.fadeOut(function(){e(this).remove()})}),setTimeout(function(){n.trigger("click")},4523),i};return{init:a}}();return l}),define("layout/section-height",["jquery","lodash","jquery.cookie"],function(e,t){function i(){for(var t,i=e(".tree-action-bar-box"),n=i.find("ul"),a=i.find("li:visible").length||0;5>a;)n.append(e('<li class="dummy"><a/></li>')),a++;return t=i.outerHeight()+parseInt(i.css("margin-bottom")),n.find("li.dummy").remove(),t
}var n=t.throttle(function(){var t,n,a,r,o,s,l,c,d=e(".content-panel:visible");d.length&&(t=d.find(".search-action-bar"),n=t.outerHeight()+parseInt(t.css("margin-bottom"))+parseInt(t.css("margin-top")),a=d.find(".tree .ltr, .tree .rtl"),l=e(".item-editor-sidebar"),r=function(){var t,i=e("footer");return l.length?(l.hide(),t=i.offset().top,l.show(),t):i.offset().top}(),o=d.offset().top,c=r-o,s=e("#item-editor-panel"),s.length?(c-=e(".item-editor-action-bar").outerHeight(),s.find("#item-editor-scroll-outer").css({minHeight:c,maxHeight:c,height:c}),l.css({minHeight:c,maxHeight:c,height:c})):d.find(".content-container").css({minHeight:c}),a.length&&a.css({maxHeight:r-o-n-i()}))
},100);return e(window).off("resize.sectioneight").on("resize.sectionheight",t.debounce(n,50)),e(".version-warning").on("hiding.versionwarning",n),{init:function(){e(".taotree").on("ready.taotree",function(){e(".navi-container").show(),n()})},setHeights:n}}),define("taoQtiItem/qtiCreator/editor/editor",["jquery","taoQtiItem/qtiCreator/editor/preview","taoQtiItem/qtiCreator/editor/preparePrint","taoQtiItem/qtiCreator/editor/styleEditor/fontSelector","taoQtiItem/qtiCreator/editor/styleEditor/colorSelector","taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger","taoQtiItem/qtiCreator/editor/styleEditor/itemResizer","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler","layout/section-height"],function(e,t,i,n,a,r,o,s,l,c){var d=function(e,t){s.init(e.element,t),l.init(t),n(),a(),r(),o(e.element)
},u=function(i){t.init(e(".preview-trigger"),i)},h=function(t,n){c.setHeights(),d(t,n),u(t),i();var a=e("#item-editor-panel"),r=e("#item-editor-label span"),o=e(".action-group");a.addClass("has-item"),r.text(n.$label),o.show()};return{initGui:h}}),define("taoQtiItem/qtiCreator/editor/customElementRegistryFactory",["lodash"],function(e){function t(t){function n(e){if(!e.typeIdentifier)throw"invalid hook : missing typeIdentifier";if(!e.baseUrl)throw"invalid hook : missing baseUrl";if(!e.file)throw"invalid hook : missing file";return!0}function a(i){var a={};e(i).values().each(function(i){if(n(i)){var r=i.typeIdentifier;p[r]=i,a[r]=i.baseUrl,e.isFunction(t.onRegister)&&t.onRegister(i)
}}),f.config({paths:a})}function r(t){var i=[];e.each(p,function(e){i.push(e.file)}),f(i,function(){var i={};e.each(arguments,function(e){var t=e.getTypeIdentifier();i[t]=e,p[t].creator=e}),t(i)})}function o(e,t){var i=p[e];if(!i)throw"cannot load the hook because it is not registered "+e;f([i.file],function(e){i.creator=e,t(e)})}function s(e){var t=p[e];if(t){if(t.creator)return t.creator;throw"the hook is not loaded "+e}throw"the hook is not registered "+e}function l(e){return p[e]&&p[e].dev}function c(e){return p[e]}function d(e){return c(e).baseUrl}function u(t){var i=h(t);return{label:i.label,icon:d(t)+i.icon,"short":i.short,description:i.description,qtiClass:"customInteraction."+i.typeIdentifier,tags:e.union(["Custom Interactions"],i.tags)}
}function h(e){return c(e).manifest}function l(e){return p[e]&&p[e].dev}t=e.defaults(t,i);var p={},f=window.require;return{register:a,loadAll:r,loadOne:o,getBaseUrl:d,getCreator:s,isDev:l,get:c,getAuthoringData:u,getManifest:h}}var i={onRegister:e.noop};return{create:t}}),define("taoQtiItem/qtiCreator/editor/customInteractionRegistry",["lodash","taoQtiItem/qtiCreator/helper/qtiElements","taoQtiItem/qtiCreator/editor/customElementRegistryFactory"],function(e,t,i){var n=i.create({onRegister:function(e){t.classes["customInteraction."+e.typeIdentifier]={parents:["customInteraction"],qti:!0}}});return n.getAuthoringData=function(t){var i=n.getManifest(t);return{label:i.label,icon:n.getBaseUrl(t)+i.icon,"short":i.short,description:i.description,qtiClass:"customInteraction."+i.typeIdentifier,tags:e.union(["Custom Interactions"],i.tags)}
},n}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n    data-sub-group="',(a=i.subGroup)?n=a.call(e,{hash:{},data:t}):(a=e&&e.subGroup,n=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=m(n)+'"\n'}function o(){return'\n    class="dev"\n'}function s(){return'\n    class="disabled"\n    title="element available in the final release"\n'}function l(e,t){var n,a,r="";return r+='\n    title="',(a=i.title)?n=a.call(e,{hash:{},data:t}):(a=e&&e.title,n=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=m(n)+'"\n'}function c(e,t){var n,a,r="";return r+='\n    <span class="icon ',(a=i.icon)?n=a.call(e,{hash:{},data:t}):(a=e&&e.icon,n=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=m(n)+'"></span>\n    '
}function d(e,t){var n,a,r="";return r+='\n    <img class="icon" src="',(a=i.icon)?n=a.call(e,{hash:{},data:t}):(a=e&&e.icon,n=typeof a===f?a.call(e,{hash:{},data:t}):a),r+=m(n)+'">\n    '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var u,h,p="",f="function",m=this.escapeExpression,g=this;return p+="<li\n",u=i["if"].call(t,t&&t.subGroup,{hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a}),(u||0===u)&&(p+=u),p+='\n    data-qti-class="',(h=i.qtiClass)?u=h.call(t,{hash:{},data:a}):(h=t&&t.qtiClass,u=typeof h===f?h.call(t,{hash:{},data:a}):h),p+=m(u)+'"\n    \n',u=i["if"].call(t,t&&t.dev,{hash:{},inverse:g.noop,fn:g.program(3,o,a),data:a}),(u||0===u)&&(p+=u),p+="\n\n",u=i["if"].call(t,t&&t.disabled,{hash:{},inverse:g.program(7,l,a),fn:g.program(5,s,a),data:a}),(u||0===u)&&(p+=u),p+="\n>\n    ",u=i["if"].call(t,t&&t.iconFont,{hash:{},inverse:g.program(11,d,a),fn:g.program(9,c,a),data:a}),(u||0===u)&&(p+=u),p+='\n    \n    <div class="truncate">',(h=i["short"])?u=h.call(t,{hash:{},data:a}):(h=t&&t["short"],u=typeof h===f?h.call(t,{hash:{},data:a}):h),p+=m(u)+"</div>\n</li>"
})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<section class="tool-group" id="',(o=i.id)?r=o.call(t,{hash:{},data:a}):(o=t&&t.id,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <h2>',(o=i.label)?r=o.call(t,{hash:{},data:a}):(o=t&&t.label,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'</h2>\n    <div class="panel clearfix">\n        <ul class="tool-list plain"></ul>\n    </div>\n</section>'})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<div>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">\n        ',(o=i.message)?r=o.call(t,{hash:{},data:a}):(o=t&&t.message,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+"\n    </div>\n</div>"})}),define("css!lib/tooltipster/css/tooltipster",[],function(){}),function(e,t,n){function a(t,i){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},c,i),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()
}function r(t,i){var n=!0;return e.each(t,function(e){return"undefined"==typeof i[e]||t[e]!==i[e]?(n=!1,!1):void 0}),n}function o(){return!u&&d}function s(){var e=n.body||n.documentElement,t=e.style,i="transition";if("string"==typeof t[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var a=0;a<v.length;a++)if("string"==typeof t[v[a]+i])return!0;return!1}var l="tooltipster",c={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(){},functionBefore:function(e,t){t()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};
a.prototype={init:function(){var t=this;if(n.querySelector){if(null!==t.options.content)t.setContent(t.options.content);else{var i=t.$el.attr("title");"undefined"==typeof i&&(i=null),t.setContent(i)}var a=t.options.functionInit.call(t.$el,t.$el,t.content);"undefined"!=typeof a&&t.setContent(a),t.$el.removeAttr("title").addClass("tooltipstered"),!d&&t.options.iconDesktop||d&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.$elProxy=t.options.iconCloning?t.options.icon.clone(!0):t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){(!o()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t.showTooltip())
}).on("mouseleave."+t.namespace,function(){(!o()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)}),d&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t.showTooltipNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){(!o()||t.options.touchDevices)&&t.showTooltip()})}},showTooltip:function(){var e=this;"shown"!=e.status&&"appearing"!=e.status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e.showTooltipNow()},e.options.delay):e.showTooltipNow())},showTooltipNow:function(i){var n=this;n.options.functionBefore.call(n.$el,n.$el,function(){if(n.enabled&&null!==n.content){i&&n.callbacks.show.push(i),n.callbacks.hide=[],clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null,n.options.onlyOne&&e(".tooltipstered").not(n.$el).each(function(t,i){var n=e(i),a=n[l]("status"),r=n[l]("option","autoClose");
"hidden"!==a&&"disappearing"!==a&&r&&n[l]("hide")});var a=function(){n.status="shown",e.each(n.callbacks.show,function(e,t){t.call(n.$el)}),n.callbacks.show=[]};if("hidden"!==n.status){var r=0;"disappearing"===n.status?(n.status="appearing",s()?(n.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+n.options.animation+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(a)):n.$tooltip.stop().fadeIn(a)):"shown"===n.status&&a()}else{n.status="appearing";var r=n.options.speed;n.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var o="tooltipster-"+n.options.animation,c="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",u=n.options.fixedWidth>0?"width:"+Math.round(n.options.fixedWidth)+"px;":"",h=n.options.maxWidth>0?"max-width:"+Math.round(n.options.maxWidth)+"px;":"",p=n.options.interactive?"pointer-events: auto;":"";
if(n.$tooltip=e('<div class="tooltipster-base '+n.options.theme+'" style="'+u+" "+h+" "+p+" "+c+'"><div class="tooltipster-content"></div></div>'),s()&&n.$tooltip.addClass(o),n.insertContent(),n.$tooltip.appendTo("body"),n.positionTooltip(),n.options.functionReady.call(n.$el,n.$el,n.$tooltip),s()?(n.$tooltip.addClass(o+"-show"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(a)):n.$tooltip.css("display","none").fadeIn(n.options.speed,a),n.setCheckInterval(),e(t).on("scroll."+n.namespace+" resize."+n.namespace,function(){n.positionTooltip()}),n.options.autoClose)if(e("body").off("."+n.namespace),"hover"==n.options.trigger)if(d&&setTimeout(function(){e("body").on("touchstart."+n.namespace,function(){n.hideTooltip()
})},0),n.options.interactive){d&&n.$tooltip.on("touchstart."+n.namespace,function(e){e.stopPropagation()});var f=null;n.$elProxy.add(n.$tooltip).on("mouseleave."+n.namespace+"-autoClose",function(){clearTimeout(f),f=setTimeout(function(){n.hideTooltip()},n.options.interactiveTolerance)}).on("mouseenter."+n.namespace+"-autoClose",function(){clearTimeout(f)})}else n.$elProxy.on("mouseleave."+n.namespace+"-autoClose",function(){n.hideTooltip()});else"click"==n.options.trigger&&(setTimeout(function(){e("body").on("click."+n.namespace+" touchstart."+n.namespace,function(){n.hideTooltip()})},0),n.options.interactive&&n.$tooltip.on("click."+n.namespace+" touchstart."+n.namespace,function(e){e.stopPropagation()
}))}n.options.timer>0&&(n.timerHide=setTimeout(function(){n.timerHide=null,n.hideTooltip()},n.options.timer+r))}})},setCheckInterval:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.status||0===e("body").find(t.$tooltip).length)("shown"==t.status||"appearing"==t.status)&&t.hideTooltip(),t.cancelCheckInterval();else if(t.options.positionTracker){var i=t.positionInfo(t.$elProxy),n=!1;r(i.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?r(i.position,t.elProxyPosition.position)&&(n=!0):r(i.offset,t.elProxyPosition.offset)&&(n=!0)),n||t.positionTooltip()
}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(i){var n=this;i&&n.callbacks.hide.push(i),n.callbacks.show=[],clearTimeout(n.timerShow),n.timerShow=null,clearTimeout(n.timerHide),n.timerHide=null;var a=function(){e.each(n.callbacks.hide,function(e,t){t.call(n.$el)}),n.callbacks.hide=[]};if("shown"==n.status||"appearing"==n.status){n.status="disappearing";var r=function(){n.status="hidden",n.$tooltip.remove(),n.$tooltip=null,e(t).off("."+n.namespace),e("body").off("."+n.namespace).css("overflow-x",n.bodyOverflowX),n.$elProxy.off("."+n.namespace+"-autoClose"),n.options.functionAfter.call(n.$el,n.$el),a()
};s()?(n.$tooltip.clearQueue().removeClass("tooltipster-"+n.options.animation+"-show").addClass("tooltipster-dying"),n.options.speed>0&&n.$tooltip.delay(n.options.speed),n.$tooltip.queue(r)):n.$tooltip.stop().fadeOut(n.options.speed,r)}else"hidden"==n.status&&a()},setContent:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.content=e},insertContent:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");"string"!=typeof e.content||e.options.contentAsHTML?t.empty().append(e.content):t.text(e.content)},updateTooltip:function(e){var t=this;t.setContent(e),null!==t.content?"hidden"!==t.status&&(t.insertContent(),t.positionTooltip(),t.options.updateAnimation&&(s()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})
},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hideTooltip()},positionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},positionTooltip:function(){function n(){var i=e(t).scrollLeft();0>D-i&&(o=D-i,D=i),D+c-i>s&&(o=D-(s+i-c),D=s+i-c)}function a(i,n){l.offset.top-e(t).scrollTop()-u-S-12<0&&n.indexOf("top")>-1&&(A=i),l.offset.top+l.dimension.height+u+12+S>e(t).scrollTop()+e(t).height()&&n.indexOf("bottom")>-1&&(A=i,q=l.offset.top-u-S-12)}var r=this;
if(0!==e("body").find(r.$tooltip).length){r.$tooltip.css("width",""),r.elProxyPosition=r.positionInfo(r.$elProxy);var o=null,s=e(t).width(),l=r.elProxyPosition,c=r.$tooltip.outerWidth(!1),d=r.$tooltip.innerWidth()+1,u=r.$tooltip.outerHeight(!1);if(r.$elProxy.is("area")){var h=r.$elProxy.attr("shape"),p=r.$elProxy.parent().attr("name"),f=e('img[usemap="#'+p+'"]'),m=f.offset().left,g=f.offset().top,v=void 0!==r.$elProxy.attr("coords")?r.$elProxy.attr("coords").split(","):void 0;if("circle"==h){var b=parseInt(v[0]),y=parseInt(v[1]),C=parseInt(v[2]);l.dimension.height=2*C,l.dimension.width=2*C,l.offset.top=g+y-C,l.offset.left=m+b-C}else if("rect"==h){var b=parseInt(v[0]),y=parseInt(v[1]),I=parseInt(v[2]),E=parseInt(v[3]);
l.dimension.height=E-y,l.dimension.width=I-b,l.offset.top=g+y,l.offset.left=m+b}else if("poly"==h){var w=0,x=0,T=0,_=0,k="even";for(i=0;i<v.length;i++){var R=parseInt(v[i]);"even"==k?(R>T&&(T=R,0===i&&(w=T)),w>R&&(w=R),k="odd"):(R>_&&(_=R,1==i&&(x=_)),x>R&&(x=R),k="even")}l.dimension.height=_-x,l.dimension.width=T-w,l.offset.top=g+x,l.offset.left=m+w}else l.dimension.height=f.outerHeight(!1),l.dimension.width=f.outerWidth(!1),l.offset.top=g,l.offset.left=m}0===r.options.fixedWidth&&r.$tooltip.css({width:Math.round(d)+"px","padding-left":"0px","padding-right":"0px"});var D=0,O=0,q=0,S=parseInt(r.options.offsetY),K=parseInt(r.options.offsetX),A=r.options.position;
if("top"==A){var N=l.offset.left+c-(l.offset.left+l.dimension.width);D=l.offset.left+K-N/2,q=l.offset.top-u-S-12,n(),a("bottom","top")}if("top-left"==A&&(D=l.offset.left+K,q=l.offset.top-u-S-12,n(),a("bottom-left","top-left")),"top-right"==A&&(D=l.offset.left+l.dimension.width+K-c,q=l.offset.top-u-S-12,n(),a("bottom-right","top-right")),"bottom"==A){var N=l.offset.left+c-(l.offset.left+l.dimension.width);D=l.offset.left-N/2+K,q=l.offset.top+l.dimension.height+S+12,n(),a("top","bottom")}if("bottom-left"==A&&(D=l.offset.left+K,q=l.offset.top+l.dimension.height+S+12,n(),a("top-left","bottom-left")),"bottom-right"==A&&(D=l.offset.left+l.dimension.width+K-c,q=l.offset.top+l.dimension.height+S+12,n(),a("top-right","bottom-right")),"left"==A){D=l.offset.left-K-c-12,O=l.offset.left+K+l.dimension.width+12;
var M=l.offset.top+u-(l.offset.top+r.$elProxy.outerHeight(!1));if(q=l.offset.top-M/2-S,0>D&&O+c>s){var P=2*parseFloat(r.$tooltip.css("border-width")),Q=c+D-P;r.$tooltip.css("width",Q+"px"),u=r.$tooltip.outerHeight(!1),D=l.offset.left-K-Q-12-P,M=l.offset.top+u-(l.offset.top+r.$elProxy.outerHeight(!1)),q=l.offset.top-M/2-S}else 0>D&&(D=l.offset.left+K+l.dimension.width+12,o="left")}if("right"==A){D=l.offset.left+K+l.dimension.width+12,O=l.offset.left-K-c-12;var M=l.offset.top+u-(l.offset.top+r.$elProxy.outerHeight(!1));if(q=l.offset.top-M/2-S,D+c>s&&0>O){var P=2*parseFloat(r.$tooltip.css("border-width")),Q=s-D-P;r.$tooltip.css("width",Q+"px"),u=r.$tooltip.outerHeight(!1),M=l.offset.top+u-(l.offset.top+r.$elProxy.outerHeight(!1)),q=l.offset.top-M/2-S
}else D+c>s&&(D=l.offset.left-K-c-12,o="right")}if(r.options.arrow){var L="tooltipster-arrow-"+A;if(r.options.arrowColor.length<1)var $=r.$tooltip.css("background-color");else var $=r.options.arrowColor;if(o?"left"==o?(L="tooltipster-arrow-right",o=""):"right"==o?(L="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="","top"==A||"top-left"==A||"top-right"==A)var F=parseFloat(r.$tooltip.css("border-bottom-width")),B=r.$tooltip.css("border-bottom-color");else if("bottom"==A||"bottom-left"==A||"bottom-right"==A)var F=parseFloat(r.$tooltip.css("border-top-width")),B=r.$tooltip.css("border-top-color");else if("left"==A)var F=parseFloat(r.$tooltip.css("border-right-width")),B=r.$tooltip.css("border-right-color");
else if("right"==A)var F=parseFloat(r.$tooltip.css("border-left-width")),B=r.$tooltip.css("border-left-color");else var F=parseFloat(r.$tooltip.css("border-bottom-width")),B=r.$tooltip.css("border-bottom-color");F>1&&F++;var z="";if(0!==F){var H="",j="border-color: "+B+";";-1!==L.indexOf("bottom")?H="margin-top: -"+Math.round(F)+"px;":-1!==L.indexOf("top")?H="margin-bottom: -"+Math.round(F)+"px;":-1!==L.indexOf("left")?H="margin-right: -"+Math.round(F)+"px;":-1!==L.indexOf("right")&&(H="margin-left: -"+Math.round(F)+"px;"),z='<span class="tooltipster-arrow-border" style="'+H+" "+j+';"></span>'}r.$tooltip.find(".tooltipster-arrow").remove();var W='<div class="'+L+' tooltipster-arrow" style="'+o+'">'+z+'<span style="border-color:'+$+';"></span></div>';
r.$tooltip.append(W)}r.$tooltip.css({top:Math.round(q)+"px",left:Math.round(D)+"px"})}}},e.fn[l]=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var i=!0;switch(t[0]){case"setDefaults":e.extend(c,t[1]);break;default:i=!1}return i?!0:this}return this}if("string"==typeof t[0]){var n="#*$~&";return this.each(function(){var i=e(this).data("tooltipster");if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');switch(t[0]){case"content":case"update":if("undefined"==typeof t[1])return n=i.content,!1;i.updateTooltip(t[1]);break;case"destroy":i.hideTooltip(),i.$el[0]!==i.$elProxy[0]&&i.$elProxy.remove();
var a="string"==typeof i.content?i.content:e("<div></div>").append(i.content).html();i.$el.removeClass("tooltipstered").attr("title",a).removeData("tooltipster").off("."+i.namespace);break;case"disable":i.hideTooltip(),i.enabled=!1;break;case"elementIcon":return n=i.$el[0]!==i.$elProxy[0]?i.$elProxy[0]:void 0,!1;case"elementTooltip":return n=i.$tooltip?i.$tooltip[0]:void 0,!1;case"enable":i.enabled=!0;break;case"hide":i.hideTooltip(t[1]);break;case"option":return n=i.options[t[1]],!1;case"reposition":i.positionTooltip();break;case"show":i.showTooltipNow(t[1]);break;case"status":return n=i.status,!1;default:throw new Error('Unknown method .tooltipster("'+t[0]+'")')
}}),"#*$~&"!==n?n:this}return this.each(function(){e(this).data("tooltipster")||e(this).data("tooltipster",new a(this,t[0]))})};var d=!!("ontouchstart"in t),u=!1;e("body").one("mousemove",function(){u=!0})}(jQuery,window,document),define("tooltipster",function(){}),define("ui/tooltipster",["jquery","lodash","core/dataattrhandler","tooltipster"],function(e,t,i){var n=["dark","default","info","warning","error","success"];return function(a){e("[data-tooltip]",a).each(function(){var a=e(this),r=i.getTarget("tooltip",a),o=t.contains(n,a.data("tooltip-theme"))?a.data("tooltip-theme"):"default";a.tooltipster({theme:"tao-"+o+"-tooltip",content:r,contentAsHTML:r.children().length>0,delay:350,trigger:"hover"})
})}}),define("taoQtiItem/qtiCreator/editor/interactionsToolbar",["jquery","lodash","i18n","taoQtiItem/qtiCreator/editor/customInteractionRegistry","tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton","tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup","tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip","ui/tooltipster"],function(e,t,i,n,a,r,o,s){function l(e){return e.replace(/\W+/g,"-").toLowerCase()}function c(e){return"sidebar-left-section-"+l(e)}function d(t,i){var n=c(i),a=e(r({id:n,label:i}));return t.append(a),a}function u(e,i){t.each(i,function(t){g(e,t)}),v(e),e.data("interaction-toolbar-ready",!0),e.trigger(I.interactiontoolbarready)
}function h(e,t){var i=c(t);return e.find("#"+i)}function p(e){return!!e.data("interaction-toolbar-ready")}function f(e,t){e.find('li[data-qti-class="'+t+'"]:not(.dev)').remove()}function m(e,t){return!!e.find('li[data-qti-class="'+t+'"]').length}function g(t,i){if(m(t,i.qtiClass))throw"the interaction is already in the sidebar";var r=i.tags[0]||"",o=i.tags[1],s=h(t,r),l={qtiClass:i.qtiClass,disabled:!!i.disabled,title:i.description,iconFont:/^icon-/.test(i.icon),icon:i.icon,"short":i.short,dev:y===r&&n.isDev(i.qtiClass.replace("customInteraction.",""))};o&&C[o]&&(l.subGroup=o),s.length||(s=d(t,r)),o&&C[o]&&(l.subGroup=o),s.length||(s=d(t,r));var c=e(a(l));return s.find(".tool-list").append(c),c
}function v(t){t.find("[data-sub-group]").each(function(){var t,i,n,a=e(this),r=a.parents("section"),o=a.data("sub-group");o&&(t=r.find(".sub-group."+o),i=t.find(".tool-list"),t.length||(t=e("<div>",{"class":"panel clearfix sub-group "+o}),i=e("<ul>",{"class":"tool-list plain clearfix"}),t.append(i),r.append(t),n=e("<div>",{"class":"sub-group-cover blocking"}),t.append(n),t.data("cover",n)),i.append(a))}),b()}function b(){var t,n=e("#sidebar-left-section-inline-interactions .inline-interactions"),a=e(o({message:i("Inline interactions need to be inserted into a text block.")}));n.append(a),s(n),a.css({position:"absolute",zIndex:11,top:0,right:10}),n.on("mouseenter",".sub-group-cover",function(){t=setTimeout(function(){a.find("[data-tooltip]").tooltipster("show")
},300)}).on("mouseleave",".sub-group-cover",function(){a.find("[data-tooltip]").tooltipster("hide"),clearTimeout(t)})}var y="Custom Interactions",C={"inline-interactions":"Inline Interactions"},I={interactiontoolbarready:"interactiontoolbarready.qti-widget"};return{create:u,add:g,exists:m,addGroup:d,getGroupId:l,getGroupSectionId:c,getGroup:h,isReady:p,remove:f,getCustomInteractionTag:function(){return y}}}),define("taoQtiItem/controller/creator/main",["jquery","lodash","module","layout/loading-bar","layout/section","taoQtiItem/qtiCreator/helper/panel","taoQtiItem/qtiCreator/helper/itemLoader","taoQtiItem/qtiCreator/helper/creatorRenderer","taoQtiItem/qtiCreator/helper/commonRenderer","taoQtiItem/qtiCreator/helper/qtiElements","taoQtiItem/qtiCreator/editor/editor","taoQtiItem/qtiCreator/editor/interactionsToolbar","taoQtiItem/qtiCreator/editor/customInteractionRegistry"],function(e,t,i,n,a,r,o,s,l,c,d,u,h){n.start();
var p=function(e,i){var n=c.getAvailableAuthoringElements();h.register(i),h.loadAll(function(i){t.each(i,function(e){var t=h.getAuthoringData(e.getTypeIdentifier());if(!t.tags||t.tags[0]!==u.getCustomInteractionTag())throw"invalid authoring data for custom interaction";n[t.qtiClass]=t}),u.create(e,n),r.initSidebarAccordion(e),r.closeSections(e.find("section")),r.openSections(e.find("#sidebar-left-section-common-interactions"),!1),r.toggleInlineInteractionGroup()})},f=function(e,i){require(t.values(e),function(){t.each(arguments,function(e){e.init(i)})})};return{start:function(c){n.start(),c=c||i.config();var u=c.properties,h=e("#item-editor-scope");u.dom={getMenuLeft:function(){return h.find(".item-editor-menu.lft")
},getMenuRight:function(){return h.find(".item-editor-menu.rgt")},getInteractionToolbar:function(){return h.find("#item-editor-interaction-bar")},getItemPanel:function(){return h.find("#item-editor-panel")},getModalContainer:function(){return h.find("#modal-container")}},e("#authoringBack").on("click",function(e){e.preventDefault(),window.History&&window.History.back()}),f(c.uiHooks,u),p(e("#item-editor-interaction-bar"),c.interactions),o.loadItem({uri:u.uri},function(i){var o=e("#item-editor-scroll-inner");l.setOption("baseUrl",u.baseUrl),l.setContext(o),s.setOptions(u),s.get().load(function(){var s,l=e("#item-editor-item-widget-bar");i.setRenderer(this),o.append(i.render()),s=i.postRender(t.clone(u)),d.initGui(s,u),r.initSidebarAccordion(l),r.initFormVisibilityListener(),n.stop(),a.on("hide",function(t){"authoring"===t.id&&(e(window).off(".qti-widget"),e(document).off(".qti-widget").off(".qti-creator"))
})},i.getUsedClasses())})}}}),define("taoQtiItem/qtiCreator/editor/MathEditor",["lodash","jquery","mathJax"],function(e,t,i){var n=function(e){if(e=e||{},this.mathML=e.mathML||"",this.tex=e.tex||"",this.display=e.display||"inline",this.processing=!1,this.$target=e.target||t(),!(e.buffer&&e.buffer instanceof t&&e.buffer.length))throw'missing required element in config "buffer"';this.$buffer=e.buffer};n.prototype.setMathML=function(e){return this.mathML=r(e),this},n.prototype.setTex=function(e){return this.tex=e,this};var a=function(i,n){var a={target:null,callback:null};if(e.each(n,function(i){e.isFunction(i)?a.callback=i:i instanceof t&&(a.target=i)}),!a.target){if(!i.$target)throw"no target defined for rendering";
a.target=i.$target}return a};n.prototype.renderFromMathML=function(){var e=a(this,arguments);if("undefined"!=typeof i){if(this.processing)return;var t=i.Hub.queue,n=s(this.mathML,"block"===this.display);this.$buffer.html(n);var r=this;t.Push(["Typeset",i.Hub,this.$buffer[0]],function(){r.processing=!1,e.target.html(r.$buffer.html()),r.$buffer.empty()}),e.callback&&t.Push(e.callback)}},n.prototype.renderFromTex=function(){var e=a(this,arguments);if("undefined"!=typeof i){var t=this,n=i.Hub.queue;t.$buffer.html("block"===this.display?"\\[\\displaystyle{"+t.tex+"}\\]":"\\(\\displaystyle{"+t.tex+"}\\)"),n.Push(["Typeset",i.Hub,t.$buffer[0]],function(){e.target.html(t.$buffer.html());
var i=o(t.$buffer);t.$buffer.empty(),t.texToMathML(i,function(e){t.setMathML(r(e))})}),e.callback&&n.Push(e.callback)}};var r=function(e){return e=e.replace(/<(\/)?math[^>]*>/g,""),e=e.replace(/^\s*[\r\n]/gm,""),e=e.replace(/\s*[\r\n]$/gm,"")},o=function(e){if(e instanceof t&&e.length){var i=e.find("script");if(i.length&&i[0].MathJax&&i[0].MathJax.elementJax)return i[0].MathJax.elementJax}},s=function(e,t){if(!e.match(/<math[^>]*>/)){var i=t?' display="block"':"";e="<math"+i+">"+e}return e.match(/<\/math[^>]*>/)||(e+="</math>"),e};return n.prototype.texToMathML=function(e,t){var n=this,a="";try{a=e.root.toMathML("")}catch(r){if(!r.restart)throw r;return i.Callback.After(function(){n.texToMathML(e,t)
},r.restart)}i.Callback(t)(a)},n}),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e={timestamp:"E2VD",version:"4.3.4 DEV",revision:"0",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=t[i].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(n){e=n[1];break}}if(-1==e.indexOf(":/")&&"//"!=e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e),!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';
return e}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(i){}}function t(){for(var e;e=i.shift();)e()}var i=[];return function(t){if(i.push(t),"complete"===document.readyState&&setTimeout(e,1),1==i.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);
else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(n){}if(document.documentElement.doScroll&&t){var a=function(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(a,1)}e()};a()}}}}()},t=window.CKEDITOR_GETURL;if(t){var i=e.getUrl;e.getUrl=function(n){return t.call(e,n)||i.call(e,n)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,i=CKEDITOR.event.prototype;for(t in i)void 0==e[t]&&(e[t]=i[t])},CKEDITOR.event.prototype=function(){function e(e){var n=t(this);return n[e]||(n[e]=new i(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})
},i=function(e){this.name=e,this.listeners=[]};return i.prototype={getListenerIndex:function(e){for(var t=0,i=this.listeners;t<i.length;t++)if(i[t].fn==e)return t;return-1}},{define:function(t,i){var n=e.call(this,t);CKEDITOR.tools.extend(n,i,!0)},on:function(t,i,n,a,r){function o(e,r,o,l){return e={name:t,sender:this,editor:e,data:r,listenerData:a,stop:o,cancel:l,removeListener:s},i.call(n,e)===!1?!1:e.data}function s(){c.removeListener(t,i)}var l=e.call(this,t);if(l.getListenerIndex(i)<0){l=l.listeners,n||(n=this),isNaN(r)&&(r=10);var c=this;o.fn=i,o.priority=r;for(var d=l.length-1;d>=0;d--)if(l[d].priority<=r)return l.splice(d+1,0,o),{removeListener:s};l.unshift(o)
}return{removeListener:s}},once:function(){var e=arguments[1];return arguments[1]=function(t){return t.removeListener(),e.apply(this,arguments)},this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,i=function(){e=1},n=0,a=function(){n=1};return function(r,o,s){var l=t(this)[r],r=e,c=n;if(e=n=0,l){var d=l.listeners;if(d.length)for(var u,d=d.slice(0),h=0;h<d.length;h++){if(l.errorProof)try{u=d[h].call(this,s,o,i,a)}catch(p){}else u=d[h].call(this,s,o,i,a);if(u===!1?n=1:"undefined"!=typeof u&&(o=u),e||n)break}}return o=n?!1:"undefined"==typeof o?!0:o,e=r,n=c,o
}}(),fireOnce:function(e,i,n){return i=this.fire(e,i,n),delete t(this)[e],i},removeListener:function(e,i){var n=t(this)[e];if(n){var a=n.getListenerIndex(i);a>=0&&n.listeners.splice(a,1)}},removeAllListeners:function(){var e,i=t(this);for(e in i)delete i[e]},hasListeners:function(e){return(e=t(this)[e])&&e.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)
},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,i={ie:e.indexOf("trident/")>-1,opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,air:e.indexOf(" adobeair/")>-1,mac:e.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:e.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol};i.gecko="Gecko"==navigator.product&&!i.webkit&&!i.opera&&!i.ie,i.webkit&&(e.indexOf("chrome")>-1?i.chrome=!0:i.safari=!0);
var n=0;if(i.ie&&(n=i.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,i.ie9Compat=9==n,i.ie8Compat=8==n,i.ie7Compat=7==n,i.ie6Compat=7>n||i.quirks),i.gecko){var a=e.match(/rv:([\d\.]+)/);a&&(a=a[1].split("."),n=1e4*a[0]+100*(a[1]||0)+1*(a[2]||0))}return i.opera&&(n=parseFloat(t.version())),i.air&&(n=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),i.webkit&&(n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=i.iOS&&n>=534||!i.mobile&&(i.ie&&n>6||i.gecko&&n>=10801||i.opera&&n>=9.5||i.air&&n>=1||i.webkit&&n>=522||!1),i.hidpi=window.devicePixelRatio>=2,i.needsBrFiller=i.gecko||i.webkit||i.ie&&n>10,i.needsNbspFiller=i.ie&&11>n,i.cssClass="cke_browser_"+(i.ie?"ie":i.gecko?"gecko":i.opera?"opera":i.webkit?"webkit":"unknown"),i.quirks&&(i.cssClass=i.cssClass+" cke_browser_quirks"),i.ie&&(i.cssClass=i.cssClass+(" cke_browser_ie"+(i.quirks||i.version<7?"6":i.version)),i.quirks&&(i.cssClass=i.cssClass+" cke_browser_iequirks")),i.gecko&&(10900>n?i.cssClass=i.cssClass+" cke_browser_gecko18":11e3>=n&&(i.cssClass=i.cssClass+" cke_browser_gecko19")),i.air&&(i.cssClass=i.cssClass+" cke_browser_air"),i.iOS&&(i.cssClass=i.cssClass+" cke_browser_ios"),i.hidpi&&(i.cssClass=i.cssClass+" cke_hidpi"),i
}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()
},1e3*t))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var e=[],t=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"";CKEDITOR.on("reset",function(){e=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var i=0;i<e.length;i++)t[i]=CKEDITOR.tools.clone(e[i]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp)return e;t=new e.constructor;
for(i in e)t[i]=CKEDITOR.tools.clone(e[i]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,i,n=arguments.length;"boolean"==typeof(t=arguments[n-1])?n--:"boolean"==typeof(t=arguments[n-2])&&(i=arguments[n-1],n-=2);for(var a=1;n>a;a++){var r,o=arguments[a];for(r in o)(t===!0||void 0==e[r])&&(!i||r in i)&&(e[r]=o[r])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,i={};for(t in e)i[t]=e[t];return i},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;
return!0},cssVendorPrefix:function(e,i,n){return n?t+e+":"+i+";"+e+":"+i:(n={},n[e]=i,n[t+e]=i,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t="undefined"!=typeof e.cssFloat?"cssFloat":"undefined"!=typeof e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){for(var t,e=[].concat(e),i=[],n=0;n<e.length;n++)(t=e[n])&&i.push(/@import|[{}]/.test(t)?"<style>"+t+"</style>":'<link type="text/css" rel=stylesheet href="'+t+'">');return i.join("")},htmlEncode:function(e){return(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")
},htmlEncodeAttr:function(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecodeAttr:function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(e,t){var i=t(e);return i.prototype=e.prototype,i},setTimeout:function(e,t,i,n,a){return a||(a=window),i||(i=a),a.setTimeout(function(){n?e.apply(i,[].concat(n)):e.apply(i)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")
}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var i=0,n=e.length;n>i;i++)if(t(e[i]))return i}else{if(e.indexOf)return e.indexOf(t);for(i=0,n=e.length;n>i;i++)if(e[i]===t)return i}return-1},search:function(e,t){var i=CKEDITOR.tools.indexOf(e,t);return i>=0?e[i]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,i=e.base,n=e.privates||e._,a=e.proto,e=e.statics;if(!t&&(t=function(){i&&this.base.apply(this,arguments)}),n)var r=t,t=function(){var e,t=this._||(this._={});for(e in n){var i=n[e];t[e]="function"==typeof i?CKEDITOR.tools.bind(i,this):i
}r.apply(this,arguments)};return i&&(t.prototype=this.prototypedCopy(i.prototype),t.prototype.constructor=t,t.base=i,t.baseProto=i.prototype,t.prototype.base=function(){this.base=i.prototype.base,i.apply(this,arguments),this.base=arguments.callee}),a&&this.extend(t.prototype,a,!0),e&&this.extend(t,e,!0),t},addFunction:function(t,i){return e.push(function(){return t.apply(i||this,arguments)})-1},removeFunction:function(t){e[t]=null},callFunction:function(t){var i=e[t];return i&&i.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(i){return e=CKEDITOR.tools.trim(i+"")+"px",t.test(e)?e:i||""}}(),convertToPx:function(){var e;
return function(t){return e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),/%$/.test(t)?t:(e.setStyle("width",t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,i=arguments.length;i>t;t++){var n=arguments[t];try{e=n();break}catch(a){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,i=this;window.setTimeout(function(){e.apply(i,t)},0)}},normalizeCssText:function(e,t){var i,n=[],a=CKEDITOR.tools.parseCssText(e,!0,t);
for(i in a)n.push(i+":"+a[i]);return n.sort(),n.length?n.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,i,n){for(e=[t,i,n],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(e,t,i){var n={};return i&&(i=new CKEDITOR.dom.element("span"),i.setAttribute("style",e),e=CKEDITOR.tools.convertRgbToHex(i.getAttribute("style")||"")),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,i,a){t&&(i=i.toLowerCase(),"font-family"==i&&(a=a.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),a=CKEDITOR.tools.trim(a)),n[i]=a
}),n):n},writeCssText:function(e,t){var i,n=[];for(i in e)n.push(i+":"+e[i]);return t&&n.sort(),n.join("; ")},objectCompare:function(e,t,i){var n;if(!e&&!t)return!0;if(!e||!t)return!1;for(n in e)if(e[n]!=t[n])return!1;if(!i)for(n in t)if(e[n]!=t[n])return!1;return!0},objectKeys:function(e){var t,i=[];for(t in e)i.push(t);return i},convertArrayToObject:function(e,t){var i={};1==arguments.length&&(t=!0);for(var n=0,a=e.length;a>n;++n)i[e[n]]=t;return i},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain,!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t){function i(){a=(new Date).getTime(),n=!1,t()
}var n,a=0;return{input:function(){if(!n){var t=(new Date).getTime()-a;e>t?n=setTimeout(i,e-t):i()}},reset:function(){n&&clearTimeout(n),n=a=0}}},enableHtml5Elements:function(e,t){for(var i,n=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],a=n.length;a--;)i=e.createElement(n[a]),t&&e.appendChild(i)}}}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var i=CKEDITOR.tools.clone(e),n=1;n<arguments.length;n++){var a,t=arguments[n];for(a in t)delete i[a]}return i},i={},n={},a={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},r={command:1,link:1,meta:1,noscript:1,script:1,style:1},o={},s={"#":1},l={center:1,dir:1,noframes:1};
return e(i,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(n,a,i,l),t={a:t(i,{a:1,button:1}),abbr:i,address:n,area:o,article:e({style:1},n),aside:e({style:1},n),audio:e({source:1,track:1},n),b:i,base:o,bdi:i,bdo:i,blockquote:n,body:n,br:o,button:t(i,{a:1,button:1}),canvas:i,caption:n,cite:i,code:i,col:o,colgroup:{col:1},command:o,datalist:e({option:1},i),dd:n,del:i,details:e({summary:1},n),dfn:i,div:e({style:1},n),dl:{dt:1,dd:1},dt:n,em:i,embed:o,fieldset:e({legend:1},n),figcaption:n,figure:e({figcaption:1},n),footer:n,form:n,h1:i,h2:i,h3:i,h4:i,h5:i,h6:i,head:e({title:1,base:1},r),header:n,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:o,html:e({head:1,body:1},n,r),i:i,iframe:s,img:o,input:o,ins:i,kbd:i,keygen:o,label:i,legend:i,li:n,link:o,map:n,mark:i,menu:e({li:1},n),meta:o,meter:t(i,{meter:1}),nav:n,noscript:e({link:1,meta:1,style:1},i),object:e({param:1},i),ol:{li:1},optgroup:{option:1},option:s,output:i,p:i,param:o,pre:i,progress:t(i,{progress:1}),q:i,rp:i,rt:i,ruby:e({rp:1,rt:1},i),s:i,samp:i,script:s,section:e({style:1},n),select:{optgroup:1,option:1},small:i,source:o,span:i,strong:i,style:s,sub:i,summary:i,sup:i,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:n,textarea:s,tfoot:{tr:1},th:n,thead:{tr:1},time:t(i,{time:1}),title:s,tr:{th:1,td:1},track:o,u:i,ul:{li:1},"var":i,video:e({source:1,track:1},n),wbr:o,acronym:i,applet:e({param:1},n),basefont:o,big:i,center:n,dialog:o,dir:{li:1},font:i,isindex:o,noframes:n,strike:i,tt:i},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},a,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:i,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t
}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2
},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(i){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(i))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e
},on:function(t){var i=this.getCustomData("_cke_nativeListeners");return i||(i={},this.setCustomData("_cke_nativeListeners",i)),i[t]||(i=i[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,i,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,i)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),i=t&&t[e];i&&(this.$.removeEventListener?this.$.removeEventListener(e,i,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,i),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");
for(e in t){var i=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,i):this.$.removeEventListener&&this.$.removeEventListener(e,i,!1),delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",function(){t={}}),e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},e.setCustomData=function(e,i){var n=this.getUniqueId();return(t[n]||(t[n]={}))[e]=i,this},e.getCustomData=function(e){var i=this.$["data-cke-expando"];return(i=i&&t[i])&&e in i?i[e]:null},e.removeCustomData=function(e){var i,n,a=this.$["data-cke-expando"],a=a&&t[a];return a&&(i=a[e],n=e in a,delete a[e]),n?i:null},e.clearCustomData=function(){this.removeAllListeners();
var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e
},clone:function(e,t){var i=this.$.cloneNode(e),n=function(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),i.nodeType==CKEDITOR.NODE_ELEMENT&&(t||i.removeAttribute("id",!1),e))for(var i=i.childNodes,a=0;a<i.length;a++)n(i[a])};return n(i),new CKEDITOR.dom.node(i)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],i=this.getDocument().$.documentElement,n=this.$;n&&n!=i;){var a=n.parentNode;
a&&t.unshift(this.getIndex.call({$:n},e)),n=a}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){var t,i=this.$,n=-1;if(!this.$.parentNode)return n;do(!e||i==this.$||i.nodeType!=CKEDITOR.NODE_TEXT||!t&&i.nodeValue)&&(n++,t=i.nodeType==CKEDITOR.NODE_TEXT);while(i=i.previousSibling);return n},getNextSourceNode:function(e,t,i){if(i&&!i.call)var n=i,i=function(e){return!e.equals(n)};var a,e=!e&&this.getFirst&&this.getFirst();if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;e=this.getNext()}for(;!e&&(a=(a||this).getParent());){if(i&&i(a,!0)===!1)return null;
e=a.getNext()}return!e||i&&i(e)===!1?null:t&&t!=e.type?e.getNextSourceNode(!1,t,i):e},getPreviousSourceNode:function(e,t,i){if(i&&!i.call)var n=i,i=function(e){return!e.equals(n)};var a,e=!e&&this.getLast&&this.getLast();if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;e=this.getPrevious()}for(;!e&&(a=(a||this).getParent());){if(i&&i(a,!0)===!1)return null;e=a.getPrevious()}return!e||i&&i(e)===!1?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,i):e},getPrevious:function(e){var t,i=this.$;do t=(i=i.previousSibling)&&10!=i.nodeType&&new CKEDITOR.dom.node(i);while(t&&e&&!e(t));return t},getNext:function(e){var t,i=this.$;do t=(i=i.nextSibling)&&new CKEDITOR.dom.node(i);
while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,i=[];do i[e?"push":"unshift"](t);while(t=t.getParent());return i},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do if(t.contains(e))return t;while(t=t.getParent());return null},getPosition:function(e){var t=this.$,i=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(i);if(t==i)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(i))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;
if(i.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||i.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<i.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var t=this.getAddress(),e=e.getAddress(),i=Math.min(t.length,e.length),n=0;i-1>=n;n++)if(t[n]!=e[n]){if(i>n)return t[n]<e[n]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var i,n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&(i=n.nodeName.toLowerCase(),"string"==typeof e?i==e:i in e))return new CKEDITOR.dom.node(n);
try{n=n.parentNode}catch(a){n=null}}return null},hasAscendant:function(e,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==e)return!0;i=i.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,i=t.parentNode;if(i){if(e)for(;e=t.firstChild;)i.insertBefore(t.removeChild(e),t);i.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(i-t.length),this.$.removeChild(this.$.firstChild))
}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),i=e.getLength();if(!t){e.remove();continue}t.length<i&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e&&!e.data("cke-editable");){if("false"==e.getAttribute("contentEditable"))return!0;
if("true"==e.getAttribute("contentEditable"))break;e=e.getParent()}return!e}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})
},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var i=new CKEDITOR.dom.element("style",this);
i.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(i)}return t||i.$.sheet},createElement:function(e,t){var i=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&i.setAttributes(t.attributes),t.styles&&i.setStyles(t.styles)),i},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var i=this.$.documentElement,n=0;i&&n<e.length;n++){var a=e[n];if(t)for(var r=-1,o=0;o<i.childNodes.length;o++){var s=i.childNodes[o];
if((t!==!0||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)&&(r++,r==a)){i=s;break}}else i=i.childNodes[a]}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(e,t){return(!CKEDITOR.env.ie||document.documentMode>8)&&t&&(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)
},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length
},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var i=new CKEDITOR.dom.element("div",t);return i.setHtml(e),i.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,i,n){var a=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");
return e[a]=t,r[i]=1,t.setCustomData(i,n)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,i){var n,a=t.getCustomData("list_marker_names"),r=t.getCustomData("list_marker_id");for(n in a)t.removeCustomData(n);t.removeCustomData("list_marker_names"),i&&(t.removeCustomData("list_marker_id"),delete e[r])},function(){function e(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function t(e,t){return"#"+e.$.id+" "+t.split(/,\s*/).join(", #"+e.$.id+" ")}function i(e){for(var t=0,i=0,a=n[e].length;a>i;i++)t+=parseInt(this.getComputedStyle(n[e][i])||0,10)||0;
return t}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(e){var t=this.$.className;t&&(RegExp("(?:^|\\s)"+e+"(?:\\s|$)","").test(t)||(t+=" "+e)),this.$.className=t||e},removeClass:function(e){var t=this.getAttribute("class");return t&&(e=RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i"),e.test(t)&&((t=t.replace(e,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class"))),this},hasClass:function(e){return RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e
},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){void 0!=this.$.text?this.$.text=this.$.text+e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller||CKEDITOR.env.opera){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e){var t=new CKEDITOR.dom.range(this.getDocument());
t.setStartAfter(this),t.setEndAfter(e),e=t.extractContents(),t.insertNode(this.remove()),e.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)}:function(e){return!!(16&this.$.compareDocumentPosition(e.$))},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");
return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var i=this.getDocument()._getHtml5ShivFrag();return i.appendChild(t),t.innerHTML=e,i.removeChild(t),e}catch(n){for(this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(e){return CKEDITOR.dom.element.prototype.setText=void 0!=this.$.innerText?function(e){return this.$.innerText=e
}:function(e){return this.$.textContent=e},this.setText(e)},getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),0!==e&&0===this.$.tabIndex&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null
}return this.$.getAttribute(e,2)}:e}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var e=this.$.tabIndex;return 0===e&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(e=-1),e}:CKEDITOR.env.webkit?function(){var e=this.$.tabIndex;
return void 0==e&&(e=parseInt(this.getAttribute("tabindex"),10),isNaN(e)&&(e=-1)),e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return(this.getName=function(){return e})()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t
},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:e!==!1?(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!(!e||!e["#"])):!0
},isIdentical:function(e){var t=this.clone(0,1),e=e.clone(0,1);if(t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var i=this.getParent();i.type==CKEDITOR.NODE_ELEMENT&&(i=i.clone(),i.setHtml(t),t=i.getHtml(),i.setHtml(e),e=i.getHtml())}return t==e
},isVisible:function(){var e,t,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(e=this.getWindow(),!e.equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(i=new CKEDITOR.dom.element(t).isVisible())),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,i=e.count();i>t;t++){var n=e.getItem(t);if((n.type!=CKEDITOR.NODE_ELEMENT||!n.data("cke-bookmark"))&&(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEmptyInlineRemoveable()||n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText())))return!1}return!0
},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var i=e[t];switch(i.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(i.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,i={"data-cke-expando":1,_moz_dirty:1};return t>0&&(t>2||!i[e[0].nodeName]||2==t&&!i[e[1].nodeName])},hasAttribute:function(){function e(e){return e=this.$.attributes.getNamedItem(e),!(!e||!e.specified)}return CKEDITOR.env.ie&&CKEDITOR.env.version<8?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e}(),hide:function(){this.setStyle("display","none")
},moveChildren:function(e,t){var i=this.$,e=e.$;if(i!=e){var n;if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))}},mergeSiblings:function(){function e(e,t,i){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var n=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(n.push(t),t=i?t.getNext():t.getPrevious(),!t||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var a=i?e.getLast():e.getFirst();n.length;)n.shift().move(e,!i);t.moveChildren(e,!i),t.remove(),a&&a.type==CKEDITOR.NODE_ELEMENT&&a.mergeSiblings()}}}return function(t){(t===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))
}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(t,i){return"class"==t?this.$.className=i:"style"==t?this.$.style.cssText=i:"tabindex"==t?this.$.tabIndex=i:"checked"==t?this.$.checked=i:"contenteditable"==t?e.call(this,"contentEditable",i):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,i){if("src"==t&&i.match(/^http:\/\//))try{e.apply(this,arguments)}catch(n){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);
return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(t.removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");
else{var i,n=["top","left","right","bottom"];"border"==e&&(i=["color","style","width"]);for(var t=[],a=0;a<n.length;a++)if(i)for(var r=0;r<i.length;r++)t.push([e,n[a],i[r]].join("-"));else t.push([e,n[a]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(e=Math.round(100*e),this.setStyle("filter",e>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");
for(var e,t=this.getElementsByTag("*"),i=0,n=t.count();n>i;i++)e=t.getItem(i),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,i=0,n=this.getDocument(),a=n.getBody(),r="BackCompat"==n.$.compatMode;if(document.documentElement.getBoundingClientRect){var o=this.$.getBoundingClientRect(),s=n.$.documentElement,l=s.clientTop||a.$.clientTop||0,c=s.clientLeft||a.$.clientLeft||0,d=!0;CKEDITOR.env.ie&&(d=n.getDocumentElement().contains(this),n=n.getBody().contains(this),d=r&&n||!r&&d),d&&(t=o.left+(!r&&s.scrollLeft||a.$.scrollLeft),t-=c,i=o.top+(!r&&s.scrollTop||a.$.scrollTop),i-=l)
}else for(a=this,n=null;a&&"body"!=a.getName()&&"html"!=a.getName();){for(t+=a.$.offsetLeft-a.$.scrollLeft,i+=a.$.offsetTop-a.$.scrollTop,a.equals(this)||(t+=a.$.clientLeft||0,i+=a.$.clientTop||0);n&&!n.equals(a);)t-=n.$.scrollLeft,i-=n.$.scrollTop,n=n.getParent();n=a,a=(o=a.$.offsetParent)?new CKEDITOR.dom.element(o):null}return e&&(a=this.getWindow(),n=e.getWindow(),!a.equals(n)&&a.$.frameElement&&(e=new CKEDITOR.dom.element(a.$.frameElement).getDocumentPosition(e),t+=e.x,i+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(t+=this.$.clientLeft?1:0,i+=this.$.clientTop?1:0),{x:t,y:i}},scrollIntoView:function(e){var t=this.getParent();
if(t)do if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var i=t.getWindow();try{var n=i.$.frameElement;n&&(t=new CKEDITOR.dom.element(n))}catch(a){}}while(t=t.getParent())},scrollIntoParent:function(e,t,i){function n(t,i){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,i):(e.$.scrollLeft=e.$.scrollLeft+t,e.$.scrollTop=e.$.scrollTop+i)}function a(e,t){var i={x:0,y:0};if(!e.is(d?"body":"html")){var n=e.$.getBoundingClientRect();i.x=n.left,i.y=n.top}return n=e.getWindow(),n.equals(t)||(n=a(CKEDITOR.dom.element.get(n.$.frameElement),t),i.x=i.x+n.x,i.y=i.y+n.y),i
}function r(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var o,s,l,c;!e&&(e=this.getWindow()),l=e.getDocument();var d="BackCompat"==l.$.compatMode;e instanceof CKEDITOR.dom.window&&(e=d?l.getBody():l.getDocumentElement()),l=e.getWindow(),s=a(this,l);var u=a(e,l),h=this.$.offsetHeight;o=this.$.offsetWidth;var p=e.$.clientHeight,f=e.$.clientWidth;l=s.x-r(this,"left")-u.x||0,c=s.y-r(this,"top")-u.y||0,o=s.x+o+r(this,"right")-(u.x+f)||0,s=s.y+h+r(this,"bottom")-(u.y+p)||0,(0>c||s>0)&&n(0,t===!0?c:t===!1?s:0>c?c:s),i&&(0>l||o>0)&&n(0>l?l:o,0)},setState:function(e,t,i){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),i&&this.setAttribute("aria-pressed",!0),i&&this.removeAttribute("aria-disabled");
break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),i&&this.setAttribute("aria-disabled",!0),i&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),i&&this.removeAttribute("aria-pressed"),i&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){for(var i=this.$.attributes,t=t||{},n=0;n<i.length;n++){var a,r=i[n],o=r.nodeName.toLowerCase();o in t||("checked"==o&&(a=this.getAttribute(o))?e.setAttribute(o,a):(r.specified||CKEDITOR.env.ie&&r.nodeValue&&"value"==o)&&(a=this.getAttribute(o),null===a&&(a=r.nodeValue),e.setAttribute(o,a)))
}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument(),e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e),this.moveChildren(e),this.getParent()&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var i=e.childNodes;return t>=0&&t<i.length?i[t]:void 0}return function(t){var i=this.$;if(t.slice)for(;t.length>0&&i;)i=e(i,t.shift());else i=e(i,t);return i?new CKEDITOR.dom.node(i):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(e){e.data.getTarget().hasClass("cke_enable_context_menu")||e.data.preventDefault()
})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(t===!1?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(){var e,t,i=CKEDITOR.instances;for(e in i)if(t=i[e],t.element.equals(this)&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return t;return null},find:function(i){var n=e(this),i=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t(this,i)));return n(),i},findOne:function(i){var n=e(this),i=this.$.querySelector(t(this,i));
return n(),i?new CKEDITOR.dom.element(i):null},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(n!==!1)for(var i=this.getChildren(),a=0;a<i.count();a++)n=i.getItem(a),n.type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):(!t||n.type==t)&&e(n)}});var n={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=i.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;
return t&&(n-=i.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var i=this.range;
if(this._.end)return null;if(!this._.start){if(this._.start=1,i.collapsed)return this.end(),null;i.optimize()}var n,a=i.startContainer;n=i.endContainer;var r,o=i.startOffset,s=i.endOffset,l=this.guard,c=this.type,d=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var u=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),h=n.type==CKEDITOR.NODE_ELEMENT?n.getChild(s):n.getNext();this._.guardLTR=function(e,t){return!(t&&u.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))}}if(e&&!this._.guardRTL){var p=a.type==CKEDITOR.NODE_ELEMENT?a:a.getParent(),f=a.type==CKEDITOR.NODE_ELEMENT?o?a.getChild(o-1):null:a.getPrevious();this._.guardRTL=function(e,t){return!(t&&p.equals(e)||f&&e.equals(f)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(i.root))
}}var m=e?this._.guardRTL:this._.guardLTR;for(r=l?function(e,t){return m(e,t)===!1?!1:l(e,t)}:m,this.current?n=this.current[d](!1,c,r):(e?n.type==CKEDITOR.NODE_ELEMENT&&(n=s>0?n.getChild(s-1):r(n,!0)===!1?null:n.getPreviousSourceNode(!0,c,r)):(n=a,n.type!=CKEDITOR.NODE_ELEMENT||(n=n.getChild(o))||(n=r(a,!0)===!1?null:a.getNextSourceNode(!0,c,r))),n&&r(n)===!1&&(n=null));n&&!this._.end;){if(this.current=n,this.evaluator&&this.evaluator(n)===!1){if(t&&this.evaluator)return!1}else if(!t)return n;n=n[d](!1,c,r)}return this.end(),this.current=null}function t(t){for(var i,n=null;i=e.call(this,t);)n=i;return n}function i(e){if(c(e))return!1;if(e.type==CKEDITOR.NODE_TEXT)return!0;
if(e.type==CKEDITOR.NODE_ELEMENT){if(e.is(CKEDITOR.dtd.$inline)||"false"==e.getAttribute("contenteditable"))return!0;var t;if((t=!CKEDITOR.env.needsBrFiller)&&(t=e.is(d)))e:{t=0;for(var i=e.getChildCount();i>t;++t)if(!c(e.getChild(t))){t=!1;break e}t=!0}if(t)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return e.call(this,0,1)!==!1},checkBackward:function(){return e.call(this,1,1)!==!1},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)
},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},a={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in a||!n[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e)):!0},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})
},CKEDITOR.dom.walker.bookmark=function(e,t){function i(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(n){var a,r;return a=n&&n.type!=CKEDITOR.NODE_ELEMENT&&(r=n.getParent())&&i(r),a=e?a:a||i(n),!!(t^a)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var i;return t&&t.type==CKEDITOR.NODE_TEXT&&(i=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&"â"==t.getText()),!!(e^i)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces();return function(i){return t(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=!i.$.offsetHeight),!!(e^i)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(i){return!!(t^i.type==e)
}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!o(e)&&!s(e)}return function(i){var n=CKEDITOR.env.needsBrFiller?i.is&&i.is("br"):i.getText&&r.test(i.getText());return n&&(n=i.getParent(),i=i.getNext(t),n=n.isBlockBoundary()&&(!i||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())),!!(e^n)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=o(t)||s(t)||l(t),!!(e^t)
}};var c=CKEDITOR.dom.walker.ignored(),d=function(e){var t,i={};for(t in e)CKEDITOR.dtd[t]["#"]&&(i[t]=1);return i}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(e){return function(t){return!!(e^i(t))}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do e=e.getPreviousSourceNode();while(s(e)||o(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty));return e&&(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&r.test(e.getText()))?e:!1}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;
this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!0),n=CKEDITOR.dom.walker.bogus();return function(a){return i(a)||t(a)?!0:n(a)&&!e?e=!0:a.type==CKEDITOR.NODE_TEXT&&(a.hasAscendant("pre")||CKEDITOR.tools.trim(a.getText()).length)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(r)?!1:!0}}function t(e){var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(1);return function(n){return i(n)||t(n)?!0:!e&&o(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.$removeEmpty)}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&c(e)&&(t=e),l(e)&&!(o(e)&&e.equals(t))
})}}var n=function(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset},a=function(e,t,i,n){e.optimizeBookmark();var a,r,o=e.startContainer,s=e.endContainer,l=e.startOffset,c=e.endOffset;s.type==CKEDITOR.NODE_TEXT?s=s.split(c):s.getChildCount()>0&&(c>=s.getChildCount()?(s=s.append(e.document.createText("")),r=!0):s=s.getChild(c)),o.type==CKEDITOR.NODE_TEXT?(o.split(l),o.equals(s)&&(s=o.getNext())):l?l>=o.getChildCount()?(o=o.append(e.document.createText("")),a=!0):o=o.getChild(l).getPrevious():(o=o.append(e.document.createText(""),1),a=!0);var d,u,h,l=o.getParents(),c=s.getParents();for(d=0;d<l.length&&(u=l[d],h=c[d],u.equals(h));d++);for(var p,f,m,g=i,v=d;v<l.length;v++){for(p=l[v],g&&!p.equals(o)&&(f=g.append(p.clone())),p=p.getNext();p&&(!p.equals(c[v])&&!p.equals(s));)m=p.getNext(),2==t?g.append(p.clone(!0)):(p.remove(),1==t&&g.append(p)),p=m;
g&&(g=f)}for(g=i,i=d;i<c.length;i++){if(p=c[i],t>0&&!p.equals(s)&&(f=g.append(p.clone())),!l[i]||p.$.parentNode!=l[i].$.parentNode)for(p=p.getPrevious();p&&(!p.equals(l[i])&&!p.equals(o));)m=p.getPrevious(),2==t?g.$.insertBefore(p.$.cloneNode(!0),g.$.firstChild):(p.remove(),1==t&&g.$.insertBefore(p.$,g.$.firstChild)),p=m;g&&(g=f)}2==t?(u=e.startContainer,u.type==CKEDITOR.NODE_TEXT&&(u.$.data=u.$.data+u.$.nextSibling.data,u.$.parentNode.removeChild(u.$.nextSibling)),e=e.endContainer,e.type==CKEDITOR.NODE_TEXT&&e.$.nextSibling&&(e.$.data=e.$.data+e.$.nextSibling.data,e.$.parentNode.removeChild(e.$.nextSibling))):(u&&h&&(o.$.parentNode!=u.$.parentNode||s.$.parentNode!=h.$.parentNode)&&(t=h.getIndex(),a&&h.$.parentNode==o.$.parentNode&&t--,n&&u.type==CKEDITOR.NODE_ELEMENT?(n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),n.insertAfter(u),u.mergeSiblings(!1),e.moveToBookmark({startNode:n})):e.setStart(h.getParent(),t)),e.collapse(!0)),a&&o.remove(),r&&s.$.parentNode&&s.remove()
},r={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},o=CKEDITOR.dom.walker.bogus(),s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),c=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e.startContainer=this.startContainer,e.startOffset=this.startOffset,e.endContainer=this.endContainer,e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0
},cloneContents:function(){var e=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||a(this,2,e),e},deleteContents:function(e){this.collapsed||a(this,0,null,e)},extractContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||a(this,1,t,e),t},createBookmark:function(e){var t,i,n,a,r=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(n="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",n+(r?"C":"S"))),r||(i=t.clone(),i.setHtml("&nbsp;"),e&&i.setAttribute("id",n+"E"),a=this.clone(),a.collapse(),a.insertNode(i)),a=this.clone(),a.collapse(!0),a.insertNode(t),i?(this.setStartAfter(t),this.setEndBefore(i)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?n+(r?"C":"S"):t,endNode:e?n+"E":i,serializable:e,collapsed:r}
},createBookmark2:function(){function e(e){var t,i=e.container,n=e.offset;t=i;var a=n;if(t=t.type!=CKEDITOR.NODE_ELEMENT||0===a||a==t.getChildCount()?0:t.getChild(a-1).type==CKEDITOR.NODE_TEXT&&t.getChild(a).type==CKEDITOR.NODE_TEXT,t&&(i=i.getChild(n-1),n=i.getLength()),i.type==CKEDITOR.NODE_ELEMENT&&n>1&&(n=i.getChild(n-1).getIndex(!0)+1),i.type==CKEDITOR.NODE_TEXT){for(t=i,a=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)a+=t.getLength();n+=a}e.container=i,e.offset=n}return function(t){var i=this.collapsed,n={container:this.startContainer,offset:this.startOffset},a={container:this.endContainer,offset:this.endOffset};return t&&(e(n),i||e(a)),{start:n.container.getAddress(t),end:i?null:a.container.getAddress(t),startOffset:n.offset,endOffset:a.offset,normalized:t,collapsed:i,is2:!0}
}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),i=e.startOffset,n=e.end&&this.document.getByAddress(e.end,e.normalized),e=e.endOffset;this.setStart(t,i),n?this.setEnd(n,e):this.collapse(!0)}else t=(i=e.serializable)?this.document.getById(e.startNode):e.startNode,e=i?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,i=this.endContainer,n=this.startOffset,a=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if(e=t.getChildCount(),e>n)t=t.getChild(n);else if(1>e)t=t.getPreviousSourceNode();
else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t),t=t.getNextSourceNode()||t}if(i.type==CKEDITOR.NODE_ELEMENT)if(e=i.getChildCount(),e>a)i=i.getChild(a).getPreviousSourceNode(!0);else if(1>e)i=i.getPreviousSourceNode();else{for(i=i.$;i.lastChild;)i=i.lastChild;i=new CKEDITOR.dom.node(i)}return t.getPosition(i)&CKEDITOR.POSITION_FOLLOWING&&(t=i),{startNode:t,endNode:i}},getCommonAncestor:function(e,t){var i=this.startContainer,n=this.endContainer,i=i.equals(n)?e&&i.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?i.getChild(this.startOffset):i:i.getCommonAncestor(n);return t&&!i.is?i.getParent():i},optimize:function(){var e=this.startContainer,t=this.startOffset;
e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var i=this.startContainer,n=this.startOffset,a=this.collapsed;if((!e||a)&&i&&i.type==CKEDITOR.NODE_TEXT){if(n)if(n>=i.getLength())n=i.getIndex()+1,i=i.getParent();
else{var r=i.split(n),n=i.getIndex()+1,i=i.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):i.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else n=i.getIndex(),i=i.getParent();if(this.setStart(i,n),a)return void this.collapse(!0)}i=this.endContainer,n=this.endOffset,t||a||!i||i.type!=CKEDITOR.NODE_TEXT||(n?(n>=i.getLength()||i.split(n),n=i.getIndex()+1):n=i.getIndex(),i=i.getParent(),this.setEnd(i,n))},enlarge:function(e,t){function i(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var n=RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var a=1;
case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var r,o,s,l,c,d,u,h=this.getCommonAncestor(),p=this.root,f=!1;d=this.startContainer;var m=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(m&&(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d,f=!!d),d&&!(l=d.getPrevious())&&(s=d.getParent())):(m&&(l=d.getChild(m-1)||d.getLast()),l||(s=d)),s=i(s);s||l;){if(s&&!l){if(!c&&s.equals(h)&&(c=!0),a?s.isBlockBoundary():!p.contains(s))break;f&&"inline"==s.getComputedStyle("display")||(f=!1,c?r=s:this.setStartBefore(s)),l=s.getPrevious()}for(;l;)if(d=!1,l.type==CKEDITOR.NODE_COMMENT)l=l.getPrevious();else{if(l.type==CKEDITOR.NODE_TEXT)u=l.getText(),n.test(u)&&(l=null),d=/[\s\ufeff]$/.test(u);
else if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(f&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),n.test(u))l=null;else for(var g,m=l.$.getElementsByTagName("*"),v=0;g=m[v++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(d=!!u.length)}else l=null;if(d&&(f?c?r=s:s&&this.setStartBefore(s):f=!0),l){if(d=l.getPrevious(),!s&&!d){s=l,l=null;break}l=d}else s=null}s&&(s=i(s.getParent()))}d=this.endContainer,m=this.endOffset,s=l=null,c=f=!1;var b=function(e,t){var i=new CKEDITOR.dom.range(p);i.setStart(e,t),i.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);var a,i=new CKEDITOR.dom.walker(i);for(i.guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())
};a=i.next();){if(a.type!=CKEDITOR.NODE_TEXT)return!1;if(u=a!=e?a.getText():a.substring(t),n.test(u))return!1}return!0};for(d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?f=!0:(f=!d.getLength(),m==d.getLength()?(l=d.getNext())||(s=d.getParent()):b(d,m)&&(s=d.getParent())):(l=d.getChild(m))||(s=d);s||l;){if(s&&!l){if(!c&&s.equals(h)&&(c=!0),a?s.isBlockBoundary():!p.contains(s))break;f&&"inline"==s.getComputedStyle("display")||(f=!1,c?o=s:s&&this.setEndAfter(s)),l=s.getNext()}for(;l;){if(d=!1,l.type==CKEDITOR.NODE_TEXT)u=l.getText(),b(l,0)||(l=null),d=/^[\s\ufeff]/.test(u);else if(l.type==CKEDITOR.NODE_ELEMENT){if((l.$.offsetWidth>0||t&&l.is("br"))&&!l.data("cke-bookmark"))if(f&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),n.test(u))l=null;
else for(m=l.$.getElementsByTagName("*"),v=0;g=m[v++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(d=!!u.length)}else l=null}else d=1;if(d&&f&&(c?o=s:this.setEndAfter(s)),l){if(d=l.getNext(),!s&&!d){s=l,l=null;break}l=d}else s=null}s&&(s=i(s.getParent()))}r&&o&&(h=r.contains(o)?o:r,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:s=new CKEDITOR.dom.range(this.root),p=this.root,s.setStartAt(p,CKEDITOR.POSITION_AFTER_START),s.setEnd(this.startContainer,this.startOffset),s=new CKEDITOR.dom.walker(s);var y,C,I=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),E=null,w=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(E){if(E.equals(e))return void(E=null)
}else E=e;else if(E)return;var t=I(e);return t||(y=e),t},a=function(e){var t=w(e);return!t&&e.is&&e.is("br")&&(C=e),t};if(s.guard=w,s=s.lastBackward(),y=y||p,this.setStartAt(y,!y.is("br")&&(!s&&this.checkStartOfBlock()||s&&y.contains(s))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){s=this.clone(),s=new CKEDITOR.dom.walker(s);var x=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark();if(s.evaluator=function(e){return!x(e)&&!T(e)},(s=s.previous())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br"))break}s=this.clone(),s.collapse(),s.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),s=new CKEDITOR.dom.walker(s),s.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?a:w,y=null,s=s.lastForward(),y=y||p,this.setEndAt(y,!s&&this.checkEndOfBlock()||s&&y.contains(s)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),C&&this.setEndAfter(C)
}},shrink:function(e,t,i){if(!this.collapsed){var e=e||CKEDITOR.SHRINK_TEXT,n=this.clone(),a=this.startContainer,r=this.endContainer,o=this.startOffset,s=this.endOffset,l=1,c=1;a&&a.type==CKEDITOR.NODE_TEXT&&(o?o>=a.getLength()?n.setStartAfter(a):(n.setStartBefore(a),l=0):n.setStartBefore(a)),r&&r.type==CKEDITOR.NODE_TEXT&&(s?s>=r.getLength()?n.setEndAfter(r):(n.setEndAfter(r),c=0):n.setEndBefore(r));var n=new CKEDITOR.dom.walker(n),d=CKEDITOR.dom.walker.bookmark();n.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var u;return n.guard=function(t,n){return d(t)?!0:e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(u)||i===!1&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?!1:(!n&&t.type==CKEDITOR.NODE_ELEMENT&&(u=t),!0)
},l&&(a=n[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(a,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(n.reset(),(n=n[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(n,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!l&&!c)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,i=t.getChild(this.startOffset);i?e.insertBefore(i):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)
},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex(),e=e.getParent()),this.startContainer=e,this.startOffset=t,this.endContainer||(this.endContainer=e,this.endOffset=t),n(this)},setEnd:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex()+1,e=e.getParent()),this.endContainer=e,this.endOffset=t,this.startContainer||(this.startContainer=e,this.startOffset=t),n(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())
},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}n(this)},setEndAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());
break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}n(this)},fixBlock:function(e,t){var i=this.createBookmark(),n=this.document.createElement(t);return this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(n),n.trim(),n.appendBogus(),this.insertNode(n),this.moveToBookmark(i),n},splitBlock:function(e){var t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),n=t.block,a=i.block,r=null;return t.blockLimit.equals(i.blockLimit)?("br"!=e&&(n||(n=this.fixBlock(!0,e),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),a||(a=this.fixBlock(!1,e))),e=n&&this.checkStartOfBlock(),t=a&&this.checkEndOfBlock(),this.deleteContents(),n&&n.equals(a)&&(t?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),a=null):e?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n=null):(a=this.splitElement(n),n.is("ul","ol")||n.appendBogus())),{previousBlock:n,nextBlock:a,wasStartOfBlock:e,wasEndOfBlock:t,elementPath:r}):null
},splitElement:function(e){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var t=this.extractContents(),i=e.clone(!1);return t.appendTo(i),i.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function e(e){return function(n){return t(n)||i(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isEmptyInlineRemoveable()||e.is("table")&&n.is("caption")?!1:!0}}var t=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var i,n=this.createBookmark(),a=this[t?"endPath":"startPath"](),r=a.block||a.blockLimit;r&&!r.equals(a.root)&&!r.getFirst(e(r));)i=r.getParent(),this[t?"setEndAt":"setStartAt"](r,CKEDITOR.POSITION_AFTER_END),r.remove(1),r=i;
this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,i){var n=i==CKEDITOR.START,a=this.clone();return a.collapse(n),a[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(a),a.evaluator=t(n),a[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,i=this.startOffset;return CKEDITOR.env.ie&&i&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,i)),s.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=this.clone(),i.collapse(!0),i.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),t=new CKEDITOR.dom.walker(i),t.evaluator=e(),t.checkBackward()
},checkEndOfBlock:function(){var t=this.endContainer,i=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(i)),s.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=this.clone(),i.collapse(!1),i.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),t=new CKEDITOR.dom.walker(i),t.evaluator=e(),t.checkForward()},getPreviousNode:function(e,t,i){var n=this.clone();return n.collapse(1),n.setStartAt(i||this.root,CKEDITOR.POSITION_AFTER_START),i=new CKEDITOR.dom.walker(n),i.evaluator=e,i.guard=t,i.previous()},getNextNode:function(e,t,i){var n=this.clone();return n.collapse(),n.setEndAt(i||this.root,CKEDITOR.POSITION_BEFORE_END),i=new CKEDITOR.dom.walker(n),i.evaluator=e,i.guard=t,i.next()
},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,i=this.endContainer;return!(e(t,i)&&e(i,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var i=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&s.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),i=1;
break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),i=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var n=e,a=i,r=void 0;n.type==CKEDITOR.NODE_ELEMENT&&n.isEditable(!1)&&(r=n[t?"getLast":"getFirst"](c)),!a&&!r&&(r=n[t?"getPrevious":"getNext"](c)),e=r}return!!i},moveToClosestEditablePosition:function(e,t){var i,n=new CKEDITOR.dom.range(this.root),a=0,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];
return n.moveToPosition(e,r[t?0:1]),e.is(CKEDITOR.dtd.$block)?(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(a=1,i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):n.moveToPosition(i,r[t?1:0])):a=1,a&&this.moveToRange(n),!!a},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();if(e.optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;
var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return i(e)&&t(e)};var n=e.next();return e.reset(),n&&n.equals(e.previous())?n:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),scrollIntoView:function(){var e,t,i,n=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),a=this.clone();
a.optimize(),(i=a.startContainer.type==CKEDITOR.NODE_TEXT)?(t=a.startContainer.getText(),e=a.startContainer.split(a.startOffset),n.insertAfter(a.startContainer)):a.insertNode(n),n.scrollIntoView(),i&&(a.startContainer.setText(t),e.remove()),n.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){arguments.length<1||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))
}function t(e,t,i){for(e=e.getNextSourceNode(t,null,i);!r(e);)e=e.getNextSourceNode(t,null,i);return e}function i(e){var t=[];return e.forEach(function(e){return"true"==e.getAttribute("contenteditable")?(t.push(e),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),t}function n(e,t,a,r){e:{void 0==r&&(r=i(a));for(var o;o=r.shift();)if(o.getDtd().p){r={element:o,remaining:r};break e}r=null}return r?(o=CKEDITOR.filter.instances[r.element.data("cke-filter")])&&!o.check(t)?n(e,t,a,r.remaining):(t=new CKEDITOR.dom.range(r.element),t.selectNodeContents(r.element),t=t.createIterator(),t.enlargeBr=e.enlargeBr,t.enforceRealBlocks=e.enforceRealBlocks,t.activeFilter=t.filter=o,e._.nestedEditable={element:r.element,container:a,remaining:r.remaining,iterator:t},1):0
}var a=/^[\r\n\t ]+$/,r=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0),s=function(e){return r(e)&&o(e)};e.prototype={getNextParagraph:function(e){var i,o,l,c,d,e=e||"p";if(this._.nestedEditable){if(i=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,i;if(this.activeFilter=this.filter,n(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var u=this.range.clone();
if(u.shrink(CKEDITOR.SHRINK_ELEMENT,!0),o=u.endContainer.hasAscendant("pre",!0)||u.startContainer.hasAscendant("pre",!0),u.enlarge(this.forceBrBreak&&!o||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),!u.collapsed){o=new CKEDITOR.dom.walker(u.clone());var h=CKEDITOR.dom.walker.bookmark(!0,!0);o.evaluator=h,this._.nextNode=o.next(),o=new CKEDITOR.dom.walker(u.clone()),o.evaluator=h,o=o.previous(),this._.lastNode=o.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(h=this.range.clone(),h.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&u.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=u.document.createText(""),this._.lastNode.insertAfter(o)),u=null
}this._.started=1,o=u}for(h=this._.nextNode,u=this._.lastNode,this._.nextNode=null;h;){var p=0,f=h.hasAscendant("pre"),m=h.type!=CKEDITOR.NODE_ELEMENT,g=0;if(m)h.type==CKEDITOR.NODE_TEXT&&a.test(h.getText())&&(m=0);else{var v=h.getName();if(CKEDITOR.dtd.$block[v]&&"false"==h.getAttribute("contenteditable")){i=h,n(this,e,i);break}if(h.isBlockBoundary(this.forceBrBreak&&!f&&{br:1})){if("br"==v)m=1;else if(!o&&!h.getChildCount()&&"hr"!=v){i=h,l=h.equals(u);break}o&&(o.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=v&&(this._.nextNode=h)),p=1}else{if(h.getFirst()){o||(o=this.range.clone(),o.setStartAt(h,CKEDITOR.POSITION_BEFORE_START)),h=h.getFirst();continue}m=1
}}if(m&&!o&&(o=this.range.clone(),o.setStartAt(h,CKEDITOR.POSITION_BEFORE_START)),l=(!p||m)&&h.equals(u),o&&!p)for(;!h.getNext(s)&&!l;){if(v=h.getParent(),v.isBlockBoundary(this.forceBrBreak&&!f&&{br:1})){p=1,m=0,l||v.equals(u),o.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);break}h=v,m=1,l=h.equals(u),g=1}if(m&&o.setEndAt(h,CKEDITOR.POSITION_AFTER_END),h=t(h,g,u),(l=!h)||p&&o)break}if(!i){if(!o)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;i=new CKEDITOR.dom.elementPath(o.startContainer,o.root),h=i.blockLimit,p={div:1,th:1,td:1},i=i.block,!i&&h&&!this.enforceRealBlocks&&p[h.getName()]&&o.checkStartOfBlock()&&o.checkEndOfBlock()&&!h.equals(o.root)?i=h:!i||this.enforceRealBlocks&&"li"==i.getName()?(i=this.range.document.createElement(e),o.extractContents().appendTo(i),i.trim(),o.insertNode(i),c=d=!0):"li"!=i.getName()?o.checkStartOfBlock()&&o.checkEndOfBlock()||(i=i.clone(!1),o.extractContents().appendTo(i),i.trim(),d=o.splitBlock(),c=!d.wasStartOfBlock,d=!d.wasEndOfBlock,o.insertNode(i)):l||(this._.nextNode=i.equals(u)?null:t(o.getBoundaryNodes().endNode,1,u))
}return c&&(c=i.getPrevious())&&c.type==CKEDITOR.NODE_ELEMENT&&("br"==c.getName()?c.remove():c.getLast()&&"br"==c.getLast().$.nodeName.toLowerCase()&&c.getLast().remove()),d&&(c=i.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&"br"==c.getName()&&(!CKEDITOR.env.needsBrFiller||c.getPrevious(r)||c.getNext(r))&&c.remove(),this._.nextNode||(this._.nextNode=l||i.equals(u)||!u?null:t(i,1,u)),i}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){this.uiItems=[],this.exec=function(i){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&e.focus(),this.fire("exec")===!1?!0:t.exec.call(this,e,i)!==!1):!1
},this.refresh=function(e,i){return!this.readOnly&&e.readOnly?!0:this.context&&!i.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),this.fire("refresh",{editor:e,path:i})===!1?!0:t.refresh&&t.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var i;this.checkAllowed=function(t){return t||"boolean"!=typeof i?i=e.activeFilter.checkFeature(this):i},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)
},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85,CKEDITOR.CTRL+89,CKEDITOR.CTRL+90,CKEDITOR.CTRL+CKEDITOR.SHIFT+90]},function(){function e(e,i,n,r,o){var s=i.name;
if((r||"function"!=typeof e.elements||e.elements(s))&&(!e.match||e.match(i))){if(r=!o){e:if(e.nothingRequired)r=!0;else{if(o=e.requiredClasses)for(s=i.classes,r=0;r<o.length;++r)if(-1==CKEDITOR.tools.indexOf(s,o[r])){r=!1;break e}r=a(i.styles,e.requiredStyles)&&a(i.attributes,e.requiredAttributes)}r=!r}if(!r&&(e.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=t(e.attributes,i.attributes,n.validAttributes)),n.allStyles||(n.allStyles=t(e.styles,i.styles,n.validStyles)),!n.allClasses)){if(e=e.classes,i=i.classes,r=n.validClasses,e)if(e===!0)i=!0;else{for(var l,o=0,s=i.length;s>o;++o)l=i[o],r[l]||(r[l]=e(l));i=!1}else i=!1;n.allClasses=i}}}function t(e,t,i){if(!e)return!1;
if(e===!0)return!0;for(var n in t)i[n]||(i[n]=e(n,t[n]));return!1}function i(e,t){if(!e)return!1;if(e===!0)return e;if("string"==typeof e)return e=E(e),"*"==e?!0:CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return e.length?CKEDITOR.tools.convertArrayToObject(e):!1;var i,n={},a=0;for(i in e)n[i]=e[i],a++;return a?n:!1}function n(t){if(t._.filterFunction)return t._.filterFunction;var i=/^cke:(object|embed|param)$/,n=/^(object|embed|param)$/;return t._.filterFunction=function(a,r,o,s,u,h,p){var f,g=a.name,v=!1;if(u&&(a.name=g=g.replace(i,"$1")),o=o&&o[g]){for(l(a),g=0;g<o.length;++g)m(t,a,o[g]);c(a)}if(r){var g=a.name,o=r.elements[g],b=r.generic,r={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};
if(!o&&!b)return s.push(a),!0;if(l(a),o)for(g=0,f=o.length;f>g;++g)e(o[g],a,r,!0,h);if(b)for(g=0,f=b.length;f>g;++g)e(b[g],a,r,!1,h);if(!r.valid)return s.push(a),!0;h=r.validAttributes,g=r.validStyles,o=r.validClasses,f=a.attributes;var y,C,b=a.styles,I=f["class"],E=f.style,w=[],x=[],T=/^data-cke-/,_=!1;if(delete f.style,delete f["class"],!r.allAttributes)for(y in f)h[y]||(T.test(y)?y==(C=y.replace(/^data-cke-saved-/,""))||h[C]||(delete f[y],_=!0):(delete f[y],_=!0));if(r.allStyles)E&&(f.style=E);else{for(y in b)g[y]?w.push(y+":"+b[y]):_=!0;w.length&&(f.style=w.sort().join("; "))}if(r.allClasses)I&&(f["class"]=I);else{for(y in o)o[y]&&x.push(y);x.length&&(f["class"]=x.sort().join(" ")),I&&x.length<I.split(/\s+/).length&&(_=!0)
}if(_&&(v=!0),!p&&!d(a))return s.push(a),!0}return u&&(a.name=a.name.replace(n,"cke:$1")),v}}function a(e,t){if(!t)return!0;for(var i=0;i<t.length;++i)if(!(t[i]in e))return!1;return!0}function r(e){if(!e)return{};for(var e=e.split(/\s*,\s*/).sort(),t={};e.length;)t[e.shift()]=w;return t}function o(e){for(var t,i,n,a,r={},o=1,e=E(e);t=e.match(k);)(i=t[2])?(n=s(i,"styles"),a=s(i,"attrs"),i=s(i,"classes")):n=a=i=null,r["$"+o++]={elements:t[1],classes:i,styles:n,attributes:a},e=e.slice(t[0].length);return r}function s(e,t){var i=e.match(R[t]);return i?E(i[1]):null}function l(e){e.styles||(e.styles=CKEDITOR.tools.parseCssText(e.attributes.style||"",1)),e.classes||(e.classes=e.attributes["class"]?e.attributes["class"].split(/\s+/):[])
}function c(e){var t,i=e.attributes;delete i.style,delete i["class"],(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(i.style=t),e.classes.length&&(i["class"]=e.classes.sort().join(" "))}function d(e){switch(e.name){case"a":if(!e.children.length&&!e.attributes.name)return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function u(e){return e?e===!0?!0:function(t){return t in e}:!1}function h(){return new CKEDITOR.htmlParser.element("br")}function p(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||C.$block[e.name])}function f(e,t,i){var n=e.name;if(C.$empty[n]||!e.children.length)"hr"==n&&"br"==t?e.replaceWith(h()):(e.parent&&i.push({check:"it",el:e.parent}),e.remove());
else if(C.$block[n]||"tr"==n)if("br"==t)e.previous&&!p(e.previous)&&(t=h(),t.insertBefore(e)),e.next&&!p(e.next)&&(t=h(),t.insertAfter(e)),e.replaceWithChildren();else{var a,n=e.children;e:{a=C[t];for(var r,o=0,s=n.length;s>o;++o)if(r=n[o],r.type==CKEDITOR.NODE_ELEMENT&&!a[r.name]){a=!1;break e}a=!0}if(a)e.name=t,e.attributes={},i.push({check:"parent-down",el:e});else{a=e.parent;for(var l,o=a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==a.name,s=n.length;s>0;)r=n[--s],o&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&C.$inline[r.name])?(l||(l=new CKEDITOR.htmlParser.element(t),l.insertAfter(e),i.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,r.insertAfter(e),a.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&r.type==CKEDITOR.NODE_ELEMENT&&!C[a.name][r.name]&&i.push({check:"el-up",el:r}));
e.remove()}}else"style"==n?e.remove():(e.parent&&i.push({check:"it",el:e.parent}),e.replaceWithChildren())}function m(e,t,i){var n,a;for(n=0;n<i.length;++n)if(a=i[n],!(a.check&&!e.check(a.check,!1)||a.left&&!a.left(t))){a.right(t,D);break}}function g(e,t){var i,n,a,r,o=t.getDefinition(),s=o.attributes,l=o.styles;if(e.name!=o.element)return!1;for(i in s)if("class"==i){for(o=s[i].split(/\s+/),a=e.classes.join("|");r=o.pop();)if(-1==a.indexOf(r))return!1}else if(e.attributes[i]!=s[i])return!1;for(n in l)if(e.styles[n]!=l[n])return!1;return!0}function v(e,t){var i,n;return"string"==typeof e?i=e:e instanceof CKEDITOR.style?n=e:(i=e[0],n=e[1]),[{element:i,left:n,right:function(e,i){i.transform(e,t)
}}]}function b(e){return function(t){return g(t,e)}}function y(e){return function(t,i){i[e](t)}}var C=CKEDITOR.dtd,I=CKEDITOR.tools.copy,E=CKEDITOR.tools.trim,w="cke-test",x=["","p","br","div"];CKEDITOR.filter=function(e){if(this.allowedContent=[],this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={rules:{},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;t===!0?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(x[e.enterMode]+" "+x[e.shiftEnterMode],"default",1))
}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(e,t,n){if(this.disabled||this.customConfig&&!n||!e)return!1;this._.cachedChecks={};var a,r;if("string"==typeof e)e=o(e);else if(e instanceof CKEDITOR.style)r=e.getDefinition(),n={},e=r.attributes,n[r.element]=r={styles:r.styles,requiredStyles:r.styles&&CKEDITOR.tools.objectKeys(r.styles)},e&&(e=I(e),r.classes=e["class"]?e["class"].split(/\s+/):null,r.requiredClasses=r.classes,delete e["class"],r.attributes=e,r.requiredAttributes=e&&CKEDITOR.tools.objectKeys(e)),e=n;else if(CKEDITOR.tools.isArray(e)){for(a=0;a<e.length;++a)r=this.allow(e[a],t,n);
return r}var s,n=[];for(s in e){r=e[s],r="boolean"==typeof r?{}:"function"==typeof r?{match:r}:I(r),"$"!=s.charAt(0)&&(r.elements=s),t&&(r.featureName=t.toLowerCase());var l=r;l.elements=i(l.elements,/\s+/)||null,l.propertiesOnly=l.propertiesOnly||l.elements===!0;var c=/\s*,\s*/,d=void 0;for(d in T){l[d]=i(l[d],c)||null;var h=l,p=_[d],f=i(l[_[d]],c),m=l[d],g=[],v=!0,b=void 0;f?v=!1:f={};for(b in m)"!"==b.charAt(0)&&(b=b.slice(1),g.push(b),f[b]=!0,v=!1);for(;b=g.pop();)m[b]=m["!"+b],delete m["!"+b];h[p]=(v?!1:f)||null}l.match=l.match||null,this.allowedContent.push(r),n.push(r)}for(t=this._.rules,s=t.elements||{},e=t.generic||[],r=0,l=n.length;l>r;++r){c=I(n[r]),d=c.classes===!0||c.styles===!0||c.attributes===!0,h=c,p=void 0;
for(p in T)h[p]=u(h[p]);f=!0;for(p in _)p=_[p],h[p]=CKEDITOR.tools.objectKeys(h[p]),h[p]&&(f=!1);if(h.nothingRequired=f,c.elements===!0||null===c.elements)c.elements=u(c.elements),e[d?"unshift":"push"](c);else{h=c.elements,delete c.elements;for(a in h)s[a]?s[a][d?"unshift":"push"](c):s[a]=[c]}}return t.elements=s,t.generic=e.length?e:null,!0},applyTo:function(e,t,i,a){if(this.disabled)return!1;var r=[],o=!i&&this._.rules,s=this._.transformations,l=n(this),c=this.editor&&this.editor.config.protectedSource,u=!1;e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;t&&"span"==e.name&&~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-")||l(e,o,s,r,t)&&(u=!0)
}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var i;e:{var n=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));i=[];var a,d,h;if(c)for(d=0;d<c.length;++d)if((h=n.match(c[d]))&&h[0].length==n.length){i=!0;break e}n=CKEDITOR.htmlParser.fragment.fromHtml(n),1==n.children.length&&(a=n.children[0]).type==CKEDITOR.NODE_ELEMENT&&l(a,o,s,i,t),i=!i.length}i||r.push(e)}},null,!0),r.length&&(u=!0);for(var h,e=[],a=x[a||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];i=r.pop();)i.type==CKEDITOR.NODE_ELEMENT?f(i,a,e):i.remove();for(;h=e.pop();)if(i=h.el,i.parent)switch(h.check){case"it":C.$removeEmpty[i.name]&&!i.children.length?f(i,a,e):d(i)||f(i,a,e);
break;case"el-up":i.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!C[i.parent.name][i.name]&&f(i,a,e);break;case"parent-down":i.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!C[i.parent.name][i.name]&&f(i.parent,a,e)}return u},checkFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},addContentForms:function(e){if(!this.disabled&&e){var t,i,n,a=[];for(t=0;t<e.length&&!n;++t)i=e[t],("string"==typeof i||i instanceof CKEDITOR.style)&&this.check(i)&&(n=i);if(n){for(t=0;t<e.length;++t)a.push(v(e[t],n));this.addTransformations(a)}}},addFeature:function(e){return this.disabled||!e?!0:(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),this.customConfig&&e.requiredContent?this.check(e.requiredContent):!0)
},addTransformations:function(e){var t,i;if(!this.disabled&&e){var n,a=this._.transformations;for(n=0;n<e.length;++n){t=e[n];var r=void 0,o=void 0,s=void 0,l=void 0,c=void 0,d=void 0;for(i=[],o=0;o<t.length;++o)s=t[o],"string"==typeof s?(s=s.split(/\s*:\s*/),l=s[0],c=null,d=s[1]):(l=s.check,c=s.left,d=s.right),r||(r=s,r=r.element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=b(c)),i.push({check:l==r?null:l,left:c,right:"string"==typeof d?y(d):d});t=r,a[t]||(a[t]=[]),a[t].push(i)}}},check:function(e,t,i){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var a=e.length;a--;)if(this.check(e[a],t,i))return!0;
return!1}var s,l;if("string"==typeof e){if(l=e+"<"+(t===!1?"0":"1")+(i?"1":"0")+">",l in this._.cachedChecks)return this._.cachedChecks[l];a=o(e).$1,s=a.styles;var d=a.classes;a.name=a.elements,a.classes=d=d?d.split(/\s*,\s*/):[],a.styles=r(s),a.attributes=r(a.attributes),a.children=[],d.length&&(a.attributes["class"]=d.join(" ")),s&&(a.attributes.style=CKEDITOR.tools.writeCssText(a.styles)),s=a}else a=e.getDefinition(),s=a.styles,d=a.attributes||{},s?(s=I(s),d.style=CKEDITOR.tools.writeCssText(s,!0)):s={},s={name:a.element,attributes:d,classes:d["class"]?d["class"].split(/\s+/):[],styles:s,children:[]};var u,d=CKEDITOR.tools.clone(s),h=[];if(t!==!1&&(u=this._.transformations[s.name])){for(a=0;a<u.length;++a)m(this,s,u[a]);
c(s)}return n(this)(d,this._.rules,t===!1?!1:this._.transformations,h,!1,!i,!i),t=h.length>0?!1:CKEDITOR.tools.objectCompare(s.attributes,d.attributes,!0)?!0:!1,"string"==typeof e&&(this._.cachedChecks[l]=t),t},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(i,n){var a,r=e.slice();if(this.check(x[i]))return i;for(n||(r=r.reverse());a=r.pop();)if(this.check(a))return t[a];return CKEDITOR.ENTER_BR}}()};var T={styles:1,attributes:1,classes:1},_={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},k=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,R={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},D=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")
},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,i){if(i=i||t,!(i in e.styles)){var n=e.attributes[t];n&&(/^\d+$/.test(n)&&(n+="px"),e.styles[i]=n)}delete e.attributes[t]},lengthToAttribute:function(e,t,i){if(i=i||t,!(i in e.attributes)){var n=e.styles[t],a=n&&n.match(/^(\d+)(?:\.\d*)?px$/);a?e.attributes[i]=a[1]:n==w&&(e.attributes[i]=w)}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;("left"==t||"right"==t)&&(e.styles["float"]=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];
("left"==t||"right"==t)&&(e.attributes.align=t)}delete e.styles["float"]},matchesStyle:g,transform:function(e,t){if("string"==typeof t)e.name=t;else{var i,n,a,r,o=t.getDefinition(),s=o.styles,l=o.attributes;e.name=o.element;for(i in l)if("class"==i)for(o=e.classes.join("|"),a=l[i].split(/\s+/);r=a.pop();)-1==o.indexOf(r)&&e.classes.push(r);else e.attributes[i]=l[i];for(n in s)e.styles[n]=s[n]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))
},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var i=CKEDITOR.focusManager._.blurDelay;e||!i?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},i,this)}},add:function(e,t){var i=e.getCustomData("focusmanager");if(!i||i!=this){i&&i.remove(e);var i="focus",n="blur";t&&(CKEDITOR.env.ie?(i="focusin",n="focusout"):CKEDITOR.event.useCapture=1);var a={blur:function(){e.equals(this.currentActive)&&this.blur()
},focus:function(){this.focus(e)}};e.on(i,a.focus,this),e.on(n,a.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",a)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var t=t.data,i=t.getKeystroke(),n=this.keystrokes[i],a=this._.editor;return e=a.fire("key",{keyCode:i})===!1,e||(n&&(e=a.execCommand(n,{from:"keystrokeHandler"})!==!1),e||(e=!!this.blockedKeystrokes[i])),e&&t.preventDefault(!0),!e
},i=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&e.on("keypress",i,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,i){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e)),this[e]?i(e,this[e]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),function(){this[e].dir=this.rtl[e]?"rtl":"ltr",i(e,this[e])
},this)},detect:function(e,t){var i=this.languages,t=t||navigator.userLanguage||navigator.language||e,n=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),a=n[1],n=n[2];return i[a+"-"+n]?a=a+"-"+n:i[a]||(a=null),CKEDITOR.lang.detect=a?function(){return a}:function(e){return e},a||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(i,n,a,r){var o="string"==typeof i;o&&(i=[i]),a||(a=CKEDITOR);var s=i.length,l=[],c=[],d=function(e){n&&(o?n.call(a,e):n.call(a,l,c))};if(0===s)d(!0);else{var u=function(e,t){(t?l:c).push(e),--s<=0&&(r&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),d(t))},h=function(i,n){e[i]=1;var a=t[i];delete t[i];
for(var r=0;r<a.length;r++)a[r](i,n)},p=function(i){if(e[i])u(i,!0);else{var a=t[i]||(t[i]=[]);if(a.push(u),!(a.length>1)){var r=new CKEDITOR.dom.element("script");r.setAttributes({type:"text/javascript",src:i}),n&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?r.$.onreadystatechange=function(){("loaded"==r.$.readyState||"complete"==r.$.readyState)&&(r.$.onreadystatechange=null,h(i,!0))}:(r.$.onload=function(){setTimeout(function(){h(i,!0)},0)},r.$.onerror=function(){h(i,!1)})),r.appendTo(CKEDITOR.document.getHead())}}};r&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var f=0;s>f;f++)p(i[f])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)
}var t=[];return function(i,n){var a=this;t.push({scriptUrl:i,callback:function(){n&&n.apply(this,arguments),t.shift(),e.call(a)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw'[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.';var i=this.registered[e]=t||{};return i.name=e,i.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",i),this.get(e)},get:function(e){return this.registered[e]||null
},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,i){for(var e=e.split(","),n=0;n<e.length;n++){var a=e[n];i||(t=t.replace(/[^\/]+$/,function(e){return i=e,""})),this.externals[a]={dir:t,file:i||this.fileName+".js"}}},load:function(e,t,i){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var n=this.loaded,a=this.registered,r=[],o={},s={},l=0;l<e.length;l++){var c=e[l];if(c)if(n[c]||a[c])s[c]=this.get(c);else{var d=this.getFilePath(c);r.push(d),d in o||(o[d]=[]),o[d].push(c)
}}CKEDITOR.scriptLoader.load(r,function(e,a){if(a.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+o[a[0]].join(",")+'" was not found at "'+a[0]+'".';for(var r=0;r<e.length;r++)for(var l=o[e[r]],c=0;c<l.length;c++){var d=l[c];s[d]=this.get(d),n[d]=1}t.call(i,s)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(i,n,a){var r={},o=function(i){e.call(this,i,function(e){CKEDITOR.tools.extend(r,e);var i,s=[];for(i in e){var l=e[i],c=l&&l.requires;if(!t[i]){if(l.icons)for(var d=l.icons.split(","),u=d.length;u--;)CKEDITOR.skin.addIcon(d[u],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+d[u]+".png");
t[i]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)r[c[l]]||s.push(c[l])}if(s.length)o.call(this,s);else{for(i in r)l=r[i],l.onLoad&&!l.onLoad._called&&(l.onLoad()===!1&&delete r[i],l.onLoad._called=1);n&&n.call(a||window,r)}},this)};o.call(this,i)}}),CKEDITOR.plugins.setLang=function(e,t,i){var n=this.get(e),e=n.langEntries||(n.langEntries={}),n=n.lang||(n.lang=[]);n.split&&(n=n.split(",")),-1==CKEDITOR.tools.indexOf(n,t)&&n.push(t),e[t]=i},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,i){i.name=e.toLowerCase();var n=this.items[e]={type:t,command:i.command||null,args:Array.prototype.slice.call(arguments,2)};
CKEDITOR.tools.extend(n,i)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],i=t&&this._.handlers[t.type],n=t&&t.command&&this.editor.getCommand(t.command),i=i&&i.create.apply(this,t.args);return this.instances[e]=i,n&&n.uiItems.push(i),i&&!i.type&&(i.type=t.type),i},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,n,r){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==n){if(!(n instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");
if(!r)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(r==CKEDITOR.ELEMENT_MODE_INLINE?n.is(CKEDITOR.dtd.$editable)||n.is("textarea"):r==CKEDITOR.ELEMENT_MODE_REPLACE?!n.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+n.getName()+'".');this.element=n,this.elementMode=r,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(n.getId()||n.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",i),this.on("selectionChange",function(e){a(this,e.data.path)
}),this.on("activeFilterChange",function(){a(this,this.elementPath(),!0)}),this.on("mode",i),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){o(this,e)},0,this)}function t(){do var e="editor"+ ++h;while(CKEDITOR.instances[e]);return e}function i(){var e,t=this.commands;for(e in t)n(this,t[e])}function n(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function a(e,t,i){if(t){var n,a,r=e.commands;for(a in r)n=r[a],(i||n.contextSensitive)&&n.refresh(e,t)}}function r(e){var t=e.config.customConfig;
if(!t)return!1;var t=CKEDITOR.getUrl(t),i=p[t]||(p[t]={});return i.fn?(i.fn.call(e,e.config),(CKEDITOR.getUrl(e.config.customConfig)==t||!r(e))&&e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){i.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},r(e)}),!0}function o(e,t){e.on("customConfigLoaded",function(){if(t){if(t.on)for(var i in t.on)e.on(i,t.on[i]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}i=e.config,e.readOnly=!(!i.readOnly&&!(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&e.element.hasAttribute("disabled"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p):!1,e.tabIndex=i.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:i.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:i.shiftEnterMode,i.skin&&(CKEDITOR.skinName=i.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),s(e)
}),t&&void 0!=t.customConfig&&(e.config.customConfig=t.customConfig),r(e)||e.fireOnce("customConfigLoaded")}function s(e){CKEDITOR.skin.loadPart("editor",function(){l(e)})}function l(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,i){var n=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(i),e.title="string"==typeof n||n===!1?n:[e.lang.editor,e.name].join(", "),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&"rtl"==e.lang.dir&&(e.lang.dir="ltr"),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),c(e)})}function c(e){e.getStylesSet(function(t){e.once("loaded",function(){e.fire("stylesSet",{styles:t})
},null,null,1),d(e)})}function d(e){var t=e.config,i=t.plugins,n=t.extraPlugins,a=t.removePlugins;if(n)var r=RegExp("(?:^|,)(?:"+n.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),i=i.replace(r,""),i=i+(","+n);if(a)var o=RegExp("(?:^|,)(?:"+a.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),i=i.replace(o,"");CKEDITOR.env.air&&(i+=",adobeair"),CKEDITOR.plugins.load(i.split(","),function(i){var n=[],a=[],r=[];e.plugins=i;for(var s in i){var l,c=i[s],d=c.lang,u=null,h=c.requires;if(CKEDITOR.tools.isArray(h)&&(h=h.join(",")),h&&(l=h.match(o)))for(;h=l.pop();)CKEDITOR.tools.setTimeout(function(e,t){throw Error('Plugin "'+e.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+t+'" plugin.')
},0,null,[h,s]);d&&!e.lang[s]&&(d.split&&(d=d.split(",")),CKEDITOR.tools.indexOf(d,e.langCode)>=0?u=e.langCode:(u=e.langCode.replace(/-.*/,""),u=u!=e.langCode&&CKEDITOR.tools.indexOf(d,u)>=0?u:CKEDITOR.tools.indexOf(d,"en")>=0?"en":d[0]),c.langEntries&&c.langEntries[u]?(e.lang[s]=c.langEntries[u],u=null):r.push(CKEDITOR.getUrl(c.path+"lang/"+u+".js"))),a.push(u),n.push(c)}CKEDITOR.scriptLoader.load(r,function(){for(var i=["beforeInit","init","afterInit"],r=0;r<i.length;r++)for(var o=0;o<n.length;o++){var s=n[o];0===r&&a[o]&&s.lang&&s.langEntries&&(e.lang[s.name]=s.langEntries[a[o]]),s[i[r]]&&s[i[r]](e)}for(e.fireOnce("pluginsLoaded"),t.keystrokes&&e.setKeystroke(e.config.keystrokes),o=0;o<e.config.blockedKeystrokes.length;o++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[o]]=1;
e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)})})}function u(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var i=new CKEDITOR.command(this,t);return this.mode&&n(this,i),this.commands[e]=i},_attachToForm:function(){var e=this,t=e.element,i=new CKEDITOR.dom.element(t.$.form);if(t.is("textarea")&&i){var n=function(i){e.updateElement(),e._.required&&!t.getValue()&&e.fire("required")===!1&&i.data.preventDefault()
};i.on("submit",n),i.$.submit&&i.$.submit.call&&i.$.submit.apply&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,function(e){return function(){n(),e.apply?e.apply(this):e()}})),e.on("destroy",function(){i.removeListener("submit",n)})}},destroy:function(e){this.fire("beforeDestroy"),!e&&u.call(this),this.editable(null),this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(e=this.getSelection(),!e)return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null
},execCommand:function(e,t){var i=this.getCommand(e),n={name:e,commandData:t,command:i};return i&&i.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",n)!==!1&&(n.returnValue=i.exec(n.commandData),!i.async&&this.fire("afterCommandExec",n)!==!1)?n.returnValue:!1},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");if("string"!=typeof e){var t=this.element;
t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e=t.is("textarea")?t.getValue():t.getHtml())}return e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,i){t&&this.on("dataReady",function(e){e.removeListener(),t.call(e.editor)}),e={dataValue:e},!i&&this.fire("setData",e),this._.data=e.dataValue,!i&&this.fire("afterSetData",e)},setReadOnly:function(e){e=void 0==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t){this.fire("insertHtml",{dataValue:e,mode:t})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)
},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return u.call(this)},setKeystroke:function(){for(var e,t,i=this.keystrokeHandler.keystrokes,n=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],a=n.length;a--;)e=n[a],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?i[e]=t:delete i[e]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))
},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,(this.activeEnterMode!=e||this.activeShiftEnterMode!=t)&&(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};
CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(i){for(var n,a,r,o=0;n=this._.htmlPartsRegex.exec(i);)if(a=n.index,a>o&&(o=i.substring(o,a),r?r.push(o):this.onText(o)),o=this._.htmlPartsRegex.lastIndex,!(a=n[1])||(a=a.toLowerCase(),r&&CKEDITOR.dtd.$cdata[a]&&(this.onCDATA(r.join("")),r=null),r))if(r)r.push(n[0]);else if(a=n[3]){if(a=a.toLowerCase(),!/="/.test(a)){var s,l={};n=n[4];var c=!(!n||"/"!=n.charAt(n.length-1));if(n)for(;s=e.exec(n);){var d=s[1].toLowerCase();s=s[2]||s[3]||s[4]||"",l[d]=!s&&t[d]?d:CKEDITOR.tools.htmlDecodeAttr(s)}this.onTagOpen(a,l,c),!r&&CKEDITOR.dtd.$cdata[a]&&(r=[])
}}else(a=n[2])&&this.onComment(a);else this.onTagClose(a);i.length>o&&this.onText(i.substring(o,i.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){this._.output.push(t?" />":">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1
},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),i=this.previous,n=this.next;i&&(i.next=n),n&&(n.previous=i),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,i=CKEDITOR.tools.indexOf(t,this),n=e.previous=this.previous,a=e.next=this.next;n&&(n.next=e),a&&(a.previous=e),t[i]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e),n=e.next;t.splice(i+1,0,this),this.next=e.next,this.previous=e,e.next=this,n&&(n.previous=this),this.parent=e.parent
},insertBefore:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e);t.splice(i,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t=("function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e}),i=this.parent;i&&i.type==CKEDITOR.NODE_ELEMENT;){if(t(i))return i;i=i.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}
},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var i=this.value;return(i=e.onComment(t,i,this))?"string"!=typeof i?(this.replaceWith(i),!1):(this.value=i,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){return(this.value=e.onText(t,this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)
}})}(),function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return e.attributes["data-cke-survive"]?!1:"a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name]}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),i={ol:1,ul:1},n=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),a={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};
CKEDITOR.htmlParser.fragment.fromHtml=function(r,o,s){function l(e){var t;if(g.length>0)for(var i=0;i<g.length;i++){var n=g[i],a=n.name,r=CKEDITOR.dtd[a],o=b.name&&CKEDITOR.dtd[b.name];o&&!o[a]||e&&r&&!r[e]&&CKEDITOR.dtd[e]?a==b.name&&(u(b,b.parent,1),i--):(t||(c(),t=1),n=n.clone(),n.parent=b,b=n,g.splice(i,1),i--)}}function c(){for(;v.length;)u(v.shift(),b)}function d(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,i=e.children.length,n=e.children[i-1];n&&n.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(n.value))?n.value=t:e.children.length=i-1)}}function u(t,i,n){var i=i||b||m,a=b;void 0===t.previous&&(h(i,t)&&(b=i,f.onTagOpen(s,{}),t.returnPoint=i=b),d(t),(!e(t)||t.children.length)&&i.add(t),"pre"==t.name&&(C=!1),"textarea"==t.name&&(y=!1)),t.returnPoint?(b=t.returnPoint,delete t.returnPoint):b=n?i:a
}function h(e,t){if((e==m||"body"==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s])){var i,n;return(i=t.attributes&&(n=t.attributes["data-cke-real-element-type"])?n:t.name)&&i in CKEDITOR.dtd.$inline&&!(i in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}}function p(e,t){return e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent?e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t:!1}var f=new CKEDITOR.htmlParser,m=o instanceof CKEDITOR.htmlParser.element?o:"string"==typeof o?new CKEDITOR.htmlParser.element(o):new CKEDITOR.htmlParser.fragment,g=[],v=[],b=m,y="textarea"==m.name,C="pre"==m.name;f.onTagOpen=function(a,r,o,s){if(r=new CKEDITOR.htmlParser.element(a,r),r.isUnknown&&o&&(r.isEmpty=!0),r.isOptionalClose=s,e(r))g.push(r);
else{if("pre"==a)C=!0;else{if("br"==a&&C)return void b.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==a&&(y=!0)}if("br"==a)v.push(r);else{for(;s=(o=b.name)?CKEDITOR.dtd[o]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n,!(r.isUnknown||b.isUnknown||s[a]);)if(b.isOptionalClose)f.onTagClose(o);else if(a in i&&o in i)o=b.children,(o=o[o.length-1])&&"li"==o.name||u(o=new CKEDITOR.htmlParser.element("li"),b),!r.returnPoint&&(r.returnPoint=b),b=o;else if(a in CKEDITOR.dtd.$listItem&&!p(a,o))f.onTagOpen("li"==a?"ul":"dl",{},0,1);else if(o in t&&!p(a,o))!r.returnPoint&&(r.returnPoint=b),b=b.parent;else{if(o in CKEDITOR.dtd.$inline&&g.unshift(b),!b.parent){r.isOrphan=1;
break}u(b,b.parent,1)}l(a),c(),r.parent=b,r.isEmpty?u(r):b=r}}},f.onTagClose=function(e){for(var t=g.length-1;t>=0;t--)if(e==g[t].name)return void g.splice(t,1);for(var i=[],n=[],a=b;a!=m&&a.name!=e;)a._.isBlockLike||n.unshift(a),i.push(a),a=a.returnPoint||a.parent;if(a!=m){for(t=0;t<i.length;t++){var r=i[t];u(r,r.parent)}b=a,a._.isBlockLike&&c(),u(a,a.parent),a==b&&(b=b.parent),g=g.concat(n)}"body"==e&&(s=!1)},f.onText=function(e){if(b._.hasInlineStarted&&!v.length||C||y||(e=CKEDITOR.tools.ltrim(e),0!==e.length)){var i=b.name,r=i?CKEDITOR.dtd[i]||(b._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n;!y&&!r["#"]&&i in t?(f.onTagOpen(a[i]||""),f.onText(e)):(c(),l(),!C&&!y&&(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),h(b,e)&&this.onTagOpen(s,{},0,1),b.add(e))
}},f.onCDATA=function(e){b.add(new CKEDITOR.htmlParser.cdata(e))},f.onComment=function(e){c(),l(),b.add(new CKEDITOR.htmlParser.comment(e))},f.parse(r);for(c();b!=m;)u(b,b.parent,1);return d(m),m},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var i=t>0?this.children[t-1]:null;if(i){if(e._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(e);i.next=e}e.previous=i,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)
},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,i){if(this.childrenFilteredBy!=e.id)for(i=this.getFilterContext(i),t&&!this.parent&&e.onRoot(i,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)this.children[t].filter(e,i)===!1&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,i){var n=this.getFilterContext();for(i&&!this.parent&&t&&t.onRoot(n,this),t&&this.filterChildren(t,!1,n),t=0,i=this.children,n=i.length;n>t;t++)i[t].writeHtml(e)},forEach:function(e,t,i){if(!(i||t&&this.type!=t))var n=e(this);if(n!==!1)for(var i=this.children,a=0;a<i.length;a++)n=i[a],n.type==CKEDITOR.NODE_ELEMENT?n.forEach(e,t):(!t||n.type==t)&&e(n)
},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,i,n,a){var r,o;for(r in i)(o=t[r])||(o=t[r]=new e),o.add(i[r],n,a)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,i){var n;"number"==typeof i?n=i:i&&"priority"in i&&(n=i.priority),"number"!=typeof n&&(n=10),"object"!=typeof i&&(i={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,n,i),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,n,i),e.elements&&t(this.elementsRules,e.elements,n,i),e.attributes&&t(this.attributesRules,e.attributes,n,i),e.text&&this.textRules.add(e.text,n,i),e.comment&&this.commentRules.add(e.comment,n,i),e.root&&this.rootRules.add(e.root,n,i)
},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,i){return this.textRules.exec(e,t,i)},onComment:function(e,t,i){return this.commentRules.exec(e,t,i)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var i,n=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],a=0;3>a;a++)if(i=n[a]){if(i=i.exec(e,t,this),i===!1)return null;if(i&&i!=t)return this.onNode(e,i);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var i=t.type;return i==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):i==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):i==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null
},onAttribute:function(e,t,i,n){return(i=this.attributesRules[i])?i.exec(e,n,t,this):n}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,i){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:i})},addMany:function(e,t,i){for(var n=[this.findIndex(t),0],a=0,r=e.length;r>a;a++)n.push({value:e[a],priority:t,options:i});this.rules.splice.apply(this.rules,n)},findIndex:function(e){for(var t=this.rules,i=t.length-1;i>=0&&e<t[i].priority;)i--;return i+1},exec:function(e,t){var i,n,a,r,o=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,s=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;
for(r=0;c>r;r++)if(o&&(i=t.type,n=t.name),a=l[r],!(e.nonEditable&&!a.options.applyToAll||e.nestedEditable&&a.options.excludeNestedEditable)){if(a=a.value.apply(null,s),a===!1||o&&a&&(a.name!=n||a.type!=i))return a;void 0!=a&&(s[0]=t=a)}return t},execOnName:function(e,t){for(var i,n=0,a=this.rules,r=a.length;t&&r>n;n++)i=a[n],!(e.nonEditable&&!i.options.applyToAll||e.nestedEditable&&i.options.excludeNestedEditable)&&(t=t.replace(i.value[0],i.value[1]));return t}}}(),function(){function e(e,t){function s(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("Â "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(a){if(a.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var o,l,d=[],u=i(a);
if(u)for(c(u,1)&&d.push(u);u;)r(u)&&(o=n(u))&&c(o)&&((l=n(o))&&!r(l)?d.push(o):(s(h).insertAfter(o),o.remove())),u=u.previous;for(u=0;u<d.length;u++)d[u].remove();(d=CKEDITOR.env.opera&&!e||("function"==typeof t?t(a)!==!1:t))&&((h||CKEDITOR.env.needsBrFiller||a.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(h||CKEDITOR.env.needsBrFiller||!(document.documentMode>7||a.name in CKEDITOR.dtd.tr||a.name in CKEDITOR.dtd.$listItem))?(d=i(a),d=!d||"form"==a.name&&"input"==d.name):d=!1),d&&a.add(s(e))}}}function c(e,t){if((!h||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"])return!0;var i;if(e.type==CKEDITOR.NODE_TEXT&&(i=e.value.match(g))){if(i.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,i.index)).insertBefore(e),e.value=i[0]),!CKEDITOR.env.needsBrFiller&&h&&(!t||e.parent.name in p))return!0;
if(!h&&((i=e.previous)&&"br"==i.name||!i||r(i)))return!0}return!1}var d,u={elements:{}},h="html"==t,p=CKEDITOR.tools.extend({},C);for(d in p)"#"in b[d]||delete p[d];for(d in p)u.elements[d]=l(h,e.config.fillEmptyBlocks!==!1);return u.root=l(h),u.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=t.attributes;if("data-cke-bogus"in i||"data-cke-eol"in i)delete i["data-cke-bogus"];else{for(i=t.next;i&&a(i);)i=i.next;var l=n(t);!i&&r(t.parent)?o(t.parent,s(e)):r(i)&&l&&!r(l)&&s(e).insertBefore(i)}}}}(h),u}function t(e,t){return e!=CKEDITOR.ENTER_BR&&t!==!1?e==CKEDITOR.ENTER_DIV?"div":"p":!1}function i(e){for(e=e.children[e.children.length-1];e&&a(e);)e=e.previous;
return e}function n(e){for(e=e.previous;e&&a(e);)e=e.previous;return e}function a(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function r(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in C||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function o(e,t){var i=e.children[e.children.length-1];e.children.push(t),t.parent=e,i&&(i.next=t,t.previous=i)}function s(e){e=e.attributes,"false"!=e.contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch(e=e.attributes,e["data-cke-editable"]){case"true":e.contenteditable="true";
break;case"1":delete e.contenteditable}}function c(e){return e.replace(T,function(e,t,i){return"<"+t+i.replace(_,function(e,t){return k.test(t)&&-1==i.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e})+">"})}function d(e,t){return e.replace(t,function(e,t,i){return 0===e.indexOf("<textarea")&&(e=t+p(i).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function u(e){return e.replace(O,function(e,t){return decodeURIComponent(t)})}function h(e){return e.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(e){return"<!--"+v+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"-->"
})}function p(e){return e.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)})}function f(e,t){var i=t._.dataStore;return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return i&&i[t]||""})}function m(e,t){for(var i=[],n=t.config.protectedSource,a=t._.dataStore||(t._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,n=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(n),e=e.replace(/<\!--[\s\S]*?--\>/g,function(e){return"<!--{cke_tempcomment}"+(i.push(e)-1)+"-->"}),o=0;o<n.length;o++)e=e.replace(n[o],function(e){return e=e.replace(r,function(e,t,n){return i[n]
}),/cke_temp(comment)?/.test(e)?e:"<!--{cke_temp}"+(i.push(e)-1)+"-->"});return e=e.replace(r,function(e,t,n){return"<!--"+v+(t?"{C}":"")+encodeURIComponent(i[n]).replace(/--/g,"%2D%2D")+"-->"}),e.replace(/<\w([^'">]+|'[^']*'|"[^"]*")+>/g,function(e){return e.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(e,t){return a[a.id]=decodeURIComponent(t),"{cke_protected_"+a.id++ +"}"})})}CKEDITOR.htmlDataProcessor=function(i){var n,a,r=this;this.editor=i,this.dataFilter=n=new CKEDITOR.htmlParser.filter,this.htmlFilter=a=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,n.addRules(I),n.addRules(E,{applyToAll:!0}),n.addRules(e(i,"data"),{applyToAll:!0}),a.addRules(w),a.addRules(x,{applyToAll:!0}),a.addRules(e(i,"html"),{applyToAll:!0}),i.on("toHtml",function(e){var n,e=e.data,a=e.dataValue,a=m(a,i),a=d(a,D),a=c(a),a=d(a,R),a=a.replace(q,"$1cke:$2"),a=a.replace(K,"<cke:$1$2></cke:$1>"),a=CKEDITOR.env.opera?a:a.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),a=a.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),r=e.context||i.editable().getName();
CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==r&&(r="div",a="<pre>"+a+"</pre>",n=1),r=i.document.createElement(r),r.setHtml("a"+a),a=r.getHtml().substr(1),a=a.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),n&&(a=a.replace(/^<pre>|<\/pre>$/gi,"")),a=a.replace(S,"$1$2"),a=u(a),a=p(a),e.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(a,e.context,e.fixForBody===!1?!1:t(e.enterMode,i.config.autoParagraph))},null,null,5),i.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&i.fire("dataFiltered")},null,null,6),i.on("toHtml",function(e){e.data.dataValue.filterChildren(r.dataFilter,!0)},null,null,10),i.on("toHtml",function(e){var e=e.data,t=e.dataValue,i=new CKEDITOR.htmlParser.basicWriter;
t.writeChildrenHtml(i),t=i.getHtml(!0),e.dataValue=h(t)},null,null,15),i.on("toDataFormat",function(e){var n=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,e.data.context,t(e.data.enterMode,i.config.autoParagraph))},null,null,5),i.on("toDataFormat",function(e){e.data.dataValue.filterChildren(r.htmlFilter,!0)},null,null,10),i.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),i.on("toDataFormat",function(e){var t=e.data.dataValue,n=r.writer;n.reset(),t.writeChildrenHtml(n),t=n.getHtml(!0),t=p(t),t=f(t,i),e.data.dataValue=t},null,null,15)
},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,i,n){var a,r,o,s=this.editor;return t&&"object"==typeof t?(a=t.context,i=t.fixForBody,n=t.dontFilter,r=t.filter,o=t.enterMode):a=t,!a&&null!==a&&(a=s.editable().getName()),s.fire("toHtml",{dataValue:e,context:a,fixForBody:i,dontFilter:n,filter:r||s.filter,enterMode:o||s.enterMode}).dataValue},toDataFormat:function(e,t){var i,n,a;return t&&(i=t.context,n=t.filter,a=t.enterMode),!i&&null!==i&&(i=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:n||this.editor.filter,context:i,enterMode:a||this.editor.enterMode}).dataValue}};var g=/(?:&nbsp;|\xa0)$/,v="{cke_protected}",b=CKEDITOR.dtd,y=["caption","colgroup","col","thead","tfoot","tbody"],C=CKEDITOR.tools.extend({},b.$blockLimit,b.$block),I={elements:{input:s,textarea:s}},E={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},w={elements:{embed:function(e){var t=e.parent;
if(t&&"object"==t.name){var i=t.attributes.width,t=t.attributes.height;i&&(e.attributes.width=i),t&&(e.attributes.height=t)}},a:function(e){return e.children.length||e.attributes.name||e.attributes["data-cke-saved-name"]?void 0:!1}}},x={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var i,n=["name","href","src"],a=0;a<n.length;a++)i="data-cke-saved-"+n[a],i in t&&delete t[n[a]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var i,n;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(i=CKEDITOR.tools.indexOf(y,e.name),n=CKEDITOR.tools.indexOf(y,t.name)),i>-1&&n>-1&&i!=n||(i=e.parent?e.getIndex():-1,n=t.parent?t.getIndex():-1),i>n?1:-1
})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes["class"]&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&o(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{"class":function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1
}}};CKEDITOR.env.ie&&(x.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var T=/<(a|area|img|input|source)\b([^>]*)>/gi,_=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,k=/^(href|src|name)$/i,R=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,D=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,q=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,S=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,K=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];
var i=e||"",n=i.match(/^cke:(.*)/);n&&(i=n[1]),i=!!(CKEDITOR.dtd.$nonBodyContent[i]||CKEDITOR.dtd.$block[i]||CKEDITOR.dtd.$listItem[i]||CKEDITOR.dtd.$tableContent[i]||CKEDITOR.dtd.$nonEditable[i]||"br"==i),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:i,hasInlineStarted:this.isEmpty||!i}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,i,n){"font-family"==i&&(n=n.replace(/["']/g,"")),t[i.toLowerCase()]=n}),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)
},toString:function(){var e,i=[];for(e in t)t[e]&&i.push(e,":",t[e],";");return i.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],t>e?-1:e>t?1:0},i=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:i.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var i,n,a=this,t=a.getFilterContext(t);if(t.off)return!0;for(a.parent||e.onRoot(t,a);;){if(i=a.name,!(n=e.onElementName(t,i)))return this.remove(),!1;
if(a.name=n,!(a=e.onElement(t,a)))return this.remove(),!1;if(a!==this)return this.replaceWith(a),!1;if(a.name==i)break;if(a.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(a),!1;if(!a.name)return this.replaceWithChildren(),!1}i=a.attributes;var r,o;for(r in i){for(o=r,n=i[r];;){if(!(o=e.onAttributeName(t,r))){delete i[r];break}if(o==r)break;delete i[r],r=o}o&&((n=e.onAttribute(t,a,o,n))===!1?delete i[o]:i[o]=n)}return a.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:i.filterChildren,writeHtml:function(e,i){i&&this.filter(i);var n,a,r=this.name,o=[],s=this.attributes;e.openTag(r,s);for(n in s)o.push([n,s[n]]);for(e.sortAttributes&&o.sort(t),n=0,a=o.length;a>n;n++)s=o[n],e.attribute(s[0],s[1]);
e.openTagClose(r,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(r)},writeChildrenHtml:i.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:i.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=e(t));for(var i=0,n=this.children.length;n>i;++i)if(t(this.children[i]))return this.children[i];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children,t=0,i=e.length;i>t;++t)e[t].parent=this
},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),i=this.clone(),n=0;n<t.length;++n)t[n].parent=i;return i.children=t,t[0]&&(t[0].previous=null),e>0&&(this.children[e-1].next=null),this.parent.add(i,this.getIndex()+1),i},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return t?RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t):!1},getFilterContext:function(e){var t=[];
if(e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),!e.off&&"off"==this.attributes["data-cke-processor"]&&t.push("off",!0),e.nonEditable||"false"!=this.attributes.contenteditable?"body"!=this.name&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length)for(var e=CKEDITOR.tools.copy(e),i=0;i<t.length;i+=2)e[t[i]]=t[i+1];return e}},!0)}(),function(){var e={},t=/{([^}]+)}/g,i=/([\\'])/g,n=/\n/g,a=/\r/g;CKEDITOR.template=function(r){if(e[r])this.output=e[r];else{var o=r.replace(i,"\\$1").replace(n,"\\n").replace(a,"\\r").replace(t,function(e,t){return"',data['"+t+"']==undefined?'{"+t+"}':data['"+t+"'],'"
});this.output=e[r]=Function("data","buffer","return buffer?buffer.push('"+o+"'):['"+o+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,i){var n=e[t];return n?n:(n={name:t,source:i},CKEDITOR.fire("template",n),e[t]=new CKEDITOR.template(n.source))
},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),n=e.is("textarea")?e:null;return n?(i.setData(n.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!i.readOnly+'" class="cke_textarea_inline">'+n.getValue()+"</div>",CKEDITOR.document),e.insertAfter(n),n.hide(),n.$.form&&i._attachToForm()):i.setData(e.getHtml(),null,!0),i.on("loaded",function(){i.fire("uiReady"),i.editable(e),i.container=e,i.setData(i.getData(1)),i.resetDirty(),i.fire("contentDom"),i.mode="wysiwyg",i.fire("mode"),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)
},null,null,1e4),i.on("destroy",function(){n&&(i.container.clearCustomData(),i.container.remove(),n.show()),i.element.clearCustomData(),delete i.element}),i},CKEDITOR.inlineAll=function(){var e,t,i;for(i in CKEDITOR.dtd.$editable)for(var n=CKEDITOR.document.getElementsByTag(i),a=0,r=n.count();r>a;a++)e=n.getItem(a),"true"==e.getAttribute("contenteditable")&&(t={element:e,config:{}},CKEDITOR.fire("inline",t)!==!1&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,n,a,r){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';
var o=new CKEDITOR.editor(n,e,r);return r==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),o._.required=e.hasAttribute("required"),e.removeAttribute("required")),a&&o.setData(a,null,!0),o.on("loaded",function(){i(o),r==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&e.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",t),o}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)
}function i(e){var t=e.name,i=e.element,a=e.elementMode,r=e.fire("uiSpace",{space:"top",html:""}).html,o=e.fire("uiSpace",{space:"bottom",html:""}).html;n||(n=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')),t=CKEDITOR.dom.element.createFromHtml(n.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:[e.lang.editor,e.name].join(", "),topHtml:r?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+r+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:o?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+o+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),a==CKEDITOR.ELEMENT_MODE_REPLACE?(i.hide(),t.insertAfter(i)):i.append(t),e.container=t,r&&e.ui.space("top").unselectable(),o&&e.ui.space("bottom").unselectable(),i=e.config.width,a=e.config.height,i&&t.setStyle("width",CKEDITOR.tools.cssLength(i)),a&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(a)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()
}),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,i){return e(t,i,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,i,n){return e(t,i,n,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var i=null,n=e[t];if(n.name||n.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(n.className))continue}else if("function"==typeof arguments[0]&&(i={},arguments[0](n,i)===!1))continue;this.replace(n,i)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var i=this,n=this._.modes;
if(e!=i.mode&&n&&n[e]){if(i.fire("beforeSetMode",e),i.mode){var a=i.checkDirty();i._.previousMode=i.mode,i.fire("beforeModeUnload"),i.editable(0),i.ui.space("contents").setHtml(""),i.mode=""}this._.modes[e](function(){i.mode=e,void 0!==a&&!a&&i.resetDirty(),setTimeout(function(){i.fire("mode"),t&&t.call(i)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,i,n){var a=this.container,r=this.ui.space("contents"),o=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,n=n?a.getChild(1):a;n.setSize("width",e,!0),o&&(o.style.width="1%"),r.setStyle("height",Math.max(t-(i?0:(n.$.offsetHeight||0)-(r.$.clientHeight||0)),0)+"px"),o&&(o.style.width="100%"),this.fire("resize")
},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container};var n;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var i,a=e.editor,r=e.data.path,o=r.blockLimit,s=e.data.selection,l=s.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(s=t(s,r))&&(s.appendBogus(),i=CKEDITOR.env.ie),a.config.autoParagraph!==!1&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&a.editable().equals(o)&&!r.block&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&(r=l.clone(),r.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),o=new CKEDITOR.dom.walker(r),o.guard=function(e){return!n(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()
},(!o.checkForward()||r.checkStartOfBlock()&&r.checkEndOfBlock())&&(a=l.fixBlock(!0,a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(a=a.getFirst(n))&&a.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(a.getText()).match(/^(?:&nbsp;|\xa0)$/)&&a.remove(),i=1,e.cancel())),i&&l.select()}function t(e,t){if(e.isFake)return 0;var i=t.block||t.blockLimit,a=i&&i.getLast(n);return!i||!i.isBlockBoundary()||a&&a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary()||i.is("pre")||i.getBogus()?void 0:i}function i(e){var t=e.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),("submit"==t||"reset"==t)&&e.data.preventDefault())}function n(e){return d(e)&&u(e)
}function a(e,t){return function(i){var n=CKEDITOR.dom.element.get(i.data.$.toElement||i.data.$.fromElement||i.data.$.relatedTarget);(!n||!t.equals(n)&&!t.contains(n))&&e.call(this,i)}}function r(e){var t,i=e.getRanges()[0],a=e.root,r={table:1,ul:1,ol:1,dl:1};if(i.startPath().contains(r)){var e=function(e){return function(i,a){return a&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(r)&&(t=i),a||!n(i)||e&&l(i)?void 0:!1}},o=i.clone();if(o.collapse(1),o.setStartAt(a,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(o),a.guard=e(),a.checkBackward(),t)return o=i.clone(),o.collapse(),o.setEndAt(t,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(o),a.guard=e(!0),t=!1,a.checkForward(),t
}return null}function o(e){e.editor.focus(),e.editor.fire("saveSnapshot")}function s(e,t){var i=e.editor;!t&&i.getSelection().scrollIntoView(),setTimeout(function(){i.fire("saveSnapshot")},0)}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))return void e.focus();try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())
},on:function(e,t){var i=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=a(t,this),i[0]=e,i[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,i)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1),t=e.on.apply(e,t);return this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(t){}},restoreAttrs:function(){var e,t,i=this._.attrChanges;for(t in i)i.hasOwnProperty(t)&&(e=i[t],null!==e?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");
this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var i=this.getAttribute(e);t!==i&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=i),this.setAttribute(e,t))},insertHtml:function(e,t){o(this),h(this,t||"html",e)},insertText:function(e){o(this);var t=this.editor,i=t.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:t.activeEnterMode,t=i==CKEDITOR.ENTER_BR,n=CKEDITOR.tools,e=n.htmlEncode(e.replace(/\r\n/g,"\n")),e=e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=i==CKEDITOR.ENTER_P?"p":"div";if(!t){var a=/\n{2}/g;if(a.test(e))var r="<"+i+">",s="</"+i+">",e=r+e.replace(a,function(){return s+r
})+s}e=e.replace(/\n/g,"<br>"),t||(e=e.replace(RegExp("<br>(?=</"+i+">)"),function(e){return n.repeat(e,2)})),e=e.replace(/^ | $/g,"&nbsp;"),e=e.replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),h(this,"text",e)},insertElement:function(e,t){t?this.insertElementIntoRange(e,t):this.insertElementIntoSelection(e)},insertElementIntoRange:function(e,t){var i=this.editor,n=i.config.enterMode,a=e.getName(),r=CKEDITOR.dtd.$block[a];if(t.checkReadOnly())return!1;t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&p(t);var o,s;if(r)for(;(o=t.getCommonAncestor(0,1))&&(s=CKEDITOR.dtd[o.getName()])&&(!s||!s[a]);)o.getName()in CKEDITOR.dtd.span?t.splitElement(o):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(o),t.collapse(!0),o.remove()):t.splitBlock(n==CKEDITOR.ENTER_DIV?"div":"p",i.editable());
return t.insertNode(e),!0},insertElementIntoSelection:function(e){var t=this.editor,i=t.activeEnterMode,t=t.getSelection(),a=t.getRanges()[0],r=e.getName(),r=CKEDITOR.dtd.$block[r];o(this),this.insertElementIntoRange(e,a)&&(a.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),r&&((r=e.getNext(function(e){return n(e)&&!l(e)}))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)?r.getDtd()["#"]?a.moveToElementEditStart(r):a.moveToElementEditEnd(e):r||i==CKEDITOR.ENTER_BR||(r=a.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),a.moveToElementEditStart(r)))),t.selectRanges([a]),s(this,CKEDITOR.env.opera)},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.editor.fire("dataReady")
},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable");var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",function(){var t=this.getData();this.is("textarea")||e.config.ignoreEmptyParagraph!==!1&&(t=t.replace(c,function(e,t){return t})),e.setData(t,null,1)},this),this.attachListener(e,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(e,"afterSetData",function(){this.setData(e.getData(1))
},this),this.attachListener(e,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(e,"beforeFocus",function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()},this),this.attachListener(e,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode)},this),this.attachListener(e,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(e,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),this.attachClass(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||e.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",function(e){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?e.cancel():this.hasFocus=!1
},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",function(){e.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var t=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var a=e.config.contentsLangDirection;this.getDirection(1)!=a&&this.changeAttr("dir",a);var o=CKEDITOR.getCss();o&&(a=t.getHead(),a.getCustomData("stylesheet")||(o=t.appendStyleText(o),o=new CKEDITOR.dom.element(o.ownerNode||o.owningElement),a.setCustomData("stylesheet",o),o.data("cke-temp",1))),a=t.getCustomData("stylesheet_ref")||0,t.setCustomData("stylesheet_ref",a+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){var e=e.data,t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");
t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()});var s={8:1,46:1};this.attachListener(e,"key",function(t){if(e.readOnly)return!0;var i,n=t.data.keyCode;if(n in s){var a,o,l,c,t=e.getSelection(),u=t.getRanges()[0],h=u.startPath(),n=8==n;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(a=t.getSelectedElement())||(a=r(t))?(e.fire("saveSnapshot"),u.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),a.remove(),u.select(),e.fire("saveSnapshot"),i=1):u.collapsed&&((o=h.block)&&(c=o[n?"getPrevious":"getNext"](d))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("table")&&u[n?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),u[n?"checkEndOfBlock":"checkStartOfBlock"]()&&o.remove(),u["moveToElementEdit"+(n?"End":"Start")](c),u.select(),e.fire("saveSnapshot"),i=1):h.blockLimit&&h.blockLimit.is("td")&&(l=h.blockLimit.getAscendant("table"))&&u.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(c=l[n?"getPrevious":"getNext"](d))?(e.fire("saveSnapshot"),u["moveToElementEdit"+(n?"End":"Start")](c),u.checkStartOfBlock()&&u.checkEndOfBlock()?c.remove():u.select(),e.fire("saveSnapshot"),i=1):(l=h.contains(["td","th","caption"]))&&u.checkBoundaryOfElement(l,n?CKEDITOR.START:CKEDITOR.END)&&(i=1))
}return!i}),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(t){t.data.getKeystroke()in s&&!this.getFirst(n)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())}),this.attachListener(this,"dblclick",function(t){return e.readOnly?!1:(t={element:t.data.getTarget()},void e.fire("doubleclick",t))}),CKEDITOR.env.ie&&this.attachListener(this,"click",i),!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(t){var i=t.data.getTarget();i.is("img","hr","input","textarea","select")&&(e.getSelection().selectElement(i),i.is("input","textarea","select")&&t.data.preventDefault())
}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(t){if(2==t.data.$.button&&(t=t.data.getTarget(),!t.getOuterHtml().replace(c,""))){var i=e.createRange();i.moveToElementEditStart(t),i.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var e;if(e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();
var t=e.getHead();if(t.getCustomData("stylesheet")){var i=e.getCustomData("stylesheet_ref");--i?e.setCustomData("stylesheet_ref",i):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)};var l=CKEDITOR.dom.walker.bogus(),c=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,d=CKEDITOR.dom.walker.whitespaces(!0),u=CKEDITOR.dom.walker.bookmark(!1,!0);
CKEDITOR.on("instanceLoaded",function(t){var i=t.editor;i.on("insertElement",function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),i.on("selectionChange",function(t){if(!i.readOnly){var n=i.getSelection();n&&!n.isLocked&&(n=i.checkDirty(),i.fire("lockSnapshot"),e(t),i.fire("unlockSnapshot"),!n&&i.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var t=e.editor;t.on("mode",function(){var e=t.editable();if(e&&e.isInline()){var i=t.title;if(e.changeAttr("role","textbox"),e.changeAttr("aria-label",i),i&&e.changeAttr("title",i),i=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var n=CKEDITOR.tools.getNextId(),a=CKEDITOR.dom.element.createFromHtml('<span id="'+n+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");
i.append(a),e.changeAttr("aria-describedby",n)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var h=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(i,n){var a,r,o,s,c=[],d=n.range.startContainer;a=n.range.startPath();for(var d=l[d.getName()],u=0,h=i.getChildren(),p=h.count(),f=-1,m=-1,g=0,v=a.contains(l.$list);p>u;++u)a=h.getItem(u),e(a)?(o=a.getName(),v&&o in CKEDITOR.dtd.$list?c=c.concat(t(a,n)):(s=!!d[o],"br"!=o||!a.data("cke-eol")||u&&u!=p-1||(g=(r=u?c[u-1].node:h.getItem(u+1))&&(!e(r)||!r.is("br")),r=r&&e(r)&&l.$block[r.getName()]),-1==f&&!s&&(f=u),s||(m=u),c.push({isElement:1,isLineBreak:g,isBlock:a.isBlockBoundary(),hasBlockSibling:r,node:a,name:o,allowed:s}),r=g=0)):c.push({isElement:0,node:a,allowed:1});
return f>-1&&(c[f].firstNotAllowed=1),m>-1&&(c[m].lastNotAllowed=1),c}function i(t,n){var a,r=[],o=t.getChildren(),s=o.count(),c=0,d=l[n],u=!t.is(l.$inline)||t.is("br");for(u&&r.push(" ");s>c;c++)a=o.getItem(c),e(a)&&!a.is(d)?r=r.concat(i(a,n)):r.push(a);return u&&r.push(" "),r}function a(t){return t&&e(t)&&(t.is(l.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function r(t,i,n,a){var o,s,l=t.clone();l.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(l).next())&&e(o)&&c[o.getName()]&&(s=o.getPrevious())&&e(s)&&!s.getParent().equals(t.startContainer)&&n.contains(s)&&a.contains(o)&&o.isIdentical(s)&&(o.moveChildren(s),o.remove(),r(t,i,n,a))}function o(t,i){function n(t,i){return i.isBlock&&i.isElement&&!i.node.is("br")&&e(t)&&t.is("br")?(t.remove(),1):void 0
}var a=i.endContainer.getChild(i.endOffset),r=i.endContainer.getChild(i.endOffset-1);a&&n(a,t[t.length-1]),r&&n(r,t[0])&&(i.setEnd(i.endContainer,i.endOffset-1),i.collapse())}var l=CKEDITOR.dtd,c={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},u=CKEDITOR.tools.extend({},l.$inline);return delete u.br,function(c,h,p){var f=c.editor;c.getDocument();var m=f.getSelection().getRanges()[0],g=!1;if("unfiltered_html"==h&&(h="html",g=!0),!m.checkReadOnly()){var v,b,y,C,I=new CKEDITOR.dom.elementPath(m.startContainer,m.root).blockLimit||m.root,h={type:h,dontFilter:g,editable:c,editor:f,range:m,blockLimit:I,mergeCandidates:[],zombies:[]},f=h.range,g=h.mergeCandidates;
if("text"==h.type&&f.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(v=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",f.document),f.insertNode(v),f.setStartAfter(v)),b=new CKEDITOR.dom.elementPath(f.startContainer),h.endPath=y=new CKEDITOR.dom.elementPath(f.endContainer),!f.collapsed){var I=y.block||y.blockLimit,E=f.getCommonAncestor();I&&!I.equals(E)&&!I.contains(E)&&f.checkEndOfBlock()&&h.zombies.push(I),f.deleteContents()}for(;(C=e(f.startContainer)&&f.startContainer.getChild(f.startOffset-1))&&e(C)&&C.isBlockBoundary()&&b.contains(C);)f.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END);for(r(f,h.blockLimit,b,y),v&&(f.setEndBefore(v),f.collapse(),v.remove()),v=f.startPath(),(I=v.contains(a,!1,1))&&(f.splitElement(I),h.inlineStylesRoot=I,h.inlineStylesPeak=v.lastElement),v=f.createBookmark(),(I=v.startNode.getPrevious(n))&&e(I)&&a(I)&&g.push(I),(I=v.startNode.getNext(n))&&e(I)&&a(I)&&g.push(I),I=v.startNode;(I=I.getParent())&&a(I);)g.push(I);
if(f.moveToBookmark(v),v=p){if(v=h.range,"text"==h.type&&h.inlineStylesRoot){for(C=h.inlineStylesPeak,f=C.getDocument().createText("{cke-peak}"),g=h.inlineStylesRoot.getParent();!C.equals(g);)f=f.appendTo(C.clone()),C=C.getParent();p=f.getOuterHtml().split("{cke-peak}").join(p)}if(C=h.blockLimit.getName(),/^\s+|\s+$/.test(p)&&"span"in CKEDITOR.dtd[C])var w='<span data-cke-marker="1">&nbsp;</span>',p=w+p+w;if(p=h.editor.dataProcessor.toHtml(p,{context:null,fixForBody:!1,dontFilter:h.dontFilter,filter:h.editor.activeFilter,enterMode:h.editor.activeEnterMode}),C=v.document.createElement("body"),C.setHtml(p),w&&(C.getFirst().remove(),C.getLast().remove()),(w=v.startPath().block)&&(1!=w.getChildCount()||!w.getBogus()))e:{var x;
if(1==C.getChildCount()&&e(x=C.getFirst())&&x.is(d)){for(w=x.getElementsByTag("*"),v=0,g=w.count();g>v;v++)if(f=w.getItem(v),!f.is(u))break e;x.moveChildren(x.getParent(1)),x.remove()}}h.dataWrapper=C,v=p}if(v){x=h.range;var T,w=x.document,p=h.blockLimit;v=0;var _;C=[];var k,R,D,O,g=f=0;b=x.startContainer;var q,I=h.endPath.elements[0];for(y=I.getPosition(b),E=!(!I.getCommonAncestor(b)||y==CKEDITOR.POSITION_IDENTICAL||y&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),b=t(h.dataWrapper,h),o(b,x);v<b.length;v++){if(y=b[v],T=y.isLineBreak){T=x,D=p;var S=void 0,K=void 0;y.hasBlockSibling?T=1:(S=T.startContainer.getAscendant(l.$block,1),S&&S.is({div:1,p:1})?(K=S.getPosition(D),K==CKEDITOR.POSITION_IDENTICAL||K==CKEDITOR.POSITION_CONTAINS?T=0:(D=T.splitElement(S),T.moveToPosition(D,CKEDITOR.POSITION_AFTER_START),T=1)):T=0)
}if(T)g=v>0;else{if(T=x.startPath(),!y.isBlock&&h.editor.config.autoParagraph!==!1&&h.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&h.editor.editable().equals(T.blockLimit)&&!T.block&&(R=h.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&h.editor.config.autoParagraph!==!1?h.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&(R=w.createElement(R),R.appendBogus(),x.insertNode(R),CKEDITOR.env.needsBrFiller&&(_=R.getBogus())&&_.remove(),x.moveToPosition(R,CKEDITOR.POSITION_BEFORE_END)),(T=x.startPath().block)&&!T.equals(k)&&((_=T.getBogus())&&(_.remove(),C.push(T)),k=T),y.firstNotAllowed&&(f=1),f&&y.isElement){for(T=x.startContainer,D=null;T&&!l[T.getName()][y.name];){if(T.equals(p)){T=null;
break}D=T,T=T.getParent()}if(T)D&&(O=x.splitElement(D),h.zombies.push(O),h.zombies.push(D));else{D=p.getName(),q=!v,T=v==b.length-1,D=i(y.node,D);for(var S=[],K=D.length,A=0,N=void 0,M=0,P=-1;K>A;A++)N=D[A]," "==N?(M||q&&!A||(S.push(new CKEDITOR.dom.text(" ")),P=S.length),M=1):(S.push(N),M=0);T&&P==S.length&&S.pop(),q=S}}if(q){for(;T=q.pop();)x.insertNode(T);q=0}else x.insertNode(y.node);y.lastNotAllowed&&v<b.length-1&&((O=E?I:O)&&x.setEndAt(O,CKEDITOR.POSITION_AFTER_START),f=0),x.collapse()}}h.dontMoveCaret=g,h.bogusNeededBlocks=C}_=h.range;var Q;for(O=h.bogusNeededBlocks,q=_.createBookmark();k=h.zombies.pop();)k.getParent()&&(R=_.clone(),R.moveToElementEditStart(k),R.removeEmptyBlocksAtEnd());
if(O)for(;k=O.pop();)CKEDITOR.env.needsBrFiller?k.appendBogus():k.append(_.document.createText("Â "));for(;k=h.mergeCandidates.pop();)k.mergeSiblings();if(_.moveToBookmark(q),!h.dontMoveCaret){for(k=e(_.startContainer)&&_.startContainer.getChild(_.startOffset-1);k&&e(k)&&!k.is(l.$empty);){if(k.isBlockBoundary())_.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END);else{if(a(k)&&k.getHtml().match(/(\s|&nbsp;)$/g)){Q=null;break}Q=_.clone(),Q.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END)}k=k.getLast(n)}Q&&_.moveToRange(Q)}m.select(),s(c)}}}(),p=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return t?!1:e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0
},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,i){return t=e.getDocument().createElement(t),e.append(t,i),t}function i(e){var t,i=e.count();for(i;i-->0;)t=e.getItem(i),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&t.getChildCount()&&t.getFirst().remove())}return function(n){var a=n.startContainer,r=a.getAscendant("table",1),o=!1;i(r.getElementsByTag("td")),i(r.getElementsByTag("th")),r=n.clone(),r.setStart(a,0),r=e(r).lastBackward(),r||(r=n.clone(),r.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),r=e(r).lastForward(),o=!0),r||(r=a),r.is("table")?(n.setStartAt(r,CKEDITOR.POSITION_BEFORE_START),n.collapse(!0),r.remove()):(r.is({tbody:1,thead:1,tfoot:1})&&(r=t(r,"tr",o)),r.is("tr")&&(r=t(r,r.getParent().is("thead")?"th":"td",o)),(a=r.getBogus())&&a.remove(),n.moveToPosition(r,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))
}}()}(),function(){function e(){var e,t=this._.fakeSelection;t&&(e=this.getSelection(1),e&&e.isHidden()||(t.reset(),t=0)),(t||(t=e||this.getSelection(1),t&&t.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",t),e=this.elementPath(),e.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=e,this.fire("selectionChange",{selection:t,path:e})))}function t(){h=!0,u||(i.call(this),u=CKEDITOR.tools.setTimeout(i,200,this))}function i(){u=null,h&&(CKEDITOR.tools.setTimeout(e,0,this),h=!1)}function n(e){function t(t,i){return t&&t.type!=CKEDITOR.NODE_TEXT?e.clone()["moveToElementEdit"+(i?"End":"Start")](t):!1
}if(!(e.root instanceof CKEDITOR.editable))return!1;var i=e.startContainer,n=e.getPreviousNode(p,null,i),a=e.getNextNode(p,null,i);return!t(n)&&!t(a,1)&&(n||a||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()&&i.getBogus())?!1:!0}function a(e){return e.getCustomData("cke-fillingChar")}function r(e,t){var i=e&&e.removeCustomData("cke-fillingChar");if(i){if(t!==!1){var n,a=e.getDocument().getSelection().getNative(),r=a&&"None"!=a.type&&a.getRangeAt(0);if(i.getLength()>1&&r&&r.intersectsNode(i.$)){n=[a.anchorOffset,a.focusOffset],r=a.focusNode==i.$&&a.focusOffset>0,a.anchorNode==i.$&&a.anchorOffset>0&&n[0]--,r&&n[1]--;var s;r=a,r.isCollapsed||(s=r.getRangeAt(0),s.setStart(r.anchorNode,r.anchorOffset),s.setEnd(r.focusNode,r.focusOffset),s=s.collapsed),s&&n.unshift(n.pop())
}}i.setText(o(i.getText())),n&&(i=a.getRangeAt(0),i.setStart(i.startContainer,n[0]),i.setEnd(i.startContainer,n[1]),a.removeAllRanges(),a.addRange(i))}}function o(e){return e.replace(/\u200B( )?/g,function(e){return e[1]?"Â ":""})}function s(e,t,i){var n=e.on("focus",function(e){e.cancel()},null,null,-100);if(CKEDITOR.env.ie)var a=e.getDocument().on("selectionchange",function(e){e.cancel()},null,null,-100);else{var r=new CKEDITOR.dom.range(e);r.moveToElementEditStart(e);var o=e.getDocument().$.createRange();o.setStart(r.startContainer.$,r.startOffset),o.collapse(1),t.removeAllRanges(),t.addRange(o)}i&&e.focus(),n.removeListener(),a&&a.removeListener()}function l(e){var t=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',e.document);
e.fire("lockSnapshot"),e.editable().append(t);var i=e.getSelection(1),n=e.createRange(),a=i.root.on("selectionchange",function(e){e.cancel()},null,null,0);n.setStartAt(t,CKEDITOR.POSITION_AFTER_START),n.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([n]),a.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=t}function c(e){var t={37:1,39:1,8:1,46:1};return function(i){var n=i.data.getKeystroke();if(t[n]){var a=e.getSelection().getRanges(),r=a[0];1==a.length&&r.collapsed&&(n=r[38>n?"getPreviousEditableNode":"getNextEditableNode"]())&&n.type==CKEDITOR.NODE_ELEMENT&&"false"==n.getAttribute("contenteditable")&&(e.getSelection().fake(n),i.data.preventDefault(),i.cancel())
}}}function d(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.getCommonAncestor().isReadOnly()&&e.splice(t,1),!i.collapsed){if(i.startContainer.isReadOnly())for(var n,a=i.startContainer;a&&!((n=a.type==CKEDITOR.NODE_ELEMENT)&&a.is("body")||!a.isReadOnly());)n&&"false"==a.getAttribute("contentEditable")&&i.setStartAfter(a),a=a.getParent();a=i.startContainer,n=i.endContainer;var r=i.startOffset,o=i.endOffset,s=i.clone();a&&a.type==CKEDITOR.NODE_TEXT&&(r>=a.getLength()?s.setStartAfter(a):s.setStartBefore(a)),n&&n.type==CKEDITOR.NODE_TEXT&&(o?s.setEndAfter(n):s.setEndBefore(n)),a=new CKEDITOR.dom.walker(s),a.evaluator=function(n){if(n.type==CKEDITOR.NODE_ELEMENT&&n.isReadOnly()){var a=i.clone();
return i.setEndBefore(n),i.collapsed&&e.splice(t--,1),n.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(a.setStartAfter(n),a.collapsed||e.splice(t+1,0,a)),!0}return!1},a.next()}}return e}var u,h,p=CKEDITOR.dom.walker.invisible(1),f=function(){function e(e){return function(t){var i=t.editor.createRange();return i.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([i]),!1}}function t(e){return function(t){var i,n=t.editor,a=n.createRange();return(i=a.moveToClosestEditablePosition(t.selected,e))||(i=a.moveToClosestEditablePosition(t.selected,!e)),i&&n.getSelection().selectRanges([a]),n.fire("saveSnapshot"),t.selected.remove(),i||(a.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([a])),n.fire("saveSnapshot"),!1
}}var i=e(),n=e(1);return{37:i,38:i,39:n,40:n,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(i){function n(){var e=a.getSelection();e&&e.removeAllRanges()}var a=i.editor;a.on("contentDom",function(){var i,n,o=a.document,s=CKEDITOR.document,l=a.editable(),d=o.getBody(),u=o.getDocumentElement(),h=l.isInline();if(CKEDITOR.env.gecko&&l.attachListener(l,"focus",function(e){e.removeListener(),0!==i&&(e=a.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==l.$&&(e=a.createRange(),e.moveToElementEditStart(l),e.select())},null,null,-2),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){i&&CKEDITOR.env.webkit&&(i=a._.previousActive&&a._.previousActive.equals(o.getActive())),a.unlockSelection(i),i=0
},null,null,-1),l.attachListener(l,"mousedown",function(){i=0}),CKEDITOR.env.ie||CKEDITOR.env.opera||h){var p=function(){n=new CKEDITOR.dom.selection(a.getSelection()),n.lock()};m?l.attachListener(l,"beforedeactivate",p,null,null,-1):l.attachListener(a,"selectionCheck",p,null,null,-1),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){a.lockSelection(n),i=1},null,null,-1),l.attachListener(l,"mousedown",function(){i=0})}if(CKEDITOR.env.ie&&!h){var f;if(l.attachListener(l,"mousedown",function(e){2==e.data.$.button&&(e=a.document.getSelection(),e&&e.getType()!=CKEDITOR.SELECTION_NONE||(f=a.window.getScrollPosition()))}),l.attachListener(l,"mouseup",function(e){2==e.data.$.button&&f&&(a.document.$.documentElement.scrollLeft=f.x,a.document.$.documentElement.scrollTop=f.y),f=null
}),"BackCompat"!=o.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&u.on("mousedown",function(e){function t(e){if(e=e.data.$,n){var t=d.$.createTextRange();try{t.moveToPoint(e.x,e.y)}catch(i){}n.setEndPoint(r.compareEndPoints("StartToStart",t)<0?"EndToEnd":"StartToStart",t),n.select()}}function i(){u.removeListener("mousemove",t),s.removeListener("mouseup",i),u.removeListener("mouseup",i),n.select()}if(e=e.data,e.getTarget().is("html")&&e.$.y<u.$.clientHeight&&e.$.x<u.$.clientWidth){var n=d.$.createTextRange();try{n.moveToPoint(e.$.x,e.$.y)}catch(a){}var r=n.duplicate();u.on("mousemove",t),s.on("mouseup",i),u.on("mouseup",i)}}),CKEDITOR.env.version>7&&CKEDITOR.env.version<11)){u.on("mousedown",function(e){e.data.getTarget().is("html")&&(s.on("mouseup",g),u.on("mouseup",g))
});var g=function(){s.removeListener("mouseup",g),u.removeListener("mouseup",g);var e=CKEDITOR.document.$.selection,t=e.createRange();"None"!=e.type&&t.parentElement().ownerDocument==o.$&&t.select()}}}if(l.attachListener(l,"selectionchange",e,a),l.attachListener(l,"keyup",t,a),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){a.forceNextSelectionCheck(),a.selectionChange(1)}),h?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera){var v;l.attachListener(l,"mousedown",function(){v=1}),l.attachListener(o.getDocumentElement(),"mouseup",function(){v&&t.call(a),v=0})}else l.attachListener(CKEDITOR.env.ie?l:o.getDocumentElement(),"mouseup",t,a);
CKEDITOR.env.webkit&&l.attachListener(o,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:r(l)}},null,null,-1),l.attachListener(l,"keydown",c(a),null,null,-1)}),a.on("contentDomUnload",a.forceNextSelectionCheck,a),a.on("dataReady",function(){delete a._.fakeSelection,delete a._.hiddenSelectionContainer,a.selectionChange(1)}),a.on("loadSnapshot",function(){var e=a.editable().getLast(function(e){return e.type==CKEDITOR.NODE_ELEMENT});e&&e.hasAttribute("data-cke-hidden-sel")&&e.remove()},null,null,100),CKEDITOR.env.ie9Compat&&a.on("beforeDestroy",n,null,null,9),CKEDITOR.env.webkit&&a.on("setData",n),a.on("contentDomUnload",function(){a.unlockSelection()
}),a.on("key",function(e){if("wysiwyg"==a.mode){var t=a.getSelection();if(t.isFake){var i=f[e.data.keyCode];if(i)return i({editor:a,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.on("instanceReady",function(e){var t=e.editor;if(CKEDITOR.env.webkit){t.on("selectionChange",function(){var e=t.editable(),i=a(e);i&&(i.getCustomData("ready")?r(e):i.setCustomData("ready",1))},null,null,-1),t.on("beforeSetMode",function(){r(t.editable())},null,null,-1);var i,n,e=function(){var e=t.editable();if(e&&(e=a(e))){var r=t.document.$.defaultView.getSelection();"Caret"==r.type&&r.anchorNode==e.$&&(n=1),i=e.getText(),e.setText(o(i))}},s=function(){var e=t.editable();
e&&(e=a(e))&&(e.setText(i),n&&(t.document.$.defaultView.getSelection().setPosition(e.$,e.getLength()),n=0))};t.on("beforeUndoImage",e),t.on("afterUndoImage",s),t.on("beforeGetData",e,null,null,0),t.on("getData",s)}}),CKEDITOR.editor.prototype.selectionChange=function(i){(i?e:t).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE?(!e.isLocked&&e.lock(),this._.savedSelection=e,!0):!1
},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return t?(t.unlock(e),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var m="function"!=typeof window.getSelection,g=1;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection)var t=e,e=e.root;
var i=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:g++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=e=i?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(t=m?this.document.$.selection:this.document.getWindow().$.getSelection(),CKEDITOR.env.webkit)("None"==t.type&&this.document.getActive().equals(e)||"Caret"==t.type&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&s(e,t);else if(CKEDITOR.env.gecko)t&&this.document.getActive().equals(e)&&t.anchorNode&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&s(e,t,!0);
else if(CKEDITOR.env.ie){var n;try{n=this.document.getActive()}catch(a){}m?"None"==t.type&&n&&n.equals(this.document.getDocumentElement())&&s(e,null,!0):((t=t&&t.anchorNode)&&(t=new CKEDITOR.dom.node(t)),n&&n.equals(this.document.getDocumentElement())&&t&&(e.equals(t)||e.contains(t))&&s(e,null,!0))}n=this.getNative();var r,o;if(n)if(n.getRangeAt)r=(o=n.rangeCount&&n.getRangeAt(0))&&new CKEDITOR.dom.node(o.commonAncestorContainer);else{try{o=n.createRange()}catch(l){}r=o&&CKEDITOR.dom.element.get(o.item&&o.item(0)||o.parentElement())}return(!r||r.type!=CKEDITOR.NODE_ELEMENT&&r.type!=CKEDITOR.NODE_TEXT||!this.root.equals(r)&&!this.root.contains(r))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this
};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=m?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:m?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var i=this.getNative(),n=i.type;"Text"==n&&(t=CKEDITOR.SELECTION_TEXT),"Control"==n&&(t=CKEDITOR.SELECTION_ELEMENT),i.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(a){}return e.type=t}:function(){var e=this._.cache;
if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,i=this.getNative();if(i&&i.rangeCount){if(1==i.rangeCount){var i=i.getRangeAt(0),n=i.startContainer;n==i.endContainer&&1==n.nodeType&&i.endOffset-i.startOffset==1&&v[n.childNodes[i.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=m?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,i){t=t.duplicate(),t.collapse(i);var n=t.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var a,r,o,s,l=n.children,c=t.duplicate(),d=0,u=l.length-1,h=-1;u>=d;)if(h=Math.floor((d+u)/2),a=l[h],c.moveToElementText(a),o=c.compareEndPoints("StartToStart",t),o>0)u=h-1;
else{if(!(0>o))return{container:n,offset:e(a)};d=h+1}if(-1==h||h==l.length-1&&0>o){if(c.moveToElementText(n),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=n.childNodes,!c)return a=l[l.length-1],a.nodeType!=CKEDITOR.NODE_TEXT?{container:n,offset:l.length}:{container:a,offset:a.nodeValue.length};for(n=l.length;c>0&&n>0;)r=l[--n],r.nodeType==CKEDITOR.NODE_TEXT&&(s=r,c-=r.nodeValue.length);return{container:s,offset:-c}}if(c.collapse(o>0?!0:!1),c.setEndPoint(o>0?"StartToStart":"EndToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,!c)return{container:n,offset:e(a)+(o>0?0:1)};for(;c>0;)try{r=a[o>0?"previousSibling":"nextSibling"],r.nodeType==CKEDITOR.NODE_TEXT&&(c-=r.nodeValue.length,s=r),a=r
}catch(p){return{container:n,offset:e(a)}}return{container:s,offset:o>0?-c:s.nodeValue.length+c}};return function(){var e=this.getNative(),i=e&&e.createRange(),n=this.getType();if(!e)return[];if(n==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),n=t(i,!0),e.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=t(i),e.setEnd(new CKEDITOR.dom.node(n.container),n.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(n==CKEDITOR.SELECTION_ELEMENT){for(var n=[],a=0;a<i.length;a++){for(var r=i.item(a),o=r.parentNode,s=0,e=new CKEDITOR.dom.range(this.root);s<o.childNodes.length&&o.childNodes[s]!=r;s++);e.setStart(new CKEDITOR.dom.node(o),s),e.setEnd(new CKEDITOR.dom.node(o),s+1),n.push(e)
}return n}return[]}}():function(){var e,t=[],i=this.getNative();if(!i)return t;for(var n=0;n<i.rangeCount;n++){var a=i.getRangeAt(n);e=new CKEDITOR.dom.range(this.root),e.setStart(new CKEDITOR.dom.node(a.startContainer),a.startOffset),e.setEnd(new CKEDITOR.dom.node(a.endContainer),a.endOffset),t.push(e)}return t};return function(t){var i=this._.cache,n=i.ranges;return n||(i.ranges=n=new CKEDITOR.dom.rangeList(e.call(this))),t?d(new CKEDITOR.dom.rangeList(n.slice())):n}}(),getStartElement:function(){var e=this._.cache;if(void 0!==e.startElement)return e.startElement;var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var i=this.getRanges()[0];
if(i){if(i.collapsed)t=i.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(i.optimize();t=i.startContainer,i.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary();)i.setStartAfter(t);if(t=i.startContainer,t.type!=CKEDITOR.NODE_ELEMENT)return t.getParent();if(t=t.getChild(i.startOffset),t&&t.type==CKEDITOR.NODE_ELEMENT)for(i=t.getFirst();i&&i.type==CKEDITOR.NODE_ELEMENT;)t=i,i=i.getFirst();else t=i.startContainer}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,i=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)
},function(){for(var e,i,n=t.getRanges()[0].clone(),a=2;!(!a||(e=n.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&v[e.getName()]&&(i=e));a--)n.shrink(CKEDITOR.SHRINK_ELEMENT);return i&&i.$});return e.selectedElement=i?new CKEDITOR.dom.element(i):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative(),t=m?"Control"==t.type?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),i=!t&&this.getRanges(),n=this.isFake;
this.isLocked=0,this.reset(),e&&(e=t||i[0]&&i[0].getCommonAncestor())&&e.getAscendant("body",1)&&(n?this.fake(t):t?this.selectElement(t):this.selectRanges(i))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection&&this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;t&&(e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot")),delete e._.hiddenSelectionContainer}this.rev=g++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var t=this.root.editor,t=t&&t._.hiddenSelectionContainer;
if(this.reset(),t)for(var i,t=this.root,a=0;a<e.length;++a)i=e[a],i.endContainer.equals(t)&&(i.endOffset=Math.min(i.endOffset,t.getChildCount()));if(e.length)if(this.isLocked){var o=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),!o.equals(this.root)&&o.focus()}else{var s,l,c;if((1!=e.length||(c=e[0]).collapsed||!(s=c.getEnclosedNode())||s.type!=CKEDITOR.NODE_ELEMENT||(c=c.clone(),c.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(l=c.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(s=l),"false"!=s.getAttribute("contenteditable")))&&(s=void 0),s)this.fake(s);else{if(m){c=CKEDITOR.dom.walker.whitespaces(!0),l=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1},e.length>1&&(s=e[e.length-1],e[0].setEnd(s.endContainer,s.endOffset)),s=e[0];
var d,u,h,e=s.collapsed;if((i=s.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in v&&(!i.is("a")||!i.getText()))try{return h=i.$.createControlRange(),h.addElement(i.$),void h.select()}catch(p){}(s.startContainer.type==CKEDITOR.NODE_ELEMENT&&s.startContainer.getName()in t||s.endContainer.type==CKEDITOR.NODE_ELEMENT&&s.endContainer.getName()in t)&&s.shrink(CKEDITOR.NODE_ELEMENT,!0),h=s.createBookmark(),t=h.startNode,e||(o=h.endNode),h=s.document.$.body.createTextRange(),h.moveToElementText(t.$),h.moveStart("character",1),o?(l=s.document.$.body.createTextRange(),l.moveToElementText(o.$),h.setEndPoint("EndToEnd",l),h.moveEnd("character",-1)):(d=t.getNext(c),u=t.hasAscendant("pre"),d=!(d&&d.getText&&d.getText().match(l))&&(u||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),u=s.document.createElement("span"),u.setHtml("&#65279;"),u.insertBefore(t),d&&s.document.createText("").insertBefore(t)),s.setStartBefore(t),t.remove(),e?(d?(h.moveStart("character",-1),h.select(),s.document.$.selection.clear()):h.select(),s.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()):(s.setEndBefore(o),o.remove(),h.select())
}else{if(o=this.getNative(),!o)return;for(CKEDITOR.env.opera&&(h=this.document.$.createRange(),h.selectNodeContents(this.root.$),o.addRange(h)),this.removeAllRanges(),h=0;h<e.length;h++)if(h<e.length-1&&(s=e[h],d=e[h+1],l=s.clone(),l.setStart(s.endContainer,s.endOffset),l.setEnd(d.startContainer,d.startOffset),!l.collapsed&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),u=l.getCommonAncestor(),l=l.getEnclosedNode(),u.isReadOnly()||l&&l.isReadOnly())))d.setStart(s.startContainer,s.startOffset),e.splice(h--,1);else{s=e[h],u=this.document.$.createRange(),d=s.startContainer,CKEDITOR.env.opera&&s.collapsed&&d.type==CKEDITOR.NODE_ELEMENT&&(l=d.getChild(s.startOffset-1),c=d.getChild(s.startOffset),(!l&&!c&&d.is(CKEDITOR.dtd.$removeEmpty)||l&&l.type==CKEDITOR.NODE_ELEMENT||c&&c.type==CKEDITOR.NODE_ELEMENT)&&(s.insertNode(this.document.createText("")),s.collapse(1))),s.collapsed&&CKEDITOR.env.webkit&&n(s)&&(d=this.root,r(d,!1),l=d.getDocument().createText("â"),d.setCustomData("cke-fillingChar",l),s.insertNode(l),(d=l.getNext())&&!l.getPrevious()&&d.type==CKEDITOR.NODE_ELEMENT&&"br"==d.getName()?(r(this.root),s.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START)):s.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),u.setStart(s.startContainer.$,s.startOffset);
try{u.setEnd(s.endContainer.$,s.endOffset)}catch(f){if(!(f.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw f;s.collapse(1),u.setEnd(s.endContainer.$,s.endOffset)}o.addRange(u)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e){var t=this.root.editor;this.reset(),l(t);var i=this._.cache,n=new CKEDITOR.dom.range(this.root);n.setStartBefore(e),n.setEndAfter(e),i.ranges=new CKEDITOR.dom.rangeList(n),i.selectedElement=i.startElement=e,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=g++,t._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))
},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var t=[],i=0;i<e.length;i++){var n=new CKEDITOR.dom.range(this.root);n.moveToBookmark(e[i]),t.push(n)}return e.isFake?this.fake(t[0].getEnclosedNode()):this.selectRanges(t),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();
try{e&&e[m?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),CKEDITOR.editor.prototype.attachStyleStateChange=function(e,t){var i=this._.styleStateChangeCallbacks;i||(i=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<i.length;t++){var n=i[t],a=n.style.checkActive(e.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,a)}})),i.push({style:e,fn:t})},CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var i,n;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))i=e;else if(!n){var a=e.getAttribute("contentEditable");"false"==a?i=e:"true"==a&&(n=1)
}return i}function t(i){var a=i.document;if(i.collapsed)a=g(this,a),i.insertNode(a),i.moveToPosition(a,CKEDITOR.POSITION_BEFORE_END);else{var r,o=this.element,s=this._.definition,l=s.ignoreReadonly,c=l||s.includeReadonly;void 0==c&&(c=i.root.getCustomData("cke_includeReadonly"));var d=CKEDITOR.dtd[o];d||(r=!0,d=CKEDITOR.dtd.span),i.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.trim();var u,h=i.createBookmark(),f=h.startNode,m=h.endNode,v=f;if(!l){var b=i.getCommonAncestor(),l=e(f,b),b=e(m,b);l&&(v=l.getNextSourceNode(!0)),b&&(m=b)}for(v.getPosition(m)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){if(l=!1,v.equals(m))v=null,l=!0;else{var y=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null,b=y&&"false"==v.getAttribute("contentEditable"),C=y&&v.getAttribute("data-nostyle");
if(y&&v.data("cke-bookmark")){v=v.getNextSourceNode(!0);continue}if(b&&c&&CKEDITOR.dtd.$block[y])for(var I=v,E=n(I),w=void 0,x=E.length,T=0,I=x&&new CKEDITOR.dom.range(I.getDocument());x>T;++T){var w=E[T],k=CKEDITOR.filter.instances[w.data("cke-filter")];(k?k.check(this):1)&&(I.selectNodeContents(w),t.call(this,I))}if(E=y?!d[y]||C?0:b&&!c?0:(v.getPosition(m)|R)==R&&(!s.childRule||s.childRule(v)):1){if(!(E=v.getParent())||!(E.getDtd()||CKEDITOR.dtd.span)[o]&&!r||s.parentRule&&!s.parentRule(E))l=!0;else if(u||y&&CKEDITOR.dtd.$removeEmpty[y]&&(v.getPosition(m)|R)!=R||(u=i.clone(),u.setStartBefore(v)),y=v.type,y==CKEDITOR.NODE_TEXT||b||y==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var O,y=v;(l=!y.getNext(_))&&(O=y.getParent(),d[O.getName()])&&(O.getPosition(f)|D)==D&&(!s.childRule||s.childRule(O));)y=O;
u.setEndAfter(y)}}else l=!0;v=v.getNextSourceNode(C||b)}if(l&&u&&!u.collapsed){for(var q,S,K,l=g(this,a),b=l.hasAttributes(),C=u.getCommonAncestor(),y={},E={},w={},x={};l&&C;){if(C.getName()==o){for(q in s.attributes)!x[q]&&(K=C.getAttribute(S))&&(l.getAttribute(q)==K?E[q]=1:x[q]=1);for(S in s.styles)!w[S]&&(K=C.getStyle(S))&&(l.getStyle(S)==K?y[S]=1:w[S]=1)}C=C.getParent()}for(q in E)l.removeAttribute(q);for(S in y)l.removeStyle(S);b&&!l.hasAttributes()&&(l=null),l?(u.extractContents().appendTo(l),u.insertNode(l),p.call(this,l),l.mergeSiblings(),CKEDITOR.env.ie||l.$.normalize()):(l=new CKEDITOR.dom.element("span"),u.extractContents().appendTo(l),u.insertNode(l),p.call(this,l),l.remove(!0)),u=null
}}i.moveToBookmark(h),i.shrink(CKEDITOR.SHRINK_TEXT),i.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function i(e){function t(){for(var e=new CKEDITOR.dom.elementPath(n.getParent()),t=new CKEDITOR.dom.elementPath(c.getParent()),i=null,a=null,r=0;r<e.elements.length;r++){var o=e.elements[r];if(o==e.block||o==e.blockLimit)break;d.checkElementRemovable(o)&&(i=o)}for(r=0;r<t.elements.length&&(o=t.elements[r],o!=t.block&&o!=t.blockLimit);r++)d.checkElementRemovable(o)&&(a=o);a&&c.breakParent(a),i&&n.breakParent(i)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var i=e.createBookmark(),n=i.startNode;if(e.collapsed){for(var a,r,o=new CKEDITOR.dom.elementPath(n.getParent(),e.root),s=0;s<o.elements.length&&(r=o.elements[s])&&(r!=o.block&&r!=o.blockLimit);s++)if(this.checkElementRemovable(r)){var l;
e.collapsed&&(e.checkBoundaryOfElement(r,CKEDITOR.END)||(l=e.checkBoundaryOfElement(r,CKEDITOR.START)))?(a=r,a.match=l?"start":"end"):(r.mergeSiblings(),r.is(this.element)?h.call(this,r):f(r,y(this)[r.getName()]))}if(a){for(r=n,s=0;l=o.elements[s],!l.equals(a);s++)l.match||(l=l.clone(),l.append(r),r=l);r["start"==a.match?"insertBefore":"insertAfter"](a)}}else{var c=i.endNode,d=this;for(t(),o=n;!o.equals(c);)a=o.getNextSourceNode(),o.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(o)&&(o.getName()==this.element?h.call(this,o):f(o,y(this)[o.getName()]),a.type==CKEDITOR.NODE_ELEMENT&&a.contains(n)&&(t(),a=n.getNext())),o=a}e.moveToBookmark(i),e.shrink(CKEDITOR.NODE_ELEMENT,!0)
}function n(e){var t=[];return e.forEach(function(e){return"true"==e.getAttribute("contenteditable")?(t.push(e),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),t}function a(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&v(e,this)}function r(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var t=this._.definition,i=t.attributes;if(i)for(var n in i)e.removeAttribute(n,i[n]);if(t.styles)for(var a in t.styles)t.styles.hasOwnProperty(a)&&e.removeStyle(a)}}function o(e){var t=e.createBookmark(!0),i=e.createIterator();i.enforceRealBlocks=!0,this._.enterMode&&(i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);
for(var n,a,r=e.document;n=i.getNextParagraph();)!n.isReadOnly()&&(i.activeFilter?i.activeFilter.check(this):1)&&(a=g(this,r,n),l(n,a));e.moveToBookmark(t)}function s(e){var t=e.createBookmark(1),i=e.createIterator();i.enforceRealBlocks=!0,i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var n,a;n=i.getNextParagraph();)this.checkElementRemovable(n)&&(n.is("pre")?((a=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&n.copyAttributes(a),l(n,a)):h.call(this,n));e.moveToBookmark(t)}function l(e,t){var i=!t;i&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var n=t&&t.is("pre"),a=e.is("pre"),r=!n&&a;
if(n&&!a){if(a=t,(r=e.getBogus())&&r.remove(),r=e.getHtml(),r=d(r,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),r=r.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),r=r.replace(/([ \t\n\r]+|&nbsp;)/g," "),r=r.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var o=e.getDocument().createElement("div");o.append(a),a.$.outerHTML="<pre>"+r+"</pre>",a.copyAttributes(o.getFirst()),a=o.getFirst().remove()}else a.setHtml(r);t=a}else r?t=u(i?[e.getHtml()]:c(e),t):e.moveChildren(t);if(t.replace(e),n){var s,i=t;(s=i.getPrevious(k))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("pre")&&(n=d(s.getHtml(),/\n$/,"")+"\n\n"+d(i.getHtml(),/^\n/,""),CKEDITOR.env.ie?i.$.outerHTML="<pre>"+n+"</pre>":i.setHtml(n),s.remove())
}else i&&m(t)}function c(e){e.getName();var t=[];return d(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,i){return t+"</pre>"+i+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,i){t.push(i)}),t}function d(e,t,i){var n="",a="",e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,i){return t&&(n=t),i&&(a=i),""});return n+e.replace(t,i)+a}function u(e,t){var i;e.length>1&&(i=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var n=0;n<e.length;n++){var a=e[n],a=a.replace(/(\r\n|\r)/g,"\n"),a=d(a,/^[ \t]*\n/,""),a=d(a,/\n$/,""),a=d(a,/^[ \t]+|[ \t]+$/g,function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "
}),a=a.replace(/\n/g,"<br>"),a=a.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(i){var r=t.clone();r.setHtml(a),i.append(r)}else t.setHtml(a)}return i||t}function h(e,t){var i,n=this._.definition,a=n.attributes,n=n.styles,r=y(this)[e.getName()],o=CKEDITOR.tools.isEmpty(a)&&CKEDITOR.tools.isEmpty(n);for(i in a)("class"==i||this._.definition.fullMatch)&&e.getAttribute(i)!=C(i,a[i])||t&&"data-"==i.slice(0,5)||(o=e.hasAttribute(i),e.removeAttribute(i));for(var s in n)this._.definition.fullMatch&&e.getStyle(s)!=C(s,n[s],!0)||(o=o||!!e.getStyle(s),e.removeStyle(s));f(e,r,E[e.getName()]),o&&(this._.definition.alwaysRemoveElement?m(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?m(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))
}function p(e){for(var t,i=y(this),n=e.getElementsByTag(this.element),a=n.count();--a>=0;)t=n.getItem(a),t.isReadOnly()||h.call(this,t,!0);for(var r in i)if(r!=this.element)for(n=e.getElementsByTag(r),a=n.count()-1;a>=0;a--)t=n.getItem(a),t.isReadOnly()||f(t,i[r])}function f(e,t,i){if(t=t&&t.attributes)for(var n=0;n<t.length;n++){var a,r=t[n][0];if(a=e.getAttribute(r)){var o=t[n][1];(null===o||o.test&&o.test(a)||"string"==typeof o&&a==o)&&e.removeAttribute(r)}}i||m(e)}function m(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var i=e.getPrevious(k),n=e.getNext(k);i&&(i.type==CKEDITOR.NODE_TEXT||!i.isBlockBoundary({br:1}))&&e.append("br",1),n&&(n.type==CKEDITOR.NODE_TEXT||!n.isBlockBoundary({br:1}))&&e.append("br"),e.remove(!0)
}else i=e.getFirst(),n=e.getLast(),e.remove(!0),i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings(),n&&!i.equals(n)&&n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings())}function g(e,t,i){var n;return n=e.element,"*"==n&&(n="span"),n=new CKEDITOR.dom.element(n,t),i&&i.copyAttributes(n),n=v(n,e),t.getCustomData("doc_processing_style")&&n.hasAttribute("id")?n.removeAttribute("id"):t.setCustomData("doc_processing_style",1),n}function v(e,t){var i=t._.definition,n=i.attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var a in n)e.setAttribute(a,n[a]);return i&&e.setAttribute("style",i),e}function b(e,t){for(var i in e)e[i]=e[i].replace(T,function(e,i){return t[i]})
}function y(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},i=e._.definition.overrides;if(i){CKEDITOR.tools.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var a,r,o=i[n];if("string"==typeof o?a=o.toLowerCase():(a=o.element?o.element.toLowerCase():e.element,r=o.attributes),o=t[a]||(t[a]={}),r){var s,o=o.attributes=o.attributes||[];for(s in r)o.push([s.toLowerCase(),r[s]])}}}return t}function C(e,t,i){var n=new CKEDITOR.dom.element("span");return n[i?"setStyle":"setAttribute"](e,t),n[i?"getStyle":"getAttribute"](e)}function I(e,t){for(var i,n=e.document,a=e.getRanges(),r=t?this.removeFromRange:this.applyToRange,o=a.createIterator();i=o.getNextRange();)r.call(this,i);
e.selectRanges(a),n.removeCustomData("doc_processing_style")}var E={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},w={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},x=/\s*(?:;\s*|$)/,T=/#\((.+?)\)/g,_=CKEDITOR.dom.walker.bookmark(0,1),k=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){var i=e.attributes;i&&i.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style),t&&(e=CKEDITOR.tools.clone(e),b(e.attributes,t),b(e.styles,t)),i=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(E[i]?CKEDITOR.STYLE_BLOCK:w[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}
},CKEDITOR.editor.prototype.applyStyle=function(e){e.checkApplicable(this.elementPath())&&I.call(e,this.getSelection())},CKEDITOR.editor.prototype.removeStyle=function(e){e.checkApplicable(this.elementPath())&&I.call(e,this.getSelection(),1)},CKEDITOR.style.prototype={apply:function(e){I.call(this,e.getSelection())},remove:function(e){I.call(this,e.getSelection(),1)},applyToRange:function(e){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?a:null).call(this,e)},removeFromRange:function(e){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?r:null).call(this,e)
},applyToObject:function(e){v(e,this)},checkActive:function(e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var t,i=e.elements,n=0;n<i.length;n++)if(t=i[n],this.type!=CKEDITOR.STYLE_INLINE||t!=e.block&&t!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var a=t.getName();if(!("string"==typeof this.element?a==this.element:a in this.element))continue}if(this.checkElementRemovable(t,!0))return!0}}return!1},checkApplicable:function(e,t){if(t&&!t.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]
}return!0},checkElementMatch:function(e,t){var i=this._.definition;if(!e||!i.ignoreReadonly&&e.isReadOnly())return!1;var n=e.getName();if("string"==typeof this.element?n==this.element:n in this.element){if(!t&&!e.hasAttributes())return!0;if(n=i._AC)i=n;else{var n={},a=0,r=i.attributes;if(r)for(var o in r)a++,n[o]=r[o];(o=CKEDITOR.style.getStyleText(i))&&(n.style||a++,n.style=o),n._length=a,i=i._AC=n}if(!i._length)return!0;for(var s in i)if("_length"!=s){if(a=e.getAttribute(s)||"","style"==s)e:{n=i[s],"string"==typeof n&&(n=CKEDITOR.tools.parseCssText(n)),"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a,!0)),o=void 0;for(o in n)if(!(o in a)||a[o]!=n[o]&&"inherit"!=n[o]&&"inherit"!=a[o]){n=!1;
break e}n=!0}else n=i[s]==a;if(n){if(!t)return!0}else if(t)return!1}if(t)return!0}return!1},checkElementRemovable:function(e,t){if(this.checkElementMatch(e,t))return!0;var i=y(this)[e.getName()];if(i){var n;if(!(i=i.attributes))return!0;for(var a=0;a<i.length;a++)if(n=i[a][0],n=e.getAttribute(n)){var r=i[a][1];if(null===r||"string"==typeof r&&n==r||r.test(n))return!0}}return!1},buildPreview:function(e){var t=this._.definition,i=[],n=t.element;"bdo"==n&&(n="span");var i=["<",n],a=t.attributes;if(a)for(var r in a)i.push(" ",r,'="',a[r],'"');return(a=CKEDITOR.style.getStyleText(t))&&i.push(' style="',a,'"'),i.push(">",e||t.name,"</",n,">"),i.join("")},getDefinition:function(){return this._.definition
}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;var t=e.styles,i=e.attributes&&e.attributes.style||"",n="";i.length&&(i=i.replace(x,";"));for(var a in t){var r=t[a],o=(a+":"+r).replace(x,";");"inherit"==r?n+=o:i+=o}return i.length&&(i=CKEDITOR.tools.normalizeCssText(i,!0)),e._ST=i+n};var R=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,D=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)
},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,i){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,i)},CKEDITOR.editor.prototype.getStylesSet=function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,i=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(i===!1)e(null);else if(i instanceof Array)t._.stylesDefinitions=i,e(i);else{i||(i="default");var i=i.split(":"),n=i[0];CKEDITOR.stylesSet.addExternal(n,i[1]?i.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(n,function(i){t._.stylesDefinitions=i[n],e(t._.stylesDefinitions)
})}}},CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var e,t={},i={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(i[e]=1);CKEDITOR.dom.elementPath=function(e,n){var a,r=null,o=null,s=[],l=e,n=n||e.getDocument().getBody();do if(l.type==CKEDITOR.NODE_ELEMENT){if(s.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;
if(l.equals(n))break;if(!o&&(a=l.getName(),"true"==l.getAttribute("contenteditable")?o=l:!r&&i[a]&&(r=l),t[a])){var c;if(c=!r){if(a="div"==a){e:{a=l.getChildren(),c=0;for(var d=a.count();d>c;c++){var u=a.getItem(c);if(u.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[u.getName()]){a=!0;break e}}a=!1}a=!a}c=a}c?r=l:o=l}}while(l=l.getParent());o||(o=n),this.block=r,this.blockLimit=o,this.root=n,this.elements=s}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements,e=e&&e.elements;if(!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0},contains:function(e,t,i){var n;"string"==typeof e&&(n=function(t){return t.getName()==e
}),e instanceof CKEDITOR.dom.element?n=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?n=function(t){return CKEDITOR.tools.indexOf(e,t.getName())>-1}:"function"==typeof e?n=e:"object"==typeof e&&(n=function(t){return t.getName()in e});var a=this.elements,r=a.length;for(t&&r--,i&&(a=Array.prototype.slice.call(a,0),a.reverse()),t=0;r>t;t++)if(n(a[t]))return a[t];return null},isContextFor:function(e){var t;return e in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e
},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,i=t.childNodes.length,n=this.getLength(),a=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(e),a);return t.childNodes.length==i&&(e>=n?(r=a.createText(""),r.insertAfter(this)):(e=a.createText(""),e.insertAfter(r),e.remove())),r},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,i){var n=e.serializable,a=t[i?"endContainer":"startContainer"],r=i?"endOffset":"startOffset",o=n?t.document.getById(e.startNode):e.startNode,e=n?t.document.getById(e.endNode):e.endNode;
return a.equals(o.getPrevious())?(t.startOffset=t.startOffset-a.getLength()-e.getPrevious().getLength(),a=e.getNext()):a.equals(e.getPrevious())&&(t.startOffset=t.startOffset-a.getLength(),a=e.getNext()),a.equals(o.getParent())&&t[r]++,a.equals(e.getParent())&&t[r]++,t[i?"endContainer":"startContainer"]=a,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,i=CKEDITOR.dom.walker.bookmark(),n=[];return{getNextRange:function(a){e=void 0==e?0:e+1;var r=t[e];if(r&&t.length>1){if(!e)for(var o=t.length-1;o>=0;o--)n.unshift(t[o].createBookmark(!0));
if(a)for(var s=0;t[e+s+1];){for(var l=r.document,a=0,o=l.getById(n[s].endNode),l=l.getById(n[s+1].startNode);;){if(o=o.getNextSourceNode(!1),l.equals(o))a=1;else if(i(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary())continue;break}if(!a)break;s++}for(r.moveToBookmark(n.shift());s--;)o=t[++e],o.moveToBookmark(n.shift()),r.setEnd(o.endContainer,o.endOffset)}return r}}},createBookmarks:function(t){for(var i,n=[],a=0;a<this.length;a++){n.push(i=this[a].createBookmark(t,!0));for(var r=a+1;r<this.length;r++)this[r]=e(i,this[r]),this[r]=e(i,this[r],!0)}return n},createBookmarks2:function(e){for(var t=[],i=0;i<this.length;i++)t.push(this[i].createBookmark2(e));
return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var i=CKEDITOR.skin["ua_"+t],n=CKEDITOR.env;if(i)for(var a,i=i.split(",").sort(function(e,t){return e>t?-1:1}),r=0;r<i.length;r++)if(a=i[r],n.ie&&(a.replace(/^ie/,"")==n.version||n.quirks&&"iequirks"==a)&&(a="ie"),n[a]){t+="_"+i[r];break}return CKEDITOR.getUrl(e()+t+".css")}function i(e,i){r[e]||(CKEDITOR.document.appendStyleSheet(t(e)),r[e]=1),i&&i()}function n(e){var t=e.getById(o);return t||(t=e.getHead().append("style"),t.setAttribute("id",o),t.setAttribute("type","text/css")),t
}function a(e,t,i){var n,a,r;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),a=0;a<t.length;a++)t[a]=t[a].split("{");for(var o=0;o<e.length;o++)if(CKEDITOR.env.webkit)for(a=0;a<t.length;a++){for(r=t[a][1],n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);e[o].$.sheet.addRule(t[a][0],r)}else{for(r=t,n=0;n<i.length;n++)r=r.replace(i[n][0],i[n][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?e[o].$.styleSheet.cssText=e[o].$.styleSheet.cssText+r:e[o].$.innerHTML=e[o].$.innerHTML+r}}var r={};CKEDITOR.skin={path:e,loadPart:function(t,n){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){i(t,n)}):i(t,n)
},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,i,n){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:i||0,bgsize:n||"16px"})},getIconStyle:function(e,t,i,n,a){var r;return e&&(e=e.toLowerCase(),t&&(r=this.icons[e+"-rtl"]),r||(r=this.icons[e])),e=i||r&&r.path||"",n=n||r&&r.offset,a=a||r&&r.bgsize||"16px",e&&"background-image:url("+CKEDITOR.getUrl(e)+");background-position:0 "+n+"px;background-size:"+a+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=n(CKEDITOR.document);return(this.setUiColor=function(e){var i=CKEDITOR.skin.chameleon,n=[[l,e]];
this.uiColor=e,a([t],i(this,"editor"),n),a(s,i(this,"panel"),n)}).call(this,e)}});var o="cke_ui_color",s=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor,e=function(e){if(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!e.getById("cke_ui_color")){e=n(e),s.push(e);var i=t.getUiColor();i&&a([e],CKEDITOR.skin.chameleon(t,"panel"),[[l,i]])}};t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);
e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),i=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=i)}catch(n){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var i=e.match(/[^#]./g),n=0;3>n;n++){var a,r=i,o=n;
a=parseInt(i[n],16),a=("0"+(0>t?0|a*(1+t):0|a+(255-a)*t).toString(16)).slice(-2),r[o]=a}return"#"+i.join("")}}(),t=function(){var e=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,i){return e.output({from:t,to:i})
}}(),i={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(n,a){var r=n.uiColor,r={id:"."+n.id,defaultBorder:e(r,-.1),defaultGradient:t(e(r,.9),r),lightGradient:t(e(r,1),e(r,.7)),mediumGradient:t(e(r,.8),e(r,.5)),ckeButtonOn:t(e(r,.6),e(r,.7)),ckeResizer:e(r,-.4),ckeToolbarSeparator:e(r,.5),ckeColorauto:e(r,.8),dialogBody:e(r,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(r,-.6),elementsPathBg:r,menubuttonIcon:e(r,.5),menubuttonIconHover:e(r,.3)};return i[a].output(r).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,i=function(i,a,r,o){if(o){var o=new CKEDITOR.style(o),s=n[r];s.unshift(o),e.attachStyleStateChange(o,function(t){!e.readOnly&&e.getCommand(r).setState(t)
}),e.addCommand(r,new CKEDITOR.styleCommand(o,{contentForms:s})),e.ui.addButton&&e.ui.addButton(i,{label:a,command:r,toolbar:"basicstyles,"+(t+=10)})}},n={bold:["strong","b",["span",function(e){return e=e.styles["font-weight"],"bold"==e||+e>=700}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},a=e.config,r=e.lang.basicstyles;i("Bold",r.bold,"bold",a.coreStyles_bold),i("Italic",r.italic,"italic",a.coreStyles_italic),i("Underline",r.underline,"underline",a.coreStyles_underline),i("Strike",r.strike,"strike",a.coreStyles_strike),i("Subscript",r.subscript,"subscript",a.coreStyles_subscript),i("Superscript",r.superscript,"superscript",a.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])
}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,i=e.getSelection(),n=i&&i.getRanges()[0];if(n){var a=i.createBookmarks();if(CKEDITOR.env.ie){var r,o=a[0].startNode,s=a[0].endNode;if(o&&"blockquote"==o.getParent().getName())for(r=o;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){o.move(r,!0);
break}if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r);break}}var l=n.createIterator();if(l.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(o=[];t=l.getNextParagraph();)o.push(t);for(o.length<1&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),s=a.shift(),n.insertNode(t),t.append(new CKEDITOR.dom.text("",e.document)),n.moveToBookmark(s),n.selectNodeContents(t),n.collapse(!0),s=n.createBookmark(),o.push(t),a.unshift(s)),r=o[0].getParent(),n=[],s=0;s<o.length;s++)t=o[s],r=r.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[r.getName()];)r=r.getParent();
for(s=null;o.length>0;){for(t=o.shift();!t.getParent().equals(r);)t=t.getParent();t.equals(s)||n.push(t),s=t}for(;n.length>0;)if(t=n.shift(),"blockquote"==t.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)s.append(t.getFirst().remove()),o.push(s.getLast());s.replace(t)}else o.push(t);for(n=e.document.createElement("blockquote"),n.insertBefore(o[0]);o.length>0;)t=o.shift(),n.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(s=[],r={};t=l.getNextParagraph();){for(o=n=null;t.getParent();){if("blockquote"==t.getParent().getName()){n=t.getParent(),o=t;break}t=t.getParent()}n&&o&&!o.getCustomData("blockquote_moveout")&&(s.push(o),CKEDITOR.dom.element.setMarker(r,o,"blockquote_moveout",!0))
}for(CKEDITOR.dom.element.clearAllMarkers(r),t=[],o=[],r={};s.length>0;)l=s.shift(),n=l.getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),o.push(l.getNext())):l.remove().insertAfter(n):l.remove().insertBefore(n),n.getCustomData("blockquote_processed")||(o.push(n),CKEDITOR.dom.element.setMarker(r,n,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),s=o.length-1;s>=0;s--){n=o[s];e:{r=n;for(var l=0,c=r.getChildCount(),d=void 0;c>l&&(d=r.getChild(l));l++)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){r=!1;break e}r=!0}r&&n.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(n=!0;t.length;)if(l=t.shift(),"div"==l.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document),n&&l.getPrevious()&&!(l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary())&&s.append(e.document.createElement("br")),n=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(s);
n&&s.append(e.document.createElement("br")),s.replace(l),n=!1}}i.selectBookmarks(a),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;
for(var t=[this._],i=1;i<arguments.length;i++)t.push(arguments[i]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,i){return new CKEDITOR.ui.dialog.textInput(e,t,i)}},i={build:function(e,t,i){return new CKEDITOR.ui.dialog[t.type](e,t,i)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},a=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})
},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),r=/^on([A-Z]\w+)/,o=function(e){for(var t in e)(r.test(t)||"title"==t||"type"==t)&&delete e[t];return e};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,i,n,a){if(!(arguments.length<4)){var r=e.call(this,i);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[],CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"div",null,{role:"presentation"},function(){var e=[],n=i.required?" cke_required":"";return"horizontal"!=i.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+n+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",i.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',i.controlStyle?' style="'+i.controlStyle+'"':"",' role="radiogroup" aria-labelledby="'+r.labelId+'">',a.call(this,t,i),"</div>"):(n={type:"hbox",widths:i.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+n+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(i.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(i.controlStyle?' style="'+i.controlStyle+'"':"")+">"+a.call(this,t,i)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,n,e)),e.join("")
})}},textInput:function(t,i,n){if(!(arguments.length<3)){e.call(this,i);var a=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",r={"class":"cke_dialog_ui_input_"+i.type,id:a,type:i.type};i.validate&&(this.validate=i.validate),i.maxLength&&(r.maxlength=i.maxLength),i.size&&(r.size=i.size),i.inputStyle&&(r.style=i.inputStyle);var o=this,s=!1;t.on("load",function(){o.getInputElement().on("keydown",function(e){13==e.data.getKeystroke()&&(s=!0)}),o.getInputElement().on("keyup",function(e){13==e.data.getKeystroke()&&s&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),s=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){var e=['<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'];
i.width&&e.push('style="width:'+i.width+'" '),e.push("><input "),r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);for(var t in r)e.push(t+'="'+r[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(t,i,n){if(!(arguments.length<3)){e.call(this,i);var a=this,r=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",o={};i.validate&&(this.validate=i.validate),o.rows=i.rows||5,o.cols=i.cols||20,o["class"]="cke_dialog_ui_input_textarea "+(i["class"]||""),"undefined"!=typeof i.inputStyle&&(o.style=i.inputStyle),i.dir&&(o.dir=i.dir),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required);
var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',r,'" '];for(e in o)t.push(e+'="'+CKEDITOR.tools.htmlEncode(o[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(a._["default"]),"</textarea></div>"),t.join("")})}},checkbox:function(t,i,n){if(!(arguments.length<3)){var a=e.call(this,i,{"default":!!i["default"]});i.validate&&(this.validate=i.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,i,n,"span",null,null,function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),n=[],r=CKEDITOR.tools.getNextId()+"_label",s={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};
return o(e),i["default"]&&(s.checked="checked"),"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),a.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,n,"input",null,s),n.push(' <label id="',r,'" for="',s.id,'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(i.label),"</label>"),n.join("")})}},radio:function(t,i,n){if(!(arguments.length<3)){e.call(this,i),this._["default"]||(this._["default"]=this._.initValue=i.items[0][1]),i.validate&&(this.validate=i.valdiate);var a=[],r=this;CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){for(var e=[],n=[],s=(i.id?i.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<i.items.length;l++){var c=i.items[l],d=void 0!==c[2]?c[2]:c[0],u=void 0!==c[1]?c[1]:c[0],h=CKEDITOR.tools.getNextId()+"_radio_input",p=h+"_label",h=CKEDITOR.tools.extend({},i,{id:h,title:null,type:null},!0),d=CKEDITOR.tools.extend({},h,{title:d},!0),f={type:"radio","class":"cke_dialog_ui_radio_input",name:s,value:u,"aria-labelledby":p},m=[];
r._["default"]==u&&(f.checked="checked"),o(h),o(d),"undefined"!=typeof h.inputStyle&&(h.style=h.inputStyle),h.keyboardFocusable=!0,a.push(new CKEDITOR.ui.dialog.uiElement(t,h,m,"input",null,f)),m.push(" "),new CKEDITOR.ui.dialog.uiElement(t,d,m,"label",null,{id:p,"for":f.id},c[0]),e.push(m.join(""))}return new CKEDITOR.ui.dialog.hbox(t,a,e,n),n.join("")}),this._.children=a}},button:function(t,i,n){if(arguments.length){"function"==typeof i&&(i=i(t.getParentEditor())),e.call(this,i,{disabled:i.disabled||!1}),CKEDITOR.event.implementOn(this);var a=this;t.on("load",function(){var e=this.getElement();!function(){e.on("click",function(e){a.click(),e.data.preventDefault()
}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(a.click(),e.data.preventDefault())})}(),e.unselectable()},this);var r=CKEDITOR.tools.extend({},i);delete r.style;var o=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,r,n,"a",null,{style:i.style,href:"javascript:void(0)",title:i.label,hidefocus:"true","class":i["class"],role:"button","aria-labelledby":o},'<span id="'+o+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(i.label)+"</span>")}},select:function(t,i,n){if(!(arguments.length<3)){var a=e.call(this,i);i.validate&&(this.validate=i.validate),a.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){var e=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),n=[],r=[],s={id:a.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};
n.push('<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'),i.width&&n.push('style="width:'+i.width+'" '),n.push(">"),void 0!=i.size&&(s.size=i.size),void 0!=i.multiple&&(s.multiple=i.multiple),o(e);for(var l,c=0;c<i.items.length&&(l=i.items[c]);c++)r.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),a.select=new CKEDITOR.ui.dialog.uiElement(t,e,n,"select",null,s,r.join("")),n.push("</div>"),n.join("")})}},file:function(t,i,n){if(!(arguments.length<3)){void 0===i["default"]&&(i["default"]="");var a=CKEDITOR.tools.extend(e.call(this,i),{definition:i,buttons:[]});
i.validate&&(this.validate=i.validate),t.on("load",function(){CKEDITOR.document.getById(a.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,t,i,n,function(){a.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',a.frameId,'" title="',i.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(t,i,n){if(!(arguments.length<3)){e.call(this,i);
var a=this;i.validate&&(this.validate=i.validate);var r=CKEDITOR.tools.extend({},i),o=r.onClick;r.className=(r.className?r.className+" ":"")+"cke_dialog_ui_button",r.onClick=function(e){var n=i["for"];o&&o.call(this,e)===!1||(t.getContentElement(n[0],n[1]).submit(),this.disable())},t.on("load",function(){t.getContentElement(i["for"][0],i["for"][1])._.buttons.push(a)}),CKEDITOR.ui.dialog.button.call(this,t,r,n)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,i=/\/$/;return function(n,a,r){if(!(arguments.length<3)){var o=[],s=a.html;"<"!=s.charAt(0)&&(s="<span>"+s+"</span>");var l=a.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")
},a.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,n,a,o,"span",null,null,""),o=o.join("").match(e),s=s.match(t)||["","",""],i.test(s[1])&&(s[1]=s[1].slice(0,-1),s[2]="/"+s[2]),r.push([s[1]," ",o[1]||"",s[2]].join(""))}}}(),fieldset:function(e,t,i,n,a){var r=a.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,a,n,"fieldset",null,null,function(){var e=[];r&&e.push("<legend"+(a.labelStyle?' style="'+a.labelStyle+'"':"")+">"+r+"</legend>");for(var t=0;t<i.length;t++)e.push(i[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);
return t.getChildCount()<1?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||e.getChildCount()<1?"":e.getChild(0).getText()},eventProcessors:a},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()
},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();
t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){return!e&&(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,i){var n=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),a=this.getInputElement().$;return n.$.text=e,n.$.value=void 0===t||null===t?e:t,void 0===i||null===i?CKEDITOR.env.ie?a.add(n.$):a.add(n.$,null):a.add(n.$,i),this
},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;e.length>0;)e.remove(0);return this},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||CKEDITOR.env.version>8?a.onChange.apply(this,arguments):(e.on("load",function(){var e=this._.checkbox.getElement();
e.on("propertychange",function(t){t=t.data.$,"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var i,n=this._.children,a=0;a<n.length&&(i=n[a]);a++)i.getElement().$.checked=i.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();
t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return CKEDITOR.env.ie?(e.on("load",function(){for(var e=this._.children,t=this,i=0;i<e.length;i++)e[i].getElement().on("propertychange",function(e){e=e.data.$,"checked"==e.propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):a.onChange.apply(this,arguments)}}},n,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return e.$.forms.length>0?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()
},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,a=function(e,t,i,n){e.on("formLoaded",function(){e.getInputElement().on(i,n,e)})};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):a(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},reset:function(){function e(){i.$.open();var e="";n.size&&(e=n.size-(CKEDITOR.env.ie?7:0));var c=t.frameId+"_input";for(i.$.write(['<html dir="'+s+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+s+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(n.action),'"><label id="',t.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(n.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(n.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(e>0?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+r+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+o+")}","</script>"].join("")),i.$.close(),e=0;e<a.length;e++)a[e].enable()
}var t=this._,i=CKEDITOR.document.getById(t.frameId).getFrameDocument(),n=t.definition,a=t.buttons,r=this.formLoadedNumber,o=this.formUnloadNumber,s=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;r||(r=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),o=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(r),CKEDITOR.tools.removeFunction(o)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""
},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("textarea",i),CKEDITOR.dialog.addUIElement("checkbox",i),CKEDITOR.dialog.addUIElement("radio",i),CKEDITOR.dialog.addUIElement("button",i),CKEDITOR.dialog.addUIElement("select",i),CKEDITOR.dialog.addUIElement("file",i),CKEDITOR.dialog.addUIElement("fileButton",i),CKEDITOR.dialog.addUIElement("html",i),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,i){for(var n,a=t.children,r=[],o=[],s=0;s<a.length&&(n=a[s]);s++){var l=[];
r.push(l),o.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,o,r,i,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,i=t-1;i>t-e;i--)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),i=t+1;t+e>i;i++)if(this._.tabs[this._.tabIdList[i%e]][0].$.offsetHeight)return this._.tabIdList[i%e];
return null}function i(e,t){for(var i=e.$.getElementsByTagName("input"),n=0,a=i.length;a>n;n++){var r=new CKEDITOR.dom.element(i[n]);"text"==r.getAttribute("type").toLowerCase()&&(t?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function n(e,t){var i=this.getInputElement();i&&(e?i.removeAttribute("aria-invalid"):i.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function a(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function r(e){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",m).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),t=e.getChild([0,0,0,0,0]),i=t.getChild(0),n=t.getChild(1);
if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+a+'" tabIndex="-1"></iframe>').appendTo(t.getParent())}return i.unselectable(),n.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:i,close:n,tabs:t.getChild(2),contents:t.getChild([3,0,0,0]),footer:t.getChild([3,0,1,0])}}}function o(e,t,i){this.element=t,this.focusIndex=i,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()
},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function s(e){function t(){e.layout()}var i=CKEDITOR.document.getWindow();i.on("resize",t),e.on("hide",function(){i.removeListener("resize",t)})}function l(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function c(e){function t(t){var i=e.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),c=t.data.$.screenX,d=t.data.$.screenY,u=c-n.x,h=d-n.y;n={x:c,y:d},a.x=a.x+u,a.y=a.y+h,e.move(a.x+s[3]<o?-s[3]:a.x-s[1]>l.width-i.width-o?l.width-i.width+("rtl"==r.lang.dir?0:s[1]):a.x,a.y+s[0]<o?-s[0]:a.y-s[2]>l.height-i.height-o?l.height-i.height+s[2]:a.y,1),t.data.preventDefault()
}function i(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.env.ie6Compat){var e=E.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",i)}}var n=null,a=null;e.getElement().getFirst();var r=e.getParentEditor(),o=r.config.dialog_magnetDistance,s=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof o&&(o=20),e.parts.title.on("mousedown",function(r){if(n={x:r.data.$.screenX,y:r.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),a=e.getPosition(),CKEDITOR.env.ie6Compat){var o=E.getChild(0).getFrameDocument();o.on("mousemove",t),o.on("mouseup",i)
}r.data.preventDefault()},e)}function d(e){function t(t){var i="rtl"==h.lang.dir,u=d.width,p=d.height,f=u+(t.data.$.screenX-n)*(i?-1:1)*(e._.moved?1:2),m=p+(t.data.$.screenY-a)*(e._.moved?1:2),g=e._.element.getFirst(),g=i&&g.getComputedStyle("right"),v=e.getPosition();v.y+m>c.height&&(m=c.height-v.y),(i?g:v.x)+f>c.width&&(f=c.width-(i?g:v.x)),(o==CKEDITOR.DIALOG_RESIZE_WIDTH||o==CKEDITOR.DIALOG_RESIZE_BOTH)&&(u=Math.max(r.minWidth||0,f-s)),(o==CKEDITOR.DIALOG_RESIZE_HEIGHT||o==CKEDITOR.DIALOG_RESIZE_BOTH)&&(p=Math.max(r.minHeight||0,m-l)),e.resize(u,p),e._.moved||e.layout(),t.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",t),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var e=E.getChild(0).getFrameDocument();
e.removeListener("mouseup",i),e.removeListener("mousemove",t)}}var n,a,r=e.definition,o=r.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var s,l,c,d,u,h=e.getParentEditor(),p=CKEDITOR.tools.addFunction(function(r){d=e.getSize();var o=e.parts.contents;o.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),o.append(u)),l=d.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),s=d.width-e.parts.contents.getSize("width",1),n=r.screenX,a=r.screenY,c=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&(o=E.getChild(0).getFrameDocument(),o.on("mousemove",t),o.on("mouseup",i)),r.preventDefault&&r.preventDefault()
});e.on("load",function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+h.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(h.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event )">'+("ltr"==h.lang.dir?"â¢":"â£")+"</div>"),e.parts.footer.append(t,1)}),h.on("destroy",function(){CKEDITOR.tools.removeFunction(p)})}}function u(e){e.data.preventDefault(1)}function h(e){var t=CKEDITOR.document.getWindow(),i=e.config,n=i.dialog_backgroundCoverColor||"white",a=i.dialog_backgroundCoverOpacity,r=i.baseFloatZIndex,i=CKEDITOR.tools.genKey(n,a,r),o=w[i];
o?o.show():(r=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",r,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+n,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(n="<html><body style=\\'background-color:"+n+";\\'></body></html>",r.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),r.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+n+"' );document.close();")+"})())"),r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),r.push("</div>"),o=CKEDITOR.dom.element.createFromHtml(r.join("")),o.setOpacity(void 0!=a?a:.5),o.on("keydown",u),o.on("keypress",u),o.on("keyup",u),o.appendTo(CKEDITOR.document.getBody()),w[i]=o),e.focusManager.add(o),E=o;
var e=function(){var e=t.getViewPaneSize();o.setStyles({width:e.width+"px",height:e.height+"px"})},s=function(){var e=t.getScrollPosition(),i=CKEDITOR.dialog._.currentTop;if(o.setStyles({left:e.x+"px",top:e.y+"px"}),i)do e=i.getPosition(),i.move(e.x,e.y);while(i=i._.parentDialog)};if(I=e,t.on("resize",e),e(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&o.focus(),CKEDITOR.env.ie6Compat){var l=function(){s(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l},0),s()}}function p(e){E&&(e.focusManager.remove(E),e=CKEDITOR.document.getWindow(),E.hide(),e.removeListener("resize",I),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null
},0),I=null)}var f=CKEDITOR.tools.cssLength,m='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';
CKEDITOR.dialog=function(i,o){function s(){var e=w._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,i=0;t>i;i++)e[i].focusIndex=i}function l(e){var t=w._.focusList,e=e||0;if(!(t.length<1)){var i=w._.currentFocusIndex;try{t[i].getInputElement().$.blur()}catch(n){}for(var a=i=(i+e+t.length)%t.length;e&&!t[a].isFocusable()&&(a=(a+e+t.length)%t.length,a!=i););t[a].focus(),"text"==t[a].type&&t[a].select()}}function u(n){if(w==CKEDITOR.dialog._.currentTop){var a=n.data.getKeystroke(),r="rtl"==i.lang.dir;if(p=f=0,9==a||a==CKEDITOR.SHIFT+9)a=a==CKEDITOR.SHIFT+9,w._.tabBarMode?(a=a?e.call(w):t.call(w),w.selectPage(a),w._.tabs[a][0].focus()):l(a?-1:1),p=1;
else if(a==CKEDITOR.ALT+121&&!w._.tabBarMode&&w.getPageCount()>1)w._.tabBarMode=!0,w._.tabs[w._.currentTabId][0].focus(),p=1;else if(37!=a&&39!=a||!w._.tabBarMode)if(13!=a&&32!=a||!w._.tabBarMode)if(13==a)a=n.data.getTarget(),a.is("a","button","select","textarea")||a.is("input")&&"button"==a.$.type||((a=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(a.click,0,a),p=1),f=1;else{if(27!=a)return;(a=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(a.click,0,a):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),f=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),p=1;else a=a==(r?39:37)?e.call(w):t.call(w),w.selectPage(a),w._.tabs[a][0].focus(),p=1;
h(n)}}function h(e){p?e.data.preventDefault(1):f&&e.data.stopPropagation()}var p,f,m=CKEDITOR.dialog._.dialogDefinitions[o],v=CKEDITOR.tools.clone(g),b=i.config.dialog_buttonsOrder||"OS",y=i.lang.dir,I={};if(("OS"==b&&CKEDITOR.env.mac||"rtl"==b&&"ltr"==y||"ltr"==b&&"rtl"==y)&&v.buttons.reverse(),m=CKEDITOR.tools.extend(m(i),v),m=CKEDITOR.tools.clone(m),m=new C(this,m),v=r(i),this._={editor:i,element:v.element,name:o,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=v.parts,CKEDITOR.tools.setTimeout(function(){i.fire("ariaWidget",this.parts.contents)
},0,this),v={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},v["rtl"==y?"right":"left"]=0,this.parts.dialog.setStyles(v),CKEDITOR.event.call(this),this.definition=m=CKEDITOR.fire("dialogDefinition",{name:o,definition:m},i).definition,!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){for(v=i.config.removeDialogTabs.split(";"),y=0;y<v.length;y++)if(b=v[y].split(":"),2==b.length){var E=b[0];I[E]||(I[E]=[]),I[E].push(b[1])}i._.removeDialogTabs=I}if(i._.removeDialogTabs&&(I=i._.removeDialogTabs[o]))for(y=0;y<I.length;y++)m.removeContents(I[y]);m.onLoad&&this.on("load",m.onLoad),m.onShow&&this.on("show",m.onShow),m.onHide&&this.on("hide",m.onHide),m.onOk&&this.on("ok",function(e){i.fire("saveSnapshot"),setTimeout(function(){i.fire("saveSnapshot")
},0),m.onOk.call(this,e)===!1&&(e.data.hide=!1)}),m.onCancel&&this.on("cancel",function(e){m.onCancel.call(this,e)===!1&&(e.data.hide=!1)});var w=this,x=function(e){var t,i=w._.contents,n=!1;for(t in i)for(var a in i[t])if(n=e.call(this,i[t][a]))return};this.on("ok",function(e){x(function(t){if(t.validate){var i=t.validate(this),a="string"==typeof i||i===!1;return a&&(e.data.hide=!1,e.stop()),n.call(t,!a,"string"==typeof i?i:void 0),a}})},this,null,0),this.on("cancel",function(e){x(function(t){return t.isChanged()?(i.config.dialog_noConfirmCancel||confirm(i.lang.common.confirmCancel)||(e.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(e){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),e.data.preventDefault()
},this),this.changeFocus=l;var T=this._.element;for(i.focusManager.add(T,1),this.on("show",function(){T.on("keydown",u,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&T.on("keypress",h,this)}),this.on("hide",function(){T.removeListener("keydown",u),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&T.removeListener("keypress",h),x(function(e){a.apply(e)})}),this.on("iframeAdded",function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",u,this,null,0)}),this.on("show",function(){if(s(),i.config.dialog_startupFocusTab&&w._.pageCount>1)w._.tabBarMode=!0,w._.tabs[w._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,m.onFocus){var e=m.onFocus.call(this);
e&&e.focus()}else l(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),c(this),d(this),new CKEDITOR.dom.text(m.title,CKEDITOR.document).appendTo(this.parts.title),y=0;y<m.contents.length;y++)(I=m.contents[y])&&this.addPage(I);for(this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),e.data.preventDefault())},this),y=[],I=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:m.buttons},y).getChild(),this.parts.footer.setHtml(y.join("")),y=0;y<I.length;y++)this._.buttons[I[y].id]=I[y]
},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})}}(),getSize:function(){var e=this._.element.getFirst();
return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,i){var n=this._.element.getFirst(),a="rtl"==this._.editor.lang.dir,r="fixed"==n.getComputedStyle("position");CKEDITOR.env.ie&&n.setStyle("zoom","100%"),r&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},r||(r=CKEDITOR.document.getWindow().getScrollPosition(),e+=r.x,t+=r.y),a&&(r=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-r.width-e),t={top:(t>0?t:0)+"px"},t[a?"right":"left"]=(e>0?e:0)+"px",n.setStyles(t),i&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;
if(e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var i=this.parts.dialog;i.setStyle("position","absolute"),setTimeout(function(){i.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,h(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",T),e.on(CKEDITOR.env.opera?"keypress":"keyup",_),this._.hasFocus=!1;
for(var n in t.contents)if(t.contents[n]){var e=t.contents[n],a=this._.tabs[e.id],r=e.requiredContent,o=0;if(a){for(var l in this._.contents[e.id]){var c=this._.contents[e.id][l];"hbox"!=c.type&&"vbox"!=c.type&&c.getInputElement()&&(c.requiredContent&&!this._.editor.activeFilter.check(c.requiredContent)?c.disable():(c.enable(),o++))}!o||r&&!this._.editor.activeFilter.check(r)?a[0].addClass("cke_dialog_tab_disabled"):a[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),s(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()
})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),n=(i.width-t.width)/2,a=(i.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(a>0?a:0)>i.height||t.width+(n>0?n:0)>i.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:n,this._.moved?this._.position.y:a)},foreach:function(e){for(var t in this._.contents)for(var i in this._.contents[t])e.call(this,this._.contents[t][i]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;
this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),R(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))
}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",T),e.removeListener(CKEDITOR.env.opera?"keypress":"keyup",_);var i=this._.editor;i.focus(),setTimeout(function(){i.focusManager.unlock()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()})}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],i=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",n=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),a=this._.contents[e.id]={},r=n.getChild(),o=0;n=r.shift();)!n.notAllowed&&"hbox"!=n.type&&"vbox"!=n.type&&o++,a[n.id]=n,"function"==typeof n.getChild&&r.push.apply(r,n.getChild());
o||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),n=CKEDITOR.env,a="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),i=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",i,e.hidden?' style="display:none"':"",' id="',a,'"',n.gecko&&n.version>=10900&&!n.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",a),this._.tabs[e.id]=[i,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=i,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),i.unselectable(),this.parts.tabs.append(i),e.accessKey&&(k(this,this,"CTRL+"+e.accessKey,O,D),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)
}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:e,currentPage:this._.currentTabId})!==!1){for(var t in this._.tabs){var n=this._.tabs[t][0],a=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),a.hide()),a.setAttribute("aria-hidden",t!=e)}var r=this._.tabs[e];r[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(i(r[1]),r[1].show(),setTimeout(function(){i(r[1],1)},0)):r[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")
},hidePage:function(t){var i=this._.tabs[t]&&this._.tabs[t][0];i&&1!=this._.pageCount&&i.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),i.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var i=this._.contents[e];return i&&i[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,i){return this.getContentElement(e,t).setValue(i)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()
},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if("undefined"==typeof t)t=this._.focusList.length,this._.focusList.push(new o(this,e,t));else{this._.focusList.splice(t,0,new o(this,e,t));for(var i=t+1;i<this._.focusList.length;i++)this._.focusList[i].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)
},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,i){return e=e.config.removeDialogTabs,!(e&&e.match(RegExp("(?:^|;)"+t+":"+i+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,e.fire("ok",{hide:!0}).hide!==!1&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(i){return e(i,t)},{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,e.fire("cancel",{hide:!0}).hide!==!1&&e.hide()
}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend(function(i){return e(i,t)},{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},v=function(e,t,i){for(var n,a=0;n=e[a];a++){if(n.id==t)return n;if(i&&n[i]&&(n=v(n[i],t,i)))return n}return null},b=function(e,t,i,n,a){if(i){for(var r,o=0;r=e[o];o++){if(r.id==i)return e.splice(o,0,t),t;
if(n&&r[n]&&(r=b(r[n],t,i,n,!0)))return r}if(a)return null}return e.push(t),t},y=function(e,t,i){for(var n,a=0;n=e[a];a++){if(n.id==t)return e.splice(a,1);if(i&&n[i]&&(n=y(n[i],t,i)))return n}return null},C=function(e,t){this.dialog=e;for(var i,n=t.contents,a=0;i=n[a];a++)n[a]=i&&new l(e,i);CKEDITOR.tools.extend(this,t)};C.prototype={getContents:function(e){return v(this.contents,e)},getButton:function(e){return v(this.buttons,e)},addContents:function(e,t){return b(this.contents,e,t)},addButton:function(e,t){return b(this.buttons,e,t)},removeContents:function(e){y(this.contents,e)},removeButton:function(e){y(this.buttons,e)}},l.prototype={get:function(e){return v(this.elements,e,"children")
},add:function(e,t){return b(this.elements,e,t,"children")},remove:function(e){y(this.elements,e,"children")}};var I,E,w={},x={},T=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,a=String.fromCharCode(e.data.$.keyCode);(t=x[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+a])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},_=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,n=e.data.$.shiftKey,a=String.fromCharCode(e.data.$.keyCode);(t=x[(t?"CTRL+":"")+(i?"ALT+":"")+(n?"SHIFT+":"")+a])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))
},k=function(e,t,i,n,a){(x[i]||(x[i]=[])).push({uiElement:e,dialog:t,key:i,keyup:a||e.accessKeyUp,keydown:n||e.accessKeyDown})},R=function(e){for(var t in x){for(var i=x[t],n=i.length-1;n>=0;n--)(i[n].dialog==e||i[n].uiElement==e)&&i.splice(n,1);0===i.length&&delete x[t]}},D=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},O=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(e,t,i,n,a,r,o){if(!(arguments.length<4)){var s=(n.call?n(t):n)||"div",l=["<",s," "],c=(a&&a.call?a(t):a)||{},d=(r&&r.call?r(t):r)||{},u=(o&&o.call?o.call(this,e,t):o)||"",h=this.domId=d.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=t.id,t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(c.display="none",this.notAllowed=!0),d.id=h;
var p={};t.type&&(p["cke_dialog_ui_"+t.type]=1),t.className&&(p[t.className]=1),t.disabled&&(p.cke_disabled=1);for(var f=d["class"]&&d["class"].split?d["class"].split(" "):[],h=0;h<f.length;h++)f[h]&&(p[f[h]]=1);f=[];for(h in p)f.push(h);d["class"]=f.join(" "),t.title&&(d.title=t.title),p=(t.style||"").split(";"),t.align&&(f=t.align,c["margin-left"]="left"==f?0:"auto",c["margin-right"]="right"==f?0:"auto");for(h in c)p.push(h+":"+c[h]);for(t.hidden&&p.push("display:none"),h=p.length-1;h>=0;h--)""===p[h]&&p.splice(h,1);p.length>0&&(d.style=(d.style?d.style+"; ":"")+p.join("; "));for(h in d)l.push(h+'="'+CKEDITOR.tools.htmlEncode(d[h])+'" ');l.push(">",u,"</",s,">"),i.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged
}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(i){e.call(this,t.setValue.call(this,i))}})),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&k(this,e,"CTRL+"+t.accessKey);var m=this;e.on("load",function(){var t=m.getInputElement();if(t){var i=m.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";
t.on("focus",function(){e._.tabBarMode=!1,e._.hasFocus=!0,m.fire("focus"),i&&this.addClass(i)}),t.on("blur",function(){m.fire("blur"),i&&this.removeClass(i)})}}),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",function(){e._.currentFocusIndex=m.focusIndex}))}},hbox:function(e,t,i,n,a){if(!(arguments.length<4)){this._||(this._={});var r,o=this._.children=t,s=a&&a.widths||null,l=a&&a.height||null,c={role:"presentation"};a&&a.align&&(c.align=a.align),CKEDITOR.ui.dialog.uiElement.call(this,e,a||{type:"hbox"},n,"table",{},c,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];
for(r=0;r<i.length;r++){var t="cke_dialog_ui_hbox_child",n=[];0===r&&(t="cke_dialog_ui_hbox_first"),r==i.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),s?s[r]&&n.push("width:"+f(s[r])):n.push("width:"+Math.floor(100/i.length)+"%"),l&&n.push("height:"+f(l)),a&&void 0!=a.padding&&n.push("padding:"+f(a.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&o[r].align&&n.push("text-align:"+o[r].align),n.length>0&&e.push('style="'+n.join("; ")+'" '),e.push(">",i[r],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(e,t,i,n,a){if(!(arguments.length<3)){this._||(this._={});var r=this._.children=t,o=a&&a.width||null,s=a&&a.heights||null;
CKEDITOR.ui.dialog.uiElement.call(this,e,a||{type:"vbox"},n,"div",null,{role:"presentation"},function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),a&&a.expand&&t.push("height:100%;"),t.push("width:"+f(o||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(a&&a.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var n=0;n<i.length;n++){var l=[];t.push('<tr><td role="presentation" '),o&&l.push("width:"+f(o||"100%")),s?l.push("height:"+f(s[n])):a&&a.expand&&l.push("height:"+Math.floor(100/i.length)+"%"),a&&void 0!=a.padding&&l.push("padding:"+f(a.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[n].align&&l.push("text-align:"+r[n].align),l.length>0&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',i[n],"</td></tr>")
}return t.push("</tbody></table>"),t.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this
},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,i,n=/^on([A-Z]\w+)/,a=function(e,t,i,n){t.on("load",function(){e.getInputElement().on(i,n,e)})};for(i in e)(t=i.match(n))&&(this.eventProcessors[i]?this.eventProcessors[i].call(this,this._.dialog,e[i]):a(this,this._.dialog,t[1].toLowerCase(),e[i]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")
},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return arguments.length<1?this._.children.concat():(e.splice||(e=[e]),e.length<2?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,i){for(var n,a=t.children,r=[],o=[],s=0;s<a.length&&(n=a[s]);s++){var l=[];
r.push(l),o.push(CKEDITOR.dialog._.uiElementBuilders[n.type].build(e,n,l))}return new CKEDITOR.ui.dialog[t.type](e,o,r,i,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){e.openDialog(this.dialogName)},0,this):e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,i=/^\d*(?:\.\d+)?$/,n=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,a=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,r=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;
CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,i=this&&this.getValue?this.getValue():e[0],n=void 0,a=CKEDITOR.VALIDATE_AND,r=[];for(t=0;t<e.length&&"function"==typeof e[t];t++)r.push(e[t]);t<e.length&&"string"==typeof e[t]&&(n=e[t],t++),t<e.length&&"number"==typeof e[t]&&(a=e[t]);var o=a==CKEDITOR.VALIDATE_AND?!0:!1;for(t=0;t<r.length;t++)o=a==CKEDITOR.VALIDATE_AND?o&&r[t](i):o||r[t](i);return o?!0:n}},regex:function(e,t){return function(i){return i=this&&this.getValue?this.getValue():i,e.test(i)?!0:t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)
},number:function(e){return this.regex(i,e)},cssLength:function(e){return this.functions(function(e){return a.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return n.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return r.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var i in w)w[i].remove();w={}
}var n,e=e.editor._.storedDialogs;for(n in e)e[n].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var i=null,n=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&h(this),"function"==typeof n)i=this._.storedDialogs||(this._.storedDialogs={}),i=i[e]||(i[e]=new CKEDITOR.dialog(this,e)),t&&t.call(i,i),i.show();else{if("failed"==n)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof n&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)
},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}}),function(){function e(e){function t(){var t=e.editable();t.on(b,function(e){(!CKEDITOR.env.ie||!m)&&h(e)}),CKEDITOR.env.ie&&t.on("paste",function(t){g||(a(),t.data.preventDefault(),h(t),o("paste")||e.openDialog("paste"))}),CKEDITOR.env.ie&&(t.on("contextmenu",r,null,null,0),t.on("beforepaste",function(e){e.data&&!e.data.$.ctrlKey&&r()},null,null,0)),t.on("beforecut",function(){!m&&l(e)});var i;t.attachListener(CKEDITOR.env.ie?t:e.document.getDocumentElement(),"mouseup",function(){i=setTimeout(function(){p()
},0)}),e.on("destroy",function(){clearTimeout(i)}),t.on("keyup",p)}function i(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,exec:function(){"cut"==this.type&&l();var t,i=this.type;if(CKEDITOR.env.ie)t=o(i);else try{t=e.document.$.execCommand(i,!1,null)}catch(n){t=!1}return t||alert(e.lang.clipboard[this.type+"Error"]),t}}}function n(){return{canUndo:!1,async:!0,exec:function(e,t){var i=function(t,i){t&&s(t.type,t.dataValue,!!i),e.fire("afterCommandExec",{name:"paste",command:n,returnValue:!!t})},n=this;"string"==typeof t?i({type:"auto",dataValue:t},1):e.getClipboardData(i)}}}function a(){g=1,setTimeout(function(){g=0},100)}function r(){m=1,setTimeout(function(){m=0
},10)}function o(t){var i=e.document,n=i.getBody(),a=!1,r=function(){a=!0};return n.on(t,r),(CKEDITOR.env.version>7?i.$:i.$.selection.createRange()).execCommand(t),n.removeListener(t,r),a}function s(t,i,n){return t={type:t},n&&e.fire("beforePaste",t)===!1||!i?!1:(t.dataValue=i,e.fire("paste",t))}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t,i,n,a=e.getSelection();a.getType()==CKEDITOR.SELECTION_ELEMENT&&(t=a.getSelectedElement())&&(i=a.getRanges()[0],n=e.document.createText(""),n.insertBefore(t),i.setStartBefore(n),i.setEndAfter(t),a.selectRanges([i]),setTimeout(function(){t.getParent()&&(n.remove(),a.selectElement(t))},0))}}function c(t,i){var n,a=e.document,r=e.editable(),o=function(e){e.cancel()
},s=CKEDITOR.env.gecko&&CKEDITOR.env.version<=10902;if(!a.getById("cke_pastebin")){var l=e.getSelection(),c=l.createBookmarks(),d=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!r.is("body")||CKEDITOR.env.ie||CKEDITOR.env.opera?"div":"body",a);d.setAttributes({id:"cke_pastebin","data-cke-temp":"1"}),CKEDITOR.env.opera&&d.appendBogus();var u=0,a=a.getWindow();s?(d.insertAfter(c[0].startNode),d.setStyle("display","inline")):(CKEDITOR.env.webkit?(r.append(d),d.addClass("cke_editable"),r.is("body")||(s="static"!=r.getComputedStyle("position")?r:CKEDITOR.dom.element.get(r.$.offsetParent),u=s.getDocumentPosition().y)):r.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(d),d.setStyles({position:"absolute",top:a.getScrollPosition().y-u+10+"px",width:"1px",height:Math.max(1,a.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0})),(s=d.getParent().isReadOnly())?(d.setOpacity(0),d.setAttribute("contenteditable",!0)):d.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-1000px"),e.on("selectionChange",o,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=r.once("blur",o,null,null,-100)),s&&d.focus(),s=new CKEDITOR.dom.range(d),s.selectNodeContents(d);
var h=s.select();CKEDITOR.env.ie&&(n=r.once("blur",function(){e.lockSelection(h)}));var p=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=p),n&&n.removeListener(),CKEDITOR.env.ie&&r.focus(),l.selectBookmarks(c),d.remove();var t;CKEDITOR.env.webkit&&(t=d.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(d=t),e.removeListener("selectionChange",o),i(d.getHtml())},0)}}function d(){if(CKEDITOR.env.ie){e.focus(),a();var t=e.focusManager;if(t.lock(),e.editable().fire(b)&&!o("paste"))return t.unlock(),!1;t.unlock()
}else try{if(e.editable().fire(b)&&!e.document.$.execCommand("Paste",!1,null))throw 0}catch(i){return!1}return!0}function u(t){if("wysiwyg"==e.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=e.editable(),a(),!CKEDITOR.env.ie&&t.fire("beforepaste"),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&t.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}function h(t){var i={type:"auto"},n=e.fire("beforePaste",i);c(t,function(e){e=e.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),n&&s(i.type,e,0,1)})}function p(){if("wysiwyg"==e.mode){var t=f("paste");
e.getCommand("cut").setState(f("cut")),e.getCommand("copy").setState(f("copy")),e.getCommand("paste").setState(t),e.fire("pasteState",t)}}function f(t){if(v&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;var t=e.getSelection(),i=t.getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==i.length&&i[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var m=0,g=0,v=0,b=CKEDITOR.env.ie?"beforepaste":"paste";!function(){e.on("key",u),e.on("contentDom",t),e.on("selectionChange",function(e){v=e.data.selection.getRanges()[0].checkReadOnly(),p()}),e.contextMenu&&e.contextMenu.addListener(function(e,t){return v=t.getRanges()[0].checkReadOnly(),{cut:f("cut"),copy:f("copy"),paste:f("paste")}
})}(),function(){function t(t,i,n,a,r){var o=e.lang.clipboard[i];e.addCommand(i,n),e.ui.addButton&&e.ui.addButton(t,{label:o,command:i,toolbar:"clipboard,"+a}),e.addMenuItems&&e.addMenuItem(i,{label:o,command:i,group:"clipboard",order:r})}t("Cut","cut",i("cut"),10,1),t("Copy","copy",i("copy"),20,4),t("Paste","paste",n(),30,8)}(),e.getClipboardData=function(t,i){function n(e){e.removeListener(),e.cancel(),i(e.data)}function a(e){e.removeListener(),e.cancel(),l=!0,i({type:s,dataValue:e.data})}function r(){this.customTitle=t&&t.title}var o=!1,s="auto",l=!1;i||(i=t,t=null),e.on("paste",n,null,null,0),e.on("beforePaste",function(e){e.removeListener(),o=!0,s=e.data.type
},null,null,1e3),d()===!1&&(e.removeListener("paste",n),o&&e.fire("pasteDialog",r)?(e.on("pasteDialogCommit",a),e.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",a),setTimeout(function(){l||i(null)},10)})):i(null))}}function t(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko&&!CKEDITOR.env.opera)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function i(e,t){function i(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(e%2==1?"<br>":"")
}return t=t.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()}),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&t.indexOf("<div>")>-1&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return i(e.split("</div><div>").length+1)})+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),(CKEDITOR.env.gecko||CKEDITOR.env.opera)&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),t.indexOf("<br><br>")>-1&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return i(e.length/4)
})+"</p>")),r(e,t))}function n(){var e=new CKEDITOR.htmlParser.filter,t={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},i=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),n={p:1,br:1,"cke:br":1},a=CKEDITOR.dtd,r=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),o=function(e){delete e.name,e.add(new CKEDITOR.htmlParser.text(" "))},s=function(e){for(var t,i=e;(i=i.next)&&i.name&&i.name.match(/^h\d$/);)for(t=new CKEDITOR.htmlParser.element("cke:br"),t.isEmpty=!0,e.add(t);t=i.children.shift();)e.add(t)};return e.addRules({elements:{h1:s,h2:s,h3:s,h4:s,h5:s,h6:s,img:function(e){var e=CKEDITOR.tools.trim(e.attributes.alt||""),t=" ";
return e&&!e.match(/(^http|\.(jpe?g|gif|png))/i)&&(t=" ["+e+"] "),new CKEDITOR.htmlParser.text(t)},td:o,th:o,$:function(e){var o,s=e.name;if(r[s])return!1;if(e.attributes={},"br"==s)return e;if(t[s])e.name="p";else if(i[s])delete e.name;else if(a[s]){if(o=new CKEDITOR.htmlParser.element("cke:br"),o.isEmpty=!0,CKEDITOR.dtd.$empty[s])return o;e.add(o,0),o=o.clone(),o.isEmpty=!0,e.add(o),delete e.name}return n[e.name]||delete e.name,e}}},{applyToAll:!0}),e}function a(e,t,i){var t=new CKEDITOR.htmlParser.fragment.fromHtml(t),n=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(n,i);var t=n.getHtml(),t=t.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),a=0,t=t.replace(/<\/?p>/g,function(e){if("<p>"==e){if(++a>1)return"</p><p>"
}else if(--a>0)return"</p><p>";return e}).replace(/<p><\/p>/g,"");return r(e,t)}function r(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(r){var o;e(r),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),r.on("paste",function(e){var t=e.data.dataValue,i=CKEDITOR.dtd.$block;if(t.indexOf("Apple-")>-1&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")
})),t.indexOf('<br class="Apple-interchange-newline">')>-1&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var n,a,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(n=r.getFirst())&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasClass("cke_editable")||n.hasClass("cke_contents"));)r=a=n;a&&(t=a.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,n){return n.toLowerCase()in i?(e.data.preSniffing="html","<"+n):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,n){return n in i?(e.data.endsWithEOL=1,"</"+n+">"):t
}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t},null,null,3),r.on("paste",function(e){var s,e=e.data,l=e.type,c=e.dataValue,d=r.config.clipboard_defaultContentType||"html";s="html"==l||"html"==e.preSniffing?"html":t(c),"htmlifiedtext"==s?c=i(r.config,c):"text"==l&&"html"==s&&(c=a(r.config,c,o||(o=n(r)))),e.startsWithEOL&&(c='<br data-cke-eol="1">'+c),e.endsWithEOL&&(c+='<br data-cke-eol="1">'),"auto"==l&&(l="html"==s||"html"==d?"html":"text"),e.type=l,e.dataValue=c,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),r.on("paste",function(e){e=e.data,r.insertHtml(e.dataValue,e.type),setTimeout(function(){r.fire("afterPaste")
},0)},null,null,1e3),r.on("pasteDialog",function(e){setTimeout(function(){r.openDialog("paste",e.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),i=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');
CKEDITOR.ui.panel.prototype={render:function(n,a){this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+"_frame"),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(i.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},r))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("key"+(CKEDITOR.env.opera?"press":"down"),function(e){var t=e.data.getKeystroke(),i=this.document.getById(this.id).getAttribute("dir");
this._.onKeyDown&&this._.onKeyDown(t)===!1?e.data.preventDefault():(27==t||t==("rtl"==i?39:37))&&this.onEscape&&this.onEscape(t)===!1&&e.data.preventDefault()},this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var r={editorId:n.id,id:this.id,langCode:n.langCode,dir:n.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":n.config.baseFloatZIndex+1};if(this.isFramed){var o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";
r.frame=t.output({id:this.id+"_frame",src:o})}return o=e.output(r),a&&a.push(o),o},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){var e=this._.blocks[e],t=this._.currentBlock,i=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",i),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()
}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))
}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||this.onHide.call(this)!==!0)&&this.element.setStyle("display","none")},onKeyDown:function(e,t){var i=this.keys[e];switch(i){case"next":for(var n,a=this._.focusIndex,i=this.element.getElementsByTag("a");n=i.getItem(++a);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=a,n.focus();break}return n||t?!1:(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(a=this._.focusIndex,i=this.element.getElementsByTag("a");a>0&&(n=i.getItem(--a));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=a,n.focus();break}n=null}return n||t?!1:(this._.focusIndex=i.count(),this.onKeyDown(e,1));
case"click":case"mouseup":return a=this._.focusIndex,(n=a>=0&&this.element.getElementsByTag("a").getItem(a))&&(n.$[i]?n.$[i]():n.$["on"+i]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,i,n,a,r){var r=CKEDITOR.tools.genKey(i.getUniqueId(),n.getUniqueId(),e.lang.dir,e.uiColor||"",a.css||"",r||""),o=t[r];return o||(o=t[r]=new CKEDITOR.ui.panel(i,a),o.element=n.append(CKEDITOR.dom.element.createFromHtml(o.render(e),i)),o.element.setStyles({display:"none",position:"absolute"})),o}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,i,n,a){function r(){c.hide()}n.forceIFrame=1,n.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(i=CKEDITOR.document.getById("cke_"+t.name));
var o=i.getDocument(),a=e(t,o,i,n,a||0),s=a.element,l=s.getFirst(),c=this;s.disableContextMenu(),this.element=s,this._={editor:t,panel:a,parentElement:i,definition:n,document:o,iframe:l,children:[],dir:t.lang.dir},t.on("mode",r),t.on("resize",r),o.getWindow().on("resize",r)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,i,n,a,r){var o=this._.panel,s=o.showBlock(e);this.allowBlur(!1),e=this._.editor.editable(),this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);
var l=this.element,e=this._.iframe,e=CKEDITOR.env.ie?e:new CKEDITOR.dom.window(e.$.contentWindow),c=l.getDocument(),d=this._.parentElement.getPositionedAncestor(),u=t.getDocumentPosition(c),c=d?d.getDocumentPosition(c):{x:0,y:0},h="rtl"==this._.dir,p=u.x+(n||0)-c.x,f=u.y+(a||0)-c.y;!h||1!=i&&4!=i?h||2!=i&&3!=i||(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth,(3==i||4==i)&&(f+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),l.setStyles({top:f+"px",left:0,display:""}),l.setOpacity(0),l.getFirst().removeStyle("width"),this._.editor.focusManager.add(e),this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(e){this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())
},this),e.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1),o.onEscape=CKEDITOR.tools.bind(function(e){return this.onEscape&&this.onEscape(e)===!1?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){if(l.removeStyle("width"),s.autoSize){var e=s.element.getDocument(),e=(CKEDITOR.env.webkit?s.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(l.$.offsetWidth||0)-(l.$.clientWidth||0)+3),l.setStyle("width",e+10+"px"),e=s.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e>0&&(e+=(l.$.offsetHeight||0)-(l.$.clientHeight||0)+3),l.setStyle("height",e+"px"),o._.currentBlock.element.setStyle("display","none").removeStyle("display")
}else l.removeStyle("height");h&&(p-=l.$.offsetWidth),l.setStyle("left",p+"px");var t=o.element.getWindow(),e=l.$.getBoundingClientRect(),t=t.getViewPaneSize(),i=e.width||e.right-e.left,n=e.height||e.bottom-e.top,a=h?e.right:t.width-e.left,c=h?t.width-e.right:e.left;h?i>a&&(p=c>i?p+i:t.width>i?p-e.left:p-e.right+t.width):i>a&&(p=c>i?p-i:t.width>i?p-e.right+t.width:p-e.left),i=e.top,t.height-e.top<n&&(f=i>n?f-n:t.height>n?f-e.bottom+t.height:f-e.top),CKEDITOR.env.ie&&(t=e=new CKEDITOR.dom.element(l.$.offsetParent),"html"==t.getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*l.getDocument().getDocumentElement().$.scrollLeft:p-(e.$.scrollWidth-e.$.clientWidth)));
var d,e=l.getFirst();(d=e.getCustomData("activePanel"))&&d.onHide&&d.onHide.call(this,1),e.setCustomData("activePanel",this),l.setStyles({top:f+"px",left:p+"px"}),l.setOpacity(1),r&&r()},this);o.isLoaded?e():o.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),s.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();!e.equals(this._.iframe)&&e.$.blur()
}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&this.onHide.call(this)===!0||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!=e&&(t.allowBlur=e),t.allowBlur
},showAsChild:function(e,t,i,n,a,r){(this._.activeChild!=e||e._.panel._.offsetParentId!=i.getId())&&(this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,i,n,a,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e,i=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in t){var n=t[e];
i?n.destroy():n.element.hide()}i&&(t={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),i=e._.menuGroups={},n=e._.menuItems={},a=0;a<t.length;a++)i[t[a]]=a+1;e.addMenuGroup=function(e,t){i[e]=t||100},e.addMenuItem=function(e,t){i[t.group]&&(n[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return n[e]},e.removeMenuItem=function(e){delete n[e]}}}),function(){function e(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';
(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var t=t+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),i=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),n=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');
CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var i=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),n=i.block.attributes=i.attributes||{};!n.role&&(n.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),i=this.editor.elementPath(),n=this._.listeners;this.removeAll();for(var a=0;a<n.length;a++){var r=n[a](t,e,i);if(r)for(var o in r){var s=this.editor.getMenuItem(o);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=r[o],this.add(s))
}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,i=this.items[e];if(i=i.getItems&&i.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var n in i){var a=this.editor.getMenuItem(n);a&&(a.state=i[n],t.add(a))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+e));
setTimeout(function(){t.show(r,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(t,i,n,a){if(this.parent||(this._.onShow(),this.items.length)){var i=i||("rtl"==this.editor.lang.dir?2:1),r=this.items,o=this.editor,s=this._.panel,l=this._.element;if(!s){s=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),s.onEscape=CKEDITOR.tools.bind(function(e){return this._.onEscape(e)===!1?!1:void 0},this),s.onShow=function(){s._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")
},s.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),l=s.addBlock(this.id,this._.panelDefinition.block),l.autoSize=!0;var c=l.keys;c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c["rtl"==o.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),l=this._.element=l.element,c=l.getDocument(),c.getBody().setStyle("overflow","hidden"),c.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,o.config.menu_subMenuDelay||400,this,[e])
},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this)}e(r);for(var c=o.elementPath(),c=['<div class="cke_menu'+(c&&c.direction()!=o.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],d=r.length,u=d&&r[0].group,h=0;d>h;h++){var p=r[h];u!=p.group&&(c.push('<div class="cke_menuseparator" role="separator"></div>'),u=p.group),p.render(this,h,c)}c.push("</div>"),l.setHtml(c.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(s,this.id,t,i,n,a):s.showBlock(this.id,t,i,n,a),o.fire("menuShow",[s])
}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,a){var r=e.id+(""+t),o="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,s="",l=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(s=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var c=this.getItems,d="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",u=this.name;
this.icon&&!/\./.test(this.icon)&&(u=this.icon),e={id:r,name:this.name,iconName:u,label:this.label,cls:this.className||"",state:l,hasPopup:c?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(u,"rtl"==this.editor.lang.dir,u==this.icon?null:this.icon,this.iconOffset),arrowHtml:c?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:s},i.output(e,a)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})
},proto:{addTarget:function(e,t){if(e.on("contextmenu",function(e){var e=e.data,n=CKEDITOR.env.webkit?i:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!n){e.preventDefault();var a=e.getTarget().getDocument(),r=e.getTarget().getDocument().getDocumentElement(),n=!a.equals(CKEDITOR.document),a=a.getWindow().getScrollPosition(),o=n?e.$.clientX:e.$.pageX||a.x+e.$.clientX,s=n?e.$.clientY:e.$.pageY||a.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(r,null,o,s)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var i,n=function(){i=0};e.on("keydown",function(e){i=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",n),e.on("contextmenu",n)
}},open:function(e,t,i,n){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,i,n)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),e.config.browserContextMenuOnCtrl!==!1)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(e){var t,i,n,a,r=e.config,o=e.ui.spaceId("resizer"),s=e.element?e.element.getDirection(1):"ltr";if(!r.resize_dir&&(r.resize_dir="vertical"),void 0==r.resize_maxWidth&&(r.resize_maxWidth=3e3),void 0==r.resize_maxHeight&&(r.resize_maxHeight=3e3),void 0==r.resize_minWidth&&(r.resize_minWidth=750),void 0==r.resize_minHeight&&(r.resize_minHeight=250),r.resize_enabled!==!1){var l=null,c=("both"==r.resize_dir||"horizontal"==r.resize_dir)&&r.resize_minWidth!=r.resize_maxWidth,d=("both"==r.resize_dir||"vertical"==r.resize_dir)&&r.resize_minHeight!=r.resize_maxHeight,u=function(o){var l=t,u=i,h=l+(o.data.$.screenX-n)*("rtl"==s?-1:1),o=u+(o.data.$.screenY-a);
c&&(l=Math.max(r.resize_minWidth,Math.min(h,r.resize_maxWidth))),d&&(u=Math.max(r.resize_minHeight,Math.min(o,r.resize_maxHeight))),e.resize(c?l:null,u)},h=function(){CKEDITOR.document.removeListener("mousemove",u),CKEDITOR.document.removeListener("mouseup",h),e.document&&(e.document.removeListener("mousemove",u),e.document.removeListener("mouseup",h))},p=CKEDITOR.tools.addFunction(function(o){l||(l=e.getResizable()),t=l.$.offsetWidth||0,i=l.$.offsetHeight||0,n=o.screenX,a=o.screenY,r.resize_minWidth>t&&(r.resize_minWidth=t),r.resize_minHeight>i&&(r.resize_minHeight=i),CKEDITOR.document.on("mousemove",u),CKEDITOR.document.on("mouseup",h),e.document&&(e.document.on("mousemove",u),e.document.on("mouseup",h)),o.preventDefault&&o.preventDefault()
});e.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),e.on("uiSpace",function(t){if("bottom"==t.data.space){var i="";c&&!d&&(i=" cke_resizer_horizontal"),!c&&d&&(i=" cke_resizer_vertical");var n='<span id="'+o+'" class="cke_resizer'+i+" cke_resizer_"+s+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==s?"â¢":"â£")+"</span>";t.data.html="ltr"==s&&"ltr"==i?t.data.html+n:n+t.data.html}},e,null,100),e.on("maximize",function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';
(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),e=e+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),i=CKEDITOR.addTemplate("button",e);
CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,n){var a,r=CKEDITOR.env,o=this._.id=CKEDITOR.tools.getNextId(),s="",l=this.command;this._.editor=e;var c={id:o,button:this,editor:e,focus:function(){CKEDITOR.document.getById(o).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)
}},d=CKEDITOR.tools.addFunction(function(e){return c.onkey?(e=new CKEDITOR.dom.event(e),c.onkey(c,e.getKeystroke())!==!1):void 0}),u=CKEDITOR.tools.addFunction(function(e){var t;return c.onfocus&&(t=c.onfocus(c,new CKEDITOR.dom.event(e))!==!1),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&e.preventBubble(),t}),h=0,p=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var t=e.editable();t.isInline()&&t.hasFocus&&(e.lockSelection(),h=1)}});if(c.clickFn=a=CKEDITOR.tools.addFunction(function(){h&&(e.unlockSelection(1),h=0),c.execute()}),this.modes){var f={},m=function(){var t=e.mode;t&&(t=this.modes[t]?void 0!=f[t]?f[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())
};e.on("beforeModeUnload",function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(f[e.mode]=this._.state)},this),e.on("activeFilterChange",m,this),e.on("mode",m,this),!this.readOnly&&e.on("readOnly",m,this)}else l&&(l=e.getCommand(l))&&(l.on("state",function(){this.setState(l.state)},this),s+=l.state==CKEDITOR.TRISTATE_ON?"on":l.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&e.on("contentDirChanged",function(t){var i=CKEDITOR.document.getById(this._.id),n=i.getFirst(),t=t.data;t!=e.lang.dir?i.addClass("cke_"+t):i.removeClass("cke_ltr").removeClass("cke_rtl"),n.setAttribute("style",CKEDITOR.skin.getIconStyle(g,"rtl"==t,this.icon,this.iconOffset))
},this),l||(s+="off");var g=m=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(g=this.icon,this.icon=null),r={id:o,name:m,iconName:g,label:this.label,cls:this.className||"",state:s,ariaDisabled:"disabled"==s?"true":"false",title:this.title,titleJs:r.gecko&&r.version>=10900&&!r.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:d,mousedownFn:p,focusFn:u,clickFn:a,style:CKEDITOR.skin.getIconStyle(g,"rtl"==e.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},i.output(r,n),this.onRender&&this.onRender(),c},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);
return t?(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)
}}(),function(){function e(e){function i(){for(var i=n(),r=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),o=0;o<r.length;o++){var s=r[o];if("/"!=s){"string"==typeof s&&(s=r[o]={name:s});var l,c=s.groups;if(c)for(var d=0;d<c.length;d++)l=c[d],(l=i[l])&&a(s,l);(l=i[s.name])&&a(s,l)}}return r}function n(){var t,i,n,a={};for(t in e.ui.items)i=e.ui.items[t],n=i.toolbar||"others",n=n.split(","),i=n[0],n=parseInt(n[1]||-1,10),a[i]||(a[i]=[]),a[i].push({name:t,order:n});for(i in a)a[i]=a[i].sort(function(e,t){return e.order==t.order?0:t.order<0?-1:e.order<0?1:e.order<t.order?-1:1});return a}function a(t,i){if(i.length){t.items?t.items.push(e.ui.create("-")):t.items=[];
for(var n;n=i.shift();)n="string"==typeof n?n:n.name,o&&-1!=CKEDITOR.tools.indexOf(o,n)||(n=e.ui.create(n))&&e.addFeature(n)&&t.items.push(n)}}function r(e){var t,i,n,r=[];for(t=0;t<e.length;++t)i=e[t],n={},"/"==i?r.push(i):CKEDITOR.tools.isArray(i)?(a(n,CKEDITOR.tools.clone(i)),r.push(n)):i.items&&(a(n,CKEDITOR.tools.clone(i.items)),n.name=i.name,r.push(n));return r}var o=e.config.removeButtons,o=o&&o.split(","),s=e.config.toolbar;return"string"==typeof s&&(s=e.config["toolbar_"+s]),e.toolbar=s?r(s):i()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])
}var i=function(){this.toolbars=[],this.focusCommandExecuted=!1};i.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var i,n=0;i=e.items[n++];)if(i.focus)return void i.focus()};var n={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var a,r=function(e,i){var n,o="rtl"==t.lang.dir,s=t.config.toolbarGroupCycling,l=o?37:39,o=o?39:37,s=void 0===s||s;switch(i){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if(n=9==i?(n?n.next:e.toolbar.next)||t.toolbox.toolbars[0]:(n?n.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],n.items.length)for(e=n.items[a?n.items.length-1:0];e&&!e.focus;)(e=a?e.previous:e.next)||(n=0);
return e&&e.focus(),!1;case l:n=e;do n=n.next,!n&&s&&(n=e.toolbar.items[0]);while(n&&!n.focus);return n?n.focus():r(e,9),!1;case 40:return e.button&&e.button.hasArrow?(t.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):r(e,40==i?l:o),!1;case o:case 38:n=e;do n=n.previous,!n&&s&&(n=e.toolbar.items[e.toolbar.items.length-1]);while(n&&!n.focus);return n?n.focus():(a=1,r(e,CKEDITOR.SHIFT+9),a=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",function(n){if(n.data.space==t.config.toolbarLocation){n.removeListener(),t.toolbox=new i;var a,o,s=CKEDITOR.tools.getNextId(),l=['<span id="',s,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',s,'" onmousedown="return false;">'],s=t.config.toolbarStartupExpanded!==!1;
t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(s?">":' style="display:none">'));for(var c=t.toolbox.toolbars,d=e(t),u=0;u<d.length;u++){var h,p,f,m=0,g=d[u];if(g)if(a&&(l.push("</span>"),o=a=0),"/"===g)l.push('<span class="cke_toolbar_break"></span>');else{f=g.items||g;for(var v=0;v<f.length;v++){var b,y=f[v];if(y)if(y.type==CKEDITOR.UI_SEPARATOR)o=a&&y;else{if(b=y.canGroup!==!1,!m){h=CKEDITOR.tools.getNextId(),m={id:h,items:[]},p=g.name&&(t.lang.toolbar.toolbarGroups[g.name]||g.name),l.push('<span id="',h,'" class="cke_toolbar"',p?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),p&&l.push('<span id="',h,'_label" class="cke_voice_label">',p,"</span>"),l.push('<span class="cke_toolbar_start"></span>');
var C=c.push(m)-1;C>0&&(m.previous=c[C-1],m.previous.next=m)}b?a||(l.push('<span class="cke_toolgroup" role="presentation">'),a=1):a&&(l.push("</span>"),a=0),h=function(e){e=e.render(t,l),C=m.items.push(e)-1,C>0&&(e.previous=m.items[C-1],e.previous.next=e),e.toolbar=m,e.onkey=r,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}},o&&(h(o),o=0),h(y)}}a&&(l.push("</span>"),o=a=0),m&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&l.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var I=CKEDITOR.tools.addFunction(function(){t.execCommand("toolbarCollapse")});t.on("destroy",function(){CKEDITOR.tools.removeFunction(I)
}),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),i=t.getPrevious(),n=e.ui.space("contents"),a=i.getParent(),r=parseInt(n.$.style.height,10),o=a.$.offsetHeight,s=t.hasClass("cke_toolbox_collapser_min");s?(i.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(i.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(s?"â²":"â"),n.setStyle("height",r-(a.$.offsetHeight-o)+"px"),e.fire("resize")},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(s?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),s||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+I+')">','<span class="cke_arrow">&#9650;</span>',"</a>")
}l.push("</span>"),n.data.html=n.data.html+l.join("")}}),t.on("destroy",function(){if(this.toolbox){var e,t,i,n,a=0;for(e=this.toolbox.toolbars;a<e.length;a++)for(i=e[a].items,t=0;t<i.length;t++)n=i[t],n.clickFn&&CKEDITOR.tools.removeFunction(n.clickFn),n.keyDownFn&&CKEDITOR.tools.removeFunction(n.keyDownFn)}}),t.on("uiReady",function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)}),t.addCommand("toolbarFocus",n),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}
}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,i,n){var a=t(this.editor),r=0===i,o={name:e};if(n){if(n=CKEDITOR.tools.search(a,function(e){return e.name==n}))return!n.groups&&(n.groups=[]),i&&(i=CKEDITOR.tools.indexOf(n.groups,i),i>=0)?void n.groups.splice(i+1,0,e):void(r?n.groups.splice(0,0,e):n.groups.push(e));i=null}i&&(i=CKEDITOR.tools.indexOf(a,function(e){return e.name==i})),r?a.splice(0,0,e):"number"==typeof i?a.splice(i+1,0,o):a.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,i){i=e.config.forceEnterMode||i,"wysiwyg"==e.mode&&(t||(t=e.activeEnterMode),e.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,i=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?r(e,t,null,i):o(e,t,null,i),e.fire("saveSnapshot"))
}function t(e){for(var e=e.getSelection().getRanges(!0),t=e.length-1;t>0;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var i=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,a,o,l){if(o=o||t(e)){var c,d=o.document,u=o.checkStartOfBlock(),h=o.checkEndOfBlock(),p=e.elementPath(o.startContainer).block,f=a==CKEDITOR.ENTER_DIV?"div":"p";
if(u&&h){if(p&&(p.is("li")||p.getParent().is("li"))){o=p.getParent(),c=o.getParent();var l=!p.hasPrevious(),m=!p.hasNext(),f=e.getSelection(),g=f.createBookmarks(),u=p.getDirection(1),h=p.getAttribute("class"),v=p.getAttribute("style"),b=c.getDirection(1)!=u,e=e.enterMode!=CKEDITOR.ENTER_BR||b||v||h;if(c.is("li"))l||m?p[l?"insertBefore":"insertAfter"](c):p.breakParent(c);else{if(e)c=d.createElement(a==CKEDITOR.ENTER_P?"p":"div"),b&&c.setAttribute("dir",u),v&&c.setAttribute("style",v),h&&c.setAttribute("class",h),p.moveChildren(c),l||m?c[l?"insertBefore":"insertAfter"](o):(p.breakParent(o),c.insertAfter(o));else if(p.appendBogus(!0),l||m)for(;d=p[l?"getFirst":"getLast"]();)d[l?"insertBefore":"insertAfter"](o);
else for(p.breakParent(o);d=p.getLast();)d.insertAfter(o);p.remove()}return void f.selectBookmarks(g)}if(p&&p.getParent().is("blockquote"))return p.breakParent(p.getParent()),p.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getPrevious().remove(),p.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getNext().remove(),o.moveToElementEditStart(p),void o.select()}else if(p&&p.is("pre")&&!h)return void r(e,a,o,l);if(h=o.splitBlock(f)){if(a=h.previousBlock,p=h.nextBlock,e=h.wasStartOfBlock,u=h.wasEndOfBlock,p?(g=p.getParent(),g.is("li")&&(p.breakParent(g),p.move(p.getNext(),1))):a&&(g=a.getParent())&&g.is("li")&&(a.breakParent(g),g=a.getNext(),o.moveToElementEditStart(g),a.move(a.getPrevious())),e||u){if(a?(a.is("li")||!s.test(a.getName())&&!a.is("pre"))&&(c=a.clone()):p&&(c=p.clone()),c?l&&!c.is("li")&&c.renameNode(f):g&&g.is("li")?c=g:(c=d.createElement(f),a&&(m=a.getDirection())&&c.setAttribute("dir",m)),d=h.elementPath)for(l=0,f=d.elements.length;f>l&&(g=d.elements[l],!g.equals(d.block)&&!g.equals(d.blockLimit));l++)CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),c.moveChildren(g),c.append(g));
c.appendBogus(),c.getParent()||o.insertNode(c),c.is("li")&&c.removeAttribute("value"),!CKEDITOR.env.ie||!e||u&&a.getChildCount()||(o.moveToElementEditStart(u?a:c),o.select()),o.moveToElementEditStart(e&&!u?p:c)}else p.is("li")&&(c=o.clone(),c.selectNodeContents(p),c=new CKEDITOR.dom.walker(c),c.evaluator=function(e){return!(n(e)||i(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(g=c.next())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?d.createElement("br"):d.createText("Â ")).insertBefore(g)),p&&o.moveToElementEditStart(p);o.select(),o.scrollIntoView()}}},enterBr:function(e,i,n,a){if(n=n||t(e)){var r=n.document,l=n.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),d=c.block,c=d&&c.block.getName();
a||"li"!=c?(!a&&l&&s.test(c)?(l=d.getDirection())?(r=r.createElement("div"),r.setAttribute("dir",l),r.insertAfter(d),n.setStart(r,0)):(r.createElement("br").insertAfter(d),CKEDITOR.env.gecko&&r.createText("").insertAfter(d),n.setStartAt(d.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(d="pre"==c&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?r.createText("\r"):r.createElement("br"),n.deleteContents(),n.insertNode(d),CKEDITOR.env.needsBrFiller?(r.createText("").insertAfter(d),l&&d.getParent().appendBogus(),d.getNext().$.nodeValue="",n.setStartAt(d.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(d,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):o(e,i,n,a)
}}};var a=CKEDITOR.plugins.enterkey,r=a.enterBr,o=a.enterBlock,s=/^h[1-6]$/}(),function(){function e(e,t){var i={},n=[],a={nbsp:"Â ",shy:"Â­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,r){var o=t?"&"+r+";":a[r];return i[o]=t?a[r]:"&"+r+";",n.push(o),""});if(!t&&e){var r,e=e.split(","),o=document.createElement("div");for(o.innerHTML="&"+e.join(";&")+";",r=o.innerHTML,o=null,o=0;o<r.length;o++){var s=r.charAt(o);i[s]="&"+e[o]+";",n.push(s)}}return i.regex=n.join(t?"|":""),i}CKEDITOR.plugins.add("entities",{afterInit:function(t){var i=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var n=[];i.basicEntities!==!1&&n.push("nbsp,gt,lt,amp"),i.entities&&(n.length&&n.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),i.entities_latin&&n.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),i.entities_greek&&n.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),i.entities_additional&&n.push(i.entities_additional));
var a=e(n.join(",")),r=a.regex?"["+a.regex+"]":"a^";delete a.regex,i.entities&&i.entities_processNumerical&&(r="[^ -~]|"+r);var r=RegExp(r,"g"),o=function(e){return"force"!=i.entities_processNumerical&&a[e]?a[e]:"&#"+e.charCodeAt(0)+";"},s=e("nbsp,gt,lt,amp,shy",!0),l=RegExp(s.regex,"g"),c=function(e){return s[e]};t.addRules({text:function(e){return e.replace(l,c).replace(r,o)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),i=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),n=/\'/g;
CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var t=t||{},i=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(i["aria-multiselectable"]=!0),!i.role&&(i.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",i.role),i=this.keys,i[40]="next",i[9]="next",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(i[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}
},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,i,a){var r=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=r;var o;o=CKEDITOR.tools.htmlEncodeAttr(e).replace(n,"\\'"),e={id:r,val:o,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(a||e),text:i||e},this._.pendingList.push(t.output(e))
},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(i.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,i=this._.groups,n=this.element.getDocument();
for(e in t)n.getById(t[e]).setStyle("display","");for(var a in i)t=n.getById(i[a]),e=t.getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll();var e=this._.items[e],t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},unmark:function(e){var t=this.element.getDocument(),e=this._.items[e],i=t.getById(e);i.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(i)},unmarkAll:function(){var e,t=this._.items,i=this.element.getDocument();
for(e in t){var n=t[e];i.getById(n).removeClass("cke_selected"),i.getById(n+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,i=this.element.getElementsByTag("a"),n=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=i.getItem(++n);)if(e.equals(t)){this._.focusIndex=n;break}}else this.element.focus();t&&setTimeout(function(){t.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)
}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),t=CKEDITOR.addTemplate("combo",e);
CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,i){function n(){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()
}var a=CKEDITOR.env,r="cke_"+this.id,o=CKEDITOR.tools.addFunction(function(t){u&&(e.unlockSelection(1),u=0),l.execute(t)},this),s=this,l={id:r,combo:this,focus:function(){CKEDITOR.document.getById(r).getChild(1).focus()},execute:function(t){var i=s._;if(i.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(e),i.on)i.panel.hide();else{s.commit();var n=s.getValue();n?i.list.mark(n):i.list.unmarkAll(),i.panel.showBlock(s.id,new CKEDITOR.dom.element(t),4)}},clickFn:o};e.on("activeFilterChange",n,this),e.on("mode",n,this),e.on("selectionChange",n,this),!this.readOnly&&e.on("readOnly",n,this);var c=CKEDITOR.tools.addFunction(function(t,i){var t=new CKEDITOR.dom.event(t),n=t.getKeystroke();
switch(40==n&&e.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(o,i);break;default:l.onkey(l,n)}t.preventDefault()}),d=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()}),u=0,h=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var t=e.editable();t.isInline()&&t.hasFocus&&(e.lockSelection(),u=1)}});return l.keyDownFn=c,a={id:r,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:a.gecko&&a.version>=10900&&!a.hc?"":(this.title||"").replace("'",""),keydownFn:c,mousedownFn:h,focusFn:d,clickFn:o},t.output(a,i),this.onRender&&this.onRender(),l
},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,i=this._.panelDefinition.block,n=t.parent||CKEDITOR.document.getBody(),a="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(e,n,t),o=r.addListBlock(this.id,i),s=this;r.onShow=function(){this.element.addClass(a),s.setState(CKEDITOR.TRISTATE_ON),s._.on=1,s.editorFocus&&!e.focusManager.hasFocus&&e.focus(),s.onOpen&&s.onOpen(),e.once("panelShow",function(){o.focus(!o.multiSelect&&s.getValue())})},r.onHide=function(t){this.element.removeClass(a),s.setState(s.modes&&s.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s._.on=0,!t&&s.onClose&&s.onClose()},r.onEscape=function(){r.hide(1)
},o.onClick=function(e,t){s.onClick&&s.onClick.call(s,e,t),r.hide()},this._.panel=r,this._.list=o,r.getBlock(this.id).onHide=function(){s._.on=0,s.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var i=this.document.getById("cke_"+this.id+"_text");i&&(e||t?i.removeClass("cke_combo_inlinelabel"):(t=this.label,i.addClass("cke_combo_inlinelabel")),i.setText("undefined"!=typeof t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()
},add:function(e,t,i){this._.items[e]=i||e,this._.list.add(e,t,i)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))
}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,i=e.lang.format,n=t.format_tags.split(";"),a={},r=0,o=[],s=0;s<n.length;s++){var l=n[s],c=new CKEDITOR.style(t["format_"+l]);(!e.filter.customConfig||e.filter.check(c))&&(r++,a[l]=c,a[l]._.enterMode=e.config.enterMode,o.push(c))}0!==r&&e.ui.addRichCombo("Format",{label:i.label,title:i.panelTitle,toolbar:"styles,20",allowedContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){this.startGroup(i.panelTitle);
for(var e in a){var t=i["tag_"+e];this.add(e,a[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=a[t],i=e.elementPath();e[t.checkActive(i)?"removeStyle":"applyStyle"](t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var i=this.getValue(),t=t.data.path;this.refresh();for(var n in a)if(a[n].checkActive(t))return void(n!=i&&this.setValue(n,e.lang.format["tag_"+n]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in a)e.activeFilter.check(a[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var i in a)if(e.activeFilter.check(a[i]))return;
this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};
CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"	",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};
var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0
},openTagClose:function(e,t){var i=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),i&&i.breakAfterClose&&(this._.needsSpace=i.needsSpace)):(this._.output.push(">"),i&&i.indent&&(this._.indentation=this._.indentation+this.indentationChars)),i&&i.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1
},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,t){var i=this._.rules[e];i?CKEDITOR.tools.extend(i,t,!0):this._.rules[e]=t}}}),function(){function e(e){var t=this.editor,i=e.document,n=i.body;
(e=i.getElementById("cke_actscrpt"))&&e.parentNode.removeChild(e),(e=i.getElementById("cke_shimscrpt"))&&e.parentNode.removeChild(e),CKEDITOR.env.gecko&&(n.contentEditable=!1,CKEDITOR.env.version<2e4&&(n.innerHTML=n.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var e=new CKEDITOR.dom.range(new CKEDITOR.dom.document(i));e.setStart(new CKEDITOR.dom.node(n),0),t.getSelection().selectRanges([e])},0))),n.contentEditable=!0,CKEDITOR.env.ie&&(n.hideFocus=!0,n.disabled=!0,n.removeAttribute("disabled")),delete this._.isLoadingData,this.$=n,i=new CKEDITOR.dom.document(i),this.setup(),CKEDITOR.env.ie&&(i.getDocumentElement().addClass(i.$.compatMode),t.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(i,"selectionchange",function(){var e=i.getBody(),n=t.getSelection(),a=n&&n.getRanges()[0];
a&&e.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&a.startContainer.equals(e)&&setTimeout(function(){a=t.getSelection().getRanges()[0],a.startContainer.equals("body")||(e.getFirst().remove(1),a.moveToElementEditEnd(e),a.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>10)&&i.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){t.editable().focus()})});try{t.document.$.execCommand("2D-position",!1,!0)}catch(a){}try{t.document.$.execCommand("enableInlineTableEditing",!1,!t.config.disableNativeTableHandles)}catch(r){}if(t.config.disableObjectResizing)try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)
}catch(o){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(e){e.data.preventDefault()})}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==t.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var i=e.data.getKeystroke();if(33==i||34==i)if(CKEDITOR.env.ie)setTimeout(function(){t.getSelection().scrollIntoView()},0);else if(t.window.$.innerHeight>this.$.offsetHeight){var n=t.createRange();n[33==i?"moveToElementEditStart":"moveToElementEditEnd"](this),n.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch(e){}}),t.document.getElementsByTag("title").getItem(0).data("cke-title",t.document.$.title),CKEDITOR.env.ie&&(t.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){t.fire("contentDom"),this._.isPendingFocus&&(t.focus(),this._.isPendingFocus=!1),setTimeout(function(){t.fire("dataReady")
},0),CKEDITOR.env.ie&&setTimeout(function(){if(t.document){var e=t.document.$.body;e.runtimeStyle.marginBottom="0px",e.runtimeStyle.marginBottom=""}},1e3)},0,this)}function t(){var e=[];if(CKEDITOR.document.$.documentMode>=8){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,i=[];for(t in CKEDITOR.dtd.$removeEmpty)i.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(i.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")
}CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",function(t){function n(n){n&&n.removeListener(),e.editable(new i(e,r.$.contentWindow.document.body)),e.setData(e.getData(1),t)}var a="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",a=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(a)+"}())":"",r=CKEDITOR.dom.element.createFromHtml('<iframe src="'+a+'" frameBorder="0"></iframe>');r.setStyles({width:"100%",height:"100%"}),r.addClass("cke_wysiwyg_frame cke_reset");
var o=e.ui.space("contents");o.append(r),(a=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&r.on("load",n);var s=e.title,l=e.lang.common.editorHelp;s&&(CKEDITOR.env.ie&&(s+=", "+l),r.setAttribute("title",s));var s=CKEDITOR.tools.getNextId(),c=CKEDITOR.dom.element.createFromHtml('<span id="'+s+'" class="cke_voice_label">'+l+"</span>");o.append(c,1),e.on("beforeModeUnload",function(e){e.removeListener(),c.remove()}),r.setAttributes({"aria-describedby":s,tabIndex:e.tabIndex,allowTransparency:"true"}),!a&&n(),CKEDITOR.env.webkit&&(a=function(){o.setStyle("width","100%"),r.hide(),r.setSize("width",o.getSize("width")),o.removeStyle("width"),r.show()},r.setCustomData("onResize",a),CKEDITOR.document.getWindow().on("resize",a)),e.fire("ariaWidget",r)
})}});var i=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(t){CKEDITOR.tools.setTimeout(e,0,this,t)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,i){var n=this.editor;if(i)this.setHtml(e),n.fire("dataReady");else{this._.isLoadingData=!0,n._.dataStore={id:1};var a=n.config,r=a.fullPage,o=a.docType,s=CKEDITOR.tools.buildStyleHtml(t()).replace(/<style>/,'<style data-cke-temp="1">');r||(s+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var l=a.baseHref?'<base href="'+a.baseHref+'" data-cke-temp="1" />':"";
r&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return n.docType=o=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return n.xmlDeclaration=e,""})),e=n.dataProcessor.toHtml(e),r?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(e=e.replace(/<head>/,"$&"+l)),e=e.replace(/<\/head\s*>/,s+"$&"),e=o+e):e=a.docType+'<html dir="'+a.contentsLangDirection+'" lang="'+(a.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+s+"</head><body"+(a.bodyId?' id="'+a.bodyId+'"':"")+(a.bodyClass?' class="'+a.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(e=e.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),a='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(a+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,a),this.clearCustomData(),this.clearListeners(),n.fire("contentDomUnload");
var c=this.getDocument();try{c.write(e)}catch(d){setTimeout(function(){c.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();var e=this.editor,t=e.config,i=t.fullPage,n=i&&e.docType,a=i&&e.xmlDeclaration,r=this.getDocument(),i=i?r.getDocumentElement().getOuterHtml():r.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),i=e.dataProcessor.toDataFormat(i),a&&(i=a+"\n"+i),n&&(i=n+"\n"+i),i},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:i.baseProto.focus.call(this)},detach:function(){var e=this.editor,t=e.document,e=e.window.getFrame();i.baseProto.detach.call(this),this.clearCustomData(),t.getDocumentElement().clearCustomData(),e.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(t=e.removeCustomData("onResize"))&&t.removeListener(),e.remove()
}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),function(){function e(e,n){var a,r;n.on("refresh",function(e){var n,a=[t];for(n in e.data.states)a.push(e.data.states[n]);this.setState(CKEDITOR.tools.search(a,i)?i:t)},n,null,100),n.on("exec",function(t){a=e.getSelection(),r=a.createBookmarks(1),t.data||(t.data={}),t.data.done=!1},n,null,0),n.on("exec",function(){e.forceNextSelectionCheck(),a.selectBookmarks(r)},n,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,i=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var i=CKEDITOR.plugins.indent.genericDefinition;
e(t,t.addCommand("indent",new i(!0))),e(t,t.addCommand("outdent",new i)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",function(e){var i=t.createRange(),n=e.data.node;i.setStartBefore(n),i.setEndAfter(n);for(var a,r=new CKEDITOR.dom.walker(i);a=r.next();)if(a.type==CKEDITOR.NODE_ELEMENT)if(!a.equals(n)&&a.getDirection())i.setStartAfter(a),r=new CKEDITOR.dom.walker(i);else{var o=t.config.indentClasses;if(o)for(var s="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<o.length;l++)a.hasClass(o[l]+s[0])&&(a.removeClass(o[l]+s[0]),a.addClass(o[l]+s[1]));
o=a.getStyle("margin-right"),s=a.getStyle("margin-left"),o?a.setStyle("margin-left",o):a.removeStyle("margin-left"),s?a.setStyle("margin-right",s):a.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,i){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!i,this.relatedGlobal=i?"indent":"outdent",this.indentKey=i?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)(function(e,t){var i,n=e.getCommand(t.relatedGlobal);for(i in t.jobs)n.on("exec",function(n){n.data.done||(e.fire("lockSnapshot"),t.execJob(e,i)&&(n.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))
},this,null,i),n.on("refresh",function(n){n.data.states||(n.data.states={}),n.data.states[t.name+"@"+i]=t.refreshJob(e,i,n.data.path)},this,null,i);e.addFeature(t)})(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,i){var n=this.jobs[i];return n.state!=t?n.exec.call(this,e):void 0},refreshJob:function(e,i,n){return i=this.jobs[i],i.state=e.activeFilter.checkFeature(this)?i.refresh.call(this,e,n):t,i.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e){function t(t){for(var i=a.startContainer,l=a.endContainer;i&&!i.getParent().equals(t);)i=i.getParent();
for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!i||!l)return!1;for(var c=i,i=[],d=!1;!d;)c.equals(l)&&(d=!0),i.push(c),c=c.getNext();if(i.length<1)return!1;for(c=t.getParents(!0),l=0;l<c.length;l++)if(c[l].getName&&s[c[l].getName()]){t=c[l];break}for(var c=r.isIndent?1:-1,l=i[0],i=i[i.length-1],d=CKEDITOR.plugins.list.listToArray(t,o),u=d[i.getCustomData("listarray_index")].indent,l=l.getCustomData("listarray_index");l<=i.getCustomData("listarray_index");l++)if(d[l].indent=d[l].indent+c,c>0){var h=d[l].parent;d[l].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(l=i.getCustomData("listarray_index")+1;l<d.length&&d[l].indent>u;l++)d[l].indent=d[l].indent+c;
if(i=CKEDITOR.plugins.list.arrayToList(d,o,null,e.config.enterMode,t.getDirection()),!r.isIndent){var p;if((p=t.getParent())&&p.is("li"))for(var f,c=i.listNode.getChildren(),m=[],l=c.count()-1;l>=0;l--)(f=c.getItem(l))&&f.is&&f.is("li")&&m.push(f)}if(i&&i.listNode.replace(t),m&&m.length)for(l=0;l<m.length;l++){for(f=t=m[l];(f=f.getNext())&&f.is&&f.getName()in s;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(a.document.createText("Â ")),t.append(f);t.insertAfter(p)}return i&&e.fire("contentDomInvalidated"),!0}for(var a,r=this,o=this.database,s=this.context,l=e.getSelection(),l=(l&&l.getRanges()).createIterator();a=l.getNextRange();){for(var c=a.getCommonAncestor();c&&(c.type!=CKEDITOR.NODE_ELEMENT||!s[c.getName()]);)c=c.getParent();
if(c||(c=a.startPath().contains(s))&&a.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),!c){var d=a.getEnclosedNode();d&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in s&&(a.setStartAt(d,CKEDITOR.POSITION_AFTER_START),a.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),c=d)}if(c&&a.startContainer.type==CKEDITOR.NODE_ELEMENT&&a.startContainer.getName()in s&&(d=new CKEDITOR.dom.walker(a),d.evaluator=i,a.startContainer=d.next()),c&&a.endContainer.type==CKEDITOR.NODE_ELEMENT&&a.endContainer.getName()in s&&(d=new CKEDITOR.dom.walker(a),d.evaluator=i,a.endContainer=d.previous()),c)return t(c)}return 0}function t(e,t){return t||(t=e.contains(this.context)),t&&e.block&&e.block.equals(t.getFirst(i))
}function i(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return a(e)&&r(e)}var a=CKEDITOR.dom.walker.whitespaces(!0),r=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(i){function n(i){a.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],i.on("key",function(e){if("wysiwyg"==i.mode&&e.data.keyCode==this.indentKey){var n=this.getContext(i.elementPath());!n||this.isIndent&&t.call(this,i.elementPath(),n)||(i.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,i){var n=this.getContext(i),a=t.call(this,i,n);
return n&&this.isIndent&&!a?s:o}:function(e,t){return!this.getContext(t)||this.isIndent?o:s},exec:CKEDITOR.tools.bind(e,this)}}var a=CKEDITOR.plugins.indent;a.registerCommands(i,{indentlist:new n(i,"indentlist",!0),outdentlist:new n(i,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,a.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function e(e,t){var i=n.exec(e),a=n.exec(t);if(i){if(!i[2]&&"px"==a[2])return a[1];if("px"==i[2]&&!a[2])return a[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,i=CKEDITOR.tools.cssLength,n=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,a={elements:{$:function(i){var n=i.attributes;if((n=(n=(n=n&&n["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(n)))&&n.children[0])&&i.attributes["data-cke-resizable"]){var a=new t(i).rules,i=n.attributes,r=a.width,a=a.height;
r&&(i.width=e(i.width,r)),a&&(i.height=e(i.height,a))}return n}}},r=CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(a)}});CKEDITOR.editor.prototype.createFakeElement=function(e,n,a,o){var s=this.lang.fakeobjects,s=s[a]||s.unknown,n={"class":n,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:s,title:s,align:e.getAttribute("align")||""};return CKEDITOR.env.hc||(n.src=CKEDITOR.getUrl(r.path+"images/spacer.gif")),a&&(n["data-cke-real-element-type"]=a),o&&(n["data-cke-resizable"]=o,a=new t,o=e.getAttribute("width"),e=e.getAttribute("height"),o&&(a.rules.width=i(o)),e&&(a.rules.height=i(e)),a.populate(n)),this.document.createElement("img",{attributes:n})
},CKEDITOR.editor.prototype.createFakeParserElement=function(e,n,a,o){var s,l=this.lang.fakeobjects,l=l[a]||l.unknown;return s=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(s),s=s.getHtml(),n={"class":n,"data-cke-realelement":encodeURIComponent(s),"data-cke-real-node-type":e.type,alt:l,title:l,align:e.attributes.align||""},CKEDITOR.env.hc||(n.src=CKEDITOR.getUrl(r.path+"images/spacer.gif")),a&&(n["data-cke-real-element-type"]=a),o&&(n["data-cke-resizable"]=o,o=e.attributes,e=new t,a=o.width,o=o.height,void 0!=a&&(e.rules.width=i(a)),void 0!=o&&(e.rules.height=i(o)),e.populate(n)),new CKEDITOR.htmlParser.element("img",n)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;
var i=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var n=t.getStyle("width"),t=t.getStyle("height");n&&i.setAttribute("width",e(i.getAttribute("width"),n)),t&&i.setAttribute("height",e(i.getAttribute("height"),t))}return i}}(),CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return i.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",i=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.plugins.link.synAnchorSelector?"a.cke_anchor_empty{display:inline-block;"+(CKEDITOR.env.ie&&CKEDITOR.env.version>10?"min-height:16px;vertical-align:middle":"")+"}":"")+".%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";
CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",function(t){var i=CKEDITOR.plugins.link.getSelectedLink(e)||t.data.element;
!i.isReadOnly()&&i.is&&(i.is("a")?(t.data.dialog=!i.getAttribute("name")||i.getAttribute("href")&&i.getChildCount()?"link":"anchor",e.getSelection().selectElement(i)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,i)&&(t.data.dialog="anchor"))}),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;
if(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t),!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var i={};return t.getAttribute("href")&&t.getChildCount()&&(i={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(i.anchor=i.removeAnchor=CKEDITOR.TRISTATE_OFF),i})},afterInit:function(e){var t=e.dataProcessor,i=t&&t.dataFilter,t=t&&t.htmlFilter,n=e._.elementsPath&&e._.elementsPath.filters;i&&i.addRules({elements:{a:function(t){var i=t.attributes;if(!i.name)return null;var n=!t.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){var t=n?"cke_anchor_empty":"cke_anchor",a=i["class"];i.name&&(!a||a.indexOf(t)<0)&&(i["class"]=(a||"")+" "+t),n&&CKEDITOR.plugins.link.emptyAnchorFix&&(i.contenteditable="false",i["data-cke-editable"]=1)
}else if(CKEDITOR.plugins.link.fakeAnchor&&n)return e.createFakeParserElement(t,"cke_anchor","anchor");return null}}}),CKEDITOR.plugins.link.emptyAnchorFix&&t&&t.addRules({elements:{a:function(e){delete e.attributes.contenteditable}}}),n&&n.push(function(t,i){return"a"!=i||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)&&(!t.getAttribute("name")||t.getAttribute("href")&&t.getChildCount())?void 0:"anchor"})}}),CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),i=t.getSelectedElement();return i&&i.is("a")?i:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(e){for(var t,i=e.editable(),n=i.isInline()&&!e.plugins.divarea?e.document:i,a=n.getElementsByTag("a"),i=[],r=0;t=a.getItem(r++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&i.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});
if(this.fakeAnchor)for(n=n.getElementsByTag("img"),r=0;t=n.getItem(r++);)(t=this.tryRestoreFakeAnchor(e,t))&&i.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return i},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&8>CKEDITOR.env.version,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var i=e.restoreRealElement(t);if(i.data("cke-saved-name"))return i}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});
e.removeStyle(t)},refresh:function(e,t){var i=t.lastElement&&t.lastElement.getAscendant("a",!0);this.setState(i&&"a"==i.getName()&&i.getAttribute("href")&&i.getChildCount()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,i=e.getSelection(),n=i.createBookmarks();i&&(t=i.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!t.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t):t.is("a"))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),i.selectBookmarks(n)
},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function e(e,t,i){function n(i){!(l=d[i?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=t.root[i?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[i?"insertBefore":"insertAfter"](l)}for(var a=CKEDITOR.plugins.list.listToArray(t.root,i),r=[],o=0;o<t.contents.length;o++){var s=t.contents[o];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(r.push(s),CKEDITOR.dom.element.setMarker(i,s,"list_item_processed",!0))}for(s=null,o=0;o<r.length;o++)s=r[o].getCustomData("listarray_index"),a[s].indent=-1;
for(o=s+1;o<a.length;o++)if(a[o].indent>a[o-1].indent+1){for(r=a[o-1].indent+1-a[o].indent,s=a[o].indent;a[o]&&a[o].indent>=s;)a[o].indent=a[o].indent+r,o++;o--}var l,c,d=CKEDITOR.plugins.list.arrayToList(a,i,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;n(!0),n(),d.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function i(e,t,i,n){for(var a,r;a=e[n?"getLast":"getFirst"](p);)(r=a.getDirection(1))!==t.getDirection(1)&&a.setAttribute("dir",r),a.remove(),i?a[n?"insertBefore":"insertAfter"](i):t.append(a,n)}function n(e){var t;(t=function(t){var n=e[t?"getPrevious":"getNext"](d);
n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(i(e,n,null,!t),e.remove(),e=n)})(),t(1)}function a(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function r(e,t,a){e.fire("saveSnapshot"),a.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var r=a.extractContents();t.trim(!1,!0);var s=t.createBookmark(),l=new CKEDITOR.dom.elementPath(t.startContainer),c=l.block,l=l.lastElement.getAscendant("li",1)||c,h=new CKEDITOR.dom.elementPath(a.startContainer),p=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);for(c?(c=c.getBogus())&&c.remove():h&&(c=h.getPrevious(d))&&u(c)&&c.remove(),(c=r.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("br")&&c.remove(),(c=t.startContainer.getChild(t.startOffset))?r.insertBefore(c):t.startContainer.append(r),p&&(r=o(p))&&(l.contains(p)?(i(r,p.getParent(),p),r.remove()):l.append(r));a.checkStartOfBlock()&&a.checkEndOfBlock()&&(h=a.startPath(),r=h.block,r);)r.is("li")&&(l=r.getParent(),r.equals(l.getLast(d))&&r.equals(l.getFirst(d))&&(r=l)),a.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove();
a=a.clone(),r=e.editable(),a.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(a),a.evaluator=function(e){return d(e)&&!u(e)},(a=a.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&n(a),t.moveToBookmark(s),t.select(),e.fire("saveSnapshot")}function o(e){return(e=e.getLast(d))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in s?e:null}var s={ol:1,ul:1},l=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(),d=function(e){return!(l(e)||c(e))},u=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,i,n,a){if(!s[e.getName()])return[];n||(n=0),i||(i=[]);for(var r=0,o=e.getChildCount();o>r;r++){var l=e.getChild(r);
if(l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(l,t,i,n+1),"li"==l.$.nodeName.toLowerCase()){var c={parent:e,indent:n,element:l,contents:[]};a?c.grandparent=a:(c.grandparent=e.getParent(),c.grandparent&&"li"==c.grandparent.$.nodeName.toLowerCase()&&(c.grandparent=c.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,l,"listarray_index",i.length),i.push(c);for(var d,u=0,h=l.getChildCount();h>u;u++)d=l.getChild(u),d.type==CKEDITOR.NODE_ELEMENT&&s[d.getName()]?CKEDITOR.plugins.list.listToArray(d,t,i,n+1,c.grandparent):c.contents.push(d)}}return i},arrayToList:function(e,t,i,n,a){if(i||(i=0),!e||e.length<i+1)return null;
for(var r,o,l,u=e[i].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(u),p=null,f=i,m=Math.max(e[i].indent,0),g=null,v=n==CKEDITOR.ENTER_P?"p":"div";;){var b=e[f];if(r=b.grandparent,o=b.element.getDirection(1),b.indent==m){for(p&&e[f].parent.getName()==p.getName()||(p=e[f].parent.clone(!1,1),a&&p.setAttribute("dir",a),h.append(p)),g=p.append(b.element.clone(0,1)),o!=p.getDirection(1)&&g.setAttribute("dir",o),r=0;r<b.contents.length;r++)g.append(b.contents[r].clone(1,1));f++}else if(b.indent==Math.max(m,0)+1)b=e[f-1].element.getDirection(1),f=CKEDITOR.plugins.list.arrayToList(e,null,f,n,b!=o?o:null),!g.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(u.$.documentMode>7)&&g.append(u.createText("Â ")),g.append(f.listNode),f=f.nextIndex;
else{if(-1!=b.indent||i||!r)return null;s[r.getName()]?(g=b.element.clone(!1,!0),o!=r.getDirection(1)&&g.setAttribute("dir",o)):g=new CKEDITOR.dom.documentFragment(u);var y,C,p=r.getDirection(1)!=o,I=b.element,E=I.getAttribute("class"),w=I.getAttribute("style"),x=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(n!=CKEDITOR.ENTER_BR||p||w||E),T=b.contents.length;for(r=0;T>r;r++)if(y=b.contents[r],c(y)&&T>1)x?C=y.clone(1,1):g.append(y.clone(1,1));else if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){p&&!y.getDirection()&&y.setAttribute("dir",o),l=y;var _=I.getAttribute("style");_&&l.setAttribute("style",_.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||"")),E&&y.addClass(E),l=null,C&&(g.append(C),C=null),g.append(y.clone(1,1))
}else x?(l||(l=u.createElement(v),g.append(l),p&&l.setAttribute("dir",o)),w&&l.setAttribute("style",w),E&&l.setAttribute("class",E),C&&(l.append(C),C=null),l.append(y.clone(1,1))):g.append(y.clone(1,1));C&&((l||g).append(C),C=null),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&f!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(o=g.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("br")&&o.remove(),o=g.getLast(d),(!o||!(o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)))&&g.append(u.createElement("br"))),o=g.$.nodeName.toLowerCase(),("div"==o||"p"==o)&&g.appendBogus(),h.append(g),p=null,f++}if(l=null,e.length<=f||Math.max(e[f].indent,0)<m)break}if(t)for(e=h.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(i=e,u=a=n=void 0,n=i.getDirection()))){for(a=i.getParent();a&&!(u=a.getDirection());)a=a.getParent();
n==u&&i.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:h,nextIndex:f}}};var h=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);t.prototype={exec:function(t){this.refresh(t,t.elementPath());var i=t.config,a=t.getSelection(),r=a&&a.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var o=t.editable();if(o.getFirst(d)){var l=1==r.length&&r[0];(i=l&&l.getEnclosedNode())&&i.is&&this.type==i.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else i.enterMode==CKEDITOR.ENTER_BR?o.appendBogus():r[0].fixBlock(1,i.enterMode==CKEDITOR.ENTER_P?"p":"div"),a.selectRanges(r)}for(var i=a.createBookmarks(!0),o=[],c={},r=r.createIterator(),u=0;(l=r.getNextRange())&&++u;){var p=l.getBoundaryNodes(),f=p.startNode,m=p.endNode;
for(f.type==CKEDITOR.NODE_ELEMENT&&"td"==f.getName()&&l.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),m.type==CKEDITOR.NODE_ELEMENT&&"td"==m.getName()&&l.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),l=l.createIterator(),l.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=l.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(c,p,"list_block",1);for(var g,v=t.elementPath(p),f=v.elements,m=0,v=v.blockLimit,b=f.length-1;b>=0&&(g=f[b]);b--)if(s[g.getName()]&&v.contains(g)){v.removeCustomData("list_group_object_"+u),(f=g.getCustomData("list_group_object"))?f.contents.push(p):(f={root:g,contents:[p]},o.push(f),CKEDITOR.dom.element.setMarker(c,g,"list_group_object",f)),m=1;
break}m||(m=v,m.getCustomData("list_group_object_"+u)?m.getCustomData("list_group_object_"+u).contents.push(p):(f={root:m,contents:[p]},CKEDITOR.dom.element.setMarker(c,m,"list_group_object_"+u,f),o.push(f)))}}for(g=[];o.length>0;)if(f=o.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(s[f.root.getName()]){for(r=t,u=f,f=c,l=g,m=CKEDITOR.plugins.list.listToArray(u.root,f),v=[],p=0;p<u.contents.length;p++)b=u.contents[p],(b=b.getAscendant("li",!0))&&!b.getCustomData("list_item_processed")&&(v.push(b),CKEDITOR.dom.element.setMarker(f,b,"list_item_processed",!0));for(var b=u.root.getDocument(),y=void 0,C=void 0,p=0;p<v.length;p++){var I=v[p].getCustomData("listarray_index"),y=m[I].parent;
y.is(this.type)||(C=b.createElement(this.type),y.copyAttributes(C,{start:1,type:1}),C.removeStyle("list-style-type"),m[I].parent=C)}for(f=CKEDITOR.plugins.list.arrayToList(m,f,null,r.config.enterMode),m=void 0,v=f.listNode.getChildCount(),p=0;v>p&&(m=f.listNode.getChild(p));p++)m.getName()==this.type&&l.push(m);f.listNode.replace(u.root),r.fire("contentDomInvalidated")}else{for(m=t,p=f,l=g,v=p.contents,r=p.root.getDocument(),u=[],1==v.length&&v[0].equals(p.root)&&(f=r.createElement("div"),v[0].moveChildren&&v[0].moveChildren(f),v[0].append(f),v[0]=f),p=p.contents[0].getParent(),b=0;b<v.length;b++)p=p.getCommonAncestor(v[b].getParent());for(y=m.config.useComputedState,m=f=void 0,y=void 0===y||y,b=0;b<v.length;b++)for(C=v[b];I=C.getParent();){if(I.equals(p)){u.push(C),!m&&C.getDirection()&&(m=1),C=C.getDirection(y),null!==f&&(f=f&&f!=C?null:C);
break}C=I}if(!(u.length<1)){for(v=u[u.length-1].getNext(),b=r.createElement(this.type),l.push(b),y=l=void 0;u.length;)l=u.shift(),y=r.createElement("li"),l.is("pre")||h.test(l.getName())||"false"==l.getAttribute("contenteditable")?l.appendTo(y):(l.copyAttributes(y),f&&l.getDirection()&&(y.removeStyle("direction"),y.removeAttribute("dir")),l.moveChildren(y),l.remove()),y.appendTo(b);f&&m&&b.setAttribute("dir",f),v?b.insertBefore(v):b.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&s[f.root.getName()]&&e.call(this,t,f,c);for(b=0;b<g.length;b++)n(g[b]);CKEDITOR.dom.element.clearAllMarkers(c),a.selectBookmarks(i),t.focus()},refresh:function(e,t){var i=t.contains(s,1),n=t.blockLimit||t.root;
this.setState(i&&n.contains(i)&&i.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new t("numberedlist","ol")),e.addCommand("bulletedlist",new t("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",function(t){var i=t.data.keyCode;if("wysiwyg"==e.mode&&i in{8:1,46:1}){var n=e.getSelection().getRanges()[0],l=n&&n.startPath();
if(n&&n.collapsed){var c=8==i,h=e.editable(),p=new CKEDITOR.dom.walker(n.clone());if(p.evaluator=function(e){return d(e)&&!u(e)},p.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},i=n.clone(),c){var f,m;(f=l.contains(s))&&n.checkBoundaryOfElement(f,CKEDITOR.START)&&(f=f.getParent())&&f.is("li")&&(f=o(f))?(m=f,f=f.getPrevious(d),i.moveToPosition(f&&u(f)?f:m,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(n.startContainer,n.startOffset),(f=p.previous())&&f.type==CKEDITOR.NODE_ELEMENT&&(f.getName()in s||f.is("li"))&&(f.is("li")||(p.range.selectNodeContents(f),p.reset(),p.evaluator=a,f=p.previous()),m=f,i.moveToElementEditEnd(m))),m?(r(e,i,n),t.cancel()):(i=l.contains(s))&&n.checkBoundaryOfElement(i,CKEDITOR.START)&&(m=i.getFirst(d),n.checkBoundaryOfElement(m,CKEDITOR.START)&&(f=i.getPrevious(d),o(m)?f&&(n.moveToElementEditEnd(f),n.select()):e.execCommand("outdent"),t.cancel()))
}else(m=l.contains("li"))?(p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),h=(l=m.getLast(d))&&a(l)?l:m,m=0,(f=p.next())&&f.type==CKEDITOR.NODE_ELEMENT&&f.getName()in s&&f.equals(l)?(m=1,f=p.next()):n.checkBoundaryOfElement(h,CKEDITOR.END)&&(m=1),m&&f&&(n=n.clone(),n.moveToElementEditStart(f),r(e,i,n),t.cancel())):(p.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(f=p.next())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(s)&&(f=f.getFirst(d),l.block&&n.checkStartOfBlock()&&n.checkEndOfBlock()?(l.block.remove(),n.moveToElementEditStart(f),n.select()):o(f)?(n.moveToElementEditStart(f),n.select()):(n=n.clone(),n.moveToElementEditStart(f),r(e,i,n)),t.cancel()));setTimeout(function(){e.selectionChange(1)
})}}}))}})}(),function(){function e(e,t,i){return d(t)&&d(i)&&i.equals(t.getNext(function(e){return!(V(e)||G(e)||u(e))}))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function i(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var i=r(t,!0);if("true"==i.getAttribute("contenteditable"))return t;if(i.is(e.triggers))return i}return null}function n(e,t,i){return y(e,t),y(e,i),e=t.size.bottom,i=i.size.top,e&&i?0|(e+i)/2:e||i}function a(e,t,i){return t=t[i?"getPrevious":"getNext"](function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!V(t)||d(t)&&!u(t)&&!c(e,t)})}function r(e,t){if(e.data("cke-editable"))return null;
for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function o(e){var t=e.doc,i=T('<span contenteditable="false" style="'+H+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),n=this.path+"images/"+(_.hidpi?"hidpi/":"")+"icon.png";for(w(i,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[w(T('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:H+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+e.boxColor+";cursor:pointer;"+(_.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(_.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),w(T(W,t),{base:j+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),w(T(W,t),{base:j+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this
},mouseNear:function(){y(e,this);var t=e.holdDistance,i=this.size;return i&&e.mouse.y>i.top-t&&e.mouse.y<i.bottom+t&&e.mouse.x>i.left-t&&e.mouse.x<i.right+t?!0:!1},place:function(){var t=e.view,i=e.editable,n=e.trigger,a=n.upper,r=n.lower,o=a||r,s=o.getParent(),l={};this.trigger=n,a&&y(e,a,!0),r&&y(e,r,!0),y(e,s,!0),e.inInlineMode&&C(e,!0),s.equals(i)?(l.left=t.scroll.x,l.right=-t.scroll.x,l.width=""):(l.left=o.size.left-o.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),l.width=o.size.outerWidth+o.size.margin.left+o.size.margin.right+t.scroll.x,l.right=""),a&&r?l.top=a.size.margin.bottom===r.size.margin.top?0|a.size.bottom+a.size.margin.bottom/2:a.size.margin.bottom<r.size.margin.top?a.size.bottom+a.size.margin.bottom:a.size.bottom+a.size.margin.bottom-r.size.margin.top:a?r||(l.top=a.size.bottom+a.size.margin.bottom):l.top=r.size.top-r.size.margin.top,n.is(N)||l.top>t.scroll.y-15&&l.top<t.scroll.y+5?(l.top=e.inInlineMode?0:t.scroll.y,this.look(N)):n.is(M)||l.top>t.pane.bottom-5&&l.top<t.pane.bottom+15?(l.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(M)):(e.inInlineMode&&(l.top=l.top-(t.editable.top+t.editable.border.top)),this.look(P)),e.inInlineMode&&(l.top--,l.top=l.top+t.editable.scroll.top,l.left=l.left+t.editable.scroll.left);
for(var c in l)l[c]=CKEDITOR.tools.cssLength(l[c]);this.setStyles(l)},look:function(e){if(this.oldLook!=e){for(var t,i=this.lineChildren.length;i--;)(t=this.lineChildren[i]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new x("span",e.doc)}),t=i.lineChildren.length;t--;)i.lineChildren[t].appendTo(i);i.look(P),i.appendTo(i.wrap),i.unselectable(),i.lineChildren[0].on("mouseup",function(t){i.detach(),s(e,function(t){var i=e.line.trigger;t[i.is(O)?"insertBefore":"insertAfter"](i.is(O)?i.lower:i.upper)},!0),e.editor.focus(),!_.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),t.data.preventDefault(!0)}),i.on("mousedown",function(e){e.data.preventDefault(!0)
}),e.line=i}function s(e,t,i){var n,a=new CKEDITOR.dom.range(e.doc),o=e.editor;_.ie&&e.enterMode==CKEDITOR.ENTER_BR?n=e.doc.createText(Q):(n=(n=r(e.element,!0))&&n.data("cke-enter-mode")||e.enterMode,n=new x(D[n],e.doc),n.is("br")||e.doc.createText(Q).appendTo(n)),i&&o.fire("saveSnapshot"),t(n),a.moveToPosition(n,CKEDITOR.POSITION_AFTER_START),o.getSelection().selectRanges([a]),e.hotNode=n,i&&o.fire("saveSnapshot")}function l(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function n(i){var n=_.ie&&_.version<9?" ":Q,a=e.hotNode&&e.hotNode.getText()==n&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;s(e,function(n){a&&e.hotNode&&e.hotNode.remove(),n[t?"insertAfter":"insertBefore"](i),n.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t
}),!_.ie&&e.enterMode!=CKEDITOR.ENTER_BR&&e.hotNode.scrollIntoView(),e.line.detach()}return function(o){var s,o=o.getSelection().getStartElement(),o=o.getAscendant(B,1);if(!f(e,o)&&o&&!o.equals(e.editable)&&!o.contains(e.editable)){(s=r(o))&&"false"==s.getAttribute("contenteditable")&&(o=s),e.element=o,s=a(e,o,!t);var l;d(s)&&s.is(e.triggers)&&s.is(F)&&(!a(e,s,!t)||(l=a(e,s,!t))&&d(l)&&l.is(e.triggers))?n(s):(l=i(e,o),d(l)&&(a(e,l,!t)?(o=a(e,l,!t))&&d(o)&&o.is(e.triggers)&&n(l):n(l)))}}}()}}function c(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var i=e.line;return i.wrap.equals(t)||i.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$
}function u(e){if(!d(e))return!1;var t;return(t=h(e))||(d(e)?(t={left:1,right:1,center:1},t=!(!t[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])):t=!1),t}function h(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function p(e,t){return d(t)?t.is(e.triggers):null}function f(e,t){if(!t)return!1;for(var i=t.getParents(1),n=i.length;n--;)for(var a=e.tabuList.length;a--;)if(i[n].hasAttribute(e.tabuList[a]))return!0;return!1}function m(e,t,i){return(t=t[i?"getLast":"getFirst"](function(t){return e.isRelevant(t)&&!t.is($)}))?(y(e,t),i?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y):!1}function g(e){var i=e.editable,n=e.mouse,a=e.view,r=e.triggerOffset;
C(e);var o=n.y>(e.inInlineMode?a.editable.top+a.editable.height/2:Math.min(a.editable.height,a.pane.height)/2),i=i[o?"getLast":"getFirst"](function(e){return!(V(e)||G(e))});return i?(c(e,i)&&(i=e.line.wrap[o?"getPrevious":"getNext"](function(e){return!(V(e)||G(e))})),d(i)&&!u(i)&&p(e,i)?(y(e,i),!o&&i.size.top>=0&&n.y>0&&n.y<i.size.top+r?(e=e.inInlineMode||0===a.scroll.y?N:P,new t([null,i,O,K,e])):o&&i.size.bottom<=a.pane.height&&n.y>i.size.bottom-r&&n.y<a.pane.height?(e=e.inInlineMode||i.size.bottom>a.pane.height-r&&i.size.bottom<a.pane.height?M:P,new t([i,null,q,K,e])):null):null):null}function v(e){var n=e.mouse,r=e.view,o=e.triggerOffset,s=i(e);if(!s)return null;
y(e,s);var l,c,o=Math.min(o,0|s.size.outerHeight/2),h=[];if(n.y>s.size.top-1&&n.y<s.size.top+o)c=!1;else{if(!(n.y>s.size.bottom-o&&n.y<s.size.bottom+1))return null;c=!0}if(u(s)||m(e,s,c)||s.getParent().is(L))return null;var f=a(e,s,!c);if(f){if(f&&f.type==CKEDITOR.NODE_TEXT)return null;if(d(f)){if(u(f)||!p(e,f)||f.getParent().is(L))return null;h=[f,s][c?"reverse":"concat"]().concat([S,K])}}else s.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?(C(e),c&&n.y>s.size.bottom-o&&n.y<r.pane.height&&s.size.bottom>r.pane.height-o&&s.size.bottom<r.pane.height?l=M:n.y>0&&n.y<s.size.top+o&&(l=N)):l=P,h=[null,s][c?"reverse":"concat"]().concat([c?q:O,K,l,s.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?c?M:N:P]);
return 0 in h?new t(h):null}function b(e,t,i,n){for(var a=function(){var i=_.ie?t.$.currentStyle:e.win.$.getComputedStyle(t.$,"");return _.ie?function(e){return i[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){return i.getPropertyValue(e)}}(),r=t.getDocumentPosition(),o={},s={},l={},c={},d=Y.length;d--;)o[Y[d]]=parseInt(a("border-"+Y[d]+"-width"),10)||0,l[Y[d]]=parseInt(a("padding-"+Y[d]),10)||0,s[Y[d]]=parseInt(a("margin-"+Y[d]),10)||0;return(!i||n)&&I(e,n),c.top=r.y-(i?0:e.view.scroll.y),c.left=r.x-(i?0:e.view.scroll.x),c.outerWidth=t.$.offsetWidth,c.outerHeight=t.$.offsetHeight,c.height=c.outerHeight-(l.top+l.bottom+o.top+o.bottom),c.width=c.outerWidth-(l.left+l.right+o.left+o.right),c.bottom=c.top+c.outerHeight,c.right=c.left+c.outerWidth,e.inInlineMode&&(c.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),w({border:o,padding:l,margin:s,ignoreScroll:i},c,!0)
}function y(e,t,i){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==i&&t.size.date>new Date-z)return null}else t.size={};return w(t.size,b(e,t,i),{date:+new Date},!0)}function C(e,t){e.view.editable=b(e,e.editable,t,!0)}function I(e,t){e.view||(e.view={});var i=e.view;if(t||!(i&&i.date>new Date-z)){var n=e.win,i=n.getScrollPosition(),n=n.getViewPaneSize();w(e.view,{scroll:{x:i.x,y:i.y,width:e.doc.$.documentElement.scrollWidth-n.width,height:e.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+i.y},date:+new Date},!0)}}function E(e,i,n,a){for(var r=a,o=a,s=0,l=!1,c=!1,d=e.view.pane.height,u=e.mouse;u.y+s<d&&u.y-s>0&&(l||(l=i(r,a)),c||(c=i(o,a)),!l&&u.y-s>0&&(r=n(e,{x:u.x,y:u.y-s})),!c&&u.y+s<d&&(o=n(e,{x:u.x,y:u.y+s})),!l||!c);)s+=2;
return new t([r,o,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var n,r,p,m=e.config,y=m.magicline_triggerOffset||30,E={editor:e,enterMode:m.enterMode,triggerOffset:y,holdDistance:0|y*(m.magicline_holdDistance||.5),boxColor:m.magicline_color||"#ff0000",rtl:"rtl"==m.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(m.magicline_tabuList||[]),triggers:m.magicline_everywhere?B:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};E.isRelevant=function(e){return d(e)&&!c(E,e)&&!u(e)},e.on("contentDom",function(){var d=e.editable(),u=e.document,y=e.window;w(E,{editable:d,inInlineMode:d.isInline(),doc:u,win:y,hotNode:null},!0),E.boundary=E.inInlineMode?E.editable:E.doc.getDocumentElement(),d.is(R.$inline)||(E.inInlineMode&&!h(d)&&d.setStyles({position:"relative",top:null,left:null}),o.call(this,E),I(E),d.attachListener(e,"beforeUndoImage",function(){E.line.detach()
}),d.attachListener(e,"beforeGetData",function(){E.line.wrap.getParent()&&(E.line.detach(),e.once("getData",function(){E.line.attach()},null,null,1e3))},null,null,0),d.attachListener(E.inInlineMode?u:u.getWindow().getFrame(),"mouseout",function(t){if("wysiwyg"==e.mode)if(E.inInlineMode){var i=t.data.$.clientX,t=t.data.$.clientY;I(E),C(E,!0);var n=E.view.editable,a=E.view.scroll;i>n.left-a.x&&i<n.right-a.x&&t>n.top-a.y&&t<n.bottom-a.y||(clearTimeout(p),p=null,E.line.detach())}else clearTimeout(p),p=null,E.line.detach()}),d.attachListener(d,"keyup",function(){E.hiddenMode=0}),d.attachListener(d,"keydown",function(t){if("wysiwyg"==e.mode)switch(t=t.data.getKeystroke(),e.getSelection().getStartElement(),t){case 2228240:case 16:E.hiddenMode=1,E.line.detach()
}}),d.attachListener(E.inInlineMode?d:u,"mousemove",function(t){if(r=!0,"wysiwyg"==e.mode&&!e.readOnly&&!p){var i={x:t.data.$.clientX,y:t.data.$.clientY};p=setTimeout(function(){E.mouse=i,p=E.trigger=null,I(E),r&&!E.hiddenMode&&e.focusManager.hasFocus&&!E.line.mouseNear()&&(E.element=U(E,!0))&&((E.trigger=g(E)||v(E)||X(E))&&!f(E,E.trigger.upper||E.trigger.lower)?E.line.attach().place():(E.trigger=null,E.line.detach()),r=!1)},30)}}),d.attachListener(y,"scroll",function(){"wysiwyg"==e.mode&&(E.line.detach(),_.webkit&&(E.hiddenMode=1,clearTimeout(n),n=setTimeout(function(){E.mouseDown||(E.hiddenMode=0)},50)))}),d.attachListener(k?u:y,"mousedown",function(){"wysiwyg"==e.mode&&(E.line.detach(),E.hiddenMode=1,E.mouseDown=1)
}),d.attachListener(k?u:y,"mouseup",function(){E.hiddenMode=0,E.mouseDown=0}),e.addCommand("accessPreviousSpace",l(E)),e.addCommand("accessNextSpace",l(E,!0)),e.setKeystroke([[m.magicline_keystrokePrevious,"accessPreviousSpace"],[m.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",function(){var t,i,n,a;for(a in{p:1,br:1,div:1})for(t=e.document.getElementsByTag(a),n=t.count();n--;)if((i=t.getItem(n)).data("cke-magicline-hot"))return E.hotNode=i,void(E.lastCmdDirection="true"===i.data("cke-magicline-dir")?!0:!1)}),this.backdoor={accessFocusSpace:s,boxTrigger:t,isLine:c,getAscendantTrigger:i,getNonEmptyNeighbour:a,getSize:b,that:E,triggerEdge:v,triggerEditable:g,triggerExpand:X})
},this)}});var w=CKEDITOR.tools.extend,x=CKEDITOR.dom.element,T=x.createFromHtml,_=CKEDITOR.env,k=CKEDITOR.env.ie&&CKEDITOR.env.version<9,R=CKEDITOR.dtd,D={},O=128,q=64,S=32,K=16,A=8,N=4,M=2,P=1,Q="Â ",L=R.$listItem,$=R.$tableContent,F=w({},R.$nonEditable,R.$empty),B=R.$block,z=100,H="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",j=H+"border-color:transparent;display:block;border-style:solid;",W="<span>"+Q+"</span>";D[CKEDITOR.ENTER_BR]="br",D[CKEDITOR.ENTER_P]="p",D[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,i){return this.properties=e+t+(i||P),this},is:function(e){return(this.properties&e)==e
}};var U=function(){return function(e,t,i){if(!e.mouse)return null;var n=e.doc,a=e.line.wrap,i=i||e.mouse,r=new CKEDITOR.dom.element(n.$.elementFromPoint(i.x,i.y));return t&&c(e,r)&&(a.hide(),r=new CKEDITOR.dom.element(n.$.elementFromPoint(i.x,i.y)),a.show()),!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||_.ie&&_.version<9&&!e.boundary.equals(r)&&!e.boundary.contains(r)?null:r}}(),V=CKEDITOR.dom.walker.whitespaces(),G=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),X=function(){function t(t){var a,r,o,s=t.element;if(!d(s)||s.contains(t.editable)||s.isReadOnly())return null;if(o=E(t,function(e,t){return!t.equals(e)},function(e,t){return U(e,!0,t)},s),a=o.upper,r=o.lower,e(t,a,r))return o.set(S,A);
if(a&&s.contains(a))for(;!a.getParent().equals(s);)a=a.getParent();else a=s.getFirst(function(e){return i(t,e)});if(r&&s.contains(r))for(;!r.getParent().equals(s);)r=r.getParent();else r=s.getLast(function(e){return i(t,e)});if(!a||!r)return null;if(y(t,a),y(t,r),!(t.mouse.y>a.size.top&&t.mouse.y<r.size.bottom))return null;for(var l,c,u,h,s=Number.MAX_VALUE;r&&!r.equals(a)&&(c=a.getNext(t.isRelevant));)l=Math.abs(n(t,a,c)-t.mouse.y),s>l&&(s=l,u=a,h=c),a=c,y(t,a);return u&&h&&t.mouse.y>u.size.top&&t.mouse.y<h.size.bottom?(o.upper=u,o.lower=h,o.set(S,A)):null}function i(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||G(t)||u(t)||c(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))
}return function(i){var n,a=t(i);if(n=a){n=a.upper;var r=a.lower;n=!n||!r||u(r)||u(n)||r.equals(n)||n.equals(r)||r.contains(n)||n.contains(r)?!1:p(i,n)&&p(i,r)&&e(i,n,r)?!0:!1}return n?a:null}}(),Y=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){var e={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(i){i&&t.fire("paste",{type:"text",dataValue:i.dataValue}),t.fire("afterCommandExec",{name:"pastetext",command:e,returnValue:!!i})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",e),t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){"html"!=e.data.type&&(e.data.type="text")
}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}})}(),function(){function e(e,t,i){var n=CKEDITOR.cleanWord;return n?i():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,i,null,!0)),!n}function t(e){e.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(i){var n=0,a=this.path;i.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var i=this;n=1,e.once("beforePaste",t),e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue}),e.fire("afterCommandExec",{name:"pastefromword",command:i,returnValue:!!t})
})}}),i.ui.addButton&&i.ui.addButton("PasteFromWord",{label:i.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),i.on("pasteState",function(e){i.getCommand("pastefromword").setState(e.data)}),i.on("paste",function(t){var r=t.data,o=r.dataValue;if(o&&(n||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(o))){var s=e(i,a,function(){s?i.fire("paste",r):(!i.config.pasteFromWordPromptCleanup||n||confirm(i.lang.pastefromword.confirmCleanup))&&(r.dataValue=CKEDITOR.cleanWord(o,i))});s&&t.cancel()}},null,null,3)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})
}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,i=e._.removeFormatRegex||(e._.removeFormatRegex=RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),n=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,r=e.getSelection().getRanges(1),o=r.createIterator();t=o.getNextRange();){t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var s=t.createBookmark(),l=s.startNode,c=s.endNode,d=function(t){for(var n,r=e.elementPath(t),o=r.elements,s=1;(n=o[s])&&(!n.equals(r.block)&&!n.equals(r.blockLimit));s++)i.test(n.getName())&&a(e,n)&&t.breakParent(n)
};if(d(l),c)for(d(c),l=l.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);l&&!l.equals(c);)d=l.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==l.getName()&&l.data("cke-realelement")||!a(e,l)||(i.test(l.getName())?l.remove(1):(l.removeAttributes(n),e.fire("removeFormatCleanup",l))),l=d;t.moveToBookmark(s)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(r)}}},filter:function(e,t){for(var i=e._.removeFormatFilters||[],n=0;n<i.length;n++)if(i[n](t)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function i(){this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show()
}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var n=CKEDITOR.plugins.sourcearea;t.addMode("source",function(n){var a=t.ui.space("contents").getDocument().createElement("textarea");a.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),a.setAttribute("dir","ltr"),a.addClass("cke_source cke_reset cke_enable_context_menu"),t.ui.space("contents").append(a),a=t.editable(new e(t,a)),a.setData(t.getData(1)),CKEDITOR.env.ie&&(a.attachListener(t,"resize",i,a),a.attachListener(CKEDITOR.document.getWindow(),"resize",i,a),CKEDITOR.tools.setTimeout(i,0,a)),t.fire("ariaWidget",this),n()
}),t.addCommand("source",n.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()
}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var i=e.langCode,i=t.availableLangs[i]?i:t.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en";
CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+i+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[i]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,i=e.lang.stylescombo,n={},a=[],r=[];
e.on("stylesSet",function(i){if(i=i.data.styles){for(var o,s,l=0,c=i.length;c>l;l++)o=i[l],e.blockless&&o.element in CKEDITOR.dtd.$block||(s=o.name,o=new CKEDITOR.style(o),(!e.filter.customConfig||e.filter.check(o))&&(o._name=s,o._.enterMode=t.enterMode,o._.weight=l+1e3*(o.type==CKEDITOR.STYLE_OBJECT?1:o.type==CKEDITOR.STYLE_BLOCK?2:3),n[s]=o,a.push(o),r.push(o)));a.sort(function(e,t){return e._.weight-t._.weight})}}),e.ui.addRichCombo("Styles",{label:i.label,title:i.panelTitle,toolbar:"styles,10",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":i.panelTitle}},init:function(){var e,t,n,r,o,s;
for(o=0,s=a.length;s>o;o++)e=a[o],t=e._name,r=e.type,r!=n&&(this.startGroup(i["panelTitle"+r]),n=r),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot");var t=n[t],i=e.elementPath();e[t.checkActive(i)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(e){for(var t,i=this.getValue(),e=e.data.path.elements,a=0,r=e.length;r>a;a++){t=e[a];for(var o in n)if(n[o].checkElementRemovable(t,!0))return void(o!=i&&this.setValue(o))}this.setValue("")},this)},onOpen:function(){var t=e.getSelection().getSelectedElement(),t=e.elementPath(t),a=[0,0,0,0];
this.showAll(),this.unmarkAll();for(var r in n){var o=n[r],s=o.type;o.checkApplicable(t,e.activeFilter)?a[s]++:this.hideItem(r),o.checkActive(t)&&this.mark(r)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_BLOCK]),a[CKEDITOR.STYLE_INLINE]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_INLINE]),a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(i["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var t=e.elementPath();if(t){for(var i in n)if(n[i].checkApplicable(t,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){n={},a=[]}})}})}(),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var i,n=t.getSelection();
if(i=new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root).contains({td:1,th:1},1)){var n=t.createRange(),a=CKEDITOR.tools.tryThese(function(){var t=i.getParent().$.cells[i.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t},function(){var t=i.getParent(),t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(a||e){if(!a)return!0;a=new CKEDITOR.dom.element(a),n.moveToElementEditStart(a),(!n.checkStartOfBlock()||!n.checkEndOfBlock())&&n.selectNodeContents(a)}else{for(var r=i.getAscendant("table").$,a=i.getParent().$.cells,r=new CKEDITOR.dom.element(r.insertRow(-1),t.document),o=0,s=a.length;s>o;o++)r.append(new CKEDITOR.dom.element(a[o],t.document).clone(!1,!1)).appendBogus();
n.moveToElementEditStart(r)}return n.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},i={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},n={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(a){for(var r=a.config.enableTabKeyTools!==!1,o=a.config.tabSpaces||0,s="";o--;)s+="Â ";s&&a.on("key",function(e){9==e.data.keyCode&&(a.insertHtml(s),e.cancel())}),r&&a.on("key",function(e){(9==e.data.keyCode&&a.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&a.execCommand("selectPreviousCell"))&&e.cancel()}),a.addCommand("blur",CKEDITOR.tools.extend(i,t)),a.addCommand("blurBack",CKEDITOR.tools.extend(n,t)),a.addCommand("selectNextCell",e()),a.addCommand("selectPreviousCell",e(!0))
}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var i,n,a,r,o,s,l=void 0===t?this.getTabIndex():t;if(0>=l)for(o=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);o;){if(o.isVisible()&&0===o.getTabIndex()){a=o;break}o=o.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(o=this.getDocument().getBody().getFirst();o=o.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&o.equals(this)){if(n=!0,e){if(!(o=o.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;i=1}}else n&&!this.contains(o)&&(i=1);if(o.isVisible()&&!((s=o.getTabIndex())<0)){if(i&&s==l){a=o;break}s>l&&(!a||!r||r>s)?(a=o,r=s):a||0!==s||(a=o,r=s)}}a&&a.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var i,n,a,r,o=void 0===t?this.getTabIndex():t,s=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!i)if(!n&&l.equals(this)){if(n=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;
i=1}}else n&&!this.contains(l)&&(i=1);if(l.isVisible()&&!((r=l.getTabIndex())<0))if(0>=o){if(i&&0===r){a=l;break}r>s&&(a=l,s=r)}else{if(i&&r==o){a=l;break}o>r&&(!a||r>s)&&(a=l,s=r)}}a&&a.focus()},function(){function e(e){this.editor=e,this.reset()}CKEDITOR.plugins.add("undo",{init:function(t){function i(e){a.enabled&&e.data.command.canUndo!==!1&&a.save()}function n(){a.enabled=t.readOnly?!1:"wysiwyg"==t.mode,a.onChange()}var a=t.undoManager=new e(t),r=t.addCommand("undo",{exec:function(){a.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),o=t.addCommand("redo",{exec:function(){a.redo()&&(t.selectionChange(),this.fire("afterRedo"))
},startDisabled:!0,canUndo:!1});t.setKeystroke([[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"]]),a.onChange=function(){r.setState(a.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.setState(a.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",i),t.on("afterCommandExec",i),t.on("saveSnapshot",function(e){a.save(e.data&&e.data.contentOnly)}),t.on("contentDom",function(){t.editable().on("keydown",function(e){e=e.data.getKey(),(8==e||46==e)&&a.type(e,0)}),t.editable().on("keypress",function(e){a.type(e.data.getKey(),1)})}),t.on("beforeModeUnload",function(){"wysiwyg"==t.mode&&a.save(!0)
}),t.on("mode",n),t.on("readOnly",n),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){a.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",function(){a.currentImage&&a.update()}),t.on("lockSnapshot",function(e){a.lock(e.data&&e.data.dontUpdate)}),t.on("unlockSnapshot",a.unlock,a)}}),CKEDITOR.plugins.undo={};var t=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var i=e.getSnapshot();CKEDITOR.env.ie&&i&&(i=i.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=i,t||(this.bookmarks=(i=i&&e.getSelection())&&i.createBookmarks2(!0)),e.fire("afterUndoImage")
},i=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equalsContent:function(e){var t=this.contents,e=e.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&(t=t.replace(i,""),e=e.replace(i,"")),t!=e?!1:!0},equalsSelection:function(e){var t=this.bookmarks,e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++){var n=t[i],a=e[i];if(n.startOffset!=a.startOffset||n.endOffset!=a.endOffset||!CKEDITOR.tools.arrayCompare(n.start,a.start)||!CKEDITOR.tools.arrayCompare(n.end,a.end))return!1}}return!0}},e.prototype={type:function(e,i){var n=!i&&e!=this.lastKeystroke,a=this.editor;if(!this.typing||i&&!this.wasCharacter||n){var r=new t(a),o=this.snapshots.length;
CKEDITOR.tools.setTimeout(function(){var e=a.getSnapshot();CKEDITOR.env.ie&&(e=e.replace(/\s+data-cke-expando=".*?"/g,"")),r.contents!=e&&o==this.snapshots.length&&(this.typing=!0,this.save(!1,r,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=e,(this.wasCharacter=i)?(this.modifiersCount=0,this.typesCount++,this.typesCount>25?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){a.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){a.fire("change")
},0))},reset:function(){this.lastKeystroke=0,this.snapshots=[],this.index=-1,this.limit=this.editor.config.undoStackSize||20,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.typing=!1,delete this.lastKeystroke,this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,i,n){if(this.locked)return!1;var a=this.snapshots;if(i||(i=new t(this.editor)),i.contents===!1)return!1;if(this.currentImage)if(i.equalsContent(this.currentImage)){if(e||i.equalsSelection(this.currentImage))return!1
}else this.editor.fire("change");return a.splice(this.index+1,a.length-this.index-1),a.length==this.limit&&a.shift(),this.index=a.push(i)-1,this.currentImage=i,n!==!1&&this.fireChange(),!0},restoreImage:function(e){var t,i=this.editor;e.bookmarks&&(i.focus(),t=i.getSelection()),this.locked=1,this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(t=this.editor.document.getBody().$.createTextRange(),t.collapse(!0),t.select()),this.locked=0,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.fireChange(),i.fire("change")},getNextImage:function(e){var t,i=this.snapshots,n=this.currentImage;
if(n)if(e){for(t=this.index-1;t>=0;t--)if(e=i[t],!n.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<i.length;t++)if(e=i[t],!n.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new t(this.editor));for(var i=this.index,n=this.snapshots;i>0&&this.currentImage.equalsContent(n[i-1]);)i-=1;
n.splice(i,this.index-i+1,e),this.index=i,this.currentImage=e}},lock:function(e){this.locked?this.locked.level++:e?this.locked={level:1}:(e=new t(this.editor,!0),this.locked={update:this.currentImage&&this.currentImage.equalsContent(e)?e:null,level:1})},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update,i=e&&new t(this.editor,!0);this.locked=null,e&&!e.equalsContent(i)&&this.update()}}}}(),function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(e){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),e.addCommand("templates",new CKEDITOR.dialogCommand("templates")),e.ui.addButton&&e.ui.addButton("Templates",{label:e.lang.templates.button,command:"templates",toolbar:"doctools,10"})
}});var e={},t={};CKEDITOR.addTemplates=function(t,i){e[t]=i},CKEDITOR.getTemplates=function(t){return e[t]},CKEDITOR.loadTemplates=function(e,i){for(var n=[],a=0,r=e.length;r>a;a++)t[e[a]]||(n.push(e[a]),t[e[a]]=1);n.length?CKEDITOR.scriptLoader.load(n,i):setTimeout(i,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,CKEDITOR.plugins.add("divarea",{afterInit:function(e){e.addMode("wysiwyg",function(t){var i=CKEDITOR.dom.element.createFromHtml('<div class="cke_wysiwyg_div cke_reset" hidefocus="true"></div>');e.ui.space("contents").append(i),i=e.editable(i),i.detach=CKEDITOR.tools.override(i.detach,function(e){return function(){e.apply(this,arguments),this.remove()
}}),e.setData(e.getData(1),t),e.fire("contentDom")})}}),function(){function e(e,t){var i,t=void 0===t||t;if(t)i=e.getComputedStyle("text-align");else{for(;(!e.hasAttribute||!e.hasAttribute("align")&&!e.getStyle("text-align"))&&(i=e.getParent(),i);)e=i;i=e.getStyle("text-align")||e.getAttribute("align")||""}return i&&(i=i.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!i&&t&&(i="rtl"==e.getComputedStyle("direction")?"right":"left"),i}function t(e,t,i){this.editor=e,this.name=t,this.value=i,this.context="p";var t=e.config.justifyClasses,n=e.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(i){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];
break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)"),this.requiredContent=n+"("+this.cssClassName+")"}else this.requiredContent=n+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function i(e){var t=e.editor,i=t.createRange();i.setStartBefore(e.data.node),i.setEndAfter(e.data.node);for(var n,a=new CKEDITOR.dom.walker(i);n=a.next();)if(n.type==CKEDITOR.NODE_ELEMENT)if(!n.equals(e.data.node)&&n.getDirection())i.setStartAfter(n),a=new CKEDITOR.dom.walker(i);
else{var r=t.config.justifyClasses;r&&(n.hasClass(r[0])?(n.removeClass(r[0]),n.addClass(r[2])):n.hasClass(r[2])&&(n.removeClass(r[2]),n.addClass(r[0]))),r=n.getStyle("text-align"),"left"==r?n.setStyle("text-align","right"):"right"==r&&n.setStyle("text-align","left")}}t.prototype={exec:function(t){var i=t.getSelection(),n=t.config.enterMode;if(i){for(var a,r,o=i.createBookmarks(),s=i.getRanges(),l=this.cssClassName,c=t.config.useComputedState,c=void 0===c||c,d=s.length-1;d>=0;d--)for(a=s[d].createIterator(),a.enlargeBr=n!=CKEDITOR.ENTER_BR;r=a.getNextParagraph(n==CKEDITOR.ENTER_P?"p":"div");)if(!r.isReadOnly()){r.removeAttribute("align"),r.removeStyle("text-align");
var u=l&&(r.$.className=CKEDITOR.tools.ltrim(r.$.className.replace(this.cssClassRegex,""))),h=this.state==CKEDITOR.TRISTATE_OFF&&(!c||e(r,!0)!=this.value);l?h?r.addClass(l):u||r.removeAttribute("class"):h&&r.setStyle("text-align",this.value)}t.focus(),t.forceNextSelectionCheck(),i.selectBookmarks(o)}},refresh:function(t,i){var n=i.block||i.blockLimit;this.setState("body"!=n.getName()&&e(n,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var n=new t(e,"justifyleft","left"),a=new t(e,"justifycenter","center"),r=new t(e,"justifyright","right"),o=new t(e,"justifyblock","justify");
e.addCommand("justifyleft",n),e.addCommand("justifycenter",a),e.addCommand("justifyright",r),e.addCommand("justifyblock",o),e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.justify.right,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),e.on("dirChanged",i)}}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(e){if(!e.blockless){var t;
t=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"}),t=e.addCommand("numberedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),t=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"}),t=e.addCommand("bulletedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),e.addMenuGroup("list",108),e.addMenuItems({numberedlist:{label:e.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:e.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),e.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null;
for(;e;){var t=e.getName();if("ol"==t)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==t)return{bulletedlist:CKEDITOR.TRISTATE_OFF};e=e.getParent()}return null})}}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.frame=this.win.getFrame(),this.inline=this.editable.isInline(),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function i(e,t){var i=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:i,doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline=i.isInline(),this.inline||(this.frame=this.win.getFrame()),this.queryViewport();
var n=CKEDITOR.tools.bind(this.queryViewport,this),s=CKEDITOR.tools.bind(this.hideVisible,this),l=CKEDITOR.tools.bind(this.removeAll,this);i.attachListener(this.winTop,"resize",n),i.attachListener(this.winTop,"scroll",n),i.attachListener(this.winTop,"resize",s),i.attachListener(this.win,"scroll",s),i.attachListener(this.inline?i:this.frame,"mouseout",function(e){var t=e.data.$.clientX,e=e.data.$.clientY;this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()},this),i.attachListener(e,"resize",n),i.attachListener(e,"mode",l),e.on("destroy",l),this.lineTpl=new CKEDITOR.template(o).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},a,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},a,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})
}function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&!(s[e.getComputedStyle("float")]||s[e.getAttribute("align")])&&!l[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,i,n,a=this,r=this.editor,o=this.doc,s=CKEDITOR.tools.eventsBuffer(50,function(){r.readOnly||"wysiwyg"!=r.mode||(a.relations={},t=new CKEDITOR.dom.element(o.$.elementFromPoint(i,n)),a.traverseSearch(t),isNaN(i+n)||a.pixelSearch(t,i,n),e&&e(a.relations,i,n))});this.listener=this.editable.attachListener(this.target,"mousemove",function(e){i=e.data.$.clientX,n=e.data.$.clientY,s.input()
}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){s.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var i=this.editor.createRange();return i.moveToPosition(this.relations[t.uid].element,e[t.type]),i}}(),store:function(){function e(e,t,i){var n=e.getUniqueId();n in i?i[n].type=i[n].type|t:i[n]={element:e,type:t}}return function(t,i){var a;i&CKEDITOR.LINEUTILS_AFTER&&n(a=t.getNext())&&a.isVisible()&&(e(a,CKEDITOR.LINEUTILS_BEFORE,this.relations),i^=CKEDITOR.LINEUTILS_AFTER),i&CKEDITOR.LINEUTILS_INSIDE&&n(a=t.getFirst())&&a.isVisible()&&(e(a,CKEDITOR.LINEUTILS_BEFORE,this.relations),i^=CKEDITOR.LINEUTILS_INSIDE),e(t,i,this.relations)
}}(),traverseSearch:function(e){var t,i,a;do if(a=e.$["data-cke-expando"],!(a&&a in this.relations)){if(e.equals(this.editable))break;if(n(e))for(t in this.lookups)(i=this.lookups[t](e))&&this.store(e,i)}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,i,a,r,o){for(var s,l=0;o(a)&&(a+=r,25!=++l);)if(s=this.doc.$.elementFromPoint(i,a))if(s==e)l=0;else if(t(e,s)&&(l=0,n(s=new CKEDITOR.dom.element(s))))return s}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,i,a){var r=this.win.getViewPaneSize().height,o=e.call(this,t.$,i,a,-1,function(e){return e>0
}),i=e.call(this,t.$,i,a,1,function(e){return r>e});if(o)for(this.traverseSearch(o);!o.getParent().equals(t);)o=o.getParent();if(i)for(this.traverseSearch(i);!i.getParent().equals(t);)i=i.getParent();for(;(o||i)&&(o&&(o=o.getNext(n)),o&&!o.equals(i))&&(this.traverseSearch(o),i&&(i=i.getPrevious(n)),i&&!i.equals(o));)this.traverseSearch(i)}}(),greedySearch:function(){this.relations={};for(var e,t,i,a=this.editable.getElementsByTag("*"),r=0;e=a.getItem(r++);)if(!e.equals(this.editable)&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&n(e)&&e.isVisible())for(i in this.lookups)(t=this.lookups[i](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var i=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();
return i&&n(i)?(e.siblingRect=i.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}var t,i;return function(n){this.locations={};for(i in n)t=n[i],t.elementRect=t.element.getClientRect(),t.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(i,CKEDITOR.LINEUTILS_BEFORE,e(t,CKEDITOR.LINEUTILS_BEFORE)),t.type&CKEDITOR.LINEUTILS_AFTER&&this.store(i,CKEDITOR.LINEUTILS_AFTER,e(t,CKEDITOR.LINEUTILS_AFTER)),t.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(i,CKEDITOR.LINEUTILS_INSIDE,(t.elementRect.top+t.elementRect.bottom)/2);return this.locations
}}(),sort:function(){var e,t,i,n,a,r;return function(o,s){e=this.locations,t=[];for(n in e)for(a in e[n])if(i=Math.abs(o-e[n][a]),t.length){for(r=0;r<t.length;r++)if(i<t[r].dist){t.splice(r,0,{uid:+n,type:a,dist:i});break}r==t.length&&t.push({uid:+n,type:a,dist:i})}else t.push({uid:+n,type:a,dist:i});return"undefined"!=typeof s?t.slice(0,s):t}}(),store:function(e,t,i){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=i}};var a={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},r={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999},o='<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>';
i.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var i,n,a;if(i=this.getStyle(e.uid,e.type)){for(a in this.visible)if(this.visible[a].getCustomData("hash")!==this.hash){n=this.visible[a];break}if(!n)for(a in this.hidden)if(this.hidden[a].getCustomData("hash")!==this.hash){this.showLine(n=this.hidden[a]);
break}n||this.showLine(n=this.addLine()),n.setCustomData("hash",this.hash),this.visible[n.getUniqueId()]=n,n.setStyles(i),t&&t(n)}},getStyle:function(e,t){var i=this.relations[e],n=this.locations[e][t],a={};if(a.width=i.siblingRect?Math.max(i.siblingRect.width,i.elementRect.width):i.elementRect.width,a.top=this.inline?n+this.winTopScroll.y:this.rect.top+this.winTopScroll.y+n,a.top-this.winTopScroll.y<this.rect.top||a.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?a.left=i.elementRect.left:(i.elementRect.left>0?a.left=this.rect.left+i.elementRect.left:(a.width=a.width+i.elementRect.left,a.left=this.rect.left),(i=a.left+a.width-(this.rect.left+this.winPane.width))>0&&(a.width=a.width-i)),a.left=a.left+this.winTopScroll.x;
for(var r in a)a[r]=CKEDITOR.tools.cssLength(a[r]);return a},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)e=this.visible[t],e.getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.inline?this.editable.getClientRect():this.frame.getClientRect()}};var s={left:1,right:1,center:1},l={absolute:1,fixed:1};
CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:i}}(),function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},k(this),_(this),this.on("checkWidgets",r),this.editor.on("contentDomInvalidated",this.checkWidgets,this),T(this),E(this),w(this),I(this),x(this)}function t(e,i,n,a,r){var o=e.editor;CKEDITOR.tools.extend(this,a,{editor:o,id:i,inline:"span"==n.getParent().getName(),element:n,data:CKEDITOR.tools.extend({},"function"==typeof a.defaults?a.defaults():a.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:a,repository:e,draggable:a.draggable!==!1,_:{downcastFn:a.downcast&&"string"==typeof a.downcast?a.downcasts[a.downcast]:a.downcast}},!0),e.fire("instanceCreated",this),Q(this,a),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(e)),r&&this.setData(r),this.dataReady=!0,$(this),this.fire("data",this.data),this.isInited()&&o.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))
}function i(e,t,i){CKEDITOR.dom.element.call(this,t.$),this.editor=e,t=this.filter=i.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function n(e,t){e.addCommand(t.name,{exec:function(){function i(){e.widgets.finalizeCreation(o)}var n=e.widgets.focused;if(n&&n.name==t.name)n.edit();else if(t.insert)t.insert();else if(t.template){var a,n="function"==typeof t.defaults?t.defaults():t.defaults,n=CKEDITOR.dom.element.createFromHtml(t.template.output(n)),r=e.widgets.wrapElement(n,t.name),o=new CKEDITOR.dom.documentFragment(r.getDocument());
o.append(r),(a=e.widgets.initOn(n,t))?(n=a.once("edit",function(t){t.data.dialog?a.once("dialog",function(t){var n,r,t=t.data;n=t.once("ok",i,null,null,20),r=t.once("cancel",function(){e.widgets.destroy(a,!0)}),t.once("hide",function(){n.removeListener(),r.removeListener()})}):i()},null,null,999),a.edit(),n.removeListener()):i()}},refresh:function(e,t){this.setState(l(e.editable(),t.blockLimit)?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)},context:"div",allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}function a(e,t){e.focused=null,t.isInited()&&(e.fire("widgetBlurred",{widget:t}),t.setFocused(!1))
}function r(e){if(e=e.data,"wysiwyg"==this.editor.mode){var t,i,n=this.editor.editable(),a=this.instances;if(n){for(t in a)n.contains(a[t].wrapper)||this.destroy(a[t],!0);if(e&&e.initOnlyNew)n=this.initOnAll();else{var r=n.find(".cke_widget_wrapper"),n=[];for(t=0,a=r.count();a>t;t++){i=r.getItem(t);var o;if(o=!this.getByElement(i,!0)){e:{o=g;for(var s=i;s=s.getParent();)if(o(s)){o=!0;break e}o=!1}o=!o}o&&(i.addClass("cke_widget_new"),n.push(this.initOn(i.getFirst(h))))}}e&&e.focusInited&&1==n.length&&n[0].focus()}}}function o(e,t,i){if(!i.allowedContent)return null;var n=this._.filters[e];return n||(this._.filters[e]=n={}),(e=n[t])||(n[t]=e=new CKEDITOR.filter(i.allowedContent)),e
}function s(e){var t=[],i=e._.upcasts,n=e._.upcastCallbacks;return{toBeWrapped:t,iterator:function(e){var a,r,o,s,l;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(u))&&t.push([e]),!1;if("data-widget"in e.attributes)return t.push([e]),!1;if(l=i.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(s=0,a=n.length;a>s;++s)if(n[s](e)===!1)return;for(s=0;l>s;++s)if(a=i[s],o={},r=a[0](e,o))return r instanceof CKEDITOR.htmlParser.element&&(e=r),e.attributes["data-cke-widget-data"]=JSON.stringify(o),e.attributes["data-cke-widget-upcasted"]=1,t.push([e,a[1]]),!1}}}}function l(e,t){return!t||t.equals(e)?null:m(t)?t:l(e,t.getParent())}function c(e){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")}
}function d(e,t,i){if(e.type==CKEDITOR.NODE_ELEMENT){var n=CKEDITOR.dtd[e.name];if(n&&!n[i.name]){var n=e.split(t),a=e.parent,t=n.getIndex();return e.children.length||(t-=1,e.remove()),n.children.length||n.remove(),d(a,t,i)}}e.add(i,t)}function u(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]}function h(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")}function p(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function f(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")}function m(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")
}function g(e){return e.hasAttribute("data-cke-temp")}function v(e,t,i){t.focus(),e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:!0}),i.select(),i=t.wrapper.getOuterHtml(),t.wrapper.remove(),e.widgets.destroy(t,!0),e.execCommand("paste",i),e.fire("unlockSnapshot")}function b(e,t,i,n){var a=e.editor;a.fire("lockSnapshot"),i?(n=i.data("cke-widget-editable"),n=t.editables[n],e.widgetHoldingFocusedEditable=t,t.focusedEditable=n,i.addClass("cke_widget_editable_focused"),n.filter&&a.setActiveFilter(n.filter),a.setActiveEnterMode(n.enterMode,n.shiftEnterMode)):(n||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,a.setActiveFilter(null),a.setActiveEnterMode(null,null)),a.fire("unlockSnapshot")
}function y(e){e.contextMenu&&e.contextMenu.addListener(function(t){return(t=e.widgets.getByElement(t,!0))?t.fire("contextMenu",{}):void 0})}function C(e,t){return CKEDITOR.tools.trim(t)}function I(e){var t=e.editor,i=CKEDITOR.plugins.lineutils;t.on("contentDom",function(){var n=t.editable(),a=CKEDITOR.env.ie&&CKEDITOR.env.version<9||n.isInline()?n:t.document;n.attachListener(a,"drop",function(i){var n,a,r=i.data.$.dataTransfer.getData("text");if(r){try{n=JSON.parse(r)}catch(o){return}if("cke-widget"==n.type&&(i.data.preventDefault(),n.editor==t.name&&(a=e.instances[n.id]))){e:if(n=i.data.$,r=t.createRange(),i.data.testRange)r=i.data.testRange;else if(document.caretRangeFromPoint)i=t.document.$.caretRangeFromPoint(n.clientX,n.clientY),r.setStart(CKEDITOR.dom.node(i.startContainer),i.startOffset),r.collapse(!0);
else if(n.rangeParent)r.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),r.collapse(!0);else{if(!document.body.createTextRange){r=null;break e}i=t.document.getBody().$.createTextRange(),i.moveToPoint(n.clientX,n.clientY),n="cke-temp-"+(new Date).getTime(),i.pasteHTML('<span id="'+n+'">â</span>'),i=t.document.getById(n),r.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove()}r&&(CKEDITOR.env.gecko?setTimeout(v,0,t,a,r):v(t,a,r))}}}),CKEDITOR.tools.extend(e,{finder:new i.finder(t,{lookups:{"default":function(e){if(!e.is(CKEDITOR.dtd.$listItem)&&e.is(CKEDITOR.dtd.$block)){for(;e;){if(m(e))return;e=e.getParent()}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER
}}}}),locator:new i.locator(t),liner:new i.liner(t,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function E(e){var t=e.editor;t.on("contentDom",function(){var i,n,a=t.editable(),r=a.isInline()?a:t.document;a.attachListener(r,"mousedown",function(t){var a=t.data.getTarget();return a.type?(i=e.getByElement(a),n=0,void(i&&(i.inline&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")?n=1:l(i.wrapper,a)?i=null:(t.data.preventDefault(),CKEDITOR.env.ie||i.focus())))):!1}),a.attachListener(r,"mouseup",function(){i&&n&&(n=0,i.focus())
}),CKEDITOR.env.ie&&a.attachListener(r,"mouseup",function(){i&&setTimeout(function(){i.focus(),i=null})})}),t.on("doubleclick",function(t){var i=e.getByElement(t.data.element);return i&&!l(i.wrapper,t.data.element)?i.fire("doubleclick",{element:t.data.element}):void 0},null,null,1)}function w(e){e.editor.on("key",function(t){var i,n=e.focused,a=e.widgetHoldingFocusedEditable;return n?i=n.fire("key",{keyCode:t.data.keyCode}):a&&(n=t.data.keyCode,t=a.focusedEditable,n==CKEDITOR.CTRL+65?(n=t.getBogus(),a=a.editor.createRange(),a.selectNodeContents(t),n&&a.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),a.select(),i=!1):8==n||46==n?(i=a.editor.getSelection().getRanges(),a=i[0],i=!(1==i.length&&a.collapsed&&a.checkBoundaryOfElement(t,CKEDITOR[8==n?"START":"END"]))):i=void 0),i
},null,null,1)}function x(e){function t(t){e.focused&&O(e.focused,"cut"==t.name)}var i=e.editor;i.on("contentDom",function(){var e=i.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)})}function T(e){var t=e.editor;t.on("selectionCheck",function(){e.fire("checkSelection")}),e.on("checkSelection",e.checkSelection,e),t.on("selectionChange",function(i){var n=(i=l(t.editable(),i.data.selection.getStartElement()))&&e.getByElement(i),a=e.widgetHoldingFocusedEditable;a?a===n&&a.focusedEditable.equals(i)||(b(e,a,null),n&&i&&b(e,n,i)):n&&i&&b(e,n,i)}),t.on("dataReady",function(){R(e).commit()}),t.on("blur",function(){var t;(t=e.focused)&&a(e,t),(t=e.widgetHoldingFocusedEditable)&&b(e,t,null)
})}function _(e){var t=e.editor,i={};t.on("toDataFormat",function(t){var n=CKEDITOR.tools.getNextNumber(),a=[];t.data.downcastingSessionId=n,i[n]=a,t.data.dataValue.forEach(function(t){var i,n=t.attributes;if("data-cke-widget-id"in n)(n=e.instances[n["data-cke-widget-id"]])&&(i=t.getFirst(u),a.push({wrapper:t,element:i,widget:n,editables:{}}),"1"!=i.attributes["data-cke-widget-keep-attr"]&&delete i.attributes["data-widget"]);else if("data-cke-widget-editable"in n)return a[a.length-1].editables[n["data-cke-widget-editable"]]=t,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),t.on("toDataFormat",function(e){if(e.data.downcastingSessionId)for(var t,n,a,r,o,s,e=i[e.data.downcastingSessionId];t=e.shift();){n=t.widget,a=t.element,r=n._.downcastFn&&n._.downcastFn.call(n,a);
for(s in t.editables)o=t.editables[s],delete o.attributes.contenteditable,o.setHtml(n.editables[s].getData());r||(r=a),t.wrapper.replaceWith(r)}},null,null,13),t.on("contentDomUnload",function(){e.destroyAll(!0)})}function k(e){function t(){a.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:i}),a.fire("unlockSnapshot")}var i,n,a=e.editor;a.on("toHtml",function(t){var n,a=s(e);for(t.data.dataValue.forEach(a.iterator,CKEDITOR.NODE_ELEMENT,!0);n=a.toBeWrapped.pop();){var r=n[0],o=r.parent;o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"]&&o.replaceWith(r),e.wrapElement(n[0],n[1])}i=1==t.data.dataValue.children.length&&t.data.dataValue.children[0].type==CKEDITOR.NODE_ELEMENT&&t.data.dataValue.children[0].attributes["data-cke-widget-wrapper"]
},null,null,8),a.on("dataReady",function(){if(n)for(var t,i,r=e,o=a.editable().find(".cke_widget_wrapper"),s=0,l=o.count();l>s;++s)t=o.getItem(s),i=t.getFirst(h),i.type==CKEDITOR.NODE_ELEMENT&&i.data("widget")?(i.replace(t),r.wrapElement(i)):t.remove();n=0,e.destroyAll(!0),e.initOnAll()}),a.on("loadSnapshot",function(t){/data-cke-widget/.test(t.data)&&(n=1),e.destroyAll(!0)},null,null,9),a.on("paste",function(e){e.data.dataValue=e.data.dataValue.replace(B,C)}),a.on("insertText",t,null,null,999),a.on("insertHtml",t,null,null,999)}function R(e){var t=e.selected,i=[],n=t.slice(0),r=null;return{select:function(e){return CKEDITOR.tools.indexOf(t,e)<0&&i.push(e),e=CKEDITOR.tools.indexOf(n,e),e>=0&&n.splice(e,1),this
},focus:function(e){return r=e,this},commit:function(){var o,s=e.focused!==r;for(e.editor.fire("lockSnapshot"),s&&(o=e.focused)&&a(e,o);o=n.pop();)t.splice(CKEDITOR.tools.indexOf(t,o),1),o.isInited()&&o.setSelected(!1);for(s&&r&&(e.focused=r,e.fire("widgetFocused",{widget:r}),r.setFocused(!0));o=i.pop();)t.push(o),o.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function D(e){e.cancel()}function O(e,t){var i=e.editor,n=i.document;if(!n.getById("cke_copybin")){var a=i.blockless||CKEDITOR.env.ie?"span":"div",r=n.createElement(a),o=n.createElement(a),a=CKEDITOR.env.ie&&CKEDITOR.env.version<9;o.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),r.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),r.setStyle("ltr"==i.config.contentsLangDirection?"left":"right","-5000px"),r.setHtml('<span data-cke-copybin-start="1">â</span>'+e.wrapper.getOuterHtml()+'<span data-cke-copybin-end="1">â</span>'),i.fire("saveSnapshot"),i.fire("lockSnapshot"),o.append(r),i.editable().append(o);
var s=i.on("selectionChange",D,null,null,0),l=e.repository.on("checkSelection",D,null,null,0);if(a)var c=n.getDocumentElement().$,d=c.scrollTop;n=i.createRange(),n.selectNodeContents(r),n.select(),a&&(c.scrollTop=d),setTimeout(function(){t||e.focus(),o.remove(),s.removeListener(),l.removeListener(),i.fire("unlockSnapshot"),t&&(e.repository.del(e),i.fire("saveSnapshot"))},100)}}function q(){var e=CKEDITOR.document.getActive(),t=this.editor,i=t.editable();(i.isInline()?i:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(i)}function S(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))
}function K(e){if(e.draggable){var t,i=e.editor,n=e.wrapper.findOne(".cke_widget_drag_handler_container");n?t=n.findOne("img"):(n=new CKEDITOR.dom.element("span",i.document),n.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+i.plugins.widget.path+"images/handle.png)"}),t=new CKEDITOR.dom.element("img",i.document),t.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:z,width:F,title:i.lang.widget.move,height:F}),e.inline&&t.setAttribute("draggable","true"),n.append(t),e.wrapper.append(n)),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout(function(){e.on("data",e.updateDragHandlerPosition,e)
},50),e.inline?t.on("dragstart",function(t){t.data.$.dataTransfer.setData("text",JSON.stringify({type:"cke-widget",editor:i.name,id:e.id}))}):t.on("mousedown",A,e),e.dragHandlerContainer=n}}function A(){function e(){var e;for(u.reset();e=l.pop();)e.removeListener();var t=c,i=this.repository.finder;e=this.repository.liner;var n=this.editor,a=this.editor.editable();CKEDITOR.tools.isEmpty(e.visible)||(t=i.getRange(t[0]),this.focus(),n.fire("saveSnapshot"),n.fire("lockSnapshot",{dontUpdate:1}),n.getSelection().reset(),a.insertElementIntoRange(this.wrapper,t),this.focus(),n.fire("unlockSnapshot"),n.fire("saveSnapshot")),a.removeClass("cke_widget_dragging"),e.hideVisible()
}var t,i,n=this.repository.finder,a=this.repository.locator,r=this.repository.liner,o=this.editor,s=o.editable(),l=[],c=[],d=n.greedySearch(),u=CKEDITOR.tools.eventsBuffer(50,function(){t=a.locate(d),c=a.sort(i,1),c.length&&(r.prepare(d,t),r.placeLine(c[0]),r.cleanup())});s.addClass("cke_widget_dragging"),l.push(s.on("mousemove",function(e){i=e.data.$.clientY,u.input()})),l.push(o.document.once("mouseup",e,this)),l.push(CKEDITOR.document.once("mouseup",e,this))}function N(e){var t,i,n=e.editables;if(e.editables={},e.editables)for(t in n)i=n[t],e.initEditable(t,"string"==typeof i?{selector:i}:i)}function M(e){if(e.mask){var t=e.wrapper.findOne(".cke_widget_mask");
t||(t=new CKEDITOR.dom.element("img",e.editor.document),t.setAttributes({src:z,"class":"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}}function P(e){if(e.parts){var t,i,n={};for(i in e.parts)t=e.wrapper.findOne(e.parts[i]),n[i]=t;e.parts=n}}function Q(e,t){L(e),P(e),N(e),M(e),K(e),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&e.wrapper.on("dragstart",function(t){var i=t.data.getTarget();!(l(e,i)||e.inline&&i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("data-cke-widget-drag-handler")||!t.data.preventDefault())}),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",function(t){if(t=t.data.keyCode,13==t)e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void O(e,t==CKEDITOR.CTRL+88);
if(t in H||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1},null,null,999),e.on("doubleclick",function(){e.edit()}),t.data&&e.on("data",t.data),t.edit&&e.on("edit",t.edit)}function L(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)}function $(e){e.element.data("cke-widget-data",JSON.stringify(e.data))}var F=15;CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:"+F+"px;height:0;left:-9999px;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:"+F+"px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:"+F+"px;height:"+F+"px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}")
},beforeInit:function(t){t.widgets=new e(t)},afterInit:function(e){var t,i,n,a=e.widgets.registered;for(i in a)t=a[i],(n=t.button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:n,command:t.name,toolbar:"insert,10"});y(e)}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){t=CKEDITOR.tools.prototypedCopy(t),t.name=e,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),n(this.editor,t);var i=t,a=i.upcast;if(a)if("string"==typeof a)for(a=a.split(",");a.length;)this._.upcasts.push([i.upcasts[a.pop()],i.name]);else this._.upcasts.push([a,i.name]);return t.button||this.editor.addFeature(t),this.registered[e]=t
},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e,t=this.editor.getSelection(),i=t.getSelectedElement(),n=R(this);if(i&&(e=this.getByElement(i,!0)))return n.focus(e).select(e).commit();if(t=t.getRanges()[0],!t||t.collapsed)return n.commit();for(t=new CKEDITOR.dom.walker(t),t.evaluator=f;i=t.next();)n.select(this.getByElement(i));n.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,i=e.editor,n=i.createRange();(t=n.moveToClosestEditablePosition(e.wrapper,!0))||(t=n.moveToClosestEditablePosition(e.wrapper,!1)),t&&i.getSelection().selectRanges([n])
}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&b(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e){var t,i,n=this.instances;for(i in n)t=n[i],this.destroy(t,e)},finalizeCreation:function(e){(e=e.getFirst())&&f(e)&&(this.editor.insertElement(e),e=this.getByElement(e),e.ready=!0,e.fire("ready"),e.focus())},getByElement:function(e,t){if(!e)return null;var i,n;for(n in this.instances)if(i=this.instances[n].wrapper,i.equals(e)||!t&&i.contains(e))return this.instances[n];return null},initOn:function(e,i,n){if(i?"string"==typeof i&&(i=this.registered[i]):i=this.registered[e.data("widget")],!i)return null;
var a=this.wrapElement(e,i.name);return a?a.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,i,n),e.isInited()?this.instances[e.id]=e:null):this.getByElement(e):null},initOnAll:function(e){for(var t,e=(e||this.editor.editable()).find(".cke_widget_new"),i=[],n=e.count();n--;)(t=this.initOn(e.getItem(n).getFirst(h)))&&i.push(t);return i},wrapElement:function(e,t){var i,n,a=null;if(e instanceof CKEDITOR.dom.element){if(i=this.registered[t||e.data("widget")],!i)return null;if((a=e.getParent())&&a.type==CKEDITOR.NODE_ELEMENT&&a.data("cke-widget-wrapper"))return a;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),t&&e.data("widget",t),n=p(i,e.getName()),a=new CKEDITOR.dom.element(n?"span":"div"),a.setAttributes(c(n)),a.data("cke-display-name",i.pathName?i.pathName:e.getName()),e.getParent(!0)&&a.replace(e),e.appendTo(a)
}else if(e instanceof CKEDITOR.htmlParser.element){if(i=this.registered[t||e.attributes["data-widget"]],!i)return null;if((a=e.parent)&&a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-widget-wrapper"])return a;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),n=p(i,e.name),a=new CKEDITOR.htmlParser.element(n?"span":"div",c(n)),a.attributes["data-cke-display-name"]=i.pathName?i.pathName:e.name,i=e.parent;var r;i&&(r=e.getIndex(),e.remove()),a.add(e),i&&d(i,r,a)}return a},_tests_getNestedEditable:l,_tests_createEditableFilter:o},CKEDITOR.event.implementOn(e.prototype),t.prototype={destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);
e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var i=this.editables[e];i.removeListener("focus",S),i.removeListener("blur",q),this.editor.focusManager.remove(i),t||(i.removeClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),i.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;
this.fire("edit",e)!==!1&&e.dialog&&this.editor.openDialog(e.dialog,function(e){var i,n;t.fire("dialog",e)!==!1&&(i=e.on("show",function(){e.setupContent(t)}),n=e.on("ok",function(){var i,n=t.on("data",function(e){i=1,e.cancel()},null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),n.removeListener(),i&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))}),e.once("hide",function(){i.removeListener(),n.removeListener()}))})},initEditable:function(e,t){var n=this.wrapper.findOne(t.selector);return n&&n.is(CKEDITOR.dtd.$editable)?(n=new i(this.editor,n,{filter:o.call(this.repository,this.name,e,t)}),this.editables[e]=n,n.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":n.enterMode}),n.filter&&n.data("cke-filter",n.filter.id),n.addClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),t.pathName&&n.data("cke-display-name",t.pathName),this.editor.focusManager.add(n),n.on("focus",S,this),CKEDITOR.env.ie&&n.on("blur",q,this),n.setData(n.getHtml()),!0):!1
},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();e&&e.fake(this.wrapper),this.editor.focus()},setData:function(e,t){var i=this.data,n=0;if("string"==typeof e)i[e]!==t&&(i[e]=t,n=1);else{var a=e;for(e in a)i[e]!==a[e]&&(n=1,i[e]=a[e])}return n&&this.dataReady&&($(this),this.fire("data",i)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this
},updateDragHandlerPosition:function(){var e=this.editor,t=this.element.$,i=this._.dragHandlerOffset,t={x:t.offsetLeft,y:t.offsetTop-F};i&&t.x==i.x&&t.y==i.y||(i=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:t.y+"px",left:t.x+"px"}),e.fire("unlockSnapshot"),!i&&e.resetDirty(),this._.dragHandlerOffset=t)}},CKEDITOR.event.implementOn(t.prototype),i.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})
}});var B=RegExp('^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?</span>([\\s\\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?</span>(?:</(?:div|span)>)?(?:</(?:div|span)>)?$'),z="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",H={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=i}(),function(){var e="http://cdn.mathjax.org/mathjax/2.2-latest/MathJax.js?config=TeX-AMS_HTML";CKEDITOR.plugins.add("mathjax",{requires:"widget,dialog",icons:"mathjax",init:function(t){var i=t.config.mathJaxClass||"math-tex";
t.widgets.add("mathjax",{inline:!0,dialog:"mathjax",button:t.lang.mathjax.button,mask:!0,allowedContent:"span(!"+i+")",pathName:t.lang.mathjax.pathName,template:'<span class="'+i+'" style="display:inline-block" data-cke-survive=1></span>',parts:{span:"span"},defaults:{math:"\\(x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}\\)"},init:function(){var e=this.parts.span.getChild(0);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("iframe")||(e=new CKEDITOR.dom.element("iframe"),e.setAttributes({style:"border:0;width:0;height:0",scrolling:"no",frameborder:0,allowTransparency:!0,src:CKEDITOR.plugins.mathjax.fixSrc}),this.parts.span.append(e)),this.once("ready",function(){CKEDITOR.env.ie&&e.setAttribute("src",CKEDITOR.plugins.mathjax.fixSrc),this.frameWrapper=new CKEDITOR.plugins.mathjax.frameWrapper(e,t),this.frameWrapper.setValue(this.data.math)
})},data:function(){this.frameWrapper&&this.frameWrapper.setValue(this.data.math)},upcast:function(e,t){if("span"==e.name&&e.hasClass(i)&&!(e.children.length>1||e.children[0].type!=CKEDITOR.NODE_TEXT)){t.math=e.children[0].value;var n=e.attributes;return n.style=n.style?n.style+";display:inline-block":"display:inline-block",n["data-cke-survive"]=1,e.children[0].remove(),e}},downcast:function(e){e.children[0].replaceWith(new CKEDITOR.htmlParser.text(this.data.math));var t=e.attributes;return t.style=t.style.replace(/display:\s?inline-block;?\s?/,""),""===t.style&&delete t.style,e}}),CKEDITOR.dialog.add("mathjax",this.path+"dialogs/mathjax.js"),t.on("contentPreview",function(i){i.data.dataValue=i.data.dataValue.replace(/<\/head>/,'<script src="'+(t.config.mathJaxLib?CKEDITOR.getUrl(t.config.mathJaxLib):e)+'"></script></head>')
}),t.on("paste",function(e){e.data.dataValue=e.data.dataValue.replace(RegExp("<span[^>]*?"+i+".*?</span>","ig"),function(e){return e.replace(/(<iframe.*?\/iframe>)/i,"")})})}}),CKEDITOR.plugins.mathjax={},CKEDITOR.plugins.mathjax.fixSrc=CKEDITOR.env.gecko?"javascript:true":CKEDITOR.env.ie?"javascript:void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})())":"javascript:void(0)",CKEDITOR.plugins.mathjax.loadingIcon=CKEDITOR.plugins.get("mathjax").path+"images/loader.gif",CKEDITOR.plugins.mathjax.copyStyles=function(e,t){for(var i=["color","font-family","font-style","font-weight","font-variant","font-size"],n=0;n<i.length;n++){var a=i[n],r=e.getComputedStyle(a);
r&&t.setStyle(a,r)}},CKEDITOR.plugins.mathjax.trim=function(e){var t=e.indexOf("\\(")+2,i=e.lastIndexOf("\\)");return e.substring(t,i)},CKEDITOR.plugins.mathjax.frameWrapper=CKEDITOR.env.ie&&8==CKEDITOR.env.version?function(e,t){return e.getFrameDocument().write('<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="padding:0;margin:0;background:transparent;overflow:hidden"><span style="white-space:nowrap;" id="tex"></span></body></html>'),{setValue:function(i){var n=e.getFrameDocument(),a=n.getById("tex");a.setHtml(CKEDITOR.plugins.mathjax.trim(i)),CKEDITOR.plugins.mathjax.copyStyles(e,a),t.fire("lockSnapshot"),e.setStyles({width:Math.min(250,a.$.offsetWidth)+"px",height:n.$.body.offsetHeight+"px",display:"inline","vertical-align":"middle"}),t.fire("unlockSnapshot")
}}}:function(t,i){function n(){c=t.getFrameDocument(),c.getById("preview")||(CKEDITOR.env.ie&&t.removeAttribute("src"),c.write('<!DOCTYPE html><html><head><meta charset="utf-8"><script type="text/x-mathjax-config">MathJax.Hub.Config( {showMathMenu: false,messageStyle: "none"} );function getCKE() {if ( typeof window.parent.CKEDITOR == \'object\' ) {return window.parent.CKEDITOR;} else {return window.parent.parent.CKEDITOR;}}function update() {MathJax.Hub.Queue([ \'Typeset\', MathJax.Hub, this.buffer ],function() {getCKE().tools.callFunction( '+p+" );});}MathJax.Hub.Queue( function() {getCKE().tools.callFunction("+h+');} );</script><script src="'+(i.config.mathJaxLib||e)+'"></script></head><body style="padding:0;margin:0;background:transparent;overflow:hidden"><span id="preview"></span><span id="buffer" style="display:none"></span></body></html>'))
}function a(){u=!0,s=l,i.fire("lockSnapshot"),r.setHtml(s),o.setHtml("<img src="+CKEDITOR.plugins.mathjax.loadingIcon+" alt="+i.lang.mathjax.loading+">"),t.setStyles({height:"16px",width:"16px",display:"inline","vertical-align":"middle"}),i.fire("unlockSnapshot"),c.getWindow().$.update(s)}var r,o,s,l,c=t.getFrameDocument(),d=!1,u=!1,h=CKEDITOR.tools.addFunction(function(){o=c.getById("preview"),r=c.getById("buffer"),d=!0,l&&a(),CKEDITOR.fire("mathJaxLoaded",t)}),p=CKEDITOR.tools.addFunction(function(){CKEDITOR.plugins.mathjax.copyStyles(t,o),o.setHtml(r.getHtml()),i.fire("lockSnapshot"),t.setStyles({height:0,width:0});var e=Math.max(c.$.body.offsetHeight,c.$.documentElement.offsetHeight),n=Math.max(o.$.offsetWidth,c.$.body.scrollWidth);
t.setStyles({height:e+"px",width:n+"px"}),i.fire("unlockSnapshot"),CKEDITOR.fire("mathJaxUpdateDone",t),s!=l?a():u=!1});return t.on("load",n),n(),{setValue:function(e){l=e,d&&!u&&a()}}}}(),function(){CKEDITOR.plugins.add("placeholder",{requires:"widget,dialog",onLoad:function(){CKEDITOR.addCss(".cke_placeholder{background-color:#ff0}")},init:function(e){var t=e.lang.placeholder;CKEDITOR.dialog.add("placeholder",this.path+"dialogs/placeholder.js"),e.widgets.add("placeholder",{dialog:"placeholder",pathName:t.pathName,template:'<span class="cke_placeholder">[[]]</span>',downcast:function(){return new CKEDITOR.htmlParser.text("[["+this.data.name+"]]")},init:function(){this.setData("name",this.element.getText().slice(2,-2))
},data:function(){this.element.setText("[["+this.data.name+"]]")}}),e.ui.addButton&&e.ui.addButton("CreatePlaceholder",{label:t.toolbar,command:"placeholder",toolbar:"insert,5",icon:"placeholder"})},afterInit:function(e){var t=/\[\[([^\[\]])+\]\]/g;e.dataProcessor.dataFilter.addRules({text:function(i,n){var a=n.parent&&CKEDITOR.dtd[n.parent.name];return!a||a.span?i.replace(t,function(t){var i=null,i=new CKEDITOR.htmlParser.element("span",{"class":"cke_placeholder"});return i.add(new CKEDITOR.htmlParser.text(t)),i=e.widgets.wrapElement(i,"placeholder"),i.getOuterHtml()}):void 0}})}})}(),function(){function e(e){var t="left"==e?"pageXOffset":"pageYOffset";return t in n.$?n.$[t]:CKEDITOR.document.$.documentElement["left"==e?"scrollLeft":"scrollTop"]
}function t(t){var r=t.config,o=r.floatSpace||{on:{}},s=!1,l=t.fire("uiSpace",{space:"top",html:""}).html,c=function(){function i(e,t,i){d.setStyle(t,a(i)),d.setStyle("position",e)}function l(e){var t=h.getDocumentPosition();switch(e){case"top":i("absolute","top",t.y-g-y);break;case"pin":i("fixed","top",I);break;case"bottom":i("absolute","top",t.y+(f.height||f.bottom-f.top)+y)}o.on&&"function"==typeof o.on.changeMode&&o.on.changeMode.call(d.$,u,e),u=e}var u,h,p,f,m,g,v,b=r.floatSpaceDockedOffsetX||0,y=r.floatSpaceDockedOffsetY||0,C=r.floatSpacePinnedOffsetX||0,I=r.floatSpacePinnedOffsetY||0;return function(i){if(!h)if(o.centerElement){var r;r="function"==typeof o.centerElement?o.centerElement.call(null):o.centerElement,h=new CKEDITOR.dom.element(r),h.on("mousedown",function(e){e.data.preventDefault()
})}else if(!(h=t.editable()))return;s||(i&&"focus"===i.name&&d.show(),d.removeStyle("left"),d.removeStyle("right"),p=d.getClientRect(),f=h.getClientRect(),m=n.getViewPaneSize(),g=p.height,v=e("left"),u?(l(g+y<=f.top?"top":g+y>m.height-f.bottom?"pin":"bottom"),i=m.width/2,i=f.left>0&&f.right<m.width&&f.width>p.width?"rtl"==t.config.contentsLangDirection?"right":"left":i-f.left>f.right-i?"left":"right",p.width>m.width?(i="left",r=0):(r="left"==i?f.left>0?f.left:0:f.right<m.width?m.width-f.right:0,r+p.width>m.width&&(i="left"==i?"right":"left",r=0)),d.setStyle(i,a(("pin"==u?C:b)+r+("pin"==u?0:"left"==i?v:-v)))):(u="pin",l("pin"),c(i)))}}();if(l){var d=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(i.output({content:l,id:t.id,langDir:t.lang.dir,langCode:t.langCode,name:t.name,style:"display:none;z-index:"+(r.baseFloatZIndex-1),topId:t.ui.spaceId("top"),voiceLabel:t.lang.editorPanel+", "+t.name}))),u=CKEDITOR.tools.eventsBuffer(500,c),h=CKEDITOR.tools.eventsBuffer(100,c);
d.unselectable(),d.on("mousedown",function(e){e=e.data,e.getTarget().hasAscendant("a",1)||e.preventDefault()}),t.on("focus",function(e){c(e),t.on("change",u.input),n.on("scroll",h.input),n.on("resize",h.input)}),t.on("blur",function(){d.hide(),t.removeListener("change",u.input),n.removeListener("scroll",h.input),n.removeListener("resize",h.input)}),t.on("destroy",function(){n.removeListener("scroll",h.input),n.removeListener("resize",h.input),d.clearCustomData(),d.remove()}),t.focusManager.hasFocus&&d.show(),t.focusManager.add(d,1),o.on&&"function"==typeof o.on.ready&&o.on.ready.call(d.$,{show:function(){s=!1,d.show(),c()},hide:function(){d.hide(),s=!0}})}}var i=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div><span class="cke_nose"><span></div>'),n=CKEDITOR.document.getWindow(),a=CKEDITOR.tools.cssLength;
CKEDITOR.plugins.add("floatingspace",{init:function(e){e.on("loaded",function(){t(this)},null,null,20)}})}(),CKEDITOR.config.plugins="basicstyles,blockquote,dialogui,dialog,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,enterkey,entities,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,indent,indentlist,fakeobjects,link,list,magicline,pastetext,pastefromword,removeformat,sourcearea,specialchar,stylescombo,tab,undo,templates,divarea,justify,liststyle,lineutils,widget,mathjax,placeholder,floatingspace",CKEDITOR.config.skin="moono",function(){var e=function(e,t){for(var i=CKEDITOR.getUrl("plugins/"+t),e=e.split(","),n=0;n<e.length;n++)CKEDITOR.skin.icons[e[n]]={path:i,offset:-e[++n],bgsize:e[++n]}
};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,creatediv,432,,docprops-rtl,456,,docprops,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,justifyblock,1056,,justifycenter,1080,,justifyleft,1104,,justifyright,1128,,language,1152,,anchor-rtl,1176,,anchor,1200,,link,1224,,unlink,1248,,bulletedlist-rtl,1272,,bulletedlist,1296,,numberedlist-rtl,1320,,numberedlist,1344,,mathjax,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastefromword-rtl,1512,,pastefromword,1536,,pastetext-rtl,1560,,pastetext,1584,,placeholder,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,selectall,1752,,showblocks-rtl,1776,,showblocks,1800,,smiley,1824,,source-rtl,1848,,source,1872,,sourcedialog-rtl,1896,,sourcedialog,1920,,specialchar,1944,,table,1968,,templates-rtl,1992,,templates,2016,,uicolor,2040,,redo-rtl,2064,,redo,2088,,undo-rtl,2112,,undo,2136,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,creatediv,432,auto,docprops-rtl,456,auto,docprops,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,justifyblock,1056,auto,justifycenter,1080,auto,justifyleft,1104,auto,justifyright,1128,auto,language,1152,auto,anchor-rtl,1176,auto,anchor,1200,auto,link,1224,auto,unlink,1248,auto,bulletedlist-rtl,1272,auto,bulletedlist,1296,auto,numberedlist-rtl,1320,auto,numberedlist,1344,auto,mathjax,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastefromword-rtl,1512,auto,pastefromword,1536,auto,pastetext-rtl,1560,auto,pastetext,1584,auto,placeholder,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,selectall,1752,auto,showblocks-rtl,1776,auto,showblocks,1800,auto,smiley,1824,auto,source-rtl,1848,auto,source,1872,auto,sourcedialog-rtl,1896,auto,sourcedialog,1920,auto,specialchar,1944,auto,table,1968,auto,templates-rtl,1992,auto,templates,2016,auto,uicolor,2040,auto,redo-rtl,2064,auto,redo,2088,auto,undo-rtl,2112,auto,undo,2136,auto","icons.png")
}())}(),define("ckeditor",function(e){return function(){var t;return t||e.CKEDITOR}}(this)),define("taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler",["lodash"],function(e){"use strict";var t=function(){var t="html",i={},n=function(i){if("xhtml"===i.toLowerCase()&&(i="html"),!e.contains(["html","qti"],i))throw new Error("Unknown mode "+i);return t=i,this},a=["article","aside","bdi","command","datalist","details","dialog","figcaption","figure","footer","header","keygen","main","mark","meter","nav","output","progress","rp","rt","ruby","section","summary","time","wbr","hgroup"],r=function(e){var n,a=[];e=u(e);for(n in i[t])i[t].hasOwnProperty(n)&&0!==n.indexOf("$")&&e in i[t][n]&&a.push(n);
return a},o=function(n){return n=u(n),n in i[t]?e.keys(i[t][n]):[]},s=function(t,i){return e.contains(o(i),u(t))},l=function(t,i){return e.contains(r(i),u(t))},c=function(){return i[t]},d=function(){return t},u=function(t){if(e.isObject(t)&&!e.isArray(t)){if("nodeName"in t)return t.nodeName.toLowerCase();if(0 in t&&"nodeName"in t[0])return t[0].nodeName.toLowerCase()}else if(e.isString(t))return t.toLowerCase();throw new Error("Unknown element "+t)};return i.html=function(){var t=e.extend,i=function(t,i){for(var n=e.cloneDeep(t),a=1;a<arguments.length;a++){i=arguments[a];for(var r in i)delete n[r]}return n},n={},a={},r={a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},o={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},s={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},c={"#":1},d={acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1},u={center:1,dir:1,noframes:1};
t(n,r,c,d),t(a,o,n,u);var h={a:i(n,{a:1,button:1}),abbr:n,address:a,area:l,article:t({style:1},a),aside:t({style:1},a),audio:t({source:1,track:1},a),b:n,base:l,bdi:n,bdo:n,blockquote:a,body:a,br:l,button:i(n,{a:1,button:1}),canvas:n,caption:a,cite:n,code:n,col:l,colgroup:{col:1},command:l,datalist:t({option:1},n),dd:a,del:n,details:t({summary:1},a),dfn:n,div:t({style:1},a),dl:{dt:1,dd:1},dt:a,em:n,embed:l,fieldset:t({legend:1},a),figcaption:a,figure:t({figcaption:1},a),footer:a,form:a,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:t({title:1,base:1},s),header:a,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:t({head:1,body:1},a,s),i:n,iframe:c,img:l,input:l,ins:n,kbd:n,keygen:l,label:n,legend:n,li:a,link:l,map:a,mark:n,menu:t({li:1},a),meta:l,meter:i(n,{meter:1}),nav:a,noscript:t({link:1,meta:1,style:1},n),object:t({param:1},n),ol:{li:1},optgroup:{option:1},option:c,output:n,p:n,param:l,pre:n,progress:i(n,{progress:1}),q:n,rp:n,rt:n,ruby:t({rp:1,rt:1},n),s:n,samp:n,script:c,section:t({style:1},a),select:{optgroup:1,option:1},small:n,source:l,span:n,strong:n,style:c,sub:n,summary:n,sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:a,textarea:c,tfoot:{tr:1},th:a,thead:{tr:1},time:i(n,{time:1}),title:c,tr:{th:1,td:1},track:l,u:n,ul:{li:1},"var":n,video:t({source:1,track:1},a),wbr:l,acronym:n,applet:t({param:1},a),basefont:l,big:n,center:a,dialog:l,dir:{li:1},font:n,isindex:l,noframes:a,strike:n,tt:n};
return t(h,{$block:t({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},o,u),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:t({body:1,head:1,html:1},h.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),h
}(),i.qti=function(){for(var t,n,r,o,s,l,c,d=["remove","add"],u=d.length,h={pre:{add:[],remove:["img","object","big","small","sub","sup"]},table:{remove:["col"]}},p=e.cloneDeep(i.html),f=a.length;f--;)delete p[a[f]];for(t in p)p.hasOwnProperty(t)&&(c=e.intersection(e.keys(p[t]),a),c.length&&(h[t]||(h[t]={remove:[]}),h[t].remove=h[t].remove.concat(c)));for(t in h)if(h.hasOwnProperty(t)&&p.hasOwnProperty(t))for(o=0;u>o;o++)if(s=d[o],s in h[t])if(n=h[t][s].length,"remove"!==s||"all"!==h[t][s])for(;n--;)r=h[t][s][n],l=e.cloneDeep(p[t]),"remove"===s?(delete l[r],p[t]=l):"add"===s&&"undefined"!=typeof p[r]&&(l[r]=1,p[t]=l[r]);else p[t]={};return p}(),{getDtd:c,getChildrenOf:o,getParentsOf:r,isChildOf:s,isParentOf:l,getMode:d,setMode:n}
}();return t}),define("taoQtiItem/qtiCreator/editor/ckEditor/ckConfigurator",["lodash","ckeditor","taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler","mathJax"],function(e,t,i,n){var a=e.cloneDeep(CKEDITOR.config),r=function(){var t={TaoMediaManager:{insertAfter:"SpecialChar"}},r={TaoQtiImage:{insertAfter:"SpecialChar"}};n&&(r.TaoQtiMaths={insertAfter:"SpecialChar"});var o={inline:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],flow:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],block:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"links",items:["Link"]},"/",{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}]},s={disableAutoInline:!0,entities:!1,entities_processNumerical:!0,autoParagraph:!1,extraPlugins:"confighelper",floatSpaceDockedOffsetY:0,forcePasteAsPlainText:!0,skin:"tao",language:"en",removePlugins:"",linkShowAdvancedTab:!1,justifyClasses:["txt-lft","txt-ctr","txt-rgt","txt-jty"],linkShowTargetTab:!1,specialChars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";",["&lt;","Less than"],["&le;","Less than or equal to"],"&asymp;","=","&ne;",["&ge;","Greater than or equal to"],["&gt;","Greater than"],"?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"]},l=function(t,i){var n,a,r,o,s,l,c,d,u,h,p=t.toolbar.length,f={};
for(t.extraPlugins=function(t,i){for(var n=t.length,a=i.split(",");n--;)t[n]=t[n].toLowerCase();return a=e.compact(e.union(a,t)),a.join(",")}(e.keys(i),t.extraPlugins),h=0;p>h;h++)e.isString(t.toolbar[h])&&(f[h]=t.toolbar[h],t.toolbar[h]={items:[]});for(o in i){for(r=function(e){for(var t=e.length;t--;)if(0===e[t].indexOf("insert")||"replace"===e[t])return e[t];throw"Missing key insertBefore | insertAfter | replace in positionedPlugins"}(e.keys(i[o])),c=i[o][r].toLowerCase(),l=i[o].separator||!1,s=-1;p--;){for(a=t.toolbar[p].items.length,n=0;a>n;n++)if(t.toolbar[p].items[n].toLowerCase()===c){s=n;break}if(s>-1){d=~~("replace"===r),"insertAfter"===r&&s++,l&&(t.toolbar[p].items.splice(s,d,"-"),s++),t.toolbar[p].items.splice(s,d,o);
break}}p=t.toolbar.length}for(u in f)t.toolbar[u]=f[u]},c=function(n,c,d){if("reset"===c)return a;d=d||{},d.resourcemgr=d.resourcemgr||{};var u,h,p=e.clone(o,!0),f="html";0===c.indexOf("qti")&&(c=c.slice(3).toLowerCase(),s.allowedContent=!0,s.autoParagraph=!1,f="qti"),d.toolbar&&(p[c]=e.clone(d.toolbar),delete d.toolbar);for(u in p)p.hasOwnProperty(u)&&(s["toolbar_"+u]=p[u]);return"undefined"!=typeof p[c]&&(s.toolbar=p[c]),"undefined"!=typeof d.positionedPlugins&&(d.positionedPlugins={}),!1!==d.positionedPlugins&&(t="qti"===f?e.assign(r,e.clone(d.positionedPlugins)):e.assign(t,e.clone(d.positionedPlugins)),delete d.positionedPlugins,l(s,t)),h=e.assign({},e.cloneDeep(a),s,d),n.on("focus",function(){i.setMode(f),CKEDITOR.dtd=i.getDtd()
}),n.on("instanceReady",function(e){$(e.editor.element.$).removeAttr("title")}),CKEDITOR.on("dialogDefinition",function(e){if("link"===e.data.name){for(var t,i=e.data.definition.getContents("info").get("linkType").items,n=i.length;n--;)"anchor"===i[n][1]||(t=n);i.splice(t+1,1)}}),h};return{getConfig:c}}();return r}),define("taoQtiItem/qtiCreator/editor/ckEditor/ckProtector",["jquery","i18n"],function(e,t){var i=function(){var i=".widget-box",n=function(e){var t=e[0],i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(i){var n=new i(function(t){t.forEach(function(){e.trigger("contentchange.protector")})});n.observe(t,{subtree:!0,characterData:!0})
}else t.addEventListener("DOMCharacterDataModified",function(){e.trigger("contentchange.protector")},!1)},a=function(){return i},r=function(a,r){r&&(i=r),a.find(i).each(function(){var i,r=e(this),o=r.outerWidth(),s=r.outerHeight(),l=e('<button class="cke-cover-up">'),c=function(t){return e('[data-serial="'+t+'"]').each(function(){var t=e(this);return t.parent().hasClass("cke-qti-wrapper")?!1:void 0}),r.length?r:e()},d=function(e){var t=c(e.prop("serial")).parent(".cke-qti-wrapper"),i=t.offset();e.css({left:i.left,top:i.top})};return r.parent(".cke-qti-wrapper").length?!1:(r.find("*").each(function(){this.innerHTML||(this.innerHTML="&#8203;")}),r.wrap(e('<span class="cke-qti-wrapper" />')),i=r.parent(),l.css({width:o,height:s}),e("body").append(l),i.css({width:o,height:s}),i.attr("contenteditable",!1),i.prop("cover",l),l.prop("serial",r.data("serial")),d(l),l.attr("title",t("Click to display interaction widget")),l.on("click",function(){var t=c(e(this).prop("serial"));
e(document).trigger("removeprotection.ckprotector",{context:a,widget:t})}),n(a),void a.on("contentchange.protector",function(){d(l)}))})},o=function(t){t.each(function(){var t=e(this),i=t.parent(".cke-qti-wrapper");i.length&&(i.prop("cover").remove(),t.unwrap())})};return{protect:r,unprotect:o,getSelector:a}}();return i}),define("ckConfigurator",["lodash","ckeditor","taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler","mathJax"],function(e,t,i,n){var a=e.cloneDeep(CKEDITOR.config),r=function(){var t={TaoMediaManager:{insertAfter:"SpecialChar"}},r={TaoQtiImage:{insertAfter:"SpecialChar"}};n&&(r.TaoQtiMaths={insertAfter:"SpecialChar"});var o={inline:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],flow:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],block:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"links",items:["Link"]},"/",{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}]},s={disableAutoInline:!0,entities:!1,entities_processNumerical:!0,autoParagraph:!1,extraPlugins:"confighelper",floatSpaceDockedOffsetY:0,forcePasteAsPlainText:!0,skin:"tao",language:"en",removePlugins:"",linkShowAdvancedTab:!1,justifyClasses:["txt-lft","txt-ctr","txt-rgt","txt-jty"],linkShowTargetTab:!1,specialChars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";",["&lt;","Less than"],["&le;","Less than or equal to"],"&asymp;","=","&ne;",["&ge;","Greater than or equal to"],["&gt;","Greater than"],"?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"]},l=function(t,i){var n,a,r,o,s,l,c,d,u,h,p=t.toolbar.length,f={};
for(t.extraPlugins=function(t,i){for(var n=t.length,a=i.split(",");n--;)t[n]=t[n].toLowerCase();return a=e.compact(e.union(a,t)),a.join(",")}(e.keys(i),t.extraPlugins),h=0;p>h;h++)e.isString(t.toolbar[h])&&(f[h]=t.toolbar[h],t.toolbar[h]={items:[]});for(o in i){for(r=function(e){for(var t=e.length;t--;)if(0===e[t].indexOf("insert")||"replace"===e[t])return e[t];throw"Missing key insertBefore | insertAfter | replace in positionedPlugins"}(e.keys(i[o])),c=i[o][r].toLowerCase(),l=i[o].separator||!1,s=-1;p--;){for(a=t.toolbar[p].items.length,n=0;a>n;n++)if(t.toolbar[p].items[n].toLowerCase()===c){s=n;break}if(s>-1){d=~~("replace"===r),"insertAfter"===r&&s++,l&&(t.toolbar[p].items.splice(s,d,"-"),s++),t.toolbar[p].items.splice(s,d,o);
break}}p=t.toolbar.length}for(u in f)t.toolbar[u]=f[u]},c=function(n,c,d){if("reset"===c)return a;d=d||{},d.resourcemgr=d.resourcemgr||{};var u,h,p=e.clone(o,!0),f="html";0===c.indexOf("qti")&&(c=c.slice(3).toLowerCase(),s.allowedContent=!0,s.autoParagraph=!1,f="qti"),d.toolbar&&(p[c]=e.clone(d.toolbar),delete d.toolbar);for(u in p)p.hasOwnProperty(u)&&(s["toolbar_"+u]=p[u]);return"undefined"!=typeof p[c]&&(s.toolbar=p[c]),"undefined"!=typeof d.positionedPlugins&&(d.positionedPlugins={}),!1!==d.positionedPlugins&&(t="qti"===f?e.assign(r,e.clone(d.positionedPlugins)):e.assign(t,e.clone(d.positionedPlugins)),delete d.positionedPlugins,l(s,t)),h=e.assign({},e.cloneDeep(a),s,d),n.on("focus",function(){i.setMode(f),CKEDITOR.dtd=i.getDtd()
}),n.on("instanceReady",function(e){$(e.editor.element.$).removeAttr("title")}),CKEDITOR.on("dialogDefinition",function(e){if("link"===e.data.name){for(var t,i=e.data.definition.getContents("info").get("linkType").items,n=i.length;n--;)"anchor"===i[n][1]||(t=n);i.splice(t+1,1)}}),h};return{getConfig:c}}();return r}),define("taoQtiItem/qtiCreator/editor/gridEditor/config",[],function(){return{min:{interaction:2,text:1,rubricBlock:12},throttle:{resize:100}}}),define("taoQtiItem/qtiCreator/editor/gridEditor/helper",[],function(){var e={getColUnits:function(e){var t=e.attr("class");if(!t)throw new Error("the element has no css class");var i=t.match(/col-([\d]+)/);
if(i&&i.length)return parseInt(i.pop());throw"the element has no col-* class"},setUnitsFromClass:function(t){var i=e.getColUnits(t);return t.attr("data-units",i),i}};return e}),define("taoQtiItem/qtiCreator/editor/gridEditor/resizable",["lodash","jquery","taoQtiItem/qtiCreator/editor/gridEditor/config","taoQtiItem/qtiCreator/editor/gridEditor/helper","taoQtiItem/qtiCreator/helper/qtiElements","jqueryui"],function(e,t,i,n,a){var r=function(e){var t=e.height()-parseFloat(e.children('[class^="col-"], [class*=" col-"]').css("margin-bottom"));e.find(".grid-edit-resizable-zone").height(t)},o=function(r){var c=parseFloat(r.find('[class^="col-"]:last, [class*=" col-"]:last').css("margin-left")),d=20;
r.find('[class^="col-"], [class*=" col-"]').each(function(){var u=t(this);if(u.parent().hasClass("fixed-grid-row"))return!0;if(u.children(".grid-edit-resizable-zone").length)return!0;var h=u.next(),p=u.parent(".grid-row"),f=u.offset(),m=12,g=a.is(u.data("qti-class"),"interaction")?i.min.interaction:i.min.text,v=a.is(h.data("qti-class"),"interaction")?i.min.interaction:i.min.text,b=p.width()/m,y=p.height()-parseFloat(u.css("margin-bottom")),C=t("<div>",{"class":"grid-edit-resizable-zone grid-edit-resizable-zone-active"}).css({top:0,right:-(c+(d-c)/2),width:d,height:y}),I=t("<span>",{"class":"grid-edit-resizable-handle"});C.append(I),u.append(C);var E=function(){var e=p.height()-parseFloat(u.css("margin-bottom"));
u.find(".grid-edit-resizable-outline").height(e),C.height(e)};C.draggable({containment:h.length?[f.left+g*b-2*c+10,f.top,f.left+u.outerWidth()+c+h.outerWidth()-v*b-d/2-10,f.top+u.height()]:[f.left+g*b-c-d/2-10,f.top,p.offset().left+p.outerWidth()-c-d/2-12,f.top+u.height()],axis:"x",cursor:"col-resize",start:function(){u.trigger("resizestart.gridEdit");var e=t("<div>",{"class":"grid-edit-resizable-outline"});h.length?e.width(parseFloat(u.outerWidth())+c+parseFloat(h.outerWidth())):e.css({width:"100%","border-right-width":0}),t(this).data("overlay",e),u.append(e),I.addClass("grid-edit-resizable-active"),r.find(".grid-edit-resizable-zone-active").removeClass("grid-edit-resizable-zone-active"),E()
},drag:e.throttle(function(){var e=t(this).offset().left+d/2-f.left,i=n.getColUnits(u),a=h.length?n.getColUnits(h):0;h.length||u.find(".grid-edit-resizable-outline").width(I.offset().left-f.left),(i-1)*b>e+0*c?(i--,l(u,i),h.length&&(a++,l(h,a)),E(),u.trigger("resize.gridEdit")):e+c+20>(i+1)*b&&(i++,l(u,i),h.length&&(a--,l(h,a)),E(),u.trigger("resize.gridEdit"))},i.throttle.resize),stop:function(){u.find(".grid-edit-resizable-outline").remove(),s(r),o(r),u.trigger("resizestop.gridEdit")}}).css("position","absolute")}),r.off(".gridEdit.resizable").on("dragoverstart.gridEdit.resizable",function(){s(r)}).on("dragoverstop.gridEdit.resizable",function(){o(r)}).on("contentChange.gridEdit.resizable",".grid-row",function(){s(r),o(r)
})},s=function(e){e.find(".grid-edit-resizable-zone").remove()},l=function(e,i){if(!e.attr("class").match(/col-([\d]+)/))throw t.error("the element is not a grid column");var n=e.attr("data-units"),a=e.parent(".grid-row"),r=a.attr("data-units");a.attr("data-units",r-n+i),e.attr("data-units",i),e.removeClass("col-"+n).addClass("col-"+i)};return{create:function(e){o(e),t(window).off("resize.qtiEdit.resizable").on("resize.qtiEdit.resizable",function(){s(e),o(e)})},destroy:function(e,i){s(e),i||t(window).off("resize.qtiEdit.resizable")},syncHandleHeight:function(e){e.hasClass("grid-row")?r(e):e.find(".grid-row").each(function(){r(t(this))})}}}),define("taoQtiItem/qtiCreator/editor/gridEditor/content",["jquery","lodash","taoQtiItem/qtiCreator/editor/gridEditor/resizable"],function(e,t,i){var n={};
return n.getContent=function(i,a){var r=t.defaults({inner:!0},a),o=r.inner?e(i).clone():e("<div>",{"class":"col-fictive content-helper-wrapper"}).append(e(i).clone());return n.destroyGridWidgets(o,!0),n.serializeElements(o),o.html()},n.getChangeCallback=function(i){return t.throttle(function(t){var a=e("<div>").html(t),r=n.getContent(a);i.body(r)},800)},n.getChangeCallbackForBlockStatic=function(i){return t.throttle(function(t){var a=e("<div>").html(t);a.contents().each(function(){return 3===this.nodeType&&this.nodeValue.trim()?(a.wrapInner("<p>"),a=e("<div>").html(a.html()),!1):void 0}),i.body(n.getContent(a))},800)},n.serializeElements=function(t){var i=[];
return t.find(".widget-box:not(.widget-box *)").each(function(){var t=e(this);if(t.data("serial")){var n=t.data("serial");t.replaceWith("{{"+n+"}}"),i.push(n)}else{if(!t.data("new")||!t.data("qti-class"))throw"unknown qti-widget type";var a=t.data("qti-class");t.replaceWith("{{"+a+":new}}")}}),i},n.destroyGridWidgets=function(e,t){e.removeData("qti-grid-options"),e.find('.grid-row, [class*=" col-"], [class^="col-"]').removeAttr("style").removeAttr("data-active").removeAttr("data-units"),e.children(".ui-draggable-dragging").remove(),i.destroy(e,t)},n}),define("taoQtiItem/qtiCreator/widgets/helpers/content",["jquery","lodash","taoQtiItem/qtiCreator/helper/creatorRenderer","taoQtiItem/qtiCreator/model/helper/container","taoQtiItem/qtiCreator/editor/gridEditor/content"],function(e,t,i,n,a){var r={};
return r.createElements=function(r,o,s,l){var c=e("<div>").html(s);n.createElements(r,a.getContent(c),function(e){i.get().load(function(){for(var i in e){var n,a,r=e[i],s=o.find(".widget-box[data-new][data-qti-class="+r.qtiClass+"]");r.setRenderer(this),r.render(s),a=r.postRender(),n=a.$original,n.trigger("contentChange.gridEdit"),t.isFunction(l)&&l(a)}},this.getUsedClasses())})},r.changeInnerWidgetState=function(i,n){var a=[];t.each(["img","math","object"],function(e){a.push("[data-html-editable] .widget-"+e)}),i.$container.find(a.join(",")).each(function(){var t=e(this).data("widget");t&&t.changeState(n)})},r}),define("tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";
return r+="\n        "+h((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"You have deleted an element",a):u.call(e,"__","You have deleted an element",a)))+".\n    "}function o(e,t){var n,a,r,o="";return o+="\n        "+h((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"You have deleted",r):u.call(e,"__","You have deleted",r)))+" ",(a=i.count)?n=a.call(e,{hash:{},data:t}):(a=e&&e.count,n=typeof a===p?a.call(e,{hash:{},data:t}):a),o+=h(n)+" "+h((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"elements",r):u.call(e,"__","elements",r)))+".\n    "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u=i.helperMissing,h=this.escapeExpression,p="function",f=this;
return d+='<div class="feedback-info popup" data-for="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===p?l.call(t,{hash:{},data:a}):l),d+=h(s)+'">\n    <span class="icon-info"></span>\n    ',l=i.equal||t&&t.equal,c={hash:{},inverse:f.program(3,o,a),fn:f.program(1,r,a),data:a},s=l?l.call(t,t&&t.count,1,c):u.call(t,"equal",t&&t.count,1,c),(s||0===s)&&(d+=s),d+='\n    <a class="undo" href="#">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"undo",c):u.call(t,"__","undo",c)))+'</a>\n    <span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Remove Message",c):u.call(t,"__","Remove Message",c)))+'" class="icon-close close-trigger"></span>\n</div>'
})}),define("taoQtiItem/qtiCreator/widgets/helpers/deletingState",["lodash","jquery","tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox"],function(e,t,i){var n=1e4,a=function(e){var i=setTimeout(function(){r(e,1e3)},n);t("body").on("mousedown.deleting keydown.deleting",function(i){i.target===e[0]||t.contains(e[0],i.target)||r(e,400)}),e.find("a.undo").on("click",function(t){t.preventDefault(),e.trigger("undo.deleting"),clearTimeout(i),e.remove()}),e.find(".close-trigger").on("click",function(t){t.preventDefault(),r(e,0)})},r=function(e,i){e.trigger("confirm.deleting"),e.fadeOut(i,function(){t(this).remove()})},o={createInfoBox:function(n){var o=t(i({serial:"widgets",count:n.length}));
return t("body").append(o),o.css({display:"block",position:"fixed",top:"50px",left:"50%","margin-left":"-200px",width:"400px",zIndex:999999}),a(o),e.each(n,function(e){e.on("beforeStateInit",function(){r(o,400)})}),o}};return o}),define("taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor",["lodash","i18n","jquery","ckeditor","ckConfigurator","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/widgets/helpers/content","taoQtiItem/qtiCreator/widgets/helpers/deletingState"],function(e,t,i,n,a,r,o,s){n.disableAutoInline=!0;var l={placeholder:t("some text ..."),shieldInnerContent:!0},c=function(t,r,s){var c,d;if(s=e.defaults(s,l),!t instanceof i||!t.length)throw"invalid jquery element for $editable";
if(!r instanceof i||!r.length)throw"invalid jquery element for $editableContainer";c=r.find('[data-role="cke-launcher"]'),t.attr("placeholder",s.placeholder),d=r.hasClass("widget-blockInteraction")||r.hasClass("widget-textBlock")||r.hasClass("widget-rubricBlock")?"qtiBlock":r.hasClass("qti-prompt-container")||r.hasClass("widget-hottext")?"qtiInline":"qtiFlow";var h={autoParagraph:!1,floatSpaceDockedOffsetY:10,taoQtiItem:{insert:function(){s.data&&s.data.container&&s.data.widget&&o.createElements(s.data.container,t,g(this.getData()),function(e){m(s.data.widget,e)})}},floatSpace:{debug:!0,initialHide:!0,centerElement:function(){return r.find('[data-role="cke-launcher"]')[0]
},on:{ready:function(e){var t=i(this).find(".cke_nose"),n=t.parent(),a=i(this).find(".cke_toolbox");n.is(".cke")&&a.append(t),e.hide(),c.on("click",function(){c.hasClass("active")?(c.removeClass("active"),e.hide()):(c.addClass("active"),e.show())})},changeMode:function(e,t){var n=this,a=i(n),r=a.find(".cke_nose"),o=function(e){var t=new i.Deferred,n=0,a=setInterval(function(){var i=e.getAttribute("style");(n>5||i.indexOf("left")>-1||i.indexOf("right")>-1)&&(t.resolve(),clearInterval(a)),n++},1e3);return t.promise()};e!==t&&r.removeClass("float-space-"+e).addClass("float-space-"+t),i.when(o(n)).done(function(){n.style.left&&!n.style.right?r.removeClass("float-space-right").addClass("float-space-left"):r.removeClass("float-space-left").addClass("float-space-right")
})}}},on:{instanceReady:function(n){var a={},r=n.editor,o=function(i){p(t,a,i),e.isFunction(s.change)&&s.change.call(i,g(i.getData()))};i("#cke_"+n.editor.name).find(".cke_combo_button").each(function(){var e=this;e.click(),setTimeout(function(){e.click()},500)}),t.data("editor",r),t.on("change",function(){o(r)}),r.on("change",function(){o(r)}),s.data&&s.data.container&&(t.data("qti-container",s.data.container),a=u(s.data.container,t,{restoreState:!0}),s.shieldInnerContent&&f(t,s.data.widget)),v(r),t.trigger("editorready",[r]),i(".qti-item").trigger("toolbarchange")},focus:function(){r.find('[data-role="cke-launcher"]').hide(),c.show(),e.isFunction(s.focus)&&s.focus.call(this,g(this.getData())),i(".qti-item").trigger("toolbarchange")
},blur:function(){i(".qti-item").trigger("toolbarchange")},configLoaded:function(e){e.editor.config=a.getConfig(e.editor,d,h)},afterPaste:function(){}}};return n.inline(t[0],h)},d=function(e,t){var i;return i=e.data(t)?e:e.find("[data-"+t+"=true]")},u=function(t,i,n){n=n||{};var a={};return e.each(e.values(t.elements),function(e){var t=e.data("widget"),r=t.getCurrentState().name;a[e.serial]=t.rebuild({context:i,ready:function(e){n.restoreState&&e.changeState(r)}})}),i.trigger("widgetCreated",[a,t]),a},h=function(e,t){return e.find(".widget-box[data-serial="+t+"]")},p=function(t,i,n){var a=[];if(e.each(i,function(e){if(!e.element.data("removed")){var i=h(t,e.serial);
i.length||a.push(e)}}),a.length){var r=s.createInfoBox(a);r.on("confirm.deleting",function(){e.each(a,function(e){e.element.remove(),e.destroy()})}).on("undo.deleting",function(){n.undoManager.undo()})}},f=function(e,t){e.find(".widget-box").each(function(){var e=i(this),n=e.data("widget"),a=i("<button>",{"class":"html-editable-shield"});e.attr("contenteditable",!1),e.append(a),a.on("click",function(e){e.stopPropagation(),m(t,n)})})},m=function(t,i){if(t&&t.element&&t.element.qtiClass){var n=function(){t.$container.off("widgetCreated").one("widgetCreated",function(t,n){var a=n[i.serial];a&&e.delay(function(){a.changeState(r.isA(i.element,"interaction")?"question":"active")
},100)})};r.isA(t.element,"_container")?(n(),t.changeState("sleep")):r.isA(t.element,"choice")?(n(),t.changeState("question")):i.changeState(r.isA(i.element,"choice")?"choice":"active")}else i.changeState("active")},g=function(e){return e},v=function(e){e.focus();var t=e.createRange();t.moveToElementEditablePosition(e.editable(),!0),e.getSelection().selectRanges([t])},b={hasEditor:function(e){var t=!1;return d(e,"html-editable").each(function(){return t=!!i(this).data("editor")}),t},buildEditor:function(e,t){d(e,"html-editable-container").each(function(){var e,n=i(this),a=n.find("[data-html-editable]");a.attr("contenteditable",!0),e=c(a,n,t)})},destroyEditor:function(e){d(e,"html-editable-container").each(function(){var e=i(this),t=e.find("[data-html-editable]");
if(e.find('[data-role="cke-launcher"]').off().removeClass("active").hide(),t.removeAttr("contenteditable"),t.data("editor")){var n=t.data("editor");n.focusManager.blur(!0),n.destroy(),t.removeData("editor"),t.data("qti-container")&&u(t.data("qti-container"),t)}})},getData:function(e){var t=e.data("editor");if(t)return g(t.getData());throw"no editor attached to the DOM element"},focus:function(e){d(e,"html-editable").each(function(){var e=i(this).data("editor");e&&v(e)})}};return b}),define("taoQtiItem/qtiCreator/editor/gridEditor/arrow",["lodash"],function(e){var t="arrowenter.gridEdit.gridDragDrop",i=function(i,r){var o={insertZoneWidth:20,marginWidth:0};r=e.extend(o,r);
var s=$("<div>",{"class":"grid-edit-insert-box"}).css({top:0,width:r.insertZoneWidth,right:-(r.marginWidth+(r.insertZoneWidth-r.marginWidth)/2),height:i.parent(".grid-row").height()-parseFloat(i.css("margin-bottom"))}).append($("<div>",{"class":"grid-edit-insert-square"})).append($("<div>",{"class":"grid-edit-insert-triangle"})).append($("<div>",{"class":"grid-edit-insert-line"})).on("mouseenter",".grid-edit-insert-triangle, .grid-edit-insert-square",function(){i.trigger(t,["right"]),n(i)}),l=s.clone().css({left:-(r.marginWidth+5),right:"auto"}).on("mouseenter",".grid-edit-insert-triangle, .grid-edit-insert-square",function(){i.trigger(t,["left"]),n(i)});i.append(s).append(l),a(s,function(){i.trigger(t,["right"]),n(i)
}),a(l,function(){i.trigger(t,["left"]),n(i)})},n=function(e){e.find(".grid-edit-insert-box").remove()},a=function(e,t){var i=null;e.on("mouseenter",function(e){var n=e.pageY-$(this).offset().top-parseInt($(this).find(".grid-edit-insert-triangle").outerHeight())-parseInt($(this).find(".grid-edit-insert-square").outerHeight()),a=$(this).find(".grid-edit-insert-triangle, .grid-edit-insert-square"),r=0;i=setInterval(function(){var e=4.905*Math.pow(r,2)/100;a.css("top",e),e>n&&(clearInterval(i),t()),r++},10)}).on("mouseleave",function(){$(this).find(".grid-edit-insert-triangle, .grid-edit-insert-square").css("top",0),clearInterval(i)})};return{create:i}}),define("taoQtiItem/qtiCreator/helper/gridUnits",["lodash"],function(e){function t(t,i,n){n=n||12;
var a=0,r=0,o={},s={},l=[],c=[];for(var d in t)o[d]=e.clone(t[d]),a+=t[d].units,r++;var u=a/r;if(o[r+1]={elt:"middle",units:u,min:i},a+Math.round(u)>n){var h=0;for(var d in o){var p=o[d],f=p.units*n/(n+u);c[d]=Math.round(f%1*100),p.refactoredUnits=Math.round(f),p.min&&p.refactoredUnits<p.min&&(p.refactoredUnits=p.min,l[d]=!0),h+=p.refactoredUnits}if(h>n)for(var d;r+1>d;d++){var p=o[d];if(p.decimal>50&&p.refactoredUnits-1>p.min&&(p.refactoredUnits--,h--),h===n)break}var m=o[r+1].refactoredUnits,g=h>n?n:m;delete o[r+1],s={last:g,middle:m,cols:o,refactoredTotalUnits:h}}else{var v=n-a;s={last:v,middle:v,cols:{}}}return s}function i(t,i){i=i||12;var n=0,a=[],r=0,o=[],s=[],l=[];
if(e.each(t,function(e){a.push(e),n+=e.units}),n>i)throw"the total number of units exceed the maximum of "+i;return e.each(a,function(e){var t=e.units*i/n,a=Math.round(t);r+=a,e.refactoredUnits=a,a>t?s.push(e):o.push(e)}),s=e.sortBy(s,"refactoredUnits"),o=e.sortBy(o,"refactoredUnits"),r>i?e.eachRight(s,function(e){return e.refactoredUnits--,r--,r===i?!1:void 0}):i>r&&e.each(o,function(e){return e.refactoredUnits++,r++,r===i?!1:void 0}),e.each(o,function(e){l.push(e)}),e.each(s,function(e){l.push(e)}),a}return{distribute:function(e,i,n){return t(e,i,n)},redistribute:function(e,t){return i(e,t)}}}),define("taoQtiItem/qtiCreator/editor/targetFinder",["jquery","lodash","taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler","taoQtiItem/qtiCreator/helper/qtiElements"],function(e,t,i,n){"use strict";
var a={itemBody:".widget-textBlock > [data-html-editable]",prompt:".qti-prompt[data-html-editable]",choice:".qti-choice [data-html-editable]"},r=function(e,t,i){var r=function(){var e,t={};for(e in i)i.hasOwnProperty(e)&&i[e]instanceof Function&&(t[e]=i[e]);return t}(),o=function(r,o){var s,l,c=e();if(o=o||document.body,o=e(o),n.is(r,"inlineInteraction"))l=o.find(a.itemBody),s="object";else switch(l=o.find(t.values(a).join(",")),l=o.find(a.itemBody),r){case"math":s="object";break;case"object.audio":case"object.video":s="object";break;default:s=r}var d=i.getParentsOf(s),u=d.join(",");return l.each(function(){var t=e(this),i=t.closest(".widget-box");t.is(u)&&(c=c.add(t)),c=c.add(t.find(u).not(function(){var t=e(this).closest(".widget-box");
return t.length&&t[0]!==i[0]}))}),c};return t.extend(r,{getTargetsFor:o})}(jQuery,t,i);return r}),define("taoQtiItem/qtiCreator/editor/gridEditor/droppable",["jquery","lodash","taoQtiItem/qtiCreator/helper/gridUnits","taoQtiItem/qtiCreator/helper/qtiElements","taoQtiItem/qtiCreator/editor/gridEditor/helper","taoQtiItem/qtiCreator/editor/gridEditor/arrow","taoQtiItem/qtiCreator/editor/targetFinder"],function(e,t,i,n,a,r,o){var s={};s.createDroppableBlocks=function(n,o,s){s=s||{};var l="string"==typeof s.min?s.min:0,c=s.initialPosition instanceof e?s.initialPosition:null,d=s.namespace?"."+s.namespace:"",m=s.data||{},g=e("<div>",{id:"qti-block-element-placeholder","class":"qti-droppable-block-hover"}),v=parseFloat(o.find('[class^="col-"]:last, [class*=" col-"]:last').css("margin-left")),b=0===o.children(".grid-row").length;
o.addClass("dropping"),b?o.append(h().append(p().addClass("col-12"))):o.find(".grid-row").each(function(){var t=e(this),n=[],a=0,r=t.children(":not(.new-col)").each(function(){e(this).before(p().attr("data-index",e(this).index()/2)),a=Math.max(e(this).height(),a),n.push({elt:e(this),units:parseInt(e(this).attr("data-units"))})});r.last().after(p().attr("data-index","last")),r.height(a),t.data("distributed-units",i.distribute(n,l,12)),t.before(h().append(p()))}).last().after(h().append(p()));var y=function(e){e.length&&(g.data("dropped",!0).show().parent().removeClass("col-12").parent().removeData("active"),e.append(g))},C=function(){g.parent().parent().removeData("active"),g.removeData("dropped").hide(),o.append(g)
},I=function(i,n){if("left"===n||"right"===n){f(o);var a=i.parent().attr("data-active",!0);a.children(":not(.new-col)").each(function(){e(this).attr("data-original-class",e(this).attr("class"))});var r=a.data("distributed-units"),s="left"===n?i.prev():i.next();if(y(s),r.refactoredTotalUnits>12){var l=s.is(":last-child")&&r.last?r.last:r.middle;s.attr("class","new-col col-"+l);var c=0,d=s.data("index"),u=function(e,t){e.next().attr("data-active",!0).append(t)};if("last"===d)u(a,s);else for(var h in r.cols){h==d&&(c+l>12&&u(a,s),c+=l);var p=r.cols[h];c+p.refactoredUnits>12&&u(a,p.elt),p.elt.attr("class","col-"+p.refactoredUnits),c+=p.refactoredUnits}}else s.is(":last-child")&&r.last?s.attr("class","new-col col-"+r.last):s.attr("class","new-col col-"+r.middle),t.each(r.cols,function(e){e.elt.attr("class","col-"+e.refactoredUnits)
});var m=E(i);g.css("height","100%").parent().height(m)}},E=function(t,i){var n=0;void 0===i&&(i=!0),g.css("height","auto").parent().removeAttr("style");var a=t.siblings('[class^="col-"]:not(.new-col), [class*=" col-"]:not(.new-col)').andSelf();return a.removeAttr("style"),a.each(function(){n=Math.max(e(this).height(),n)}),a.height(n),i||t.removeAttr("style"),n};if(C(),c&&c.length){var w=c.prevAll('[class^="col-"], [class*=" col-"]').first(),x=c.nextAll('[class^="col-"], [class*=" col-"]').first();w.length?I(w,"right"):x.length&&I(x,"left")}o.on("mouseover.gridEdit.gridDragDrop",function(){var e=g.parent(".new-col");f(o),E(e,!1);var t=o.find(".new-col:last").css("background","1px solid red");
y(t),t.addClass("col-12")}).on("mouseover.gridEdit.gridDragDrop",".grid-row",function(e){e.stopPropagation()}).on("mouseenter.gridEdit.gridDragDrop",'[class^="col-"]:not(.new-col), [class*=" col-"]:not(.new-col)',function(){var t=e(this),i=g.parent(".new-col");C(),f(o),E(i,!1),E(t),r.create(t,{marginWidth:v})}).on("arrowenter.gridEdit.gridDragDrop",'[class^="col-"]:not(.new-col), [class*=" col-"]:not(.new-col)',function(t,i){I(e(this),i)}).on("mousemove.gridEdit.gridDragDrop",'[class^="col-"]:not(.new-col), [class*=" col-"]:not(.new-col)',t.throttle(function(t){var i=e(this),n=i.height(),a=t.pageY-i.offset().top,r=n/2>a?i.parent().prev():i.parent().next();if(!r.find("#qti-block-element-placeholder").length){var o=r.attr("data-active",!0).children(".new-col").addClass("col-12");
o.length?y(o):console.log("insert form col failure ",i,r)}},100)).on("mouseleave.gridEdit.gridDragDrop",'[class^="col-"], [class*=" col-"]',function(t){t.stopPropagation(),e(this).find(".grid-edit-insert-box").remove()}).on("mouseleave.gridEdit.gridDragDrop",function(){g.hide(),C(),f(o)}),o.one("dragoverstop.gridEdit",function(){o.off(".gridEdit.gridDragDrop");var t=g.parent(".new-col"),i=!!t.length;i&&(g.removeAttr("id").removeClass("qti-droppable-block-hover"),t.data("qti-class",n).removeClass("new-col").removeAttr("data-index"),a.setUnitsFromClass(t),t.parent(".grid-row-new").removeClass("grid-row-new"),o.find(".grid-row[data-active=true]").each(function(){var t=e(this);
t.removeClass("grid-row-new"),t.children(":not(.new-col)").removeAttr("data-original-class").each(function(){a.setUnitsFromClass(e(this))})})),u(o),i&&g.data("dropped")&&o.trigger("dropped.gridEdit"+d,[n,g,m])})};var l=null,c=function(e){l&&clearInterval(l);var t=1e3;setInterval(function(){e.animate({opacity:.1},.5*t,function(){e.animate({opacity:.9},.5*t)})},t)};s.createDroppableInlines=function(t,i,n){var a=n.namespace?"."+n.namespace:"",r=n.data||{},s=o.getTargetsFor(t,i),l=!1;s.addClass("drop-target"),s.contents().each(function(){3!==this.nodeType||this.nodeValue.match(/^\s+$/)||e(this).replaceWith(e.map(this.nodeValue.split(/(\S+)/),function(t){return t.match(/^\s*$/)?document.createTextNode(t):e("<span>",{text:t,"class":"qti-word-wrap"}).get()
}))});var u=e("<span>",{id:"qti-inline-element-placeholder","data-inline":!0});u.append(e("<span>",{"class":"cursor-h"})).append(e("<span>",{"class":"cursor-v"})),c(u);var h=function(){u.detach(),l=!1};h(i);var p=function(){return l=!0,u};i.on("mousemove.gridEdit.gridDragDrop","span.qti-word-wrap",function(t){var i=e(this).width(),n=e(this).offset(),a=t.pageX-n.left;i/2>a?e(this).before(p()):e(this).after(p())}).on("mouseover.gridEdit.gridDragDrop",function(t){t.stopPropagation();var n=e(t.target);n.hasClass("drop-target")&&!n.find(u).length?n.append(p()):n[0]===u[0]||n.hasClass("qti-word-wrap")||n.children(".qti-word-wrap").length||h(i)}),i.one("dragoverstop.gridEdit",function(){l&&u.removeAttr("id").removeAttr("class"),d(i),l?i.trigger("dropped.gridEdit"+a,[t,u,r]):(u.remove(),u=null)
})},s.destroyDroppables=function(e){d(e),u(e)};var d=function(t){t.off(".gridEdit.gridDragDrop"),t.find("span.qti-word-wrap").replaceWith(function(){return e(this).text()}),t.find(".drop-target").removeClass("drop-target")},u=function(e){e.removeClass("dropping").off(".gridEdit.gridDragDrop"),e.find('[class^="col-"], [class*=" col-"]').removeAttr("style"),f(e);var t=["#qti-block-element-placeholder",".new-col",".grid-row-new",".grid-edit-insert-box"];e.find(t.join(",")).remove()},h=function(){return e("<div>",{"class":"grid-row grid-row-new","data-units":0})},p=function(){return e("<div>",{"class":"new-col"})},f=function(t){t.find(".grid-row").each(function(){var t=e(this);
if(t.children(".new-col").attr("class","new-col").removeAttr("style"),t.hasClass("grid-row-new")){var i=t.children();i.length>1&&(t.prev().append(i),t.append(i.first()))}t.children(":not(.new-col)").each(function(){var t=e(this),i=t.attr("data-original-class");i&&t.attr("class",i).removeAttr("data-original-class")}),t.removeAttr("data-active")})};return s}),define("taoQtiItem/qtiCreator/editor/gridEditor/draggable",["jquery","lodash","taoQtiItem/qtiCreator/helper/qtiElements","taoQtiItem/qtiCreator/editor/gridEditor/droppable","jqueryui"],function(e,t,i,n){var a={helper:function(){return e(this).clone()}},r=function(e,i,n){var r=t.defaults(n,a);o(e,i,{helper:r.helper,namespace:"insertable"})
},o=function(a,r,o){var s=t.defaults(o,{distance:1,helper:"original"});a.draggable({distance:parseInt(s.distance),helper:s.helper,appendTo:e(document.body),opacity:1,scroll:!1,cursor:"crosshair",cursorAt:{left:-5,bottom:-5},create:function(){e(this).addClass("grid-draggable")},start:function(t,a){r.trigger("beforedragoverstart.gridEdit"),"function"==typeof s.start&&s.start.call(this,t,a),e(this).removeClass("grid-draggable-active");var o=e(this).data("qti-class");if(i.isInline(o))n.createDroppableInlines(o,r,s);else{if(!i.isBlock(o))throw"undefined qti class";n.createDroppableBlocks(o,r,s)}r.trigger("dragoverstart.gridEdit")},stop:function(t,i){e("body").css("cursor","auto"),i.helper.remove(),"function"==typeof s.stop&&s.stop.call(this,t,i),r.trigger("dragoverstop.gridEdit")
}}),a.on("mousedown.gridDraggable.gridEdit",function(){e(this).addClass("grid-draggable-active")}).on("mouseup.gridDraggable.gridEdit",function(){e(this).removeClass("grid-draggable-active")})},s=function(t,i){var n=t.parent('[class^="col-"], [class*=" col-"]');o(t,i,{distance:5,initialPosition:t.parent(),namespace:"movable",start:function(){t.hide(),n.data({"initial-position":!0,"initial-class":n.attr("class")}).attr("class","new-col")},helper:function(){return e(this).clone().addClass("grid-draggable-helper").css({height:e(this).height(),width:e(this).width()})},stop:function(){t.data("grid-element-dropped")||n.attr("class",n.data("initial-class")),t.data("grid-element-dropped",!1),t.show()
},data:{widget:t.data("widget")}})},l=function(e){e.draggable("destroy"),e.removeClass("grid-draggable"),e.off(".gridDraggable")};return{createInsertable:function(e,t,i){r(e,t,i)},createMovable:function(e,t,i){s(e,t,i)},destroy:l}}),define("taoQtiItem/qtiCreator/editor/infoControlRegistry",["taoQtiItem/qtiCreator/editor/customElementRegistryFactory"],function(e){return e.create()}),define("taoQtiItem/qtiCreator/editor/jquery.gridEditor",["jquery","taoQtiItem/qtiCreator/editor/gridEditor/helper","taoQtiItem/qtiCreator/editor/gridEditor/content","taoQtiItem/qtiCreator/editor/gridEditor/draggable","taoQtiItem/qtiCreator/editor/gridEditor/resizable"],function(e,t,i,n,a){function r(e){return"object"==typeof e.data("qti-grid-options")
}function o(i,n){i.data("qti-grid-options",n),i.find(".grid-row").each(function(){var i=0;e(this).children('[class*=" col-"], [class^="col-"]').each(function(){i+=t.setUnitsFromClass(e(this))})})}function s(e){i.destroyGridWidgets(e)}function l(e){return i.getContent(e)}e.fn.gridEditor=function(t){var i={},n="",a=[],s=void 0;return"object"==typeof t?i=e.extend({},e.fn.gridEditor.defaults,t):void 0===t?i=e.extend({},e.fn.gridEditor.defaults):"string"==typeof t&&"function"==typeof c[t]&&(n=t,a=Array.prototype.slice.call(arguments,1)),this.each(function(){var t=e(this);n?r(t)?s=c[n].apply(e(this),a):e.error("call of method of gridEditor while it has not been initialized"):r(t)||"object"!=typeof i||o(t,i)
}),void 0===s?this:s},e.fn.gridEditor.defaults={elementClass:"itemBody"};var c={addInsertables:function(t,i){var a=e(this);t.each(function(){n.createInsertable(e(this),a,i)})},createMovables:function(t){var i=e(this);t.each(function(){n.createMovable(e(this),i)})},destroy:function(){s(e(this))},getContent:function(){return l(e(this))},setContent:function(t){t&&setContent(e(this),t)},resizable:function(){a.create(e(this))}}}),define("taoQtiItem/qtiCreator/editor/simpleContentEditableElement",["jquery","lodash"],function(e,t){function i(i,n,a){function r(e){e.attr("contenteditable",!0).addClass("simple-editable")}r(i.find(n)),i.on("mouseenter.simpleeditable",n,t.throttle(function(){var t=e(this);
t.attr("contenteditable")||r(t)},200)).on("keyup.simpleeditable",n,t.throttle(function(){a(e(this).html())},200)).on("keydown.simpleeditable",n,function(t){13===t.which&&(t.preventDefault(),e(this).blur())})}function n(e){e.find(".simple-editable").removeClass("simple-editable").removeAttr("contenteditable"),e.off(".simpleeditable")}return{create:i,destroy:n}}),define("taoQtiItem/qtiCreator/editor/widgetToolbar",["jquery","i18n"],function(e,t){"use strict";var i=[[{title:"Question","class":"question-trigger",status:"off",fn:function(){var e=arguments[1],t=arguments[2],i=t.find(".answer-trigger a"),n=e.find('[data-edit="answer"]'),a=e.find('[data-edit="question"]');
i.removeClass("tlb-text-button-on").addClass("tlb-text-button-off"),a.show(),n.hide(),e.data("mode","question")}},{title:"Answer","class":"answer-trigger",fn:function(){var t=arguments[1],i=arguments[2],n=i.find(".question-trigger a"),a=t.find('[data-edit="answer"]'),r=t.find('[data-edit="question"]');n.removeClass("tlb-text-button-on").addClass("tlb-text-button-off"),a.show(),r.hide(),t.data("mode","answer"),t.find("[contenteditable]").attr("contenteditable",!1),e(document).trigger("widgetBlur")}}],"spacer",[{icon:"bin",title:"Delete",fn:function(){var i=arguments[1],n=arguments[2],a=e("<span>",{text:t("You have deleted an element.")+" "}),r=e("<a>",{text:t("Undo"),href:"#"}),o=e("<span>",{"class":"icon-info"}),s=e("<span>",{title:"Remove Message","class":"icon-close close-trigger"}),l=e("<div>",{"class":"feedback-info"}).hide();
s.on("click",function(){l.fadeOut(function(){l.remove(),i.remove(),n.remove()})}),r.on("click",function(e){e.preventDefault(),l.remove(),i.removeClass("deleted").fadeIn()}),l.append(o),l.append(a),l.append(r),l.append(s),i.before(l),n.hide(),i.hide().addClass("deleted"),l.fadeIn(function(){setTimeout(function(){s.trigger("click")},6500)})}}]],n=function(t){switch(t){case"/":t="break";break;case"-":t="separator";break;case" ":t="spacer"}return e("<span>",{"class":"tlb-"+t})},a=function(t,i,a){var o,s,l=e("<div>",{"class":"tlb-bar"}),c=!t[0].icon,d=t.length;if(l.append(n("start")),c)for(s=0;d>s;s++)"string"===e.type(t[s])?l.append(n(t[s])):(t[s].target=i,t[s].toolbar=a,l.append(r(t[s],c)));
else for(o=e("<div>",{"class":"tlb-group"}),l.append(o),s=0;d>s;s++)"string"===e.type(t[s])?o.append(n(t[s])):(t[s].target=i,t[s].toolbar=a,o.append(r(t[s],c)));return l.append(n("end")),l},r=function(i,n){var a,r,o,s,l,c=i.status||"off",d=i.fn||function(){},u=i.target||e(),h=i.toolbar||e();return delete i.status,delete i.fn,delete i.target,delete i.toolbar,n?(l=t(i.title),delete i.title,i["class"]=i["class"]?i["class"]+" tlb-text-button-box":"tlb-text-button-box",o=e("<span>",i),a=e("<a>",{"class":"tlb-text-button-"+c}),r=e("<span>",{"class":"tlb-text",text:l}),o.append(a),a.append(r)):(s="icon-"+i.icon.replace("icon-",""),delete i.icon,i["class"]=i["class"]?i["class"]+" tlb-button-"+c:"tlb-button-"+c,o=e("<a>",i),r=e("<span>",{"class":s}),o.append(r)),o.on("click.toolbar",function(e){return o.hasClass("tlb-text-button-disabled")||o.hasClass("tlb-button-disabled")?!1:(n?o.find("a").toggleClass("tlb-text-button-off").toggleClass("tlb-text-button-on"):o.toggleClass("tlb-button-off").toggleClass("tlb-button-on"),void d.apply(this,[e,u,h]))
}),o},o=function(t,n){return e.isArray(t)&&!t.length&&(t=!1),t?n&&(t=e.extend(i,t)):t=i,t},s=function(t,i,r){var o,s=e("<div>",{"class":"tlb"}),l=e("<div>",{"class":"tlb-top"}),c=e("<div>",{"class":"tlb-box"}),d=t.length;for(l.append(c),s.append(l),o=0;d>o;o++)c.append("string"===e.type(t[o])?n(t[o]):a(t[o],i,r));return s.data("edit","toolbar"),s};return function(){var t=function(t,i){var n,a,r,l={offsetTop:-2,title:"",extendDefaultConfig:!1,target:e()},c=e(i.target),d=c.prop("tlb")||e("<div>",{"class":"tlb-wrapper"});return c.prop("tlb")||(t=o(t,i.extendDefaultConfig),i=e.extend(l,i||{}),n=s(t,c,d),i.title&&(a=e("<span>",{text:i.title,"class":"tlb-title",title:i.title}),d.append(a)),d.append(n),c.prop("tlb",d),c.append(d),d.css("position","absolute"),d.css("display","none"),d.css("width","100%"),r=l.offsetTop-d.height(),d.css("top",r)),d.fadeIn(),d
};return{attach:t}}()}),define("taoQtiItem/qtiCreator/helper/adaptSize",["jquery"],function(e){"use strict";function t(e){return e.charAt(0).toUpperCase()+e.substr(1)}var i=function(){var i=function(e){r(e,{height:0})},n=function(e){r(e,{width:0})},a=function(e){r(e,{height:0,width:0})},r=function(i,n){var a;i instanceof e||(i=e(i)),i.each(function(){var t=e(this);for(a in n)t[a]("auto")}),i.each(function(){var i=e(this);for(a in n)n[a]=Math.max(n[a],i["outer"+t(a)]())}),i.css(n)};return{width:n,height:i,both:a}}();return i}),define("taoQtiItem/qtiXmlRenderer/renderers/config",[],function(){return{name:"xmlRenderer",locations:{_container:"taoQtiItem/qtiXmlRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiXmlRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiXmlRenderer/renderers/Stylesheet",responseDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration",outcomeDeclaration:"taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration",responseProcessing:"taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule",math:"taoQtiItem/qtiXmlRenderer/renderers/Math",img:"taoQtiItem/qtiXmlRenderer/renderers/Img",object:"taoQtiItem/qtiXmlRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback",rubricBlock:"taoQtiItem/qtiXmlRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction",prompt:"taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiXmlRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiXmlRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice",customInteraction:"taoQtiItem/qtiXmlRenderer/renderers/interactions/CustomInteraction"}}
}),define("taoQtiItem/qtiXmlRenderer/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiXmlRenderer/renderers/config"],function(e,t){return e.build(t.locations,t.name)}),define("taoQtiItem/qtiCreator/helper/xmlRenderer",["taoQtiItem/qtiXmlRenderer/renderers/Renderer"],function(e){var t=new e({shuffleChoices:!1}).load(),i=function(e){var i="";try{i=e.render(t)}catch(n){console.log(n)}return i};return{render:i}}),define("taoQtiItem/qtiCreator/helper/devTools",["lodash","jquery","taoQtiItem/qtiCreator/helper/xmlRenderer","taoQtiItem/qtiCreator/model/helper/event"],function(e,t,i,n){var a={};a.listenStateChange=function(){t(document).on("afterStateInit.qti-widget",function(e,t,i){console.log("->state : "+i.name+" : "+t.serial)
}).on("afterStateExit.qti-widget",function(e,t,i){console.log("<-state : "+i.name+" : "+t.serial)})},a.getStates=function(t){var i={},n=t.getComposingElements();return e.each(n,function(e){var t=e.data("widget");t&&(i[e.getSerial()]=t.getCurrentState().name)}),i},a.liveXmlPreview=function(a,r){t(document).on(n.getList().join(" "),e.throttle(function(){var e=i.render(a);o(e,r)},200))};var r=function(e){return vkbeautify.xml(e,"	")},o=function(e,i){var n=t(),a=r(e);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),i.hasClass("language-markup")?n=i:(n=i.find("code.language-markup"),n.length||(n=t("<code>",{"class":"language-markup"}),i.addClass("line-numbers").html(n))),n.length&&(n.html(a),Prism.highlightElement(n[0]))
};return a}),define("taoQtiItem/qtiCreator/helper/dummyElement",["jquery","lodash"],function(e,t){var i=function(){var i={maths:{icon:"maths",css:{width:40,height:22}},image:{icon:"image",css:{width:50,height:35}},video:{icon:"video",css:{width:200,height:150}},media:{icon:"media",css:{width:150,height:100}}},n=function(n){var a,r,o,s,l,c={element:"span","class":"dummy-element",css:{width:80,height:22}};return n&&(e.isPlainObject(n)?(n.class&&(c.class+=" "+n.class,delete n.class),c=e.extend(!0,{},c,n)):i[n]&&(c=e.extend({},c,i[n]))),o=c.icon?e("<span>",{"class":"icon-"+c.icon.replace("icon-","")}):!1,a="<"+c.element+">",s=t.cloneDeep(c.css),s["font-size"]=s.height&&!s["font-size"]?.8*s.height:14,s.height>30&&(s["padding-top"]=(s.height-s["font-size"])/2*.9),s.height&&s.height>100&&(s["background-size"]="auto"),l=t.cloneDeep(c),delete l.icon,delete l.element,delete l.css,r=e(a,l).css(s),o&&r.append(o),r
};return{get:n}}();return i}),define("taoQtiItem/qtiCreator/helper/simpleParser",["lodash","jquery","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/core/Loader"],function(e,t,i,n){function a(e,t){return t?t+"\\:"+e:e}function r(e){var t=e.prop("tagName").toLowerCase();return t=t.replace(/.*:/,""),u[t]?u[t]:t}function o(e){var n=r(e),a={qtiClass:n,serial:i.buildSerial(n+"_"),attributes:{}};return t.each(e[0].attributes,function(){this.specified&&(a.attributes[this.name]=this.value)}),a}function s(e,i){var n=o(e);return n.mathML=e.html(),n.annotations={},e.find(a("annotation",i.ns.math)).each(function(){var e=t(this),i=e.attr("encoding");i&&(n.annotations[i]=e.html())
}),n.ns={name:"m",uri:"http://www.w3.org/1998/Math/MathML"},n}function l(n,r){var l=e.merge(e.clone(h),r||{}),u={serial:i.buildSerial("_container_"),body:"",elements:{}};return e.each(d,function(e){n.find(e).each(function(){var e=t(this),i=o(e,r);u.elements[i.serial]=i,e.replaceWith(c(i))})}),n.find(a("math",l.ns.math)).each(function(){var e=t(this),i=s(e,r);u.elements[i.serial]=i,e.replaceWith(c(i))}),u.body=n.html(),u}function c(e){return"{{"+e.serial+"}}"}var d=["img","object"],u={rubricblock:"rubricBlock"},h={ns:{math:""},loaded:null,model:null},p={parse:function(i,a){var r=t(i),s=o(r,a),c=l(r,a);if(c.body&&(s.body=c),e.isFunction(a.loaded)&&a.model){var d=(new n).setClassesLocation(a.model);
d.loadElement(s,a.loaded)}return s}};return p}),define("taoQtiItem/qtiCreator/helper/uploadMime",["i18n"],function(e){var t={getMimeTypes:function(){return[{mime:"application/zip",label:e("ZIP file")},{mime:"text/plain",label:e("Plain text")},{mime:"application/pdf",label:e("PDF file")},{mime:"image/jpeg",label:e("JPEG image")},{mime:"image/png",label:e("PNG image")},{mime:"image/gif",label:e("GIF image")},{mime:"image/svg+xml",label:e("SVG image")},{mime:"application/ogg",label:e("audio/mpeg")},{mime:"audio/x-ms-wma",label:e("Windows Media audio")},{mime:"audio/x-wav",label:e("WAV audio")},{mime:"video/mpeg",label:e("MPEG video")},{mime:"video/mp4",label:e("MP4 video")},{mime:"video/quicktime",label:e("Quicktime video")},{mime:"video/x-ms-wmv",label:e("Windows Media video")},{mime:"video/x-flv",label:e("Flash video")},{mime:"text/csv",label:e("CSV file")},{mime:"application/msword",label:e("Microsoft Word file")},{mime:"application/vnd.ms-excel",label:e("Microsoft Excel file")},{mime:"application/vnd.ms-powerpoint",label:e("Microsoft Powerpoint file")}]
}};return t}),define("taoQtiItem/qtiCreator/model/Container",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/Container"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{afterCreate:function(){this.body("Lorem ipsum dolor sit amet, consectetur adipisicing ...")}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/Img",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n){var a=e.extend({qtiClass:"img",render:function(){var e=i.getOptionsFromArguments(arguments),a=e.renderer||this.getRenderer(),r=a.getOption("baseUrl")||"",o=this.attr("src")||"",s={attributes:{src:n.fullpath(o,r)}};
return this._super(t.merge(s,e.data),e.placeholder,e.subclass,a)},isEmpty:function(){return!this.attr("src")}});return a}),define("taoQtiItem/qtiCreator/model/Img",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/Img"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{src:"",alt:""}},afterCreate:function(){this.data("responsive",!0)}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/Math",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i){var n=function(e,t){var i=new RegExp("<(/)?"+(t?t+":":"")+"math[^>]*>","g");return e.replace(i,"").replace(/^\s*[\r\n]/gm,"").replace(/\s*[\r\n]$/gm,"")
},a=function(e,t){var i=new RegExp("<(/)?"+(t?t+":":""),"g");return e.replace(i,"<$1")},r=t.extend({qtiClass:"math",defaultNsName:"m",defaultNsUri:"http://www.w3.org/1998/Math/MathML",init:function(e,t){this._super(e,t),this.ns=null,this.mathML="",this.annotations={}},getNamespace:function(){if(this.ns&&this.ns.name&&this.ns.uri)return e.clone(this.ns);var t=this.getRelatedItem();if(t){var i=t.getNamespaces();for(ns in i)if(i[ns].indexOf("MathML")>0)return{name:ns,uri:i[ns]};return t.namespaces[this.defaultNsName]=this.defaultNsUri,{name:this.defaultNsName,uri:this.defaultNsUri}}return{}},setNamespace:function(e,t){this.ns={name:e,uri:t}},setAnnotation:function(e,t){this.annotations[e]=t
},getAnnotation:function(e){return this.annotations[e]},removeAnnotation:function(e){delete this.annotations[e]},setMathML:function(e){var t=this.getNamespace(),i=t.name&&t.uri?t.name:"";e=n(e,i),t&&(e=a(e,i)),this.mathML=e},getMathML:function(){return this.mathML},render:function(){var t=i.getOptionsFromArguments(arguments),n=t.renderer||this.getRenderer(),a=this.qtiClass,r=this.mathML,o=r,s=this.getNamespace(),l="";for(var c in this.annotations)l+='<annotation encoding="'+c+'">'+this.annotations[c]+"</annotation>";l&&(r=r.indexOf("</semantics>")>0?r.replace("</semantics>",l+"</semantics>"):"<semantics>"+r+l+"</semantics>"),s&&s.name&&(o=r.replace(/<(\/)?([^!])/g,"<$1"+s.name+":$2"),a=s.name+":"+a);
var d={block:"block"===this.attr("display")?!0:!1,body:o,raw:r,tag:a,ns:s};return this._super(e.merge(d,t.data),t.placeholder,t.subclass,n)},isEmpty:function(){return o(this.mathML)&&(!this.annotations.latex||!this.annotations.latex.trim())}}),o=function(e){var t=!1;if(e&&e.trim()){var i=$(e);t=!!i.text()}return!t};return r}),define("taoQtiItem/qtiCreator/model/Math",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/Math"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{}},afterCreate:function(){this.getNamespace()}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/Object",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n){var a=e.extend({qtiClass:"object",getMediaType:function(){var e="undefined",t=this.attr("type");
return t&&(e=0===t.indexOf("video")?"video":0===t.indexOf("audio")?"audio":0===t.indexOf("image")?"image":0===t.indexOf("text/html")?"html":"object"),e},render:function(){var e=i.getOptionsFromArguments(arguments),a=e.renderer||this.getRenderer(),r={},o=a.getOption("baseUrl")||"",s=this.attr("data")||"";switch(this.getMediaType()){case"video":r.video=!0;break;case"audio":r.audio=!0;break;case"html":r.html=!0;break;case"image":default:r.object=!0}return r.attributes={data:n.fullpath(s,o)},r.body=this._alt,this._super(t.merge(r,e.data),e.placeholder,e.subclass,a)},isEmpty:function(){return!this.attr("data")}});return a}),define("taoQtiItem/qtiCreator/model/Object",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/Object"],function(e,t,i){var n={};
return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{data:"",type:""}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/RubricBlock",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/mixin/Container"],function(e,t){var i=e.extend({qtiClass:"rubricBlock"});return t.augment(i),i}),define("taoQtiItem/qtiCreator/model/RubricBlock",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/RubricBlock"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{view:["candidate"],use:""}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/Choice",["taoQtiItem/qtiItem/core/IdentifiedElement"],function(e){var t=e.extend({init:function(e,t){this._super(e,t)
},is:function(e){return"choice"===e||this._super(e)},getInteraction:function(){var e,t=null,i=this.getRelatedItem();return i&&(e=i.find(this.serial),e&&(t=e.parent)),t}});return t}),define("taoQtiItem/qtiItem/core/choices/Hotspot",["taoQtiItem/qtiItem/core/choices/Choice"],function(e){var t=e.extend({});return t}),define("taoQtiItem/qtiItem/core/choices/AssociableHotspot",["taoQtiItem/qtiItem/core/choices/Hotspot"],function(e){var t=e.extend({qtiClass:"associableHotspot"});return t}),define("taoQtiItem/qtiCreator/model/choices/AssociableHotspot",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/AssociableHotspot"],function(e,t,i){var n={};
return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{matchMax:0,matchMin:0}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/Gap",["taoQtiItem/qtiItem/core/choices/Choice"],function(e){var t=e.extend({qtiClass:"gap"});return t}),define("taoQtiItem/qtiCreator/model/choices/Gap",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/Gap"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{required:!1}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/GapImg",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/core/Object"],function(e,t){var i=e.extend({qtiClass:"gapImg",initObject:function(e){this.object=e||new t
},getObject:function(){return this.object}});return i}),define("taoQtiItem/qtiCreator/model/choices/GapImg",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/GapImg"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{matchMin:0,matchMax:0}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/TextVariableChoice",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t){var i=e.extend({init:function(e,t,i){this._super(e,t),this.val(i||"")},is:function(e){return"textVariableChoice"===e||this._super(e)},val:function(e){if("undefined"==typeof e)return this.text;
if("string"!=typeof e)throw"text must be a string";return this.text=e,$(document).trigger("choiceTextChange",{choice:this,text:e}),this},render:function(){var e=t.getOptionsFromArguments(arguments),i=e.renderer||this.getRenderer(),n={body:this.text};return this._super(_.merge(n,e.data),e.placeholder,e.subclass,i)}});return i}),define("taoQtiItem/qtiItem/core/choices/GapText",["taoQtiItem/qtiItem/core/choices/TextVariableChoice"],function(e){var t=e.extend({qtiClass:"gapText"});return t}),define("taoQtiItem/qtiCreator/model/choices/GapText",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/GapText"],function(e,t,i){var n={};
return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{fixed:!1,matchMax:1,matchMin:0}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/HotspotChoice",["taoQtiItem/qtiItem/core/choices/Hotspot"],function(e){var t=e.extend({qtiClass:"hotspotChoice"});return t}),define("taoQtiItem/qtiCreator/model/choices/HotspotChoice",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/HotspotChoice"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{}}}),i.extend(n)}),define("taoQtiItem/qtiItem/mixin/ContainerInline",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/mixin/Container","lodash"],function(e,t,i){var n={};
return i.extend(n,t.methods),i.extend(n,{initContainer:function(e){t.methods.initContainer.call(this,e),this.bdy.contentModel="inlineStatic"}}),{augment:function(t){e.augment(t,n)},methods:n}}),define("taoQtiItem/qtiItem/core/choices/Hottext",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/mixin/ContainerInline"],function(e,t){var i=e.extend({qtiClass:"hottext"});return t.augment(i),i}),define("taoQtiItem/qtiCreator/model/choices/Hottext",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/Hottext"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{fixed:!1}}}),i.extend(n)
}),define("taoQtiItem/qtiItem/core/choices/InlineChoice",["taoQtiItem/qtiItem/core/choices/TextVariableChoice"],function(e){var t=e.extend({qtiClass:"inlineChoice"});return t}),define("taoQtiItem/qtiCreator/model/choices/InlineChoice",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/InlineChoice"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{fixed:!1,showHide:"show"}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/ContainerChoice",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/mixin/Container"],function(e,t){var i=e.extend({init:function(e,t){this._super(e,t)
},is:function(e){return"containerChoice"===e||this._super(e)}});return t.augment(i),i}),define("taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",["taoQtiItem/qtiItem/core/choices/ContainerChoice"],function(e){var t=e.extend({qtiClass:"simpleAssociableChoice"});return t}),define("taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{fixed:!1,showHide:"show",matchMax:0,matchMin:0}}}),i.extend(n)}),define("taoQtiItem/qtiItem/core/choices/SimpleChoice",["taoQtiItem/qtiItem/core/choices/ContainerChoice"],function(e){var t=e.extend({qtiClass:"simpleChoice"});
return t}),define("taoQtiItem/qtiCreator/model/choices/SimpleChoice",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/choices/SimpleChoice"],function(e,t,i){var n={};return e.extend(n,t),e.extend(n,{getDefaultAttributes:function(){return{fixed:!1,showHide:"show"}}}),i.extend(n)}),define("taoQtiItem/qtiCreator/model/helper/response",["lodash"],function(e){return{removeChoice:function(t,i){var n=i.id().replace(/([.-])/g,"\\$1"),a=new RegExp("([^a-z_-d.]*)("+n+")([^a-z_-d.]*)");for(var r in t.correctResponse)t.correctResponse[r].match(a)&&delete t.correctResponse[r];var o={};e.forIn(t.mapEntries,function(e,t){t.match(a)||(o[t]=e)}),t.mapEntries=o
}}}),define("taoQtiItem/qtiItem/core/variables/ResponseDeclaration",["taoQtiItem/qtiItem/core/variables/VariableDeclaration","lodash"],function(e,t){var i=e.extend({qtiClass:"responseDeclaration",init:function(e,t){this._super(e,t),this.template="",this.mappingAttributes={},this.mapEntries={},this.correctResponse=null,this.feedbackRules={}},getFeedbackRules:function(){return[]},getComposingElements:function(){var e=this._super();return e=t.extend(e,this.getFeedbackRules())},toArray:function(){var e=this._super();return e.howMatch=this.template,e.correctResponses=this.correctResponse,e.mapping=this.mapEntries,e.mappingAttributes=this.mappingAttributes,e}});return i
}),define("taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",["taoQtiItem/qtiItem/core/Element"],function(e){var t=e.extend({qtiClass:"_simpleFeedbackRule",serial:"",relatedItem:null,init:function(t,i,n,a){this._super(t,{}),this.condition="correct",this.comparedOutcome=null,this.comparedValue=0,this.feedbackOutcome=i,this.feedbackThen=e.isA(n,"feedback")?n:null,this.feedbackElse=e.isA(a,"feedback")?n:null},setCondition:function(t,i,n){if(!e.isA(t,"variableDeclaration"))throw"invalid outcome type: must be a variableDeclaration";switch(i){case"correct":case"incorrect":if(!e.isA(t,"responseDeclaration"))throw"invalid outcome type: must be a responseDeclaration";
this.comparedOutcome=t,this.condition=i;break;case"lt":case"lte":case"equal":case"gte":case"gt":if(null===n||void 0===n)throw"compared value must not be null";this.comparedOutcome=t,this.condition=i,this.comparedValue=n;break;default:throw"unknown condition type : ".condition}return this},setFeedbackElse:function(t){e.isA(t,"feedback")&&(this.feedbackElse=t)}});return t}),define("taoQtiItem/qtiItem/helper/response",["lodash"],function(e){var t={MATCH_CORRECT:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct",MAP_RESPONSE:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response",MAP_RESPONSE_POINT:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point"};
return{isUsingTemplate:function(i,n){return!e.isString(n)||n!==i.template&&t[n]!==i.template?!1:!0},isValidTemplateName:function(e){return!!this.getTemplateUriFromName(e)},getTemplateUriFromName:function(e){return t[e]?t[e]:""},getTemplateNameFromUri:function(i){var n="";return e.forIn(t,function(e,t){return e===i?(n=t,!1):void 0}),n}}}),define("taoQtiItem/qtiCreator/model/variables/ResponseDeclaration",["jquery","lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/core/variables/ResponseDeclaration","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiItem/core/response/SimpleFeedbackRule","taoQtiItem/qtiItem/helper/response"],function(e,t,i,n,a,r,o){var s={};
return t.extend(s,a),t.extend(s,{setTemplate:function(t){var i=o.getTemplateUriFromName(t);return i&&this.template!==i&&(this.template=i,e(document).trigger("responseTemplateChange.qti-widget",{element:this,value:t})),this},getTemplate:function(){return this.template},resetCorrect:function(){return this.correctResponse=null,e(document).trigger("correctResponseChange.qti-widget",{element:this,value:null}),this},setCorrect:function(i){return t.isString(i)&&(i=[i]),this.correctResponse=i,e(document).trigger("correctResponseChange.qti-widget",{element:this,value:i}),this},getCorrect:function(){return t.clone(this.correctResponse)},setMappingAttribute:function(t,i){this.mappingAttributes[t]=i,e(document).trigger("mappingAttributeChange.qti-widget",{element:this,key:t,value:i})
},removeMappingAttribute:function(t){delete this.mappingAttributes[t],e(document).trigger("mappingAttributeChange.qti-widget",{element:this,key:t,value:null})},getMappingAttribute:function(e){return this.mappingAttributes[e]},setMapEntry:function(t,i,n){if(i=parseFloat(i),n=n?!0:!1,isNaN(i))throw"the mapped value is not a number";if("multiple"===this.attr("cardinality")&&"pair"===this.attr("baseType")){var a=t.split(" "),r=a[1]+" "+a[0];this.mapEntries[r]?this.mapEntries[r]=i:this.mapEntries[t]=i}else this.mapEntries[t]=i;return e(document).trigger("mapEntryChange.qti-widget",{element:this,mapKey:t,mappedValue:i,caseSensitive:n}),this},removeMapEntry:function(t,i){if("undefined"==typeof i&&(i=!1),t||i){if("multiple"===this.attr("cardinality")&&"pair"===this.attr("baseType")){var n=t.split(" "),a=n[1]+" "+n[0];
delete this.mapEntries[a]}delete this.mapEntries[t],e(document).trigger("mapEntryRemove.qti-widget",{element:this,mapKey:t})}return this},getMapEntries:function(){return t.clone(this.mapEntries)},removeMapEntries:function(){t(this.mapEntries).keys().forEach(this.removeMapEntry,this)},createFeedbackRule:function(){var t=this.getRelatedItem(),i=t.createOutcomeDeclaration({identifier:"FEEDBACK",cardinality:"single",baseType:"identifier"}),n=t.createModalFeedback({identifier:"feedbackModal",outcomeIdentifier:i.id()}),a=new r("",i,n);a.setCondition(this,"correct"),this.feedbackRules[a.getSerial()]=a;var o=this.getRenderer();return o&&(a.setRenderer(o),n.setRenderer(o)),e(document).trigger("feedbackRuleCreated.qti-widget",{element:this,rule:a}),a
},getFeedbackRule:function(e){return this.feedbackRules[e]},getFeedbackRules:function(){return t.clone(this.feedbackRules)},setCondition:function(t,i,n){t.setCondition(this,i,n),e(document).trigger("feedbackRuleConditionChange.qti-widget",{element:this,rule:t,condition:i,value:n})},deleteFeedbackRule:function(t){var i,n=this.getRelatedItem();return n.remove("outcomes",t.feedbackOutcome),n.remove("modalFeedbacks",t.feedbackThen),n.remove("modalFeedbacks",t.feedbackElse||""),i=this.remove("feedbackRules",t),e(document).trigger("feedbackRuleRemoved.qti-widget",{element:this,rule:t}),i},createFeedbackElse:function(t){var n;if(i.isA(t,"_simpleFeedbackRule")){n=this.getRelatedItem().createModalFeedback({identifier:"feedbackModal",outcomeIdentifier:t.feedbackOutcome.id()}),t.setFeedbackElse(n);
var a=this.getRenderer();a&&n.setRenderer(a),e(document).trigger("feedbackRuleElseCreated.qti-widget",{element:this,rule:t,modalFeedback:n})}return n},deleteFeedbackElse:function(t){this.getRelatedItem().remove("modalFeedbacks",t.feedbackElse),t.feedbackElse=null,e(document).trigger("feedbackRuleElseRemoved.qti-widget",{element:this,rule:t})},getDefaultAttributes:function(){return{}}}),n.extend(s)}),define("taoQtiItem/qtiCreator/model/mixin/editableInteraction",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/variables/ResponseDeclaration","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/model/helper/response"],function(e,t,i,n,a){var r={removeChoice:function(e){var i,r="";
return"string"==typeof e?r=e:t.isA(e,"choice")&&(r=e.getSerial()),this.choices[r]&&(i=this.choices[r],delete this.choices[r],a.removeChoice(this.getResponseDeclaration(),i),n.deleted(i,this)),this},createResponse:function(e,t){var n=new i;e&&n.attr(e),this.getRelatedItem().addResponseDeclaration(n),n.buildIdentifier("RESPONSE",!1),n.setTemplate(t||"MATCH_CORRECT"),this.attr("responseIdentifier",n.id()),n.mappingAttributes.defaultValue=0;var a=this.getRenderer();return a&&n.setRenderer(a),n},deleteResponse:function(){var e=this.getResponseDeclaration();return e&&this.getRelatedItem().deleteResponseDeclaration(e),this.removeAttr("responseIdentifier"),this},beforeRemove:function(){var t=this.serial,i=this.getRelatedItem().getInteractions();
this.deleteResponse(),2===e.size(i)&&e.each(i,function(e){if(e.serial!==t){var i=e.getResponseDeclaration();e.attr("responseIdentifier","RESPONSE"),i.id("RESPONSE")}})}};return r}),define("taoQtiItem/qtiItem/core/interactions/Interaction",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n){var a=e.extend({init:function(e,t){this._super(e,t),this.choices={}},is:function(e){return"interaction"===e||this._super(e)},addChoice:function(e){return e.setRelatedItem(this.getRelatedItem()||null),this.choices[e.getSerial()]=e,this},getChoices:function(){var e={};for(var t in this.choices)e[t]=this.choices[t];
return e},getChoice:function(e){var t=null;return this.choices[e]&&(t=this.choices[e]),t},getChoiceByIdentifier:function(e){for(var t in this.choices)if(this.choices[t].id()===e)return this.choices[t];return null},getComposingElements:function(){var i=this._super();for(var n in this.choices)e.isA(this.choices[n],"choice")&&(i[n]=this.choices[n],i=t.extend(i,this.choices[n].getComposingElements()));return i},find:function(e){var t=this._super(e);return t||(t=n.findInCollection(this,"choices",e)),t},getResponseDeclaration:function(){var e=null,t=this.attr("responseIdentifier");if(t){var i=this.getRelatedItem();if(!i)throw"cannot get response of an interaction out of its item context";
e=i.getResponseDeclaration(t)}return e},render:function(){var n=i.getOptionsFromArguments(arguments),a=n.renderer||this.getRenderer(),r={_type:this.qtiClass.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()}),choices:[],choiceShuffle:!0};if(!a)throw"no renderer found for the interaction "+this.qtiClass;var o=this.attr("shuffle")&&a.shuffleChoices?a.getShuffledChoices(this):this.getChoices(),s={interaction:{serial:this.serial,attributes:this.attributes}},l=this;t.each(o,function(i){if(e.isA(i,"choice"))try{var n=i.render(t.clone(s,!0),null,i.qtiClass+"."+l.qtiClass,a);r.choices.push(n)}catch(o){}});var c=n.subclass?this.qtiClass+"."+n.subclass:this.qtiClass;
return this._super(t.merge(r,n.data),n.placeholder,c,a)},postRender:function(t,i,n){n=n||this.getRenderer();var a=this.getChoices();for(var r in a){var o=a[r];e.isA(o,"choice")&&o.postRender({},o.qtiClass+"."+this.qtiClass,n)}return this._super(t,i,n)},setResponse:function(e){var t=null,i=this.getRenderer();if(!i)throw"no renderer found for the interaction "+this.qtiClass;return t=i.setResponse(this,e)},getResponse:function(){var e=null,t=this.getRenderer();if(!t)throw"no renderer found for the interaction "+this.qtiClass;return e=t.getResponse(this)},resetResponse:function(){var e=null,t=this.getRenderer();if(!t)throw"no renderer found for the interaction "+this.qtiClass;
return e=t.resetResponse(this)},toArray:function(){var t=this._super();t.choices={};for(var i in this.choices)e.isA(this.choices[i],"choice")&&(t.choices[i]=this.choices[i].toArray());return t}});return a}),define("taoQtiItem/qtiItem/core/interactions/Prompt",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/mixin/ContainerInline"],function(e,t){var i=e.extend({qtiClass:"prompt"});return t.augment(i),i}),define("taoQtiItem/qtiItem/core/interactions/BlockInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction","taoQtiItem/qtiItem/core/interactions/Prompt","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i,n){var a=e.extend({init:function(e,i){this._super(e,i),this.prompt=new t("")
},is:function(e){return"blockInteraction"===e||this._super(e)},getComposingElements:function(){var e=this._super();return e=i.extend(e,this.prompt.getComposingElements()),e[this.prompt.getSerial()]=this.prompt,e},find:function(e){return this._super(e)||this.prompt.find(e)},render:function(){var e=n.getOptionsFromArguments(arguments),t=e.renderer||this.getRenderer(),a={prompt:this.prompt.render(t)};return this._super(i.merge(a,e.data),e.placeholder,e.subclass,t)},postRender:function(e,t,i){return i=i||this.getRenderer(),this.prompt.postRender({},"",i),this._super(e,t,i)},toArray:function(){var e=this._super();return e.prompt=this.prompt.toArray(),e}});return a
}),define("taoQtiItem/qtiItem/core/interactions/AssociateInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(e){var t=e.extend({qtiClass:"associateInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/AssociateInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/AssociateInteraction","taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice"],function(e,t,i,n,a){var r={};return e.extend(r,t),e.extend(r,i),e.extend(r,{getDefaultAttributes:function(){return{shuffle:!1,maxAssociations:0,minAssociations:0}
},afterCreate:function(){this.createChoice(),this.createChoice(),this.createResponse({baseType:"pair",cardinality:"multiple"})},createChoice:function(){var t=new a;this.addChoice(t);var i=e.size(this.getChoices());return t.body("choice #"+i).buildIdentifier("choice"),this.getRenderer()&&t.setRenderer(this.getRenderer()),$(document).trigger("choiceCreated.qti-widget",{choice:t,interaction:this}),t}}),n.extend(r)}),define("taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(e){var t=e.extend({qtiClass:"choiceInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/ChoiceInteraction","taoQtiItem/qtiCreator/model/choices/SimpleChoice"],function(e,t,i,n,a){var r={};
return e.extend(r,t),e.extend(r,i),e.extend(r,{getDefaultAttributes:function(){return{shuffle:!1,maxChoices:0,minChoices:0,orientation:"vertical"}},afterCreate:function(){this.createChoice(),this.createChoice(),this.createChoice(),this.createResponse({baseType:"identifier",cardinality:"multiple"})},createChoice:function(){var t=new a;this.addChoice(t);var i=e.size(this.getChoices());return t.body("choice #"+i).buildIdentifier("choice"),this.getRenderer()&&t.setRenderer(this.getRenderer()),$(document).trigger("choiceCreated.qti-widget",{choice:t,interaction:this}),t}}),n.extend(r)}),define("taoQtiItem/qtiItem/core/interactions/CustomInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i){var n=e.extend({qtiClass:"customInteraction",defaultNsName:"pci",defaultNsUri:"http://www.imsglobal.org/xsd/portableCustomInteraction",defaultMarkupNsName:"html5",defaultMarkupNsUri:"html5",init:function(e,t){this._super(e,t),this.typeIdentifier="",this.markup="",this.properties={},this.libraries=[],this.entryPoint="",this.markupNs={}
},is:function(e){return"customInteraction"===e||this._super(e)},render:function(){var e=i.getOptionsFromArguments(arguments),n=e.renderer||this.getRenderer(),a={typeIdentifier:this.typeIdentifier,markup:this.markup,properties:this.properties,libraries:this.libraries,entryPoint:this.entryPoint,ns:{pci:this.getNamespace().name+":"}};return this._super(t.merge(a,e.data),e.placeholder,e.subclass,n)},toArray:function(){var e=this._super();return e.markup=this.markup,e.properties=this.properties,e},prop:function(e,t){if(e)if(void 0!==t)this.properties[e]=t;else if("object"==typeof e)for(var i in e)this.prop(i,e[i]);else if("string"==typeof e)return void 0===this.properties[e]?void 0:this.properties[e];
return this},removeProp:function(e){var i=this;return"string"==typeof e&&(e=[e]),t.each(e,function(e){delete i.attributes[e]}),this},getNamespace:function(){if(this.ns&&this.ns.name&&this.ns.uri)return t.clone(this.ns);var e=this.getRelatedItem();if(e){var i=e.getNamespaces();for(ns in i)if(i[ns].indexOf("portableCustomInteraction")>0)return{name:ns,uri:i[ns]};return e.namespaces[this.defaultNsName]=this.defaultNsUri,{name:this.defaultNsName,uri:this.defaultNsUri}}return{}},setNamespace:function(e,t){this.ns={name:e,uri:t}},getMarkupNamespace:function(){if(this.markupNs&&this.markupNs.name&&this.markupNs.uri)return t.clone(this.markupNs);var e=this.getRelatedItem();
return e?(e.namespaces[this.defaultMarkupNsName]=this.defaultMarkupNsUri,{name:this.defaultMarkupNsName,uri:this.defaultMarkupNsUri}):{}},setMarkupNamespace:function(e,t){this.markupNs={name:e,uri:t}}});return n}),define("taoQtiItem/qtiCreator/model/interactions/CustomInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiCreator/editor/customInteractionRegistry","taoQtiItem/qtiItem/core/interactions/CustomInteraction"],function(e,t,i,n,a){var r=function(e,t){throw t+" not available for pci of type "+e.typeIdentifier},o={};return e.extend(o,t),e.extend(o,i),e.extend(o,{getDefaultAttributes:function(){return{}
},getDefaultPciProperties:function(){var t=n.getCreator(this.typeIdentifier);return e.isFunction(t.getDefaultPciProperties)?t.getDefaultPciProperties(this):{}},afterCreate:function(){var t=this.typeIdentifier,i=n.getCreator(t),a=n.getManifest(t);if(i.getMarkupTemplate(),this.properties=i.getDefaultPciProperties(),this.entryPoint=a.entryPoint,this.libraries=a.libraries,e.isArray(a.css)){this.css=e.clone(a.css);var r=this.getRelatedItem(),o=[];e.each(this.css,function(e){r.stylesheetExists(e)||(r.createStyleSheet(e),o.push("css!"+n.getBaseUrl(t)+e))}),o.length&&require(o)}return this.createResponse({baseType:a.response.baseType,cardinality:a.response.cardinality}),this.markup=this.renderMarkup(),this.getNamespace(),e.isFunction(i.afterCreate)?i.afterCreate(this):void 0
},createChoice:function(){var t=n.getCreator(this.typeIdentifier);return e.isFunction(t.createChoice)?t.createChoice(this):void r(this,"createChoice")},renderMarkup:function(){var t=n.getCreator(this.typeIdentifier),i=t.getMarkupTemplate(),a={responseIdentifier:this.attr("responseIdentifier")};return e.isFunction(t.getMarkupData)&&(a=t.getMarkupData(this,a)),i(a)},updateMarkup:function(){this.markup=this.renderMarkup()}}),a.extend(o)}),define("taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i){var n=e.extend({qtiClass:"extendedTextInteraction",render:function(){var e=i.getOptionsFromArguments(arguments),n=e.renderer||this.getRenderer(),a={multiple:!1,maxStringLoop:[]},r=this.getResponseDeclaration();
if(this.attr("maxStrings")&&("multiple"===r.attr("cardinality")||"ordered"===r.attr("cardinality"))){a.multiple=!0;for(var o=0;o<this.attr("maxStrings");o++)a.maxStringLoop.push(o+"")}return this._super(t.merge(a,e.data),e.placeholder,e.subclass,n)}});return n}),define("taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction"],function(e,t,i,n){var a={};return e.extend(a,t),e.extend(a,i),e.extend(a,{getDefaultAttributes:function(){return{format:"plain"}},afterCreate:function(){this.createResponse({baseType:"string",cardinality:"single"})
},createChoice:function(){throw"extendedTextInteraction does not have any choices"}}),n.extend(a)}),define("taoQtiItem/qtiItem/core/interactions/ContainerInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/mixin/Container"],function(e,t){var i=e.extend({});return t.augment(i),i}),define("taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",["taoQtiItem/qtiItem/core/interactions/ContainerInteraction"],function(e){var t=e.extend({qtiClass:"gapMatchInteraction",getGaps:function(){return this.getBody().getElements("gap")}});return t}),define("taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/GapMatchInteraction","taoQtiItem/qtiCreator/model/choices/GapText","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/model/helper/response"],function(e,t,i,n,a,r,o,s){var l={};
return e.extend(l,i),e.extend(l,n),e.extend(l,{getDefaultAttributes:function(){return{shuffle:!1}},afterCreate:function(){this.body("<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>"),this.createChoice(),this.createResponse({baseType:"directedPair",cardinality:"multiple"})},createChoice:function(t){var i=new r;return this.addChoice(i),i.val(t||"choice #"+e.size(this.getChoices())).buildIdentifier("choice"),this.getRenderer()&&i.setRenderer(this.getRenderer()),o.choiceCreated(i,this),i},createGap:function(e,t){var i=new r("",e);return this.addChoice(i),i.buildIdentifier("gap"),i.body(t),this.getRenderer()&&i.setRenderer(this.getRenderer()),o.choiceCreated(i,this),i
},removeChoice:function(e){var i,n="";return"string"==typeof e?n=e:t.isA(e,"gap")?n=e.serial:t.isA(e,"gapText")&&(n=e.serial),(i=this.getBody().getElement(n))?(this.getBody().removeElement(i),s.removeChoice(this.getResponseDeclaration(),i),o.deleted(i,this)):(i=this.getChoice(n))&&(delete this.choices[n],s.removeChoice(this.getResponseDeclaration(),i),o.deleted(i,this)),this}}),a.extend(l)}),define("taoQtiItem/qtiItem/core/interactions/ObjectInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/core/Object"],function(e,t){var i=e.extend({initObject:function(e){this.object=e||new t},getObject:function(){return this.object}});
return i}),define("taoQtiItem/qtiItem/core/interactions/GraphicInteraction",["taoQtiItem/qtiItem/core/interactions/ObjectInteraction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i){var n=e.extend({render:function(){var e=i.getOptionsFromArguments(arguments),n=e.renderer||this.getRenderer(),a={backgroundImage:this.object.getAttributes(),object:this.object.render(n)};return this._super(t.merge(a,e.data),e.placeholder,e.subclass,n)}});return n}),define("taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(e){var t=e.extend({qtiClass:"graphicAssociateInteraction"});
return t}),define("taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction",["jquery","lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction","taoQtiItem/qtiCreator/model/choices/AssociableHotspot"],function(e,t,i,n,a,r){var o={};return t.extend(o,i),t.extend(o,n),t.extend(o,{getDefaultAttributes:function(){return{maxAssociations:0,minAssociations:0}},afterCreate:function(){var e=this.getRelatedItem(),t=e.data("responsive");t===!0&&this.addClass("responsive"),this.createResponse({baseType:"pair",cardinality:"multiple"})},createChoice:function(t){var i=new r("",t);
return this.addChoice(i),i.buildIdentifier("associablehotspot"),this.getRenderer()&&i.setRenderer(this.getRenderer()),e(document).trigger("choiceCreated.qti-widget",{choice:i,interaction:this}),i}}),a.extend(o)}),define("taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction","taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t,i,n){var a=e.extend({qtiClass:"graphicGapMatchInteraction",init:function(e,t){this._super(e,t),this.gapImgs={}},addGapImg:function(e){t.isA(e,"gapImg")&&(e.setRelatedItem(this.getRelatedItem()||null),this.gapImgs[e.getSerial()]=e)
},removeGapImg:function(e){var i="";return"string"==typeof e?i=e:t.isA(e,"gapImg")&&(i=e.getSerial()),delete this.gapImgs[i],this},getGapImgs:function(){return i.clone(this.gapImgs)},getGapImg:function(e){return this.gapImgs[e]},getComposingElements:function(){var e=this._super();for(var t in this.gapImgs)e[t]=this.gapImgs[t],e=i.extend(e,this.gapImgs[t].getComposingElements());return e},find:function(e){var t=this._super(e);return t||this.gapImgs[e]&&(t={parent:this,element:this.gapImgs[e]}),t},render:function(){var e=n.getOptionsFromArguments(arguments),a=e.renderer||this.getRenderer(),r={gapImgs:[]},o=this.getGapImgs();for(var s in o)t.isA(o[s],"choice")&&r.gapImgs.push(o[s].render({},null,"",a));
return this._super(i.merge(r,e.data),e.placeholder,e.subclass,a)},toArray:function(){var e=this._super();e.gapImgs={};var t=this.getGapImgs();for(var i in t)e.gapImgs[i]=t[i].toArray();return e}});return a}),define("taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction",["jquery","lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction","taoQtiItem/qtiCreator/model/choices/GapImg","taoQtiItem/qtiCreator/model/choices/AssociableHotspot"],function(e,t,i,n,a,r,o){var s={};return t.extend(s,i),t.extend(s,n),t.extend(s,{afterCreate:function(){var e=this.getRelatedItem(),t=e.data("responsive");
t===!0&&this.addClass("responsive"),this.createResponse({baseType:"directedPair",cardinality:"multiple"})},createGapImg:function(t,i){var n=new r;return n.object.attributes=t,i&&n.attr("objectLabel",i),this.gapImgs||(this.gapImgs=[]),this.addGapImg(n),n.buildIdentifier("gapimg"),this.getRenderer()&&n.setRenderer(this.getRenderer()),e(document).trigger("choiceCreated.qti-widget",{choice:n,interaction:this}),n},createChoice:function(t){var i=new o("",t);return this.addChoice(i),i.buildIdentifier("associablehotspot"),this.getRenderer()&&i.setRenderer(this.getRenderer()),e(document).trigger("choiceCreated.qti-widget",{choice:i,interaction:this}),i}}),a.extend(s)}),define("taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(e){var t=e.extend({qtiClass:"graphicOrderInteraction"});
return t}),define("taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction",["jquery","lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction","taoQtiItem/qtiCreator/model/choices/HotspotChoice"],function(e,t,i,n,a,r){var o={};return t.extend(o,i),t.extend(o,n),t.extend(o,{getDefaultAttributes:function(){return{}},afterCreate:function(){var e=this.getRelatedItem(),t=e.data("responsive");t===!0&&this.addClass("responsive"),this.createResponse({baseType:"identifier",cardinality:"ordered"})},createChoice:function(t){var i=new r("",t);return this.addChoice(i),i.buildIdentifier("hotspot"),this.getRenderer()&&i.setRenderer(this.getRenderer()),e(document).trigger("choiceCreated.qti-widget",{choice:i,interaction:this}),i
}}),a.extend(o)}),define("taoQtiItem/qtiItem/core/interactions/HotspotInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(e){var t=e.extend({qtiClass:"hotspotInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/HotspotInteraction",["jquery","lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/HotspotInteraction","taoQtiItem/qtiCreator/model/choices/HotspotChoice"],function(e,t,i,n,a,r){var o={};return t.extend(o,i),t.extend(o,n),t.extend(o,{getDefaultAttributes:function(){return{maxChoices:0,minChoices:0}},afterCreate:function(){var e=this.getRelatedItem(),t=e.data("responsive");
t===!0&&this.addClass("responsive"),this.createResponse({baseType:"identifier",cardinality:"single"})},createChoice:function(t){var i=new r("",t);return this.addChoice(i),i.buildIdentifier("hotspot"),this.getRenderer()&&i.setRenderer(this.getRenderer()),e(document).trigger("choiceCreated.qti-widget",{choice:i,interaction:this}),i}}),a.extend(o)}),define("taoQtiItem/qtiItem/core/interactions/HottextInteraction",["taoQtiItem/qtiItem/core/interactions/ContainerInteraction","taoQtiItem/qtiItem/core/Element"],function(e,t){var i=e.extend({qtiClass:"hottextInteraction",getChoices:function(){return this.getBody().getElements("hottext")},getChoice:function(e){var i=this.getBody().getElement(e);
return t.isA(i,"choice")?i:null}});return i}),define("taoQtiItem/qtiCreator/model/interactions/HottextInteraction",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/HottextInteraction","taoQtiItem/qtiCreator/model/choices/Hottext","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/model/helper/response"],function(e,t,i,n,a,r,o,s){var l={};return e.extend(l,i),e.extend(l,n),e.extend(l,{getDefaultAttributes:function(){return{maxChoices:0,minChoices:0}},afterCreate:function(){this.body("<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>"),this.createResponse({baseType:"identifier",cardinality:"multiple"})
},createChoice:function(e,t){var i=new r("",e);return this.addChoice(i),i.buildIdentifier("hottext"),i.body(t),this.getRenderer()&&i.setRenderer(this.getRenderer()),o.choiceCreated(i,this),i},removeChoice:function(e){var i,n="";return"string"==typeof e?n=e:t.isA(e,"hottext")&&(n=e.getSerial()),i=this.getBody().getElement(n),i&&(this.getBody().removeElement(i),s.removeChoice(this.getResponseDeclaration(),i),o.deleted(i,this)),this}}),a.extend(l)}),define("taoQtiItem/qtiItem/core/interactions/InlineInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction"],function(e){return e.extend({})}),define("taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",["taoQtiItem/qtiItem/core/interactions/InlineInteraction"],function(e){var t=e.extend({qtiClass:"inlineChoiceInteraction"});
return t}),define("taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction","taoQtiItem/qtiCreator/model/choices/InlineChoice"],function(e,t,i,n,a){var r={};return e.extend(r,t),e.extend(r,i),e.extend(r,{getDefaultAttributes:function(){return{shuffle:!1,required:!1}},afterCreate:function(){this.createChoice(),this.createChoice(),this.createChoice(),this.createResponse({baseType:"identifier",cardinality:"single"})},createChoice:function(){var t=new a;this.addChoice(t);var i=e.size(this.getChoices());
return t.val("choice #"+i).buildIdentifier("choice"),this.getRenderer()&&t.setRenderer(this.getRenderer()),$(document).trigger("choiceCreated.qti-widget",{choice:t,interaction:this}),t}}),n.extend(r)}),define("taoQtiItem/qtiItem/core/interactions/MatchInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n,a){var r=e.extend({qtiClass:"matchInteraction",init:function(e,t){this._super(e,t),this.choices=[{},{}]},addChoice:function(e,t){t=parseInt(t),this.choices[t]&&(e.setRelatedItem(this.getRelatedItem()||null),this.choices[t][e.getSerial()]=e)
},getChoices:function(e){return e=parseInt(e),i.clone(this.choices[e]?this.choices[e]:this.choices)},getChoice:function(e){return this.choices[0][e]||this.choices[1][e]||null},getComposingElements:function(){for(var e=this._super(),n=0;2>n;n++){var a=this.getChoices(n);for(var r in a)a[r]instanceof t&&(e[r]=a[r],e=i.extend(e,a[r].getComposingElements()))}return e},find:function(e){var t=this._super(e);return t||(t=a.findInCollection(this,["choices.0","choices.1"],e)),t},render:function(){var e,a=n.getOptionsFromArguments(arguments),r=a.renderer||this.getRenderer(),o={matchSet1:[],matchSet2:[]},s={interaction:{serial:this.serial,attributes:this.attributes}};if(!r)throw"no renderer found for the interaction "+this.qtiClass;
e=this.attr("shuffle")&&r.shuffleChoices?r.getShuffledChoices(this):this.getChoices();for(var l=0;2>l;l++){var c=e[l];for(var d in c)c[d]instanceof t&&o["matchSet"+(l+1)].push(c[d].render(i.clone(s,!0),null,"simpleAssociableChoice.matchInteraction",r))}return this._super(i.merge(o,a.data),a.placeholder,a.subclass,r)},postRender:function(e,n,a){a=a||this.getRenderer();for(var r=this.getChoices(),o=0;2>o;o++)i.forIn(r[o],function(e){e instanceof t&&e.postRender({},"simpleAssociableChoice.matchInteraction",a)});return this._super(e,n,a)},toArray:function(){var e=this._super();e.choices={0:{},1:{}};for(var i=0;2>i;i++){var n=this.getChoices(i);for(var a in n)n[a]instanceof t&&(e.choices[i][a]=n[a].toArray())
}return e}});return r}),define("taoQtiItem/qtiCreator/model/interactions/MatchInteraction",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/MatchInteraction","taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice","taoQtiItem/qtiCreator/model/helper/event","taoQtiItem/qtiCreator/model/helper/response"],function(e,t,i,n,a,r,o,s){var l={};return e.extend(l,i),e.extend(l,n),e.extend(l,{getDefaultAttributes:function(){return{shuffle:!1,maxAssociations:0,minAssociations:0}},afterCreate:function(){this.createChoice(0),this.createChoice(0),this.createChoice(1),this.createChoice(1),this.createResponse({baseType:"directedPair",cardinality:"multiple"})
},createChoice:function(t,i){var n=new r("",i);this.addChoice(n,t);var a=e.size(this.getChoices(t));return n.body("choice #"+a).buildIdentifier("choice"),this.getRenderer()&&n.setRenderer(this.getRenderer()),o.choiceCreated(n,this),n},removeChoice:function(e){var i,n="";return"string"==typeof e?n=e:t.isA(e,"choice")&&(n=e.getSerial()),i=this.choices[0][n]||this.choices[1][n]||null,i&&(delete this.choices[0][n],delete this.choices[1][n],s.removeChoice(this.getResponseDeclaration(),i),o.deleted(i,this)),this}}),a.extend(l)}),define("taoQtiItem/qtiItem/core/interactions/MediaInteraction",["taoQtiItem/qtiItem/core/interactions/ObjectInteraction","taoQtiItem/qtiItem/helper/rendererConfig"],function(e,t){var i=e.extend({qtiClass:"mediaInteraction",render:function(){var e=t.getOptionsFromArguments(arguments),i=e.renderer||this.getRenderer(),n={media:this.object.render({},null,"",i)};
return this._super(_.merge(n,e.data),e.placeholder,e.subclass,i)}});return i}),define("taoQtiItem/qtiCreator/model/interactions/MediaInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/MediaInteraction"],function(e,t,i,n){var a={};return e.extend(a,t),e.extend(a,i),e.extend(a,{getDefaultAttributes:function(){return{autostart:!1,minPlays:0,maxPlays:0,loop:!1}},afterCreate:function(){this.createResponse({baseType:"integer",cardinality:"single"})},createChoice:function(){throw"mediaInteraction does not have any choices"}}),n.extend(a)}),define("taoQtiItem/qtiItem/core/interactions/OrderInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(e){var t=e.extend({qtiClass:"orderInteraction"});
return t}),define("taoQtiItem/qtiCreator/model/interactions/OrderInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/OrderInteraction","taoQtiItem/qtiCreator/model/choices/SimpleChoice"],function(e,t,i,n,a){var r={};return e.extend(r,t),e.extend(r,i),e.extend(r,{getDefaultAttributes:function(){return{shuffle:!1,orientation:"vertical"}},afterCreate:function(){this.createChoice(),this.createChoice(),this.createChoice(),this.createResponse({baseType:"identifier",cardinality:"ordered"})},createChoice:function(){var t=new a;this.addChoice(t);var i=e.size(this.getChoices());
return t.body("choice #"+i).buildIdentifier("choice"),this.getRenderer()&&t.setRenderer(this.getRenderer()),$(document).trigger("choiceCreated.qti-widget",{choice:t,interaction:this}),t}}),n.extend(r)}),define("taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(e){var t=e.extend({qtiClass:"selectPointInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction",["jquery","lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/SelectPointInteraction"],function(e,t,i,n,a){var r={};
return t.extend(r,i),t.extend(r,n),t.extend(r,{getDefaultAttributes:function(){return{maxChoices:0,minChoices:0}},afterCreate:function(){var e=this.getRelatedItem(),t=e.data("responsive");t===!0&&this.addClass("responsive"),this.createResponse({baseType:"point",cardinality:"multiple"},"MAP_RESPONSE_POINT")}}),a.extend(r)}),define("taoQtiItem/qtiItem/core/interactions/SliderInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(e){var t=e.extend({qtiClass:"sliderInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/SliderInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/SliderInteraction"],function(e,t,i,n){var a={};
return e.extend(a,t),e.extend(a,i),e.extend(a,{getDefaultAttributes:function(){return{lowerBound:0,upperBound:100,orientation:"horizontal",reverse:!1,step:1,stepLabel:!1}},afterCreate:function(){this.createResponse({baseType:"integer",cardinality:"single"})},createChoice:function(){throw"sliderInteraction does not have any choices"}}),n.extend(a)}),define("taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",["taoQtiItem/qtiItem/core/interactions/InlineInteraction"],function(e){var t=e.extend({qtiClass:"textEntryInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/TextEntryInteraction"],function(e,t,i,n){var a={};
return e.extend(a,t),e.extend(a,i),e.extend(a,{getDefaultAttributes:function(){return{base:10,placeholderText:""}},afterCreate:function(){this.createResponse({baseType:"string",cardinality:"single"})},createChoice:function(){throw new Error("text entry interaction has no choice")}}),n.extend(a)}),define("taoQtiItem/qtiItem/core/interactions/UploadInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(e){var t=e.extend({qtiClass:"uploadInteraction"});return t}),define("taoQtiItem/qtiCreator/model/interactions/UploadInteraction",["lodash","taoQtiItem/qtiCreator/model/mixin/editable","taoQtiItem/qtiCreator/model/mixin/editableInteraction","taoQtiItem/qtiItem/core/interactions/UploadInteraction"],function(e,t,i,n){var a={};
return e.extend(a,t),e.extend(a,i),e.extend(a,{getDefaultAttributes:function(){return{type:""}},afterCreate:function(){this.createResponse({baseType:"file",cardinality:"single"})},createChoice:function(){throw"uploadInteraction does not have any choices"}}),n.extend(a)}),define("taoQtiItem/qtiCreator/model/mixin/editableChoice",["lodash"],function(e){var t=function(t,i,n){var a=i.replace(/([.-])/g,"\\$1"),r=new RegExp("\\b("+a+")\\b");for(var o in t.correctResponse)t.correctResponse[o]=t.correctResponse[o].replace(r,n);var s={};e.forIn(t.mapEntries,function(e,t){t=t.replace(r,n),s[t]=e}),t.mapEntries=s},i=e.throttle(function(e,i){var n=e.id();if(n!==i){var a=e.getInteraction().getResponseDeclaration();
t(a,n,i),e.id(i)}},300),n={id:function(e){i(this,e)}};return n}),define("taoQtiItem/qtiCreator/model/pciCreatorContext",["lodash"],function(e){var t={},i={register:function(e){t[e.getTypeIdentifier()]=e},createPciInstance:function(i){return t[i]?e.cloneDeep(t[i]):void 0}};return i}),define("tpl!taoQtiItem/qtiCreator/tpl/container",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='<div data-html-editable="true">',(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===d?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="</div>"}function o(e,t){var n,a,r="";return(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===d?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="function",u=this,h=i.helperMissing;return l=i.equal||t&&t.equal,c={hash:{},inverse:u.program(3,o,a),fn:u.program(1,r,a),data:a},s=l?l.call(t,t&&t.contentModel,"blockStatic",c):h.call(t,"equal",t&&t.contentModel,"blockStatic",c),s||0===s?s:""})}),define("taoQtiItem/qtiCreator/renderers/Container",["tpl!taoQtiItem/qtiCreator/tpl/container"],function(e){return{qtiClass:"_container",template:e}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/img",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t,i="";return i+='id="'+p((t=e&&e.attributes,t=null==t||t===!1?t:t.id,typeof t===h?t.apply(e):t))+'"'
}function o(e){var t,i="";return i+='class="'+p((t=e&&e.attributes,t=null==t||t===!1?t:t["class"],typeof t===h?t.apply(e):t))+'"'}function s(e){var t,i="";return i+='height="'+p((t=e&&e.attributes,t=null==t||t===!1?t:t.height,typeof t===h?t.apply(e):t))+'" '}function l(e){var t,i="";return i+='width="'+p((t=e&&e.attributes,t=null==t||t===!1?t:t.width,typeof t===h?t.apply(e):t))+'" '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d,u="",h="function",p=this.escapeExpression,f=this;return u+='<img \n    data-serial="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'" \n    data-qti-class="img" \n    src="'+p((c=t&&t.attributes,c=null==c||c===!1?c:c.src,typeof c===h?c.apply(t):c))+'" \n    alt="'+p((c=t&&t.attributes,c=null==c||c===!1?c:c.alt,typeof c===h?c.apply(t):c))+'" \n    ',c=i["if"].call(t,(c=t&&t.attributes,null==c||c===!1?c:c.id),{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(c||0===c)&&(u+=c),u+="\n    ",c=i["if"].call(t,(c=t&&t.attributes,null==c||c===!1?c:c["class"]),{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(c||0===c)&&(u+=c),u+="\n    ",c=i["if"].call(t,(c=t&&t.attributes,null==c||c===!1?c:c.height),{hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a}),(c||0===c)&&(u+=c),u+="\n    ",c=i["if"].call(t,(c=t&&t.attributes,null==c||c===!1?c:c.width),{hash:{},inverse:f.noop,fn:f.program(7,l,a),data:a}),(c||0===c)&&(u+=c),u+="\n    />"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/Img",["tpl!taoQtiItem/qtiCommonRenderer/tpl/img","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"img",template:e,getContainer:t.getContainer}}),define("taoQtiItem/qtiCreator/widgets/Widget",["lodash","jquery","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/model/helper/invalidator"],function(e,t,i,n){var a=function(e,t){var i=new e.registeredStates[t](e);e.stateStack.push(i),i.init()},r=function(e){var t=e.stateStack.pop();t&&t.exit()},o={init:function(t,n,a,r){if(!(t instanceof i))throw new Error("element is not a QTI Element");return r=r||{},this.element=t,this.serial=t.getSerial(),this.$original=n,this.$form=a,this.stateStack=[],this.registeredStates={},this.buildContainer(),this.$container.data("widget",this),this.$original.data("widget",this),this.element.data("widget",this),this.offEvents(),e.each(this.getRequiredOptions(),function(e){if(!r[e])throw new Error("missing required option for image creator : "+e)
}),this.options=r,this.initCreator(r),this.changeState(r.state?r.state:"sleep"),e.isFunction(r.ready)&&r.ready.call(this,this),this},getRequiredOptions:function(){return[]},buildContainer:function(){throw new Error("method buildContainer must be implemented")},build:function(e,t,i,n){return this.clone().init(e,t,i,n)},clone:function(){return e.clone(this)},initCreator:function(){},getCurrentState:function(){return e.last(this.stateStack)},changeState:function(t){var i,n,o=this,s=this.getCurrentState();if(!this.registeredStates[t])throw new Error("unknown target state : "+t);if(i=new this.registeredStates[t],s){if(s.name===i.name)return this;if(e.indexOf(i.superState,s.name)>=0)for(var l=e.indexOf(i.superState,s.name)-1;l>=0;l--)n=i.superState[l],a(this,n);
else{if(e.indexOf(s.superState,i.name)>=0){for(var l=0;l<=e.indexOf(s.superState,i.name);l++)r(o);return this}r(o);var c=e.difference(s.superState,i.superState);e.each(c,function(){r(o)});var d=e.difference(i.superState,s.superState);e.eachRight(d,function(e){a(o,e)})}}else e.eachRight(i.superState,function(e){a(o,e)});return a(this,t),this},registerState:function(e,t){if(!e||!t)throw new Error("missing required arguments in state registration");this.registeredStates[e]=t},registerStates:function(t){var i=this;e.forIn(t,function(e,t){i.registerState(t,e)})},afterStateInit:function(e,i){var n="afterStateInit.qti-widget."+this.serial+(i?"."+i:"");t(document).on(n,e)
},beforeStateInit:function(e,i){var n="beforeStateInit.qti-widget."+this.serial+(i?"."+i:"");t(document).on(n,e)},afterStateExit:function(e,i){var n="afterStateExit.qti-widget."+this.serial+(i?"."+i:"");t(document).on(n,e)},beforeStateExit:function(e,i){var n="beforeStateExit.qti-widget."+this.serial+(i?"."+i:"");t(document).on(n,e)},offEvents:function(e){var i=".qti-widget."+this.serial+(e?"."+e:"");t(document).off(i)},destroy:function(){this.changeState("sleep"),this.$container.find("[data-edit]").remove(),t("[data-widget-component="+this.serial+"]").remove(),this.offEvents()},rebuild:function(t){t=t||{};var i=this.element,n={};e.isFunction(t.ready)&&(n.ready=t.ready);
var a=null;a=t.context&&t.context.length?t.context.find(".widget-box[data-serial="+i.serial+"]"):this.$container,this.destroy();var r=i.getRenderer();if(r&&r.isRenderer){if("creatorRenderer"===r.name)return i.render(a),i.postRender(n);throw new Error("The renderer is no longer the creatorRenderer")}throw new Error("No renderer found to rebuild the widget")},refresh:function(){var e=this.getCurrentState().name;this.rebuild({ready:function(t){t.changeState(e)}})},on:function(i,n,a){var r=this,o=i.replace(/\s+/g," ").split(" "),s=t(document);return e.each(o,function(e){var t=[e,"qti-widget",r.serial];a||t.push(r.getCurrentState().name),s.on(t.join("."),function(e,t){n.call(r,t)
})}),this},isValid:function(e,t,i){var a=this.element;return void 0===e?n.isValid(a):void(t?n.valid(a,e):n.invalid(a,e,i,this.getCurrentState().name))}};return o}),define("taoQtiItem/qtiCreator/widgets/static/Widget",["jquery","taoQtiItem/qtiCreator/widgets/Widget","taoQtiItem/qtiCreator/editor/widgetToolbar"],function(e,t){var i=t.clone();return i.initCreator=function(){t.initCreator.call(this),this.createToolbar()},i.buildContainer=function(){var t=e("<div>",{"data-serial":this.element.serial,"class":"widget-box"});this.$original.wrap(t),this.$container=this.$original.parent()},i.createToolbar=function(){return this},i.createOkButton=function(){var t=this;this.$container.append(e("<button>",{"class":"btn-info small",type:"button",text:"OK","data-edit":"active"}).css({margin:"5px 10px",display:"none"}).on("click.qti-widget",function(e){e.stopPropagation(),t.changeState("sleep")
}))},i}),define("taoQtiItem/qtiCreator/widgets/states/factory",["lodash"],function(e){var t=function(t){return e.isFunction(t)&&t.prototype.name&&t.prototype.superState&&e.isFunction(t.prototype.init)&&e.isFunction(t.prototype.exit)?!0:!1},i=function(e,t,i,n){var a=function(e){this.widget=e};return a.prototype.name=e,a.prototype.superState=t||[],i&&n&&(a.prototype.init=function(){var t=this.widget.$container;t.data("edit")===e&&t.show();var n=t.find('[data-edit="'+e+'"]').filter(function(){var e=$(this).closest(".widget-box");return e.length&&e[0]===t[0]?!0:!1});n.show(),this.widget.$container.addClass("edit-"+e),$(document).trigger("beforeStateInit.qti-widget",[this.widget.element,this]),i.call(this),$(document).trigger("afterStateInit.qti-widget",[this.widget.element,this])
},a.init=i,a.prototype.exit=function(){this.widget.$container.data("edit")===e&&this.widget.$container.hide(),this.widget.$container.find('[data-edit="'+e+'"]').hide(),this.widget.$container.removeClass("edit-"+e),$(document).trigger("beforeStateExit.qti-widget",[this.widget.element,this]),$(document).off([".qti-widget",e,this.widget.serial].join(".")),n.call(this),$(document).trigger("afterStateExit.qti-widget",[this.widget.element,this])},a.exit=n),a};return{create:function(){var n,a,r,o,s;if(e.isString(arguments[0]))if(a=arguments[0],e.isArray(arguments[1])){if(r=arguments[1],!e.isFunction(arguments[2])||!e.isFunction(arguments[3]))throw new Error("the third and fourth arguments are expected to be functions: init() & exit()");
o=arguments[2],s=arguments[3],n=i(a,r,o,s)}else{if(r=[],!e.isFunction(arguments[1])||!e.isFunction(arguments[2]))throw new Error("the second and third arguments are expected to be functions: init() & exit()");o=arguments[1],s=arguments[2],n=i(a,r,o,s)}else{if(!t(arguments[0]))throw new Error("invalid first argument : expected the state name (string) or a State (function)");if(a=arguments[0].prototype.name,r=arguments[0].prototype.superState,!e.isFunction(arguments[1])||!e.isFunction(arguments[2]))throw new Error("the second and third arguments are expected to be functions: init() & exit()");o=arguments[1],s=arguments[2],n=i(a,r,o,s)}return n},extend:function(n,a,r){var o,s,l=null;
if(!t(n))throw new Error("invalid state to be cloned");return e.isFunction(a)&&(o=function(){n.init.call(this),a.call(this)}),e.isFunction(r)&&(s=function(){r.call(this),n.exit.call(this)}),l=i(n.prototype.name,n.prototype.superState,o,s),e.forIn(n.prototype,function(t,i){if(e.isFunction(t)){if(o&&"init"===i||s&&"exit"===i)return!0;l.prototype[i]=t,l[i]=t}}),l},createBundle:function(){var i={},n=[],a=[];return arguments.length>=2?(i=e.clone(arguments[0]),n=arguments[1],a=arguments[2]||a):n=arguments[0],e.each(n,function(e){t(e)&&(i[e.prototype.name]=e)}),e.each(a,function(e){delete i[e]}),i},throwMissingRequiredImplementationError:function(e){throw new Error("Missing required implementation of the function "+e+"()")
}}}),define("taoQtiItem/qtiCreator/widgets/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("sleep",function(){var e=this.widget,t=this.widget.$container;t.on("mouseenter.sleep",function(){t.addClass("hover"),t.parent().trigger("mouseleave")}).on("mouseleave.sleep",function(){t.removeClass("hover"),t.parent().trigger("mouseenter")}),e.isValid()||e.changeState("invalid")},function(){this.widget.$container.removeClass("hover").off(".sleep")})}),define("taoQtiItem/qtiCreator/widgets/static/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Sleep"],function(e,t){var i=e.extend(t,function(){var e=this.widget;
e.$container.on("click.qti-widget.sleep",function(t){t.stopPropagation(),e.changeState("active")})},function(){var e=this.widget;e.$container.off(".sleep")});return i}),define("taoQtiItem/qtiCreator/widgets/states/Active",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/helpers/content"],function(e,t,i){return t.create("active",function(){var t=this.widget,i=t.$container[0],n=this.widget.element.getRelatedItem();e("#item-editor-panel").on("click.active",function(n){i===n.target||e.contains(i,n.target)||t.changeState("sleep")}).on("styleedit.active",function(){t.changeState("sleep")}),n&&n.data("widget").$container.on("resizestart.gridEdit.active beforedragoverstart.gridEdit.active",function(){t.changeState("sleep")
})},function(){i.changeInnerWidgetState(this.widget,"sleep"),this.widget.$container.off(".active"),e("#item-editor-panel").off(".active");var t=this.widget.element.getRelatedItem();t&&t.data("widget").$container.off(".active")})}),define("taoQtiItem/qtiCreator/widgets/static/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Active"],function(e,t){return e.extend(t,function(){var e=this.widget,t=e.$container;e.beforeStateInit(function(t,i,n){var a=i.getSerial();if("active"===n.name&&a!==e.serial||"choice"===n.name)if("rubricBlock"===e.element.qtiClass){var r=e.element.getComposingElements();r[i.serial]||e.changeState("sleep")
}else e.changeState("sleep")},"otherActive"),t.on("mouseenter.active",function(e){e.stopPropagation(),t.parent().trigger("mouseleave.sleep")}).on("mouseleave.active",function(e){e.stopPropagation(),t.parent().trigger("mouseenter.sleep")}).on("click.active",function(e){e.stopPropagation()})},function(){this.widget.$container.off(".active"),$("#item-editor-panel").off(".active"),this.widget.offEvents("otherActive")})}),define("taoQtiItem/qtiCreator/widgets/states/Inactive",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("inactive",function(){},function(){})}),define("taoQtiItem/qtiCreator/widgets/states/Deleting",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/helpers/deletingState","taoQtiItem/qtiCreator/helper/gridUnits","taoQtiItem/qtiCreator/editor/gridEditor/helper","taoQtiItem/qtiCreator/editor/gridEditor/content","lodash"],function(e,t,i,n,a,r){var o=e.create("deleting",function(){var e=this.widget.element;
this.refactoredUnits=[],this.updateBody=!1,this.$elementToRemove=this.getElementToRemove(),this.hideWidget(),this.showMessage(e),e.data("deleting",!0),this.item=e.getRelatedItem(),this.$item=this.item.data("widget").$container.find(".qti-itemBody"),this.updateBody&&this.$item.trigger("resize.qti-widget")},function(){this.showWidget(),this.widget.element.data("deleting",!1),$("body").off(".deleting"),this.updateBody&&this.$item.trigger("resize.qti-widget")});o.prototype.getElementToRemove=function(){var e=this.widget.$container;if(e.hasClass("qti-choice")){if("TH"!==e.prop("tagName"))return e;if("THEAD"===e.parent().parent().prop("tagName")){var t=e.closest("table.matrix").children("tbody"),i=t.children("tr").find("td:last");
return e.add(i)}if("TBODY"===e.parent().parent().prop("tagName"))return e.parent()}if(e.hasClass("widget-inline"))return e.add(this.widget.$original);var n=e.parent(),a=n.parent(".grid-row");return a.length?(this.updateBody=!0,1===a.children().length?a:n):e.hasClass("grid-row")?(this.updateBody=!0,e):void 0},o.prototype.hideWidget=function(){var e=this.$elementToRemove;e.length&&(e.hide(),s(e)&&(this.refactoredUnits=l(e)))};var s=function(e){var t=e.attr("class");return t&&/col-([\d]+)/.test(t)},l=function(e){var t=e.data("units"),a=e.siblings(),o=[];return a.each(function(){var e=$(this),i=e.data("units");o.push({elt:e,units:i}),t+=i}),o=i.redistribute(o),r.each(o,function(e){e.elt.removeClass("col-"+e.units).addClass("col-"+e.refactoredUnits),n.setUnitsFromClass(e.elt)
}),e.data("redistributedUnits",o),o};return o.prototype.showWidget=function(){var e=this.$elementToRemove;e.length&&$.contains(document,e[0])&&(e.show(),s(e)&&r.each(this.refactoredUnits,function(e){e.elt.removeClass("col-"+e.refactoredUnits).addClass("col-"+e.units),n.setUnitsFromClass(e.elt)}))},o.prototype.showMessage=function(){var e=this,i=this.widget,n=t.createInfoBox([i]);n.on("confirm.deleting",function(){e.deleteElement()}).on("undo.deleting",function(){try{i.changeState("question")}catch(e){i.changeState("active")}}),this.messageBox=n},o.prototype.deleteElement=function(){this.refactoredUnits=[],this.$elementToRemove.remove(),this.widget.destroy(),this.widget.element.remove(),this.updateBody&&this.item.body(a.getContent(this.$item))
},o}),define("taoQtiItem/qtiCreator/widgets/static/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep","taoQtiItem/qtiCreator/widgets/static/states/Active","taoQtiItem/qtiCreator/widgets/states/Inactive","taoQtiItem/qtiCreator/widgets/states/Deleting"],function(e){return e.createBundle(arguments)}),define("taoQtiItem/qtiCreator/widgets/static/img/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep"],function(e,t){var i=e.extend(t,function(){},function(){});return i}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/img",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <label for="src">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n    <input type="text" name="src" value="',(o=i.src)?r=o.call(t,{hash:{},data:a}):(o=t&&t.src,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n    <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n</div>\n\n<div class="panel">\n    <label for="alt">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Label",s):c.call(t,"__","Label",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The text to be displayed if the image is not available.",s):c.call(t,"__","The text to be displayed if the image is not available.",s)))+'</div>\n    <input type="text" name="alt" value="',(o=i.alt)?r=o.call(t,{hash:{},data:a}):(o=t&&t.alt,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty" placeholder="e.g. House with a garden"/>\n</div>\n\n\n<div data-role="advanced" style="display:none">\n    \n    <hr/>\n    \n<!--    <div class="panel">\n        <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Size and position",s):c.call(t,"__","Size and position",s)))+'</h3>\n\n        <p class="img-resizer-slider"></p>\n\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <span id="item-editor-font-size-manual-input" class="item-editor-unit-input-box">\n            <input type="text" name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n            <span class="unit-indicator">px</span>\n        </span>\n    </div>\n    <div class="panel">\n\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <span id="item-editor-font-size-manual-input" class="item-editor-unit-input-box">\n            <input type="text" name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n            <span class="unit-indicator">px</span>\n        </span>\n    </div>\n    <div class="panel">\n\n        <label for="align">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Alignment",s):c.call(t,"__","Alignment",s)))+'</label>\n        <select name="align" class="select2" data-has-search="false">\n            <option value="default">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"default",s):c.call(t,"__","default",s)))+'</option>\n            <option value="left">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"left",s):c.call(t,"__","left",s)))+'</option>\n            <option value="right">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"right",s):c.call(t,"__","right",s)))+"</option>\n        </select>\n    </div>-->\n    \n    <h3>"+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Size and position",s):c.call(t,"__","Size and position",s)))+'</h3>\n    <div class="panel img-resizer"></div>\n    \n</div>'
})}),define("ui/incrementer",["jquery","lodash","core/pluginifier"],function(e,t,i){var n="incrementer",a="ui."+n,r={disableClass:"disabled",step:1,min:null,max:null,incrementerClass:"incrementer",incrementerCtrlClass:"incrementer-ctrl",incrementerWrapperClass:"incrementer-ctrl-wrapper",decimal:0},o={init:function(i){var s=o;return i=t.defaults(i||{},r),this.each(function(){var r,o,l=e(this),c=e("<span>",{"class":i.incrementerWrapperClass});l.data(a)||(l.is('input[type="text"]')?(o=parseFloat(l.val()).toFixed(i.decimal),l.wrap(c),l.data(a,i).addClass(i.incrementerClass).after('<span class="ctrl '+i.incrementerCtrlClass+'"><a href="#" class="inc" title="+'+i.step+'" tabindex="-1"></a><a href="#" class="dec" title="-'+i.step+'" tabindex="-1"></a></span>').on("keydown",function(e){38===e.which?(s._inc(l),this.select()):40===e.which&&(s._dec(l),this.select())
}).on("keyup",function(){var e=parseFloat(l.val().replace(/[\D]/g,"")),i=l.data(a);isNaN(e)?l.val(""):(null===i.min||t.isNumber(i.min)&&e>=i.min?l.val(e):(l.val(i.min),e=i.min),l.val(null===i.max||t.isNumber(i.max)&&e<=i.max?e:i.max))}).on("focus",function(){this.select()}).on("disable.incrementer",function(){r.find(".inc,.dec").prop("disabled",!0).addClass("disabled")}).on("enable.incrementer",function(){r.find(".inc,.dec").prop("disabled",!1).removeClass("disabled")}),(t.isNaN(o)||null!==i.min&&o<i.min||null!==i.max&&o>i.max)&&l.val(i.min||0),r=l.next("."+i.incrementerCtrlClass),r.find(".inc").click(function(t){t.preventDefault(),e(this).prop("disabled")||s._inc(l)
}),r.find(".dec").click(function(t){t.preventDefault(),e(this).prop("disabled")||s._dec(l)}),l.trigger("create."+n)):e.error("The incrementer plugin applies only on input element of the type text"))})},_toFixedDown:function(e,t){var i=Math.pow(10,t||0);return Math.floor(e*i)/i},_decimalPlaces:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_inc:function(e){var i,r,s=e.data(a),l=parseFloat(e.val()||0),c=o._decimalPlaces(s.step);i=o._decimalPlaces(l)>c?o._toFixedDown(l,c):parseFloat(l.toFixed(s.decimal)),r=i+s.step,(null===s.max||t.isNumber(s.max)&&r<=s.max)&&(e.val(r),e.trigger("increment."+n,[r]).trigger("change"))
},_dec:function(e){var i,r,s=e.data(a),l=parseFloat(e.val()||0),c=o._decimalPlaces(s.step);o._decimalPlaces(l)>c?r=Math.floor(l*Math.pow(10,c))/Math.pow(10,c):(i=parseFloat(l.toFixed(s.decimal)),r=i-s.step),(null===s.min||t.isNumber(s.min)&&r>=s.min)&&(e.val(r),e.trigger("decrement."+n,[r]).trigger("change"))},destroy:function(){this.each(function(){var t=e(this),i=t.data(a);t.off("keyup keydown").siblings("."+i.incrementerCtrlClass).remove(),t.trigger("destroy."+n)})}};return i.register(n,o),function(i){i.find("[data-increment]").each(function(){var i,n,a=e(this),r=o._decimalPlaces(a.attr("data-increment")),s=parseFloat(a.attr("data-increment")),l={};t.isNaN(s)||(l.step=s),t.isNaN(r)||(l.decimal=r),a.attr("data-min")&&(i=parseFloat(a.attr("data-min")),t.isNaN(i)||(l.min=i)),a.attr("data-max")&&(n=parseFloat(a.attr("data-max")),t.isNaN(n)||(l.max=n)),a.incrementer(l)
})}}),define("ui/selecter",["jquery","select2"],function(e){return function(t){e("select.select2",t).each(function(){var t=e(this),i=!(!1===t.data("has-search")),n=!(!t.attr("placeholder")&&!t.data("placeholder")),a=t.data("width")||"resolve",r=function(e){for(var t=e.length,i=!1;t--;)if("string"==typeof e[t].getAttribute("selected")){i=!0;break}return i}(this.options),o={width:a};n&&this.options[0]&&this.options[0].text&&(t.prepend("<option>"),r||(this.selectedIndex=this.options[0])),i||(o.minimumResultsForSearch=-1),t.select2(o)})}}),define("ui/inplacer",["jquery","lodash","core/pluginifier","core/dataattrhandler"],function(e,t,i,n){function a(t){var i="";return t.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&""!==e.trim(this.nodeValue)&&(i+=e.trim(this.nodeValue))
}),i}function r(e,t){var i=!1;e.contents().filter(function(){return this.nodeType===Node.TEXT_NODE&&i===!1?(i=!0,void(this.nodeValue=t)):void 0}),i===!1&&e.prepend(t)}function o(e){e.contents().filter(function(){this.nodeType===Node.TEXT_NODE&&(this.nodeValue="")})}var s="inplacer",l="ui."+s,c={disableClass:"disabled",bindEvent:"click",inplaceClass:"inplace",mapping:{textarea:["p","div"]}},d={init:function(t){return t=e.extend(!0,{},c,t),this.each(function(){var i=e(this);if(!i.data(l)){var n=t.target;/^#/.test(n.selector)||e.error("The target selector must referr to the of an element id or to the element to create."),0===n.length?(i.after("<input id='"+n.selector.replace("#","")+"' type='hidden' />"),t.target=e(n.selector)):"INPUT"!==n.prop("tagName")&&e.error("The target must be an input element."),i.data(l,t),i.addClass(t.inplaceClass),d._sync(i,n),t.bindEvent!==!1&&i.on(t.bindEvent,function(e){0===i.children(":text").length&&(e.preventDefault(),d._edit(i))
}),i.trigger("create."+s)}})},_toggle:function(e){e.children(":text").length>0?this._leave(e):this._edit(e)},_edit:function(i){var n,r=this,c=i.data(l),d=c.target,u=a(i),h=c.width||i.width()+"px";if(o(i),t.contains(c.mapping.textarea,i.prop("tagName").toLowerCase())){var p=c.height||i.height()+"px";n=i.append("<textarea>"+u+"</textarea>").children(":input").width(h).height(p)}else n=i.prepend(e("<input>",{type:"text"})).children(":input").width(h).focus().val(u);n.off("click").change(function(e){e.stopPropagation()}).keyup(function(e){13===e.which&&r._leave(i)}).blur(function(){r._leave(i)}).focus(),r._sync(i,d),i.trigger("edit."+s,[d.val()])},_leave:function(e){var t=e.data(l),i=t.target,n=e.children(":input"),a=n.val();
n.remove(),r(e,a),this._sync(e,i),e.trigger("leave."+s,[i.val()]),e.trigger("change")},_sync:function(e,t){t.val(e.children(":text").length>0?e.children(":text").val():a(e))},destroy:function(){this.each(function(){var t=e(this),i=t.data(l);i.removeClass(i.inplaceClass),i.bindEvent!==!1&&t.off(i.bindEvent),t.trigger("destroy."+s)})}};return i.register(s,d,{expose:["toggle","leave","edit"]}),function(e){new n("in-place",{container:e,listenerEvent:"click",namespace:l}).init(function(e,t){var i={target:t,bindEvent:!1};e.data("width")&&(i.width=e.data("width")),e.inplacer(i)}).trigger(function(e){e.inplacer("toggle")})}}),define("core/validator/Report",[],function(){var e=function(e,t){this.type=e,this.data=t
};return e.prototype.isError=function(){return"failure"===this.type||"error"===this.type},e}),define("core/validator/validators",["lodash","i18n","jquery"],function(e,t,i){var n=function(e,t,i){var n=new RegExp(i.pattern,i.modifier||""),a=e.match(n),r=null!==a;return"function"==typeof t&&t.call(null,r),r},a={numeric:{name:"numeric",message:t("must be numeric"),options:{},validate:function(t,i){var n=parseFloat(t),a=n==t&&e.isNumber(n)&&!e.isNaN(n);"function"==typeof i&&i.call(null,a)}},notEmpty:{name:"notEmpty",message:t("this is required"),options:{},validate:function(t,i){var n;n=e.isNumber(t)?!0:!e.isEmpty(t),"function"==typeof i&&i.call(null,n)}},pattern:{name:"pattern",message:t("does not match"),options:{pattern:"",modifier:"igm"},validate:n},length:{name:"length",message:t("required length"),options:{min:0,max:0},validate:function(e,t,i){var n=!1;
e.length>=i.min&&(n=i.max?e.length<=i.max:!0),"function"==typeof t&&t.call(null,n)}},fileExists:{name:"fileExists",message:t("no file not found in this location"),options:{baseUrl:""},validate:function(e,t,n){var a=0===e.indexOf("http")?e:n.baseUrl+e;a?i.ajax({type:"HEAD",url:a,success:function(){t(!0)},error:function(){t(!1)}}):t(!1)}},validRegex:{name:"validRegex",message:t("invalid regular expression"),options:{},validate:function(e,t){if("function"==typeof t){var i=!1;if(""!=e)try{new RegExp("^"+e+"$"),i=!0}catch(n){i=!1}else i=!0;t(i)}}}},r=function(t,i){if(t="object"==typeof t&&t.name?t.name:t,i="object"==typeof t?t:i,!e.isString(t)||e.isEmpty(t))throw new Error("Please name your validator");
if(!e.isObject(i)||!e.isString(i.message)||!e.isFunction(i.validate))throw new Error("A validator must be an object with a message and a validate method, but given : "+JSON.stringify(i));a[t]||(a[t]=i)};return{validators:a,register:r}}),define("core/validator/Validator",["lodash","async","core/validator/Report","core/validator/validators"],function(e,t,i,n){var a=function(t){var i=null,a=n.validators;return e.isString(t)&&a[t]?i=a[t]:e.isObject(t)&&t.name&&(a[t.name]?i=e.merge(e.cloneDeep(a[t.name]),t):t.message&&e.isFunction(t.validate)&&(i=t)),i},r={lazy:!1},o=function(t,i,n,a){a=e.merge(e.cloneDeep(i.options),a),i.validate(t,n,a)},s=function(t,i){this.options=e.merge(e.cloneDeep(r),i),this.rules=[],this.addRules(t)
};return s.getDefaultOptions=function(){return e.clone(r)},s.prototype.validate=function(n,a,r){var s,l=[],c=e.cloneDeep(this.options);return e.isFunction(a)?s=a:e.isObject(a)&&(e.merge(c,a),e.isFunction(r)&&(s=r)),e.each(this.rules,function(e){var t={};l.push(function(a){o(n,e,function(t){if(t)a(null,new i("success",{validator:e.name}));else{var n=new i("failure",{validator:e.name,message:e.message});c.lazy?a(new Error("lazy mode"),n):a(null,n)}},t)})}),t.series(l,function(t,i){e.isFunction(s)&&s(i)}),this},s.prototype.addRule=function(t){var i=n.validators;return e.isString(t)&&i[t]?this.rules.push(i[t]):(t=a(t))&&this.rules.push(t),this},s.prototype.addRules=function(t){var i=this;
return e.each(t,function(e){i.addRule(e)}),this},s}),define("ui/validator",["jquery","lodash","core/validator/Report","core/validator/Validator"],function(e,t,i,n){function a(e){return"object"==typeof e.data("validator-config")}e.fn.validator=function(t){var i,n={},o="",s=[];return"object"==typeof t?n=e.extend({},e.fn.validator.defaults,t):void 0===t?n=e.extend({},e.fn.validator.defaults):"string"==typeof t&&"function"==typeof r[t]&&(o=t,s=Array.prototype.slice.call(arguments,1)),this.each(function(){var t=e(this);a(t)||c(t,n),o&&(a(t)?i=r[o].apply(e(this),s):e.error("call of method of validator when it is not initialized"))}),void 0===i?this:i},e.fn.validator.defaults={allowEmpty:!1,validator:{lazy:!1}};
var r={destroy:function(){d(e(this))},validate:function(i,n){var a,r={};t.isFunction(i)?a=i:t.isObject(i)&&(t.merge(r,i),t.isFunction(n)&&(a=n)),p(e(this),a,r)},getValidator:function(){return e(this).data("validator-instance")}},o=function(e){var t=e.data("validate"),i=t?s(t):{};return i},s=function(e){var i=[],n=e.split(/;\s+/);return t.each(n,function(e){var t,n={},a=e.replace(/\s*\$(\w*)/,function(e,i){return t=i,""});t&&(a.replace(/\s*\(([^\)]*)\)/,function(e,t){t.replace(/(\w*)=([^\s]*)(,)?/g,function(e,t,i){","===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),n[t]=i})}),i.push({name:t,options:n}))}),i},l=function(i){var a=i.data("validate-option"),r=a?s(a):{},o=t.keys(n.getDefaultOptions()),l=t.clone(e.fn.validator.defaults);
return t.each(r,function(e){t.indexOf(o,e.name)>=0?l.validator[e.name]=e.options:l[e.name]=e.options}),l},c=function(e,i){var n=o(e);i.rules&&(n=t.merge(n,i.rules),delete i.rules),i=t.merge(i,l(e)||{}),e.data("validator-config",t.clone(i)),u(e,n,i)},d=function(e){e.removeData("validator-instance validator-config"),e.off(".validator")},u=function(e,t,i){e.data("validator-instance",new n(t,i.validator||{})),i.event&&h(e,i)},h=function(i,n){var a=t.isArray(n.event)?n.event:[n.event];a.length>0&&t.isFunction(n.validated)&&t.forEach(a,function(a){switch(t.isString(a)&&(a={type:a}),a.type){case"keyup":case"keydown":i.on(a.type,function(){var e=i.val();a.length?e&&e.length>a.length&&p(i,n.validated,{}):p(i,n.validated,{})
});break;case"change":case"blur":i.on(a.type,function(){p(i,n.validated,{})});break;default:e.error("unknown event type to be bound to validation : "+a.type)}})},p=function(e,n,a){var r=e.val(),o=e.data("validator-config"),s=function(i){var a;e.trigger("validated",{elt:e[0],results:i}),t.isFunction(n)&&(a=0===t.where(i,{type:"failure"}).length,n.call(e[0],a,i))};o.allowEmpty&&""===r?s([new i("success",{validator:"allowEmpty"})]):e.data("validator-instance").validate(r,a||{},s)}}),define("ui/groupvalidator",["jquery","lodash","ui/validator"],function(e,t){e.fn.groupValidator=function(i){return i=t.defaults(i||{},e.fn.groupValidator.defaults),this.each(function(){var n=e(this),a=[],r=function(r,o){var s=e(this);
a[s.attr("name")]=r,i.callback.call(this,r,o,i),s.trigger("validated.single",[r]),n.trigger("validated.group",[t(a).values().contains(!1)===!1,this])},o=e("[data-validate]",n).validator({event:i.events,validated:r});i.validateOnInit&&o.validator("validate",{},r)})},e.fn.groupValidator.defaults={validateOnInit:!1,errorClass:"error",errorMessageClass:"validate-error",events:["change","blur"],callback:function(i,n,a){var r,o=e(this);o.siblings("."+a.errorMessageClass).remove(),i===!1?(r=t.where(n,{type:"failure"})[0],o.addClass(a.errorClass),r&&r.data.message&&o.after("<span class='"+a.errorMessageClass+"'>"+r.data.message+"</span>")):o.removeClass(a.errorClass)
}}}),define("taoQtiItem/qtiCreator/widgets/helpers/validators",["core/validator/validators","lodash","i18n","taoQtiItem/qtiItem/core/Element"],function(e,t,i,n){var a=/^[_a-zA-Z]{1}[a-zA-Z0-9\-._]{0,31}$/i,r=[{name:"qtiIdentifier",message:i("invalid identifier"),validate:function(e,t){"function"==typeof t&&t(a.test(e))}},{name:"availableIdentifier",message:i("this identifier is already in use"),validate:function(e,t,i){if(!i.serial)throw'missing required option "serial"';var a=n.getElementBySerial(i.serial);if(a&&"function"==typeof t){var r=a.getRelatedItem().getUsedIdentifiers(),o=!r[e]||r[e].serial===a.serial;t(o)}}}];return t.each(r,function(t){e.register(t.name,t)
}),e}),function(e){function t(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):void 0}function i(e,t){var i,n;for(i=0,n=e.length;n>i;i++)if(e[i]===t)return!0;return!1}function n(e,t){var i;e.createTextRange?(i=e.createTextRange(),i.move("character",t),i.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function a(e,t){try{return e.type=t,!0}catch(i){return!1}}e.Placeholders={Utils:{addEventListener:t,inArray:i,moveCaret:n,changeType:a}}}(this),function(e){function t(){}function i(){try{return document.activeElement}catch(e){}}function n(e,t){var i,n,a=!!t&&e.value!==t,r=e.value===e.getAttribute(K);
return(a||r)&&"true"===e.getAttribute(A)?(e.removeAttribute(A),e.value=e.value.replace(e.getAttribute(K),""),e.className=e.className.replace(S,""),n=e.getAttribute($),parseInt(n,10)>=0&&(e.setAttribute("maxLength",n),e.removeAttribute($)),i=e.getAttribute(N),i&&(e.type=i),!0):!1}function a(e){var t,i,n=e.getAttribute(K);return""===e.value&&n?(e.setAttribute(A,"true"),e.value=n,e.className+=" "+q,i=e.getAttribute($),i||(e.setAttribute($,e.maxLength),e.removeAttribute("maxLength")),t=e.getAttribute(N),t?e.type="text":"password"===e.type&&j.changeType(e,"text")&&e.setAttribute(N,"password"),!0):!1}function r(e,t){var i,n,a,r,o,s,l;if(e&&e.getAttribute(K))t(e);else for(a=e?e.getElementsByTagName("input"):m,r=e?e.getElementsByTagName("textarea"):g,i=a?a.length:0,n=r?r.length:0,l=0,s=i+n;s>l;l++)o=i>l?a[l]:r[l-i],t(o)
}function o(e){r(e,n)}function s(e){r(e,a)}function l(e){return function(){v&&e.value===e.getAttribute(K)&&"true"===e.getAttribute(A)?j.moveCaret(e,0):n(e)}}function c(e){return function(){a(e)}}function d(e){return function(t){return y=e.value,"true"===e.getAttribute(A)&&y===e.getAttribute(K)&&j.inArray(D,t.keyCode)?(t.preventDefault&&t.preventDefault(),!1):void 0}}function u(e){return function(){n(e,y),""===e.value&&(e.blur(),j.moveCaret(e,0))}}function h(e){return function(){e===i()&&e.value===e.getAttribute(K)&&"true"===e.getAttribute(A)&&j.moveCaret(e,0)}}function p(e){return function(){o(e)}}function f(e){e.form&&(x=e.form,"string"==typeof x&&(x=document.getElementById(x)),x.getAttribute(M)||(j.addEventListener(x,"submit",p(x)),x.setAttribute(M,"true"))),j.addEventListener(e,"focus",l(e)),j.addEventListener(e,"blur",c(e)),v&&(j.addEventListener(e,"keydown",d(e)),j.addEventListener(e,"keyup",u(e)),j.addEventListener(e,"click",h(e))),e.setAttribute(P,"true"),e.setAttribute(K,E),(v||e!==i())&&a(e)
}var m,g,v,b,y,C,I,E,w,x,T,_,k,R=["text","search","url","tel","email","password","number","textarea"],D=[27,33,34,35,36,37,38,39,40,8,46],O="#ccc",q="placeholdersjs",S=new RegExp("(?:^|\\s)"+q+"(?!\\S)"),K="data-placeholder-value",A="data-placeholder-active",N="data-placeholder-type",M="data-placeholder-submit",P="data-placeholder-bound",Q="data-placeholder-focus",L="data-placeholder-live",$="data-placeholder-maxlength",F=document.createElement("input"),B=document.getElementsByTagName("head")[0],z=document.documentElement,H=e.Placeholders,j=H.Utils;if(H.nativeSupport=void 0!==F.placeholder,!H.nativeSupport){for(m=document.getElementsByTagName("input"),g=document.getElementsByTagName("textarea"),v="false"===z.getAttribute(Q),b="false"!==z.getAttribute(L),C=document.createElement("style"),C.type="text/css",I=document.createTextNode("."+q+" { color:"+O+"; }"),C.styleSheet?C.styleSheet.cssText=I.nodeValue:C.appendChild(I),B.insertBefore(C,B.firstChild),k=0,_=m.length+g.length;_>k;k++)T=k<m.length?m[k]:g[k-m.length],E=T.attributes.placeholder,E&&(E=E.nodeValue,E&&j.inArray(R,T.type)&&f(T));
w=setInterval(function(){for(k=0,_=m.length+g.length;_>k;k++)T=k<m.length?m[k]:g[k-m.length],E=T.attributes.placeholder,E?(E=E.nodeValue,E&&j.inArray(R,T.type)&&(T.getAttribute(P)||f(T),(E!==T.getAttribute(K)||"password"===T.type&&!T.getAttribute(N))&&("password"===T.type&&!T.getAttribute(N)&&j.changeType(T,"text")&&T.setAttribute(N,"password"),T.value===T.getAttribute(K)&&(T.value=E),T.setAttribute(K,E)))):T.getAttribute(A)&&(n(T),T.removeAttribute(K));b||clearInterval(w)},100)}j.addEventListener(e,"beforeunload",function(){H.disable()}),H.disable=H.nativeSupport?t:o,H.enable=H.nativeSupport?t:s}(this),define("polyfill/placeholders",function(){}),define("taoQtiItem/qtiCreator/widgets/helpers/formElement",["jquery","lodash","i18n","taoQtiItem/qtiItem/core/Element","util/dom","ui/incrementer","ui/tooltipster","ui/selecter","ui/inplacer","ui/groupvalidator","taoQtiItem/qtiCreator/widgets/helpers/validators","polyfill/placeholders"],function(e,t,i,n,a,r,o,s){var l={initWidget:function(e){r(e),o(e),s(e)
},setChangeCallbacks:function(i,n,a,r){a=a||{},r=t.defaults(r||{},{validateOnInit:!1});var o=function(e,i,r){var o=a[e];t.isFunction(o)&&o.call(r[0],n,i,e)},s={simple:function(){var t=e(this),i=t.attr("name");t.is(":checkbox")?o(i,t.prop("checked"),t):o(i,t.val(),t)},withValidation:function(t,i,a){if("group"===t.namespace){var s=e(a),l=s.attr("name"),c=n.data("widget");return void(r.invalidate?(o(l,s.val(),s),c.isValid(l,i)):i&&o(l,s.val(),s))}}};i.off(".databinding"),i.on("change.databinding keyup.databinding",":checkbox, :radio, select, :text:not([data-validate])",s.simple),i.on("keyup.databinding input.databinding propertychange.databinding","textarea",s.simple),i.on("validated.group.databinding",s.withValidation),t.defer(function(){i.groupValidator({validateOnInit:r.validateOnInit,events:["change","blur",{type:"keyup",length:0}],callback:d})
})},initTitle:function(t,n){var a=t.hasClass("qti-title")?t:t.find(".qti-title");a.inplacer({target:e("#qti-title")}).attr("title",i("Edit modal feedback title")).on("change",function(){n.attr("title",e(this).text())})},getAttributeChangeCallback:function(e){return function(t,i,n){e||""!==i?t.attr(n,i):t.removeAttr(n)}},getMinMaxAttributeCallbacks:function(e,t,i,n){var a=e.find("input[name="+i+"]"),r={};return r[t]=function(e,t,i){var n={min:0};if(t=parseInt(t),0===t||isNaN(t))e.removeAttr(i);else{e.attr(i,t),n.min=t;var r=parseInt(a.val());t>r&&a.val(t)}a.incrementer("options",n).keyup()},r[i]=function(e,t,i){t=parseInt(t)||0,e.is("interaction")&&c(e,t,n),t||!e.is("orderInteraction")&&!e.is("graphicOrderInteraction")?e.attr(i,t):e.removeAttr(i)
},r}},c=function(e,i,a){if(!n.isA(e,"interaction"))throw new Error("the first argument must be an interaction, the current element is "+e.qtiClass);a=void 0===a?!0:!!a;var r=e.getResponseDeclaration();if(a&&r.attr("cardinality",1===i?"single":"multiple"),i){var o=[];t.each(r.getCorrect(),function(e){return o.length<i?void o.push(e):!1}),r.setCorrect(o)}},d=function(i,n){var r,o=e(this);a.contains(o)&&(u(o),o.tooltipster("hide"),i||(r=t.where(n,{type:"failure"})[0],r&&r.data.message&&(o.tooltipster("content",r.data.message),e("#mediaManager").children(".opened").length||o.tooltipster("show"))))},u=function(e){e.hasClass("tooltipstered")||e.tooltipster({theme:"tao-error-tooltip",content:"",delay:350,trigger:"custom"})
};return l}),define("taoQtiItem/qtiCreator/widgets/static/helpers/inline",["lodash","taoQtiItem/qtiCreator/helper/dummyElement","core/validator/validators"],function(e,t,i){var n={math:"maths",img:"image",object:"media"};return inlineHelper={checkFileExists:function(e,t,n){var a=e.element;i.validators.fileExists.validate(a.attr(t),function(i){i||(a.attr(t,""),inlineHelper.togglePlaceholder(e))},{baseUrl:n||""})},togglePlaceholder:function(i,a){var r=e.defaults(a||{},{container:i.$original,type:i.element.qtiClass}),o=r.container,s=o.siblings(".dummy-element");if(i.element.isEmpty()){o.hide();var l=n[r.type]||r.type;s.length||(s=t.get(l),o.after(s)),s.show()}else o.show(),s.hide();
i.$container.trigger("contentChange.qti-widget")},positionFloat:function(e,t){var i=e.$container,n=e.element;switch(i.removeClass("rgt lft"),n.removeClass("rgt"),n.removeClass("lft"),t){case"right":i.addClass("rgt"),n.addClass("rgt");break;case"left":i.addClass("lft"),n.addClass("lft")}}}}),define("util/image",[],function(){return{getSize:function(e,t,i){var n,a=document.createElement("img");"function"==typeof t&&(i=t,t=2),a.onload=function(){n&&(clearTimeout(n),i({width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}))},a.onerror=function(){n&&(clearTimeout(n),i(null))},n=setTimeout(function(){i(null)},1e3*t),a.src=e}}}),define("tpl!ui/mediasizer/mediasizer",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=this,u=i.helperMissing,h=this.escapeExpression;return c+='<div class="media-sizer media-sizer-synced">\n\n    <label>\n        <input type="checkbox" ',o=i["if"].call(t,t&&t.responsive,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+=' class="media-mode-switch"/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Responsive mode",l):u.call(t,"__","Responsive mode",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n\n    <div class="tooltip-content">'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The image resizes along with its container, e.g. 50% means half of the container size not half of the picture size.",l):u.call(t,"__","The image resizes along with its container, e.g. 50% means half of the container size not half of the picture size.",l)))+'</div>\n\n\n    <div class="media-sizer-percent">\n        <label for="">'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Size",l):u.call(t,"__","Size",l)))+'</label>\n                <span class="item-editor-unit-input-box">\n                    <input type="text" name="width" value="" data-validate="$numeric"\n                           data-validate-option="$allowEmpty;"/>\n                </span>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n        </div>\n    </div>\n\n    <div class="media-sizer-pixel">\n        <label for="">'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Width",l):u.call(t,"__","Width",l)))+'</label>\n                <span class="item-editor-unit-input-box">\n                    <input type="text" name="width" value="" data-validate="$numeric"\n                           data-validate-option="$allowEmpty;"/>\n                </span>\n\n        <label for="">'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Height",l):u.call(t,"__","Height",l)))+'</label>\n                <span class="item-editor-unit-input-box">\n                    <input type="text" name="height" value="" data-validate="$numeric"\n                           data-validate-option="$allowEmpty;"/>\n                </span>\n\n        <div class="media-sizer-link">\n            <span class="icon-link"></span>\n        </div>\n\n        <div class="media-sizer-slider-box">\n            <div class="media-sizer-slider"></div>\n            <div class="media-sizer-cover"></div>\n        </div>\n    </div>\n</div>'
})}),define("ui/mediasizer",["jquery","core/pluginifier","tpl!ui/mediasizer/mediasizer","nouislider","tooltipster"],function(e,t,i){function n(e,t){void 0===t&&(t=0);var i=Math.pow(10,t);return Math.round(e*i)/i}var a="mediasizer",r="ui."+a,o={disableClass:"disabled",applyToMedium:!0,denyCustomRatio:!0,responsive:!0},s=["img"],l={_getSizeProps:function(e){var t=e.data(r),i=t.target,n=i[0],a=n.naturalWidth||t.naturalWidth||n.width||n.style.width,o=n.naturalHeight||t.naturalHeight||n.height||n.style.height,s=t.parentSelector?i.parents(t.parentSelector).innerWidth():i.parent().parent().innerWidth();return{px:{natural:{width:a,height:o},current:{width:n.width,height:n.height}},"%":{natural:{width:100,height:null},current:{width:100*n.width/s,height:null}},ratio:{natural:a/o,current:n.width/n.height},containerWidth:s,sliders:{"%":{min:0,max:100,start:100*n.width/s},px:{min:0,max:Math.max(s,a),start:n.width}},currentUnit:"%"}
},_initSyncBtn:function(e){var t=e.data(r),i=e.find(".media-sizer"),n=this;e.find(".media-sizer-link").on("click",function(){i.toggleClass("media-sizer-synced"),t.syncDimensions=i.hasClass("media-sizer-synced"),t.syncDimensions&&n._sync(e,t.$fields.px.width,"blur")})},_initBlocks:function(t){var i=t.data(r),n={},o=t.find(".media-mode-switch"),s=this,l=function(){o.is(":checked")?(n.px.hide(),n["%"].show(),i.sizeProps.currentUnit="%",i.$fields&&i.$fields["%"].width.val()>i.sizeProps.sliders["%"].max&&(i.$fields["%"].width.val(i.sizeProps.sliders["%"].max),s._sync(t,i.$fields["%"].width,"blur"))):(n["%"].hide(),n.px.show(),i.sizeProps.currentUnit="px")};return _(["px","%"]).forEach(function(i){n[i]=t.find(".media-sizer-"+("px"===i?"pixel":"percent")),n[i].prop("unit",i),n[i].find("input").data("unit",i).after(e("<span>",{"class":"unit-indicator",text:i}))
}),o.on("click",function(){l(),t.trigger("responsiveswitch."+a,[o.is(":checked")]),t.trigger("sizechange."+a,s._getValues(t))}),l(),n},_initSliders:function(t){var i=t.data(r),a={};return _(i.$blocks).forOwn(function(t,r){a[r]=t.find(".media-sizer-slider"),a[r].prop("unit",r),a[r].noUiSlider({start:i.sizeProps.sliders[r].start,range:{min:0,max:i.sizeProps.sliders[r].max}}).on("slide",function(){var t=e(this),a=t.prop("unit");i.$fields[a].width.val(n(t.val())).trigger("sliderchange")})}),a},_sync:function(e,t,i){i="sliderchange"===i?"sliderEvent":"fieldEvent";var o,s,l,c,d,u,h=e.data(r),p=t.prop("unit"),f=t.prop("dimension"),m=parseFloat(t.val());if(!isNaN(m)){if(h.sizeProps.px.current.width>0&&h.sizeProps.px.current.height>0&&(h.sizeProps.ratio.current=h.sizeProps.px.current.width/h.sizeProps.px.current.height),s=h.denyCustomRatio?h.sizeProps.ratio.natural:h.sizeProps.ratio.current,"height"===f&&"px"===p){if(h.sizeProps.px.current.height=m,!h.syncDimensions)return h.sizeProps["%"].current.height=null,h.applyToMedium&&(u=this._getValues(e),h.target.attr("width",u.width),h.target.attr("height",u.height)),void e.trigger("sizechange."+a,this._getValues(e));
h.sizeProps.px.current.width=m*s,h.sizeProps.ratio.current=h.sizeProps.px.current.width/h.sizeProps.px.current.height,h.$fields.px.width.val(n(h.sizeProps.px.current.width)),m=parseFloat(h.$fields.px.width.val())}"px"===p?(l="%",c=100*m/h.sizeProps.containerWidth):(l="px",c=m*h.sizeProps.containerWidth/100),h.sizeProps[p].current.width=m,h.sizeProps[l].current.width=c,h.syncDimensions&&(o=m/s,d=c/s,h.sizeProps[p].current.height=o,h.$fields[p].height.val(n(o)),h.sizeProps[l].current.height=d,h.$fields[l].height.val(n(d))),"sliderEvent"!==i&&h.$sliders[p].val(m),h.$sliders[l].val(c),h.$fields[l].width.val(n(c)),h.sizeProps["%"].current.height=null,h.applyToMedium&&(u=this._getValues(e),h.target.attr("width",u.width),h.target.attr("height",u.height)),e.trigger("sizechange."+a,this._getValues(e))
}},_initFields:function(t){var i,a=t.data(r),o=["width","height"],s={},l=this;return _(a.$blocks).forOwn(function(r,c){s[c]={},a.$blocks[c].find("input").each(function(){_(o).forEach(function(r){i=a.$blocks[c].find('[name="'+r+'"]'),s[c][r]=i.length?i:e("<input>"),s[c][r].prop({unit:c,dimension:r}),s[c][r].val(n(a.sizeProps[c].current[r])),s[c][r].data({min:0,max:a.sizeProps.sliders[c].max}),s[c][r].on("keydown",function(t){var i=e(this),n=t.keyCode,a=function(){var e=[8,37,39,46];return-1===i.val().indexOf(".")&&(e.push(190),e.push(110)),e}();return _.contains(a,n)||n>=48&&57>=n||n>=96&&105>=n}),s[c][r].on("keyup blur sliderchange",function(i){var n=e(this),a=n.val().replace(/,/g,".");
n.val(a),a>n.data("max")?n.val(n.data("max")):a<n.data("min")&&n.val(n.data("min")),l._sync(t,e(this),i.type)})})})}),s},_getValues:function(e){var t=e.data(r),i={};return _.forOwn(t.sizeProps[t.sizeProps.currentUnit].current,function(e,a){e=_.isNull(e)?"":n(e).toString(),"%"===t.sizeProps.currentUnit&&""!==e&&(e+=t.sizeProps.currentUnit),i[a]=e}),i},init:function(t){t=e.extend(!0,{},o,t);var n=l;return this.each(function(){var o=e(this),l=t.target,c=l[0].nodeName.toLowerCase();if(!_.contains(s,c))throw new Error("MediaSizer::init() Unsupported element type "+c);o.data(r)||(o.html(i({responsive:void 0!==t.responsive?!!t.responsive:!0})),o.data(r,t),t.sizeProps=n._getSizeProps(o),t.originalSizeProps=_.cloneDeep(t.sizeProps),t.syncDimensions=o.find(".media-sizer").hasClass("media-sizer-synced"),t.$blocks=n._initBlocks(o),t.$fields=n._initFields(o),t.$sliders=n._initSliders(o),n._initSyncBtn(o),o.trigger("create."+a))
})},destroy:function(){this.each(function(){{var t=e(this);t.data(r)}t.trigger("destroy."+a)})}};t.register(a,l)}),define("taoQtiItem/qtiCreator/widgets/static/img/states/Active",["jquery","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","tpl!taoQtiItem/qtiCreator/tpl/forms/static/img","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/static/helpers/inline","taoQtiItem/qtiItem/helper/util","lodash","util/image","ui/mediasizer","ui/resourcemgr","nouislider"],function(e,t,i,n,a,r,o,s,l,c){var d=i.extend(n,function(){this.initForm()},function(){this.widget.$form.empty()}),u=function(e){return e.replace(/\.[^.]+$/,"").replace(/^(.*)\//,"").replace(/\W/," ").substr(0,255)
};d.prototype.initForm=function(){var e=this.widget,t=e.$original,i=e.$form,n=e.element,c=e.options.baseUrl,d=!0;i.html(a({baseUrl:c||"",src:n.attr("src"),alt:n.attr("alt"),height:n.attr("height"),width:n.attr("width"),responsive:d})),f(e),p(e),h(e),m(e),r.initWidget(i),r.setChangeCallbacks(i,n,{src:l.throttle(function(i,n){i.attr("src",n),t.attr("src",s.fullpath(n,c)),t.trigger("contentChange.qti-widget").change(),o.togglePlaceholder(e),f(e),p(e)},1e3),alt:function(e,t){e.attr("alt",t)},longdesc:r.getAttributeChangeCallback(),align:function(t,i){o.positionFloat(e,i)}})};var h=function(e){var t="default";e.element.hasClass("rgt")?t="right":e.element.hasClass("lft")&&(t="left"),o.positionFloat(e,t),e.$form.find("select[name=align]").val(t)
},p=function(e){var t=e.element,i=e.$form.find("input[name=src]"),n=e.$form.find(".img-resizer"),a=e.$container;i.val()&&(void 0===t.data("responsive")&&(t.attr("width")&&!/[0-9]+%/.test(t.attr("width"))?t.data("responsive",!1):t.data("responsive",!0)),t.data("responsive")&&(a.css("width",t.attr("width")),a.css("height","")),n.mediasizer({responsive:void 0!==t.data("responsive")?!!t.data("responsive"):!0,target:e.$original,applyToMedium:!1}),n.off(".mediasizer").on("responsiveswitch.mediasizer",function(e,i){t.data("responsive",i)}).on("sizechange.mediasizer",function(i,n){l(["width","height"]).each(function(i){""===n[i]||void 0===n[i]||null===n[i]?(t.removeAttr(i),a.css(i,"")):(t.attr(i,n[i]),a.css(i,n[i])),e.$container.trigger("contentChange.qti-widget")
})}))},f=function(e){var t=e.$form,i=e.element.attr("src");i?t.find("[data-role=advanced]").show():t.find("[data-role=advanced]").hide()},m=function(i){var n=i.$form,a=i.options,r=i.element,o=i.$container,s=n.find('[data-role="upload-trigger"]'),d=n.find("input[name=src]"),h=n.find("input[name=alt]"),p=function(){s.resourcemgr({title:t('Please select an image file from the resource manager. You can add files from your computer with the button "Add file(s)".'),appendContainer:a.mediaManager.appendContainer,root:"/",browseUrl:a.mediaManager.browseUrl,uploadUrl:a.mediaManager.uploadUrl,deleteUrl:a.mediaManager.deleteUrl,downloadUrl:a.mediaManager.downloadUrl,fileExistsUrl:a.mediaManager.fileExistsUrl,params:{uri:a.uri,lang:a.lang,filters:"image/jpeg,image/png,image/gif"},pathParam:"path",select:function(t,i){var n,s;
i&&i.length&&(n=i[0].file,c.getSize(a.baseUrl+n,function(t){if(t&&t.width>=0){var i=parseInt(t.width,10),a=o.parents().innerWidth();i>=.95*a?r.attr("width","100%"):(i=parseInt(100*i/a),r.attr("width",i+"%")),r.removeAttr("height")}""===e.trim(h.val())&&(s=u(n),r.attr("alt",s),h.val(s).trigger("change")),l.defer(function(){d.val(n).trigger("change")})}))},open:function(){d.hasClass("tooltipstered")&&d.blur().tooltipster("hide")},close:function(){d.blur()}})};s.on("click",p),d.val()||p()};return d}),define("taoQtiItem/qtiCreator/widgets/static/img/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/img/states/Sleep","taoQtiItem/qtiCreator/widgets/static/img/states/Active"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/static/helpers/widget",["jquery","lodash"],function(e,t){var i={buildInlineContainer:function(t){var i="";t.element.hasClass("lft")?i=" lft":t.element.hasClass("rgt")&&(i=" rgt");var n=e("<span>",{"data-serial":t.element.serial,"class":"widget-box widget-inline widget-"+t.element.qtiClass+i,"data-qti-class":t.element.qtiClass,contenteditable:"false"});t.$container=t.$original.wrap(n).parent();var a=t.$container[0].nextSibling;a&&(a.nodeValue=" "+a.nodeValue)},buildBlockContainer:function(t){var i=e("<div>",{"data-serial":t.element.serial,"class":"widget-box widget-block widget-"+t.element.qtiClass,"data-qti-class":t.element.qtiClass});
t.$container=t.$original.wrap(i).parent()},createToolbar:function(i,n){if(!t.isFunction(n))throw"the toolbarTpl must be a handlebars function";var a=e(n({serial:i.serial,state:"active"}));i.$container.append(a),a.find('[data-role="delete"]').on("click.widget-box",function(e){e.stopPropagation(),i.changeState("deleting")})}};return i}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/media",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <span class="rgt tlb-button" title="Delete" data-role="delete">\n        <span class="icon-bin"></span>\n    </span>\n</span>\n'
})}),define("taoQtiItem/qtiCreator/widgets/static/img/Widget",["jquery","taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/img/states/states","taoQtiItem/qtiCreator/widgets/static/helpers/widget","tpl!taoQtiItem/qtiCreator/tpl/toolbars/media","taoQtiItem/qtiCreator/widgets/static/helpers/inline","taoQtiItem/qtiItem/helper/util"],function(e,t,i,n,a,r,o){var s=t.clone();return s.initCreator=function(n){var a=this,s=a.element,l=n.baseUrl;this.registerStates(i),t.initCreator.call(this),r.togglePlaceholder(this),r.checkFileExists(this,"src",n.baseUrl),e("#item-editor-scope").on("filedelete.resourcemgr."+this.element.serial,function(e,t){o.fullpath(s.attr("src"),l)===o.fullpath(t,l)&&(s.attr("src",""),r.togglePlaceholder(a))
})},s.destroy=function(){e("#item-editor-scope").off("."+this.element.serial)},s.getRequiredOptions=function(){return["baseUrl","uri","lang","mediaManager"]},s.buildContainer=function(){return n.buildInlineContainer(this),this.$container.css({width:this.element.attr("width"),height:this.element.attr("height")}),this.$original[0].setAttribute("width","100%"),this.$original[0].setAttribute("height","100%"),this},s.createToolbar=function(){return n.createToolbar(this,a),this},s}),define("taoQtiItem/qtiCreator/renderers/Img",["lodash","taoQtiItem/qtiCommonRenderer/renderers/Img","taoQtiItem/qtiCreator/widgets/static/img/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("bodyElementOptionForm"),n)
},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/item",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return" attributes.id"}function o(){return" attributes.class"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c="",d="function",u=this.escapeExpression,h=this;return c+='<div class="qti-item tao-scope runtime" data-serial="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===d?l.call(t,{hash:{},data:a}):l),c+=u(s)+'" data-identifier="'+u((s=t&&t.attributes,s=null==s||s===!1?s:s.identifier,typeof s===d?s.apply(t):s))+'">\n    <div',s=i["if"].call(t,(s=t&&t.attributes,null==s||s===!1?s:s.id),{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a}),(s||0===s)&&(c+=s),c+=' class="qti-itemBody',s=i["if"].call(t,(s=t&&t.attributes,null==s||s===!1?s:s["class"]),{hash:{},inverse:h.noop,fn:h.program(3,o,a),data:a}),(s||0===s)&&(c+=s),c+='">',(l=i.body)?s=l.call(t,{hash:{},data:a}):(l=t&&t.body,s=typeof l===d?l.call(t,{hash:{},data:a}):l),(s||0===s)&&(c+=s),c+='</div>\n    <div id="modalFeedbacks"></div>\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler",["jquery","lodash"],function(e,t){var i=function(){var i=t.throttle(function(){e(document).trigger("customcssloaded.styleeditor")},10,{leading:!1}),n=function(n){var a=e("head");e("body").addClass("tao-scope"),t(n).forEach(function(n){var r=e(n.render()),o=r.attr("href"),s=o.indexOf("?")>-1?"&":"?";0===o.indexOf("/")&&(o=o.slice(1)),o+=s+(new Date).getTime().toString(),r.removeAttr("href").appendTo(a).attr("href",o),t.delay(i,10)})};return{attach:n}}();return i}),define("taoQtiItem/qtiCommonRenderer/renderers/Item",["tpl!taoQtiItem/qtiCommonRenderer/tpl/item","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler"],function(e,t,i){return{qtiClass:"assessmentItem",template:e,getContainer:t.getContainer,render:function(e){t.targetBlank(t.getContainer(e)),i.attach(e.stylesheets)
}}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/item",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=i.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<div class="panel">\n    <label for="">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Identifier",l):d.call(t,"__","Identifier",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.",l):d.call(t,"__","The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.",l)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(s=i.identifier)?o=s.call(t,{hash:{},data:a}):(s=t&&t.identifier,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" \n           placeholder="e.g. my-item_123456" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+');">\n    \n</div>\n\n<div class="panel">\n    <label>\n        <input name="timeDependent" type="checkbox" ',o=i["if"].call(t,t&&t.timeDependent,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Time dependent",l):d.call(t,"__","Time dependent",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Define whether the item should be time dependent on delivery.",l):d.call(t,"__","Define whether the item should be time dependent on delivery.",l)))+"\n    </span>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/item/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Active","tpl!taoQtiItem/qtiCreator/tpl/forms/item","taoQtiItem/qtiCreator/widgets/helpers/formElement"],function(e,t,i,n){var a=e.create(t,function(){this.initForm()},function(){});return a.prototype.initForm=function(){var e=this.widget,t=e.element,a=e.$form;a.html(i({serial:t.getSerial(),identifier:t.id(),timeDependent:!!t.attr("timeDependent")})),n.initWidget(a),n.setChangeCallbacks(a,t,{identifier:n.getAttributeChangeCallback(),timeDependent:n.getAttributeChangeCallback()})},a}),define("taoQtiItem/qtiCreator/widgets/item/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/item/states/Active"],function(e){return e.createBundle(arguments)
}),define("taoQtiItem/qtiCreator/widgets/static/text/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep"],function(e,t){var i=e.extend(t,function(){},function(){});return i}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/text",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l=i.helperMissing,c=this.escapeExpression;return s+='<div class="panel">\n    <em>'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"no configuration property needed",o):l.call(t,"__","no configuration property needed",o)))+"</em>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/static/text/states/Active",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content","tpl!taoQtiItem/qtiCreator/tpl/forms/static/text"],function(e,t,i,n,a,r){var o=t.extend(i,function(){this.buildEditor(),this.initForm()},function(){this.destroyEditor(),this.widget.$form.empty()});return o.prototype.buildEditor=function(){var e=this.widget,t=e.$container,i=e.element;t.attr("data-html-editable-container",!0),n.hasEditor(t)||n.buildEditor(t,{change:a.getChangeCallback(i),blur:function(){e.changeState("sleep")
},data:{widget:e,container:i}})},o.prototype.destroyEditor=function(){n.destroyEditor(this.widget.$container)},o.prototype.initForm=function(){this.widget.$form.html(r())},o}),define("taoQtiItem/qtiCreator/widgets/static/text/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/text/states/Sleep","taoQtiItem/qtiCreator/widgets/static/text/states/Active"],function(e,t){return e.createBundle(t,arguments)}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <div class="rgt tlb-button" title="Delete" data-role="delete">\n        <span class="icon-bin"></span>\n    </div>\n    <div class="rgt tlb-button" data-role="cke-launcher" title="Formatting options">\n        <span class="icon-font"></span>\n    </div>\n</div>\n'})}),define("taoQtiItem/qtiCreator/widgets/static/text/Widget",["taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/text/states/states","tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock"],function(e,t,i){var n=e.clone();
return n.initCreator=function(){e.initCreator.call(this),this.registerStates(t)},n.buildContainer=function(){var e=$("<div>",{"data-serial":this.element.serial,"data-qti-class":"_container","class":"widget-box widget-block widget-textBlock"}).append($("<div>",{"data-html-editable":!0}));this.$original.wrapInner(e),this.$container=this.$original.children(".widget-box")},n.createToolbar=function(){var e=this,t=$(i({serial:this.serial,state:"active"}));return this.$container.append(t),t.find('[data-role="delete"]').on("click.widget-box",function(t){t.stopPropagation(),e.changeState("deleting")}),this},n}),define("taoQtiItem/qtiCreator/widgets/item/Widget",["lodash","i18n","jquery","helpers","taoQtiItem/qtiCreator/widgets/Widget","taoQtiItem/qtiCreator/widgets/item/states/states","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/helper/creatorRenderer","taoQtiItem/qtiCreator/model/helper/container","taoQtiItem/qtiCreator/editor/gridEditor/content","taoQtiItem/qtiCreator/helper/xmlRenderer","taoQtiItem/qtiCreator/helper/devTools","taoQtiItem/qtiCreator/widgets/static/text/Widget","taoQtiItem/qtiCreator/editor/styleEditor/styleEditor","tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup","taoQtiItem/qtiCreator/editor/jquery.gridEditor"],function(e,t,i,n,a,r,o,s,l,c,d,u,h,p,f){var m=a.clone();
m.initCreator=function(e){if(this.registerStates(r),a.initCreator.call(this),!e||!e.uri)throw new Error("missing required config parameter uri in item widget initialization");this.renderer=e.renderer,this.itemUri=e.uri,this.initUiComponents(),this.initTextWidgets(function(){this.initGridEditor(),this.debug({state:!1,xml:!1})})},m.buildContainer=function(){this.$container=this.$original},m.save=function(){return i.ajax({url:n._url("saveItem","QtiCreator","taoQtiItem")+"?uri="+encodeURIComponent(this.itemUri),type:"POST",contentType:"text/xml",dataType:"json",data:d.render(this.element)})},m.initUiComponents=function(){var n=this,a=n.element,r=i("#save-trigger");
r.on("click",function(e){var a=i(this);return a.hasClass("disabled")?void e.preventDefault():(a.addClass("active"),void i.when(p.save(),n.save()).done(function(){var e={message:t("Your item has been saved"),type:"success"},i=arguments.length;for(a.removeClass("active");i--;)if("success"!==arguments[i][1].toLowerCase()){e={message:t("Failed to save item"),type:"error"};break}v(e)}))}),n.on("metaChange",function(t){if(t.element.getSerial()===a.getSerial()&&"invalid"===t.key){var i=a.data("invalid");e.size(i)?r.addClass("disabled"):r.removeClass("disabled")}},!0)},m.initGridEditor=function(){var e=this,t=this.element,n=this.$container.find(".qti-itemBody"),a=i("#item-editor-panel");
n.gridEditor(),n.gridEditor("resizable"),n.gridEditor("addInsertables",i(".tool-list > [data-qti-class]:not(.disabled)"),{helper:function(){return i(this).find(".icon").clone().addClass("dragging")}}),n.on("beforedragoverstart.gridEdit",function(){a.addClass("dragging"),n.removeClass("hoverable").addClass("inserting")}).on("dragoverstop.gridEdit",function(){a.removeClass("dragging"),n.addClass("hoverable").removeClass("inserting")}).on("dropped.gridEdit.insertable",function(t,i,n){n.removeAttr("id"),"rubricBlock"===i&&(n=n.parent(".col-12").parent(".grid-row")),n.addClass("widget-box"),n.attr({"data-new":!0,"data-qti-class":i});var a=n.parent().closest(".widget-box, .qti-item"),r=n.closest("[data-html-editable], .qti-itemBody"),d=a.data("widget"),u=d.element,h=o.isA(u,"_container")?u:u.getBody();
if(!u||!r.length)throw new Error("cannot create new element");l.createElements(h,c.getContent(r),function(t){s.get().load(function(){for(var i in t){var a,r,s=t[i],l=n.parent();s.setRenderer(this),o.isA(s,"_container")?(l.empty(),l.html(s.render()),r=e.initTextWidget(s,l),a=r.$container):(s.render(n),r=s.postRender(),a=o.isA(s,"blockInteraction")?r.$container:r.$original),a.trigger("contentChange.gridEdit"),a.trigger("resize.gridEdit"),r.changeState(o.isA(s,"interaction")?"question":"active")}},this.getUsedClasses())})}).on("resizestop.gridEdit",function(){t.body(n.gridEditor("getContent"))})},m.initTextWidgets=function(t){var n=this,a=this.element,r=this.$container,o=1,s=[];
t=t||e.noop,r.find(".qti-itemBody > .grid-row").each(function(){var e=i(this);e.hasClass("widget-box")||e.children().each(function(){var e=i(this),t=!1;e.contents().each(function(){return 3===this.nodeType&&this.nodeValue&&this.nodeValue.trim()?(t=!0,!1):void 0});var n=e.children();(n.length>1||!n.hasClass("widget-blockInteraction"))&&(t=!0),t&&(e.attr("data-text-block-id","text-block-"+o),o++)})});var d=r.clone();d.find(".qti-itemBody > .grid-row > [data-text-block-id]").each(function(){var e=i(this),t=e.data("text-block-id"),n=e.clone(),a=c.serializeElements(n),o=n.html();e.removeAttr("data-text-block-id").html("{{_container:new}}"),s.push({body:o,elements:a,$original:r.find('[data-text-block-id="'+t+'"]').removeAttr("data-text-block-id")})
}),c.serializeElements(d);var u=d.find(".qti-itemBody").html(),h=a.getBody();s.length?l.createElements(h,u,function(i){if(e.size(i)!==s.length)throw"number of sub-containers mismatch";e.each(i,function(e){var t=s.shift(),i=g(h,t.elements);e.setElements(i,t.body),n.initTextWidget(e,t.$original)}),e.defer(function(){t.call(n)})}):t.call(n)};var g=function(t,i){var n={};return e.each(i,function(e){n[e]=t.elements[e],delete t.elements[e]}),n};m.initTextWidget=function(e,t){return h.build(e,t,this.renderer.getOption("textOptionForm"),{})},m.debug=function(e){if(e=e||{},e.state&&u.listenStateChange(),e.xml){var t=i("<code>",{"class":"language-markup"}),n=i("<pre>",{"class":"line-numbers"}).append(t);
i("#item-editor-wrapper").append(n),u.liveXmlPreview(this.element,t)}};var v=function(e){var t=i(f(e)),n=t.find(".close-trigger");return i("body").append(t),n.on("click",function(){t.fadeOut(function(){i(this).remove()})}),setTimeout(function(){n.trigger("click")},2e3),t};return m}),define("tpl!taoQtiItem/qtiCreator/tpl/item",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="tao-scope qti-item item-editor-item clearfix" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'">\n    <div id="modalFeedbacks"></div>\n    <div class="qti-itemBody item-editor-drop-area hoverable">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</div>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/renderers/Item",["lodash","taoQtiItem/qtiCommonRenderer/renderers/Item","taoQtiItem/qtiCreator/widgets/item/Widget","tpl!taoQtiItem/qtiCreator/tpl/item"],function(e,t,i,n){var a=e.clone(t),r=function(e){return e.children().each(function(){var e=$(this);e.hasClass("grid-row")||e.wrap('<div class="grid-row"><div class="col-12"></div></div>')}),e};return a.template=n,a.render=function(e,n){var a=t.getContainer(e);return r(a.find(".qti-itemBody")),n=n||{},n.state="active",n.renderer=this,i.build(e,a,this.getOption("itemOptionForm"),n)},a}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/math",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";
return r+='\n<span data-serial="',(a=i.serial)?n=a.call(e,{hash:{},data:t}):(a=e&&e.serial,n=typeof a===l?a.call(e,{hash:{},data:t}):a),r+=c(n)+'" data-qti-class="math">\n    <math display = "block">',(a=i.raw)?n=a.call(e,{hash:{},data:t}):(a=e&&e.raw,n=typeof a===l?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="</math>\n</span>\n"}function o(e,t){var n,a,r="";return r+='\n<span data-serial="',(a=i.serial)?n=a.call(e,{hash:{},data:t}):(a=e&&e.serial,n=typeof a===l?a.call(e,{hash:{},data:t}):a),r+=c(n)+'" data-qti-class="math">\n    <math>',(a=i.raw)?n=a.call(e,{hash:{},data:t}):(a=e&&e.raw,n=typeof a===l?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="</math>\n</span>   \n"
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l="function",c=this.escapeExpression,d=this;return s=i["if"].call(t,t&&t.block,{hash:{},inverse:d.program(3,o,a),fn:d.program(1,r,a),data:a}),s||0===s?s:""})}),define("taoQtiItem/qtiCommonRenderer/renderers/Math",["tpl!taoQtiItem/qtiCommonRenderer/tpl/math","taoQtiItem/qtiCommonRenderer/helpers/Helper","mathJax","lodash"],function(e,t,i,n){return{qtiClass:"math",template:e,getContainer:t.getContainer,render:function(e){"undefined"!=typeof i&&i&&n.delay(function(){i.Hub.Queue(["Typeset",i.Hub,t.getContainer(e).parent()[0]])},60)}}}),define("taoQtiItem/qtiCreator/widgets/static/math/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep"],function(e,t){var i=e.extend(t,function(){},function(){});
return i}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/math",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+='\n\n<div class="panel">\n    <label for="display" class="has-icon">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Display",r):c.call(e,"__","Display",r)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"How the math expression should be displayed.",r):c.call(e,"__","How the math expression should be displayed.",r)))+'</div>\n\n    <select name="display" class="select2" data-has-search="false">\n        <option value="inline">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"inline",r):c.call(e,"__","inline",r)))+'</option>\n        <option value="block">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"block",r):c.call(e,"__","block",r)))+'</option>\n    </select>\n</div>\n\n<div class="panel">\n    <label for="editMode" class="has-icon">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Editing Mode",r):c.call(e,"__","Editing Mode",r)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"How the math expression should be edited",r):c.call(e,"__","How the math expression should be edited",r)))+'.</div>\n\n    <select name="editMode" class="select2" data-has-search="false">\n        <option value="latex">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"LaTex",r):c.call(e,"__","LaTex",r)))+'</option>\n        <option value="mathml">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"MathML",r):c.call(e,"__","MathML",r)))+'</option>\n    </select>\n\n</div>\n\n<div class="panel" data-role="latex" style="display:none;">\n    <label for="sidebar-latex-field" class="has-icon">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Latex",r):c.call(e,"__","Latex",r)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Edit math expression using LaTex type setting system, e.g. e^{i \\pi} = -1",r):c.call(e,"__","Edit math expression using LaTex type setting system, e.g. e^{i \\pi} = -1",r)))+'</div>\n\n    <input id="sidebar-latex-field" type="text" name="latex" value="',(a=i.latex)?n=a.call(e,{hash:{},data:t}):(a=e&&e.latex,n=typeof a===u?a.call(e,{hash:{},data:t}):a),o+=d(n)+'" placeholder="e.g. e^{i \\pi} = -1"/>\n    <a href="#latex" class="math-editor-trigger">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Display larger editor",r):c.call(e,"__","Display larger editor",r)))+'</a>\n</div>\n\n<div class="panel sidebar-popup-container-box" data-role="mathml" style="display:none;">\n    <label for="sidebar-mathml-field" class="has-icon">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"MathML",r):c.call(e,"__","MathML",r)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Edit math expression using MathML",r):c.call(e,"__","Edit math expression using MathML",r)))+'</div>\n\n    <textarea id="sidebar-mathml-field" name="mathml">',(a=i.mathml)?n=a.call(e,{hash:{},data:t}):(a=e&&e.mathml,n=typeof a===u?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(o+=n),o+='</textarea>\n\n    <div class="math-buffer" style="visibility:hidden;"></div>\n    <a href="#mathml" class="math-editor-trigger">'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Display larger editor",r):c.call(e,"__","Display larger editor",r)))+'</a>\n</div>\n\n<div class="sidebar-popup-container-box">    \n\n    <div id="math-editor-container" class="sidebar-popup">\n        <h3 id="math-editor-title"></h3>\n        <span class="icon-grip-h dragger"></span>\n        <textarea id="math-editor-textarea" data-target="mathml"></textarea>\n        <input id="math-editor-input" data-target="latex"/>\n        <a class="closer" href="#" title="'+d((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Close",r):c.call(e,"__","Close",r)))+'"></a>\n    </div>\n    <div class="math-buffer" style="visibility:hidden;"></div>\n</div>\n'
}function o(e,t){var n,a,r="";return r+='\n<div class="panel">\n    '+d((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"MathJax is not installed.",a):c.call(e,"__","MathJax is not installed.",a)))+"\n</div>\n"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l="",c=i.helperMissing,d=this.escapeExpression,u="function",h=this;return s=i["if"].call(t,t&&t.mathjax,{hash:{},inverse:h.program(3,o,a),fn:h.program(1,r,a),data:a}),(s||0===s)&&(l+=s),l+="\n"})}),define("taoQtiItem/qtiCreator/widgets/static/math/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","taoQtiItem/qtiCreator/editor/MathEditor","tpl!taoQtiItem/qtiCreator/tpl/forms/static/math","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/static/helpers/inline","lodash","i18n","mathJax"],function(e,t,i,n,a,r,o,s,l){var c=300,d=e.extend(t,function(){this.initForm()
},function(){this.widget.$form.empty()});d.prototype.initForm=function(){var e=this.widget,t=e.$form,i=e.element,r=i.mathML||"",o=i.getAnnotation("latex")||"",s=i.attr("display")||"inline",c="latex";!o.trim()&&r.trim()&&(c="mathml"),t.html(n({mathjax:!!l,editMode:c,latex:o,mathml:r})),l&&(t.find("select[name=display]").val(s),t.find("select[name=editMode]").val(c),t.children('.panel[data-role="'+c+'"]').show(),u(t,c),a.initWidget(t),this.initFormChangeListener())},d.prototype.initFormChangeListener=function(){var e=this.widget,t=e.$container,n=e.$form,s=e.element,l=s.mathML,d=s.getAnnotation("latex"),h=s.attr("display")||"inline",p={mathml:n.find("textarea[name=mathml]"),latex:n.find("input[name=latex]")},f=n.find(".math-editor-trigger"),m=n.find("#math-editor-container"),g={mathml:m.find('textarea[data-target="mathml"]'),latex:m.find('input[data-target="latex"]')},v=m.find("h3"),b=m.find(".closer"),y=m.find(".dragger"),C=n.find("select[name=editMode]");
f.on("click",function(e){e.preventDefault(),m.hide();var t=this.hash.substring(1),i=p[t],n=g[t];v.text(i.parent().find("label").text()),n.val(i.val()),i.prop("disabled",!0),C.prop("disabled",!0),m.data("target",t),m.removeClass("mathml latex").addClass(t),m.removeAttr("style"),m.show(),f.hide()}),o(g).forEach(function(e,t){e.on("keyup",function(){p[t].val(g[t].val()),p[t].trigger("keyup")}),e.attr("placeholder",p[t].attr("placeholder"))}),b.on("click",function(){var e=m.data("target");p[e].val(g[m.data("target")].val()),p[e].prop("disabled",!1),C.prop("disabled",!1),m.hide(),f.show()}),m.draggable({handle:y});var I=new i({tex:d,mathML:l,display:h,buffer:n.find(".math-buffer"),target:e.$original});
a.setChangeCallbacks(n,s,{display:function(t,i){"block"===i?t.attr("display","block"):t.removeAttr("display"),e.rebuild({ready:function(e){e.changeState("active")}})},editMode:function(e,t){u(n,t)},latex:o.throttle(function(i,n){I.setTex(n).renderFromTex(function(){i.setAnnotation("latex",n),p.mathml.html(I.mathML),i.setMathML(I.mathML),r.togglePlaceholder(e),t.change()})},c),mathml:o.throttle(function(i,n){I.setMathML(n).renderFromMathML(function(){i.setMathML(n),p.latex.val(""),i.removeAnnotation("latex"),r.togglePlaceholder(e),t.change()})},c)})};var u=function(e,t){var i={mathml:e.children('.panel[data-role="mathml"]'),latex:e.children('.panel[data-role="latex"]')},n={mathml:e.find("textarea[name=mathml]"),latex:e.find("input[name=latex]")},a=e.find("select[name=editMode]");
i.mathml.hide(),i.latex.hide(),"latex"===t?i.latex.show():"mathml"===t&&(i.mathml.show(),n.latex.val()&&(n.mathml.hasClass("tooltipstered")||h(n.mathml),n.mathml.tooltipster("show"),a.off("change.editMode").one("change.editMode",function(){n.mathml.tooltipster("hide")})))},h=function(e){var t=$("<span>").html(s("Currently conversion from MathML to LaTeX is not available. Editing MathML here will have the LaTex code discarded."));e.tooltipster({theme:"tao-warning-tooltip",content:t,delay:200,trigger:"custom"}),e.on("focus.mathwarning",function(){e.tooltipster("hide")}),setTimeout(function(){e.tooltipster("hide")},3e3)};return d}),define("taoQtiItem/qtiCreator/widgets/static/math/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/math/states/Sleep","taoQtiItem/qtiCreator/widgets/static/math/states/Active"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/static/math/Widget",["taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/math/states/states","taoQtiItem/qtiCreator/widgets/static/helpers/widget","tpl!taoQtiItem/qtiCreator/tpl/toolbars/media","taoQtiItem/qtiCreator/widgets/static/helpers/inline"],function(e,t,i,n,a){var r=e.clone();return r.initCreator=function(){this.registerStates(t),e.initCreator.call(this),a.togglePlaceholder(this)},r.buildContainer=function(){return"block"===this.element.attr("display")?i.buildBlockContainer(this):i.buildInlineContainer(this),this},r.createToolbar=function(){return i.createToolbar(this,n),this},r}),define("taoQtiItem/qtiCreator/renderers/Math",["lodash","taoQtiItem/qtiCommonRenderer/renderers/Math","taoQtiItem/qtiCreator/widgets/static/math/Widget","taoQtiItem/qtiCreator/widgets/static/helpers/inline"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return t.render(e),i.build(e,t.getContainer(e),this.getOption("bodyElementOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div id="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" class="modal qti-modalFeedback">\n    <h1 class="qti-title modal-title">'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.title,typeof r===l?r.apply(t):r))+'</h1>\n    <div class="modal-body">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/helpers/sizeFinder",["jquery"],function(e){var t=function(t){var i;t.each(function(){i=e(this),i.data("originalProperties",{display:i.css("display"),position:i.css("position"),left:i.css("left"),width:i.css("width"),height:i.css("height")}),i.css({position:"relative",left:"-10000px",width:"auto",height:"auto",display:"inline-block"})})},i=function(t){var i;t.each(function(){i=e(this),i.css(t.data("originalProperties")),i.removeData("originalProperties")})},n=function(e){return{width:e.outerWidth(),height:e.outerHeight()}},a=function(e,a){var r;return e&&e.length&&(t(e),r=n(e),i(e),a.call(e[0],r),e.trigger("measured.sizeFinder",r)),r
};return{measure:a}}),define("taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",["jquery","lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/sizeFinder","ui/modal"],function(e,t,i,n,a){var r={qtiClass:"modalFeedback",template:i,getContainer:n.getContainer,minWidth:400,maxWidth:800,render:function(i,n){n=n||{};var o=e("#"+i.getSerial());a.measure(o,function(e){o.modal({startClosed:!1,width:Math.max(Math.min(e.width,r.maxWidth),r.minWidth)}),o.on("closed.modal",function(){t.isFunction(n.callback)&&n.callback.call(this)})})}};return r}),define("taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Sleep"],function(e,t){return e.create(t,function(){},function(){})
}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <label for="" class="has-icon">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Identifier",s):c.call(t,"__","Identifier",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n           placeholder="e.g. modal-feedback_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback","taoQtiItem/qtiCommonRenderer/helpers/sizeFinder","tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback","taoQtiItem/qtiCreator/widgets/helpers/formElement","jquery","ui/modal"],function(e,t,i,n,a,r,o){var s=function(){var e,t={sidebar:"#item-editor-item-widget-bar",cke:".cke",ckeBase:".cke_inner",ckeNose:".cke_nose",ckeToolbar:".cke_toolbar"},i=!1,n={};return{raise:function(i){var a,r;i=parseInt(i,10);for(e in t)a=o(t[e]),r=parseInt(a.css("z-index"),10),isNaN(r)&&(r=100),n[e]={element:a,index:r},a.css("z-index",n[e].index+i)
},reset:function(){if(i)for(e in n)n[e].element.css("z-index",n[e].index)}}}(),l=function(e){var t=new o.Deferred,i=0,n=function(){var a=e.data("editor");i>20||(a?t.resolve():setTimeout(n,200))};return n(),t.promise()},c=e.extend(t,function(){var e=this.widget,t=this.widget.$container,a=t.find("[data-html-editable]");n.measure(t,function(n){t.modal({startClosed:!0,width:Math.max(Math.min(n.width,i.maxWidth),i.minWidth)}),t.modal("open"),t.css("height","auto"),o.when(l(a)).then(function(){s.raise(t.css("z-index"))}),t.on("closed.modal",function(){e.changeState("sleep")})}),this.widget.offEvents("otherActive"),this.initForm(),this.widget.$form.show()},function(){var e=this.widget.$container;
e.off("opened.modal").off(".active"),e.modal("close"),s.reset(),e.find(".tlb-button.active[data-role=cke-launcher]").click(),this.widget.$form.empty().hide()});return c.prototype.initForm=function(){var e=this.widget;e.$form.html(a({serial:e.element.getSerial(),identifier:e.element.id()})),r.initWidget(e.$form),r.setChangeCallbacks(e.$form,e.element,{identifier:function(e,t){e.id(t)}})},c}),define("taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep","taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active"],function(e,t){return e.createBundle(t,arguments)
}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-role="cke-launcher-tlb">\n    <div class="rgt tlb-button" data-role="cke-launcher" title="Formatting options">\n        <span class="icon-font"></span>\n    </div>\n</div>'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l=i.helperMissing,c=this.escapeExpression;return s+='<button class="btn-info small widget-ok" data-edit="active">'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"done",o):l.call(t,"__","done",o)))+"</button>"})}),define("taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget",["taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states","tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger","tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content"],function(e,t,i,n,a,r,o){var s=e.clone();
return s.initCreator=function(){e.initCreator.call(this),this.registerStates(t),this.buildEditor(),this.createOkButton()},s.buildContainer=function(){this.$container=this.$original.addClass("widget-box")},s.createToolbar=function(){return this.$container.find(".modal-body").append(i({serial:this.serial,state:"active"})),this},s.buildEditor=function(){var e=this,t=e.$container.find(".modal-body"),i=e.element,n=i.getBody();t.attr("data-html-editable-container",!0),r.hasEditor(t)||r.buildEditor(t,{change:o.getChangeCallback(n),data:{container:n,widget:e}}),a.initTitle(this.$original.find(".qti-title"),i)},s.createOkButton=function(){var e=this;this.$container.append($(n()).on("click.qti-widget",function(t){t.stopPropagation(),e.changeState("sleep")
}))},s}),define("taoQtiItem/qtiCreator/renderers/ModalFeedback",["lodash","taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback","taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){n=n||{};var a=i.build(e,t.getContainer(e),this.getOption("modalFeedbackOptionForm"),n);return a},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/object",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a="";return a+="<video ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.id),{hash:{},inverse:b.noop,fn:b.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a+=' src="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.data,typeof n===g?n.apply(e):n))+'" type="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.type,typeof n===g?n.apply(e):n))+'" ',n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.width),{hash:{},inverse:b.noop,fn:b.program(4,s,t),data:t}),(n||0===n)&&(a+=n),a+=" ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.height),{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(n||0===n)&&(a+=n),a+='" controls="controls" preload="none"></video>'
}function o(e){var t,i="";return i+='id="'+v((t=e&&e.attributes,t=null==t||t===!1?t:t.id,typeof t===g?t.apply(e):t))+'"'}function s(e){var t,i="";return i+='width="'+v((t=e&&e.attributes,t=null==t||t===!1?t:t.width,typeof t===g?t.apply(e):t))+'"'}function l(e){var t,i="";return i+='height="'+v((t=e&&e.attributes,t=null==t||t===!1?t:t.height,typeof t===g?t.apply(e):t))}function c(e,t){var n,a="";return a+="<audio ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.id),{hash:{},inverse:b.noop,fn:b.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a+=' src="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.data,typeof n===g?n.apply(e):n))+'" type="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.type,typeof n===g?n.apply(e):n))+'"></audio>'
}function d(e,t){var n,a="";return a+="<object ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.id),{hash:{},inverse:b.noop,fn:b.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a+=' data="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.data,typeof n===g?n.apply(e):n))+'" type="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.type,typeof n===g?n.apply(e):n))+'" ',n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.width),{hash:{},inverse:b.noop,fn:b.program(4,s,t),data:t}),(n||0===n)&&(a+=n),a+=" ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.height),{hash:{},inverse:b.noop,fn:b.program(11,u,t),data:t}),(n||0===n)&&(a+=n),a+=">"+v((n=e&&e.attributes,n=null==n||n===!1?n:n.alt,typeof n===g?n.apply(e):n))+"</object>"
}function u(e){var t,i="";return i+='height="'+v((t=e&&e.attributes,t=null==t||t===!1?t:t.height,typeof t===g?t.apply(e):t))+'"'}function h(e,t){var n,a="";return a+="<iframe ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.id),{hash:{},inverse:b.noop,fn:b.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a+=' src="'+v((n=e&&e.attributes,n=null==n||n===!1?n:n.data,typeof n===g?n.apply(e):n))+'" ',n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.width),{hash:{},inverse:b.noop,fn:b.program(4,s,t),data:t}),(n||0===n)&&(a+=n),a+=" ",n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n.height),{hash:{},inverse:b.noop,fn:b.program(11,u,t),data:t}),(n||0===n)&&(a+=n),a+=">"+v((n=e&&e.attributes,n=null==n||n===!1?n:n.alt,typeof n===g?n.apply(e):n))+"</iframe>"
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var p,f,m="",g="function",v=this.escapeExpression,b=this;return m+='<div class="qti-object-container" data-serial="',(f=i.serial)?p=f.call(t,{hash:{},data:a}):(f=t&&t.serial,p=typeof f===g?f.call(t,{hash:{},data:a}):f),m+=v(p)+'" >\n    ',p=i["if"].call(t,t&&t.video,{hash:{},inverse:b.noop,fn:b.program(1,r,a),data:a}),(p||0===p)&&(m+=p),m+="\n    ",p=i["if"].call(t,t&&t.audio,{hash:{},inverse:b.noop,fn:b.program(8,c,a),data:a}),(p||0===p)&&(m+=p),m+="\n    ",p=i["if"].call(t,t&&t.object,{hash:{},inverse:b.noop,fn:b.program(10,d,a),data:a}),(p||0===p)&&(m+=p),m+="\n    ",p=i["if"].call(t,t&&t.html,{hash:{},inverse:b.noop,fn:b.program(13,h,a),data:a}),(p||0===p)&&(m+=p),m+="\n</div>"
})}),define("taoQtiItem/qtiDefaultRenderer/widgets/Object",["jquery","class","mediaElement"],function(e,t,i){var n=t.extend({init:function(t,n){if(this.playCounter=0,this.mediaType=t.getMediaType(),"video"===this.mediaType||"audio"===this.mediaType){var a=this;this.playerOptions={loop:!1,maxPlays:0,autostart:!1,pauseOtherPlayers:!1,features:["playpause","current","duration","progress","volume"],pluginPath:i.pluginPath,audioWidth:300};var r=parseInt(t.attr("width"));r>10&&("video"===this.mediaType?this.playerOptions.videoWidth=r:this.playerOptions.audioWidth=r);var o=parseInt(t.attr("height"));if(o>10&&("video"===this.mediaType?this.playerOptions.videoHeight=o:this.playerOptions.audioHeight=o),this.id=t.getSerial(),this.media=null,n&&(this.pluginPath=n.pluginPath||"",this.pluginPath&&(this.playerOptions.pluginPath=this.pluginPath),"object"==typeof n.playerOptions)){this.playerOptions=e.extend(this.playerOptions,n.playerOptions);
var s="function"==typeof n.playerOptions.success?n.playerOptions.success:function(){};this.playerOptions.success=function(t,i){setTimeout(function(){var n=function(){a.playerOptions.maxPlays&&a.playCounter>=a.playerOptions.maxPlays&&a.stop()};t.addEventListener("ended",function(){a.playCounter++,n()},!1),t.addEventListener("play",n),t.addEventListener("pause",function(){}),a.playerOptions.autostart&&(t.play(),setTimeout(function(){e(i).parent("div.mejs-mediaelement").siblings("div.mejs-layers").find("div.mejs-overlay-button").click().mousedown()},1e3)),s(t,i)},300)}}}},render:function(){("video"===this.mediaType||"audio"===this.mediaType)&&(this.media=new i("#"+this.id,this.playerOptions))
},playCount:function(e){return isNaN(e)?this.playCounter:void(this.playCounter=e)},pause:function(){this.media.pause()},stop:function(){this.pause(),e("#"+this.id).parent("div.mejs-mediaelement").siblings("div.mejs-layers").find("div.mejs-overlay-button").hide()}});return n}),define("taoQtiItem/qtiCommonRenderer/renderers/Object",["tpl!taoQtiItem/qtiCommonRenderer/tpl/object","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiDefaultRenderer/widgets/Object"],function(e,t,i){return{qtiClass:"object",template:e,getContainer:t.getContainer,render:function(e){var t=new i(e);t.render()}}}),define("taoQtiItem/qtiCreator/widgets/static/object/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep"],function(e,t){var i=e.create(t,function(){},function(){});
return i}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/object",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <label for="src">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the media.",s):c.call(t,"__","The file path to the media.",s)))+'</div>\n    <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n    <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select media",s):c.call(t,"__","Select media",s)))+'</button>\n</div>\n\n<div data-role="advanced" style="display:none">\n    <div class="panel">\n        <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Size and position",s):c.call(t,"__","Size and position",s)))+'</h3>\n\n        <!--not available yet-->\n        <!--    <label>\n        <input name="responsive" type="checkbox" />\n        <span class="icon-checkbox"></span>\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Adapt to item size",s):c.call(t,"__","Adapt to item size",s)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        Recommended.\n        Define whether the image size should automatically adapt to item size.\n        If this option is active, the image width and height will be a percentage of its text container.\n    </span>-->\n\n        <p class="img-resizer-slider"></p>\n\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height (optional)",s):c.call(t,"__","Height (optional)",s)))+'</label>\n        <span id="item-editor-font-size-manual-input" class="item-editor-unit-input-box">\n            <input type="text" name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n            <span class="unit-indicator">px</span>\n        </span>\n    </div>\n    <div class="panel">\n\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width (optional)",s):c.call(t,"__","Width (optional)",s)))+'</label>\n        <span id="item-editor-font-size-manual-input" class="item-editor-unit-input-box">\n            <input type="text" name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$numeric" data-validate-option="$allowEmpty;"/>\n            <span class="unit-indicator">px</span>\n        </span>\n    </div>\n    <div class="panel">\n\n        <label for="align">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Alignment (optional)",s):c.call(t,"__","Alignment (optional)",s)))+'</label>\n        <select name="align" class="select2" data-has-search="false">\n            <option value="default">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"default",s):c.call(t,"__","default",s)))+'</option>\n            <option value="left">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"left",s):c.call(t,"__","left",s)))+'</option>\n            <option value="right">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"right",s):c.call(t,"__","right",s)))+"</option>\n        </select>\n    </div>\n</div>"
})}),define("taoQtiItem/qtiCreator/widgets/static/object/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","tpl!taoQtiItem/qtiCreator/tpl/forms/static/object","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/static/helpers/inline","lodash","util/image","helpers","ui/resourcemgr","nouislider"],function(e,t,i,n,a,r,o){var s=e.extend(t,function(){this.widget.changeState("sleep")},function(){this.widget.$form.empty()}),l=function(e,t){var i=r.debounce(function(e,t,i){e.attr(i,t)},1e3);return r.throttle(function(n,a,r){a?(e[t](a),i(n,a,r)):(e[t]("auto"),n.removeAttr(t)),e.trigger("contentChange.qti-widget")
},100)};s.prototype.initForm=function(){var e=this.widget,t=e.$original,r=e.$form,o=e.element,s=e.options.baseUrl,p=!0;r.html(i({baseUrl:s||"",data:o.attr("data"),height:o.attr("height"),width:o.attr("width"),responsive:p})),u(e),d(e),c(e),h(e),n.initWidget(r),n.setChangeCallbacks(r,o,{data:function(i,n){i.attr("data",n),n.match(/^http/i)||(n=s+"/"+n),t.attr("data",n),a.togglePlaceholder(e),d(e),u(e)},alt:n.getAttributeChangeCallback(),longdesc:n.getAttributeChangeCallback(),align:function(t,i){a.positionFloat(e,i)},height:l(t,"height"),width:l(t,"width")})};var c=function(e){var t="default";e.element.hasClass("rgt")?t="right":e.element.hasClass("lft")&&(t="left"),a.positionFloat(e,t),e.$form.find("select[name=align]").val(t)
},d=function(e){var t=e.$container,i=e.$form,n=i.find(".media-resizer-slider"),a=e.element,o=t.find("media"),s=i.find("[name=height]"),l=i.find("[name=width]"),c={h:a.attr("height")||o.height(),w:a.attr("width")||o.width()};n.noUiSlider({range:{min:10,max:200},start:100},n.hasClass("noUi-target")),n.off("slide").on("slide",r.throttle(function(e,t){var i=t/100,n=parseInt(i*c.w),a=parseInt(i*c.h);l.val(n).change(),s.val(a).change()},100))},u=function(e){var t=e.$form,i=e.element.attr("data");i?t.find("[data-role=advanced]").show():t.find("[data-role=advanced]").hide()},h=function(e){var t=e.$form,i=e.options,n=t.find('[data-role="upload-trigger"]'),a=t.find("input[name=data]"),r=t.find("input[name=width]"),s=t.find("input[name=height]");
n.on("click",function(){n.resourcemgr({appendContainer:i.mediaManager.appendContainer,root:"/",browseUrl:i.mediaManager.browseUrl,uploadUrl:i.mediaManager.uploadUrl,deleteUrl:i.mediaManager.deleteUrl,downloadUrl:i.mediaManager.downloadUrl,fileExistsUrl:i.mediaManager.fileExistsUrl,params:{uri:i.uri,lang:i.lang,filters:"audio/ogg,audio/mpeg,video/mpeg,video/mp4,video/ogg,video/ogv,video/webm"},pathParam:"path",select:function(e,t){var n,l=t.length;for(n=0;l>n;n++){o.getSize(i.baseUrl+t[n].file,function(e){e&&e.width>=0&&(r.val(e.width).trigger("change"),s.val(e.height).trigger("change")),a.val(t[n].file).trigger("change")});break}}})})};return s}),define("taoQtiItem/qtiCreator/widgets/static/object/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/object/states/Sleep","taoQtiItem/qtiCreator/widgets/static/object/states/Active"],function(e,t){return e.createBundle(t,arguments)
}),define("tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="overlay">\n    <span class="message">',(o=i.message)?r=o.call(t,{hash:{},data:a}):(o=t&&t.message,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+"</span>\n</span>"})}),define("taoQtiItem/qtiCreator/widgets/static/object/Widget",["taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/object/states/states","taoQtiItem/qtiCreator/widgets/static/helpers/widget","tpl!taoQtiItem/qtiCreator/tpl/toolbars/media","taoQtiItem/qtiCreator/widgets/static/helpers/inline","tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay","i18n"],function(e,t,i,n,a,r,o){var s=e.clone();
return s.initCreator=function(){this.registerStates(t),e.initCreator.call(this),a.togglePlaceholder(this),this.notAvailable()},s.getRequiredOptions=function(){return["baseUrl","uri","lang","mediaManager"]},s.buildContainer=function(){return i.buildBlockContainer(this),this},s.createToolbar=function(){return i.createToolbar(this,n),this},s.notAvailable=function(){this.$container.append(r({message:o("Editing this element is not supported currently.")})),this.$container.attr("contenteditable",!1),this.$container.css({cursor:"default"}),this.$container.on("click, mousedown",function(e){e.stopPropagation()})},s}),define("taoQtiItem/qtiCreator/renderers/Object",["lodash","taoQtiItem/qtiCommonRenderer/renderers/Object","taoQtiItem/qtiCreator/widgets/static/object/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return t.render(e),n=n||{},n.baseUrl=this.getOption("baseUrl"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("bodyElementOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="grid-row qti-rubricBlock" data-use="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.use,typeof r===l?r.apply(t):r))+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-qti-class="rubricBlock">\n    <div class="col-12">\n        <div class="qti-rubricBlock-body">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</div>\n    </div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",["tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"rubricBlock",getContainer:t.getContainer,template:e}}),define("taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Sleep"],function(e,t){var i=e.extend(t,function(){},function(){});return i}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<!--currently only visible to the candidate-->\n<div class="panel">\n    <label for="view">Visible by</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.",s):c.call(t,"__","A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.",s)))+'\n    </div>\n    <select name="view" class="select2" data-has-search="false">\n        <option value="author">author</option>\n        <option value="candidate">candidate</option>\n        <option value="proctor">proctor</option>\n        <option value="scorer">scorer</option>\n        <option value="testConstructor">test constructor</option>\n        <option value="tutor">tutor</option>\n    </select>\n</div>\n\n<div class="panel">\n    <label for="use">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Description",s):c.call(t,"__","Description",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.",s):c.call(t,"__","The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.",s)))+'</div>\n    <input type="text" name="use" value="',(o=i.use)?r=o.call(t,{hash:{},data:a}):(o=t&&t.use,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" />\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/Active","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content","tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock","taoQtiItem/qtiCreator/widgets/helpers/formElement"],function(e,t,i,n,a,r){var o=e.extend(t,function(){this.buildEditor(),this.initForm()},function(){this.destroyEditor(),this.widget.$form.empty()});return o.prototype.buildEditor=function(){var e=this.widget,t=e.$container,a=e.element.getBody();t.attr("data-html-editable-container",!0),i.hasEditor(t)||i.buildEditor(t,{change:n.getChangeCallback(a),data:{widget:e,container:a}})
},o.prototype.destroyEditor=function(){i.destroyEditor(this.widget.$container)},o.prototype.initForm=function(){var e=this.widget,t=e.$form,i=e.element;t.html(a({view:i.attr("view"),use:i.attr("use")})),r.initWidget(t),r.setChangeCallbacks(t,i,{view:r.getAttributeChangeCallback(),use:r.getAttributeChangeCallback()})},o}),define("taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/static/states/states","taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep","taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget",["taoQtiItem/qtiCreator/widgets/static/Widget","taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states","tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock"],function(e,t,i){var n=e.clone();return n.buildContainer=function(){this.$container=this.$original.addClass("widget-box widget-rubricBlock")},n.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},n.createToolbar=function(){var e=$(i({serial:this.serial,state:"active"})),t=this;return this.$container.find(".qti-rubricBlock-body").append(e),e.find('[data-role="delete"]').on("click.widget-box",function(e){e.stopPropagation(),t.changeState("deleting")
}),this},n}),define("taoQtiItem/qtiCreator/renderers/RubricBlock",["lodash","taoQtiItem/qtiCommonRenderer/renderers/RubricBlock","taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("bodyElementOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="qti-choice qti-gap" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\r\n    <span data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" class="gapmatch-content">&nbsp;</span>\r\n</span>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"gap",getContainer:t.getContainer,template:e}}),define("taoQtiItem/qtiCreator/widgets/choices/Widget",["taoQtiItem/qtiCreator/widgets/Widget"],function(e){var t=e.clone();return t.buildContainer=function(){this.$container=this.$original},t.initCreator=function(){if(e.initCreator.call(this),this.interaction=this.element.getInteraction(),!this.interaction)throw new Error("cannot find related interaction");this.listenToInteractionStates()},t.listenToInteractionStates=function(){var e=this;
this.beforeStateInit(function(t,i,n){if(i.is("interaction")&&i.getSerial()===e.interaction.getSerial()&&n.name!==e.getCurrentState().name)switch(n.name){case"answer":case"sleep":case"question":e.changeState(n.name);break;case"delete":e.changeState("sleep")}}),this.beforeStateExit(function(t,i,n){i.is("interaction")&&i.getSerial()===e.interaction.getSerial()&&"choice"===n.name&&e.changeState("question")})},t}),define("taoQtiItem/qtiCreator/widgets/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("answer",["active"],function(){throw new Error('state "answer" prototype init method must be implemented')},function(){throw new Error('state "answer" prototype exit method must be implemented')
})}),define("taoQtiItem/qtiCreator/widgets/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("choice",["question","active"],function(){throw new Error('state "choice" prototype init method must be implemented')},function(){throw new Error('state "choice" prototype exit method must be implemented')})}),define("taoQtiItem/qtiCreator/widgets/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("correct",["answer","active"],function(){throw new Error('state "correct" prototype init method must be implemented')},function(){throw new Error('state "correct" prototype exit method must be implemented')
})}),define("taoQtiItem/qtiCreator/widgets/states/Map",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("map",["answer","active"],function(){throw new Error('state "map" prototype init method must be implemented')},function(){throw new Error('state "map" prototype exit method must be implemented')})}),define("taoQtiItem/qtiCreator/widgets/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("question",["active"],function(){throw new Error('state "question" prototype init method must be implemented')},function(){throw new Error('state "question" prototype exit method must be implemented')})}),define("tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="feedback-error popup" data-widget-component="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'">\n    <span class="icon-error"></span>\n    ',o=i.__||t&&t.__,s={hash:{},data:a},r=o?o.call(t,"There is an incomplete element in your item : please click on it to complete it.",s):u.call(t,"__","There is an incomplete element in your item : please click on it to complete it.",s),(r||0===r)&&(l+=r),l+="\n</div>"})}),define("taoQtiItem/qtiCreator/widgets/states/Invalid",["taoQtiItem/qtiCreator/widgets/states/factory","tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox"],function(e,t){return e.create("invalid",["sleep"],function(){this.widget.$container.addClass("invalid"),this.$messageBox=$(t({serial:this.widget.serial})),$("body").append(this.$messageBox)
},function(){this.widget.$container.removeClass("invalid"),this.$messageBox.remove()})}),define("taoQtiItem/qtiCreator/widgets/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Active","taoQtiItem/qtiCreator/widgets/states/Answer","taoQtiItem/qtiCreator/widgets/states/Choice","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCreator/widgets/states/Deleting","taoQtiItem/qtiCreator/widgets/states/Inactive","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/states/Question","taoQtiItem/qtiCreator/widgets/states/Sleep","taoQtiItem/qtiCreator/widgets/states/Invalid"],function(e){return e.createBundle(arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Sleep"],function(e,t){var i=e.create(t,function(){},function(){});return i}),define("taoQtiItem/qtiCreator/widgets/choices/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Active"],function(e,t){var i=e.create(t,function(){},function(){});return i}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){var e="";return e}function o(){return"display:none;"}function s(){return"icon-pin"
}function l(){return"icon-shuffle"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d,u="",h="function",p=this.escapeExpression,f=this;return u+='<div class="mini-tlb" data-edit="question" data-for="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'">\n    <div class="rgt tlb-button" title="Delete" data-role="delete">\n        <span class="icon-bin"></span>\n    </div>\n    <div class="rgt tlb-button" data-role="shuffle-pin" title="Shuffle/Pin" style="',c=i["if"].call(t,t&&t.interactionShuffle,{hash:{},inverse:f.program(3,o,a),fn:f.program(1,r,a),data:a}),(c||0===c)&&(u+=c),u+='">\n        <span class="',c=i["if"].call(t,t&&t.fixed,{hash:{},inverse:f.program(7,l,a),fn:f.program(5,s,a),data:a}),(c||0===c)&&(u+=c),u+='"></span>\n    </div>\n    <div class="rgt tlb-button" data-role="cke-launcher" title="Formatting options">\n        <span class="icon-font"></span>\n    </div>\n</div>'
})}),define("taoQtiItem/qtiCreator/widgets/choices/helpers/formElement",[],function(){var e={initShufflePinToggle:function(e){var t=e.$container,i=e.element,n=i.getInteraction(),a=t.find('[data-role="shuffle-pin"]');a.off("mousedown").on("mousedown",function(e){e.stopPropagation();var t=$(this).children();0===t.length&&(t=$(this)),t.hasClass("icon-shuffle")?(t.removeClass("icon-shuffle").addClass("icon-pin"),i.attr("fixed",!0)):(t.removeClass("icon-pin").addClass("icon-shuffle"),i.attr("fixed",!1))});var r=function(e){e?a.show():a.hide(),$(".qti-item").trigger("toolbarchange",{callee:"formElementHelper"})};r(n.attr("shuffle")),e.on("attributeChange",function(e){e.element.serial===n.serial&&"shuffle"===e.key&&r(e.value)
})},initDelete:function(e){var t=e.$container;t.find('[data-role="delete"]:not([data-html-editable] *)').on("mousedown",function(t){t.stopPropagation(),e.changeState("deleting")})}};return e}),define("taoQtiItem/qtiCreator/widgets/choices/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content","taoQtiItem/qtiCreator/widgets/choices/helpers/formElement"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget;e.$container.on("click.question",function(){e.changeState("choice")}).on("mouseenter.question",function(){$(this).addClass("hover")
}).on("mouseleave.question",function(){$(this).removeClass("hover")}),this.createToolbar().show()},function(){this.removeToolbar(),this.widget.$container.off(".question")});return a.prototype.createToolbar=function(){var e,t=this.widget,a=t.$container,r=t.element,o=a.find(".mini-tlb").not("[data-html-editable] *");return o.length||(e=r.getInteraction(),o=$(i({choiceSerial:r.getSerial(),interactionSerial:e.getSerial(),fixed:r.attr("fixed"),interactionShuffle:e.attr("shuffle")})),a.append(o),n.initShufflePinToggle(t),n.initDelete(t)),o},a.prototype.removeToolbar=function(){this.widget.$container.find(".mini-tlb[data-edit=question]").remove()},a}),define("taoQtiItem/qtiCreator/widgets/choices/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Answer"],function(e,t){var i=e.create(t,function(){},function(){});
return i}),define("taoQtiItem/qtiCreator/widgets/choices/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/states","taoQtiItem/qtiCreator/widgets/choices/states/Sleep","taoQtiItem/qtiCreator/widgets/choices/states/Active","taoQtiItem/qtiCreator/widgets/choices/states/Question","taoQtiItem/qtiCreator/widgets/choices/states/Answer"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/choices/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Choice","taoQtiItem/qtiItem/core/Element"],function(e,t,i){var n=e.create(t,function(){var e=this.widget;
e.beforeStateInit(function(t,n,a){i.isA(n,"choice")&&e.interaction.getChoice(n.serial)?"choice"===a.name&&n.serial!==e.serial?e.changeState("question"):"active"===a.name&&e.changeState("question"):(n.is("img")||n.is("math")||n.is("object"))&&"active"===a.name&&e.changeState("question")},"otherActive"),this.initForm(),this.widget.$form.show()},function(){this.widget.$form.empty().hide(),this.widget.offEvents("otherActive")});return n.prototype.initForm=function(){e.throwMissingRequiredImplementationError("initForm")},n}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=i.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<div class="panel">\n    <label for="" class="has-icon">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Identifier",l):d.call(t,"__","Identifier",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',l):d.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',l)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(s=i.identifier)?o=s.call(t,{hash:{},data:a}):(s=t&&t.identifier,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" \n           placeholder="e.g. my-choice_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+');">\n</div>\n\n<div class="panel">\n    <label>\n        <input name="required" type="checkbox" ',o=i["if"].call(t,t&&t.required,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"required",l):d.call(t,"__","required",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.",l):d.call(t,"__","Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.",l)))+"\n    </span>\n</div>\n\n<h3>"+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Shape position",l):d.call(t,"__","Shape position",l)))+'</h3>\n\n<div class="panel">\n    <label for="x">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Left",l):d.call(t,"__","Left",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",l):d.call(t,"__","The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",l)))+'</div>\n    <input name="x" value="',(s=i.x)?o=s.call(t,{hash:{},data:a}):(s=t&&t.x,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="y">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Top",l):d.call(t,"__","Top",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",l):d.call(t,"__","The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",l)))+'</div>\n    <input name="y" value="',(s=i.y)?o=s.call(t,{hash:{},data:a}):(s=t&&t.y,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="width">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Width",l):d.call(t,"__","Width",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",l):d.call(t,"__","The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",l)))+'</div>\n    <input name="width" value="',(s=i.width)?o=s.call(t,{hash:{},data:a}):(s=t&&t.width,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="height">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Height",l):d.call(t,"__","Height",l)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",l):d.call(t,"__","The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",l)))+'</div>\n    <input name="height" value="',(s=i.height)?o=s.call(t,{hash:{},data:a}):(s=t&&t.height,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text" readonly />\n</div>\n\n'
})}),define("taoQtiItem/qtiCreator/widgets/helpers/identifier",["lodash"],function(e){var t=function(t,i,n){var a=i.replace(/([.-])/g,"\\$1"),r=new RegExp("\\b("+a+")\\b");for(var o in t.correctResponse)t.correctResponse[o]=t.correctResponse[o].replace(r,n);var s={};e.forIn(t.mapEntries,function(e,t){t=t.replace(r,n),s[t]=e}),t.mapEntries=s},i=e.throttle(function(e,i,n){var a=e.id();if(a!==i){t(n,a,i),e.id(i);var r=o("interactionFromChoice",e,function(){return e.getInteraction()});try{e.getContainer(null,e.qtiClass+"."+r.qtiClass).attr("data-identifier",e.id())}catch(s){}}},500),n=[],a=function(e,t,i){n[e]||(n[e]={}),n[e][t.getSerial()]=i},r=function(e,t){var i=t.getSerial();
return i&&n[e]&&n[e][i]?n[e][i]:null},o=function(e,t,i){var n=r(e,t);return n||(n=i.call(t),a(e,t,n)),n};return{updateChoiceIdentifier:function(e,t){var n=o("responseFromChoice",e,function(){var t=o("interactionFromChoice",e,function(){return e.getInteraction()});return t.getResponseDeclaration()});i(e,t,n)},updateResponseIdentifier:function(){throw"to be implemented"}}}),define("taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","taoQtiItem/qtiItem/core/Element"],function(e,t,i,n,a,r){var o=e.extend(t,function(){var e=this.widget;
e.beforeStateInit(function(t,i,n){r.isA(i,"gap")&&e.interaction.getBody().getElement(i.serial)&&("choice"===n.name&&i.serial!==e.serial?e.changeState("question"):"active"===n.name&&e.changeState("question"))},"otherActive")},function(){this.widget.offEvents("otherActive")});return o.prototype.initForm=function(){var e=this.widget.$form,t=this.widget.element;e.html(i({serial:t.getSerial(),identifier:t.id(),required:!!t.attr("required")})),n.initWidget(e),n.setChangeCallbacks(e,t,{identifier:a.updateChoiceIdentifier,required:n.getAttributeChangeCallback()})},o}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <span class="rgt tlb-button" title="Delete" data-role="delete">\n        <span class="icon-bin"></span>\n    </span>\n</span>'})}),define("taoQtiItem/qtiCreator/widgets/choices/gap/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap","taoQtiItem/qtiCreator/widgets/choices/helpers/formElement"],function(e,t,i,n){var a=e.extend(t);
return a.prototype.createToolbar=function(){var e=this.widget,t=e.$container,a=e.element,r=t.find(".mini-tlb").not("[data-html-editable] *");return r.length||(r=$(i({serial:a.getSerial(),state:"question"})),t.append(r),n.initDelete(e)),r},a}),define("taoQtiItem/qtiCreator/widgets/choices/gap/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice","taoQtiItem/qtiCreator/widgets/choices/gap/states/Question"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/choices/gap/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/gap/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){e.initCreator.call(this),this.registerStates(t)},i.buildContainer=function(){this.$container=this.$original.addClass("widget-box"),this.$container.attr("contenteditable",!1)},i}),define("taoQtiItem/qtiCreator/renderers/choices/Gap",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/Gap","taoQtiItem/qtiCreator/widgets/choices/gap/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<li class="qti-choice" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</li>"})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/GapText",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"gapText",getContainer:t.getContainer,template:e}
}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <label for="">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Identifier",s):c.call(t,"__","Identifier",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n           placeholder="e.g. my-choice_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n</div>\n\n<div class="panel">\n    <h3 class="has-icon">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of uses",s):c.call(t,"__","Allowed number of uses",s)))+'\n    </h3>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.",s):c.call(t,"__","The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.",s)))+'\n    </span>\n\n    <!--not supported yet-->\n    <div style="display:none;">\n        <label for="matchMin" class="spinner">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Min",s):c.call(t,"__","Min",s)))+'</label>\n        <input name="matchMin" value="',(o=i.matchMin)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMin,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="100" type="text" />\n    </div>\n\n    <div>\n        <label for="matchMax" class="spinner">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Max",s):c.call(t,"__","Max",s)))+'</label>\n        <input name="matchMax" value="',(o=i.matchMax)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMax,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="100" type="text" />\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content"],function(e,t,i,n,a,r,o){var s=e.extend(t,function(){this.buildEditor()},function(){this.destroyEditor()});return s.prototype.initForm=function(){var e=this.widget,t=e.$form,r=e.element;t.html(i({serial:r.getSerial(),identifier:r.id(),matchMin:r.attr("matchMin"),matchMax:r.attr("matchMax")})),n.initWidget(t);
var o=n.getMinMaxAttributeCallbacks(this.widget.$form,"matchMin","matchMax");o.identifier=a.updateChoiceIdentifier,n.setChangeCallbacks(t,r,o)},s.prototype.buildEditor=function(){var e=this.widget,t=e.element.getBody(),i=e.$container;i.attr("data-html-editable-container",!0),r.hasEditor(i)||r.buildEditor(i,{change:o.getChangeCallback(t),data:{container:t,widget:e}})},s.prototype.destroyEditor=function(){r.destroyEditor(this.widget.$container)},s}),define("taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice","taoQtiItem/qtiItem/core/Element","lodash"],function(e,t,i,n,a){var r=e.extend(t,function(){var e=this.widget;
e.beforeStateInit(function(t,i,a){n.isA(i,"choice")&&e.interaction.getBody().getElement(i.serial)&&"choice"===a.name&&i.serial!==e.serial&&e.changeState("question")},"otherActive"),this.buildEditor()},function(){this.destroyEditor(),this.widget.offEvents("otherActive")});r.prototype.initForm=function(){i.prototype.initForm.call(this)},r.prototype.buildEditor=function(){var e,t=this.widget,i=t.$container,n=i.find(".mini-tlb");n.detach(),i.wrapInner($("<div>",{"class":"inner-wrapper"})),i.append(n),e=i.find(".inner-wrapper"),e.attr("contentEditable",!0),o(e),e.on("keyup.qti-widget",a.throttle(function(){t.element.val($(this).text())},200)).on("keypress.qti-widget",function(e){13===e.which&&(e.preventDefault(),$(this).blur(),t.changeState("question"))
})},r.prototype.destroyEditor=function(){var e=this.widget.$container;e.find("td").removeAttr("contentEditable"),e.children("td:first").off("keyup.qti-widget")};var o=function(e){var t,i,n=e[0];n.focus(),void 0!==window.getSelection&&void 0!==document.createRange?(t=document.createRange(),t.selectNodeContents(n),t.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):void 0!==document.body.createTextRange&&(t=document.body.createTextRange(),t.moveToElementText(n),t.collapse(!1),t.select())};return r}),define("taoQtiItem/qtiCreator/widgets/choices/gapText/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/gapText/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/gapText/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){e.initCreator.call(this),this.registerStates(t)},i}),define("taoQtiItem/qtiCreator/renderers/choices/GapText",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/GapText","taoQtiItem/qtiCreator/widgets/choices/gapText/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="qti-choice qti-hottext hottext" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\r\n    <label class="hottext-checkmark">\r\n        <input type="checkbox" value="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'">\r\n        <span class="icon-checkbox small"></span>\r\n    </label>\r\n    <span class="hottext-content">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</span>\r\n</span>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"hottext",getContainer:t.getContainer,template:e}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <label for="" class="has-icon">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Identifier",s):c.call(t,"__","Identifier",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n           placeholder="e.g. my-choice_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n</div>'
})}),define("taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content"],function(e,t,i,n,a,r,o){var s=e.extend(t,function(){this.buildEditor()},function(){this.destroyEditor()});return s.prototype.initForm=function(){var e=this.widget;e.$form.html(i({serial:e.element.getSerial(),identifier:e.element.id()})),n.initWidget(e.$form),n.setChangeCallbacks(e.$form,e.element,{identifier:a.updateChoiceIdentifier})
},s.prototype.buildEditor=function(){var e=this.widget,t=e.element.getBody(),i=e.$container;i.attr("data-html-editable-container",!0),r.hasEditor(i)||r.buildEditor(i,{change:o.getChangeCallback(t),data:{container:t,widget:e}})},s.prototype.destroyEditor=function(){r.destroyEditor(this.widget.$container)},s}),define("taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice"],function(e,t,i){var n=e.extend(t);return n.prototype.initForm=function(){i.prototype.initForm.call(this)},n}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <span class="tlb-button" title="Restore" data-role="restore">\n        <span class="icon-undo"></span>\n    </span>\n</span>'})}),define("taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext","taoQtiItem/qtiCreator/widgets/choices/helpers/formElement"],function(e,t,i){var n=e.extend(t);
return n.prototype.createToolbar=function(){var e=this.widget,t=e.$container,n=e.element,a=t.find(".mini-tlb").not("[data-html-editable] *");return a.length||(a=$(i({serial:n.getSerial(),state:"question"})),t.append(a),a.find("[data-role=restore]").on("mousedown.question",function(){t.replaceWith(n.body()),e.destroy(),n.remove()})),a},n}),define("taoQtiItem/qtiCreator/widgets/choices/hottext/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice","taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/hottext/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/hottext/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){e.initCreator.call(this),this.registerStates(t)},i.buildContainer=function(){this.$container=this.$original.addClass("widget-box"),this.$container.attr("contenteditable",!1),this.$original.find(".hottext-checkmark > input").prop("disabled","disabled")},i}),define("taoQtiItem/qtiCreator/renderers/choices/Hottext",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext","taoQtiItem/qtiCreator/widgets/choices/hottext/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)},n}),define("taoQtiItem/qtiCreator/renderers/choices/InlineChoice",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"simpleAssociableChoice.associateInteraction",getContainer:t.getContainer,template:e}}),define("taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content","taoQtiItem/qtiCreator/widgets/choices/helpers/formElement"],function(e,t,i,n){var a=e.extend(t,function(){},function(){});
return a.prototype.createToolbar=function(){var e,t=this.widget,a=t.$container,r=t.element,o=a.find(".mini-tlb").not("[data-html-editable] *");return o.length||(e=r.getInteraction(),o=$(i({choiceSerial:r.getSerial(),interactionSerial:e.getSerial(),fixed:r.attr("fixed"),interactionShuffle:e.attr("shuffle")})),a.children(".inner-wrapper").append(o),n.initShufflePinToggle(t),n.initDelete(t)),o},a}),define("taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this),this.$container.wrapInner($("<div>",{"class":"inner-wrapper"})),this.$container.closest("table.matrix").find("input[type=checkbox]:enabled").prop("disabled","disabled")},i}),define("taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<th class="qti-choice qti-associableChoice qti-simpleAssociableChoice" data-identifier="'+c((r=t&&t.attributes,r=null==r||r===!1?r:r.identifier,typeof r===l?r.apply(t):r))+'" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">',(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="</th>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"simpleAssociableChoice.matchInteraction",getContainer:t.getContainer,template:e}}),define("taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction","taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)
},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t,i="";return i+='\n            <input type="radio" name="response-'+u((t=e&&e.interaction,t=null==t||t===!1?t:t.serial,typeof t===d?t.apply(e):t))+'" value="'+u((t=e&&e.attributes,t=null==t||t===!1?t:t.identifier,typeof t===d?t.apply(e):t))+'">\n            <span class="icon-radio"></span>\n            '}function o(e){var t,i="";return i+='\n            <input type="checkbox" name="response-'+u((t=e&&e.interaction,t=null==t||t===!1?t:t.serial,typeof t===d?t.apply(e):t))+'" value="'+u((t=e&&e.attributes,t=null==t||t===!1?t:t.identifier,typeof t===d?t.apply(e):t))+'">\n            <span class="icon-checkbox"></span>\n            '
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c="",d="function",u=this.escapeExpression,h=this;return c+='<li class="qti-choice qti-simpleChoice" data-identifier="'+u((s=t&&t.attributes,s=null==s||s===!1?s:s.identifier,typeof s===d?s.apply(t):s))+'" data-serial="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===d?l.call(t,{hash:{},data:a}):l),c+=u(s)+'">\n    <div class="pseudo-label-box">\n        <label class="real-label">\n            ',s=i["if"].call(t,t&&t.unique,{hash:{},inverse:h.program(3,o,a),fn:h.program(1,r,a),data:a}),(s||0===s)&&(c+=s),c+='\n        </label>\n        <div class="label-box">\n            <div class="label-content clear" contenteditable="false">\n                ',(l=i.body)?s=l.call(t,{hash:{},data:a}):(l=t&&t.body,s=typeof l===d?l.call(t,{hash:{},data:a}):l),(s||0===s)&&(c+=s),c+="\n            </div>\n        </div>\n    </div>\n</li>\n"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"simpleChoice.choiceInteraction",getContainer:t.getContainer,getData:function(e,t){return t.unique=1===parseInt(t.interaction.attributes.maxChoices),t},template:e}}),define("taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){e.initCreator.call(this),this.registerStates(t);var i=this.$container.find(".real-label");i.children("input").attr("disabled","disabled")},i}),define("taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)
},n}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t){return{qtiClass:"simpleChoice.orderInteraction",getContainer:t.getContainer,template:e}}),define("taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction","taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("choiceOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;
return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===u?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(e){var t;return t=typeof e===u?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u="function",h=this.escapeExpression,p=this,f=i.blockHelperMissing;return d+='<div class="qti-interaction qti-blockInteraction qti-associateInteraction" data-serial="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===u?l.call(t,{hash:{},data:a}):l),d+=h(s)+'" data-qti-class="associateInteraction">\n    ',s=i["if"].call(t,t&&t.prompt,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+='\n    <div class="instruction-container"></div>\n    <ul class="choice-area clearfix  none block-listing solid horizontal source" data-eyecatcher=">li">\n        ',c={hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a},(l=i.choices)?s=l.call(t,c):(l=t&&t.choices,s=typeof l===u?l.call(t,c):l),i.choices||(s=f.call(t,s,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a})),(s||0===s)&&(d+=s),d+='\n    </ul>\n    <ul class="result-area none target clearfix">\n    </ul>\n    <div class="notification-container"></div>\n</div>'
})}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"incomplete-pair"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s="",l=this;return s+='<li class="',o=i["if"].call(t,t&&t.empty,{hash:{},inverse:l.noop,fn:l.program(1,r,a),data:a}),(o||0===o)&&(s+=o),s+='">\n    <div class="target lft"></div>\n    <div class="target rgt"></div>\n</li>\n'})}),define("taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint",["lodash"],function(e){var t={"boolean":function(e){return e?"true":"false"},integer:function(e){return e},"float":function(e){return e
},string:function(e){return""===e?"NULL":'"'+e+'"'},point:function(e){return"["+e[0]+", "+e[1]+"]"},pair:function(e){return"["+e[0]+", "+e[1]+"]"},directedPair:function(e){return"["+e[0]+", "+e[1]+"]"},duration:function(e){return e},file:function(){return"binary data"},uri:function(e){return e},intOrIdentifier:function(e){return e},identifier:function(e){return e}},i=function(i,n){var a="",r=i.base;return n="undefined"!=typeof n?n:!0,r?(e.forIn(t,function(e,t){return void 0!==r[t]?(a+=n?"("+t+") ":"",a+=e(r[t]),!1):void 0}),a):void 0},n=function(i,n){var a="",r=i.list;return n="undefined"!=typeof n?n:!0,r?(e.forIn(t,function(t,i){return void 0!==r[i]?(a+=n?"("+i+") ":"",a+="[",e.each(r[i],function(e){a+=t(e)+", "
}),e.size(r[i])&&(a=a.substring(0,a.length-2)),a+="]",!1):void 0}),a):void 0};return{printBase:i,printList:n}}),define("taoQtiItem/qtiCommonRenderer/helpers/PciResponse",["lodash","taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint"],function(e,t){var i={single:"base",multiple:"list",ordered:"list",record:"record"};return{unserialize:function(t,n){var a,r=[],o=n.getResponseDeclaration(),s=o.attr("baseType"),l=o.attr("cardinality");if(!i[l])throw"unknown cardinality in the responseDeclaration of the interaction";a=i[l];var c=t[a];if(null===c)r=[];else{if(!e.isObject(c))throw"invalid response cardinality, expected "+l+" ("+a+")";if(void 0===c[s])throw"invalid response baseType";
r=c[s],r=e.isArray(r)?r:[r]}return r},serialize:function(t,n){if(!e.isArray(t))throw"invalid argument : responseValues must be an Array";var a,r={},o=n.getResponseDeclaration(),s=o.attr("baseType"),l=o.attr("cardinality");if(!i[l])throw"unknown cardinality in the responseDeclaration of the interaction";return a=i[l],"base"===a?0===t.length?r.base=null:(r.base={},r.base[s]=t[0]):(r[a]={},r[a][s]=t),r},isEmpty:function(t){return null===t||e.isEmpty(t)||null===t.base||e.isArray(t.list)&&e.isEmpty(t.list)||e.isArray(t.record)&&e.isEmpty(t.record)},prettyPrint:function(e){var i="";if("undefined"!=typeof e.base)i+=t.printBase(e,!0);else if("undefined"!=typeof e.list)i+=t.printList(e,!0);
else if("undefined"==typeof e.record)throw"Not a valid PCI JSON Response";return i}}}),define("eyecatcher",["jquery"],function(e){"use strict";var t=function(){var t,i,n,a=e("[data-eyecatcher]").filter(":visible"),r=a.length,o=e(window),s=o.scrollLeft(),l=o.scrollTop(),c=o.height(),d=o.width(),u=e(),h=e();return a.each(function(){var t=e(this),i=t.data("eyecatcher");return!1===i?!0:void(""===i||i===!0?u=u.add(t):"string"===e.type(i)&&(u=u.add(t.find(i))))}),u.length?u.length===r?null:(u.each(function(){var a=e(this);t=a.offset(),i=t.left,n=t.top,n+a.height()>=l&&l+c>=n&&i+a.width()>=s&&s+d>=i&&(h=h.add(a))}),h):!1},i=function(){for(var i="info",n=null,a=arguments.length;a--;)"string"==typeof arguments[a]&&arguments[a]?i=arguments[a]:arguments[a]instanceof e&&(n=arguments[a]);
i=i||"info";var r=setInterval(function(){return n=n||t(),null===n?(clearInterval(r),!1):!1===n?!1:void n.animate({boxShadow:"0 0 4px #3e7da7"},500,function(){n.data("eyecatcher",!1),setTimeout(function(){n.animate({boxShadow:"0 0 0 0"},1e3)},500)})},1e3)};return i}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",["lodash","i18n","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/helper/adaptSize","eyecatcher"],function(e,t,i,n,a,r,o,s){var l={},c=function(n,o,s){var c=o.data("serial"),d=n.getChoice(c);
if(!c)throw"empty choice serial";l[c]||(l[c]=0),l[c]++;var u=function(){s.data("serial",c).html(o.html()).addClass("filled"),!n.responseMappingMode&&d.attr("matchMax")&&l[c]>=d.attr("matchMax")&&o.addClass("deactivated")};if(s.siblings("div").hasClass("filled")){var h=r.getContainer(n).find(".result-area"),p=s.parent(),f=[s.siblings("div").data("serial"),c],m=i();h.children().not(p).each(function(){var t=i(this).children(".filled");if(2===t.length){var n=[i(t[0]).data("serial"),i(t[1]).data("serial")];if(2===e.intersection(f,n).length)return m=t,!1}}),0===m.length?(u(),r.triggerResponseChangeEvent(n,{type:"added",$pair:p,choices:f}),r.validateInstructions(n,{choice:o,target:s}),(n.responseMappingMode||0===parseInt(n.attr("maxAssociations")))&&(p.removeClass("incomplete-pair"),h.children(".incomplete-pair").length||(h.append(a({empty:!0})),h.children(".incomplete-pair").fadeIn(600,function(){i(this).show()
})))):(m.css("border","1px solid orange"),s.html(t("identical pair already exists")).css({color:"orange",border:"1px solid orange"}),setTimeout(function(){m.removeAttr("style"),s.empty().removeAttr("style")},2e3))}else u()},d=function(e,t,n){var a=t.data("serial"),o=r.getContainer(e);if(o.find(".choice-area [data-serial="+a+"]").removeClass("deactivated"),l[a]--,t.removeClass("filled").removeData("serial").empty(),!e.swapping&&(r.triggerResponseChangeEvent(e,{type:"removed",$pair:t.parent()}),r.validateInstructions(e,{choice:t}),!t.siblings("div").hasClass("filled")&&(0===parseInt(e.attr("maxAssociations"))||e.responseMappingMode))){var s=t.parent();s.hasClass("incomplete-pair")||(n?s.addClass("removing").fadeOut(500,function(){i(this).remove()
}):s.remove())}},u=function(e,t){var i=e.getChoiceByIdentifier(t);if(!i)throw new Error("cannot find a choice with the identifier : "+t);return r.getContainer(e).find(".choice-area [data-serial="+i.getSerial()+"]")},h=function(e){var t=parseInt(e.attr("maxAssociations")),i=r.getContainer(e).find(".result-area");if(e.responseMappingMode||0===t)i.append(a({empty:!0})),i.children(".incomplete-pair").show();else for(var n=0;t>n;n++)i.append(a())},p=function(t){e.delay(function(){s.height(r.getContainer(t).find(".result-area .target, .choice-area .qti-choice"))},200)},f=function(e){h(e);var n=r.getContainer(e),a=n.find(".choice-area"),o=n.find(".result-area"),s=null,l=function(e){return a.find("[data-serial="+e+"]")
},u=function(t,i){c(e,t,i),p(e)},f=function(){s&&(o.find(".remove-choice").remove(),s.removeClass("active"),n.find(".empty").removeClass("empty"),s=null)},g=function(t){d(e,t,!0),p(e)},v=function(){return s&&s.data("identifier")},b=function(){return s&&!s.data("identifier")};n.on("mousedown.commonRenderer",function(){f()}),a.on("mousedown.commonRenderer",">li",function(t){return t.stopPropagation(),i(this).hasClass("deactivated")?void t.preventDefault():void(b()?(e.swapping=!0,g(s),u(i(this),s),f(),e.swapping=!1):i(this).hasClass("active")?f():(f(),s=i(this),i(this).addClass("active"),o.find(">li>.target").addClass("empty")))}),o.on("mousedown.commonRenderer",">li>div",function(n){if(n.stopPropagation(),v()){var r=i(this),c=s.data("serial"),d=r.data("serial");
d!==c&&(r.hasClass("filled")&&(e.swapping=!0),d&&g(r),u(s,r),e.swapping=!1),f()}else if(b()){var r=i(this),d=r.data("serial"),c=s.data("serial");d!==c&&((r.hasClass("filled")||s.siblings("div")[0]===r[0])&&(e.swapping=!0),g(s),d&&(g(r),u(l(d),s)),u(l(c),r),e.swapping=!1),f()}else if(i(this).data("serial")){var h=i(this).data("serial");s=i(this),s.addClass("active"),o.find(">li>.target").filter(function(){return i(this).data("serial")!==h}).addClass("empty"),a.find(">li:not(.deactivated)").filter(function(){return i(this).data("serial")!==h}).addClass("empty");var p=i("<span>",{"class":"icon-undo remove-choice",title:t("remove")});p.on("mousedown",function(e){e.stopPropagation(),g(s),f()
}),i(this).append(p)}}),e.responseMappingMode||m(e),p(e)},m=function(e){var i=parseInt(e.attr("minAssociations")),n=parseInt(e.attr("maxAssociations"));if(0===i)0===n&&r.appendInstruction(e,t("You may make as many association pairs as you want."));else{0===n&&r.appendInstruction(e,t("The maximum number of association is unlimited."));var a=t("You need to make")+" ";a+=i>1?t("at least")+" "+i+" "+t("association pairs"):t("one association pair"),r.appendInstruction(e,a,function(){y(e).length>=i?this.setLevel("success"):this.reset()})}},g=function(e){r.getContainer(e).find(".result-area>li>div").each(function(){d(e,i(this))})},v=function(t,n){var a=0,o=r.getContainer(t).find(".result-area>li:first");
return n&&"single"===t.getResponseDeclaration().attr("cardinality")&&n.length&&(n=[n]),e.each(n,function(e){if(!o.length)return!1;var n=o.children("div");c(t,u(t,e[0]),i(n[0])),c(t,u(t,e[1]),i(n[1])),a++,o=o.next("li")}),a},b=function(e,t){v(e,o.unserialize(t,e))},y=function(e){var t=[];return r.getContainer(e).find(".result-area>li").each(function(){var n=[];i(this).find("div").each(function(){var t=i(this).data("serial");t&&n.push(e.getChoice(t).id())}),2===n.length&&t.push(n)}),t},C=function(e){return o.serialize(y(e),e)},I=function(e){var t=r.getContainer(e);t.find(".result-area .active").mousedown(),i(document).off(".commonRenderer"),t.find(".choice-area, .result-area").andSelf().off(".commonRenderer"),g(e),r.removeInstructions(e),r.getContainer(e).find(".result-area").empty()
};return{qtiClass:"associateInteraction",template:n,render:f,getContainer:r.getContainer,setResponse:b,getResponse:C,resetResponse:g,destroy:I,renderEmptyPairs:h}}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="common-tlb" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <span class="tlb-button" title="move" data-role="move">\n        <span class="icon-grip"></span>\n    </span>\n</span>'
})}),define("taoQtiItem/qtiCreator/widgets/helpers/movable",["jquery","taoQtiItem/qtiCreator/editor/gridEditor/draggable","tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip"],function(e,t,i){var n={create:function(n){var a,r=n.element.getRelatedItem(),o=n.$container,s=e(i({serial:n.serial}));o.append(s),s.on("mouseenter.qti-widget",function(){a&&a.length||(a=r.data("widget").$container),t.createMovable(o,a)}).on("mouseleave.qti-widget",function(){t.destroy(o)})}};return n}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n        <div class="state-switcher">\n            <span class="selected" data-state="question">'+u((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Question",a):d.call(e,"__","Question",a)))+'</span>\n            <span class="separator"> | </span>\n            <span class="link" data-state="answer">'+u((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Response",a):d.call(e,"__","Response",a)))+"</span>\n        </div>\n        "
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=i.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<div class="tlb-wrapper" style="" data-edit="active" data-for="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'">\n    <span class="tlb-title" title="',(s=i.title)?o=s.call(t,{hash:{},data:a}):(s=t&&t.title,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'">',(s=i.title)?o=s.call(t,{hash:{},data:a}):(s=t&&t.title,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'</span>\n    <div class="tlb">\n        <div class="rgt tlb-button" data-role="delete" title="'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"delete",l):d.call(t,"__","delete",l)))+'">\n            <span class="icon-bin"></span>\n        </div>\n        ',o=i["if"].call(t,t&&t.switcher,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+="\n    </div>\n</div>"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/Widget",["lodash","jquery","taoQtiItem/qtiCreator/widgets/Widget","taoQtiItem/qtiCreator/widgets/helpers/movable","tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction","tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton"],function(e,t,i,n,a,r){function o(e){return e=e.replace(/[A-Z]/g,function(e){return" "+e.toUpperCase()}),e.charAt(0).toUpperCase()+e.substr(1)}var s=i.clone();return s.init=function(e,t,n,a,r){return i.init.call(this,e,t,n,r),this.$responseForm=a,this},s.build=function(e,t,i,n,a){return this.clone().init(e,t,i,n,a)},s.initCreator=function(){i.initCreator.call(this),this.createToolbar({}),this.createOkButton(),this.listenToChoiceStates()
},s.buildContainer=function(){var e=t("<div>",{"data-serial":this.element.serial,"class":"widget-box widget-blockInteraction clearfix","data-qti-class":this.element.qtiClass}),i=this.$original.wrap(e);return this.$container=i.parent(),this},s.createToolbar=function(i){i=e.defaults(i||{},{title:o(this.element.qtiClass)});var n,r=this;return n=t(a({title:i.title,serial:this.element.serial,switcher:!!this.registeredStates.answer})),this.$container.append(n),n.hide(),n.find('[data-role="delete"]').click(function(e){e.stopPropagation(),r.changeState("deleting")}),this.registeredStates.answer&&(n.on("click",".link",function(){var e=t(this),i=e.data("state");e.siblings(".selected").removeClass("selected").addClass("link"),e.removeClass("link").addClass("selected"),r.changeState(i)
}),this.beforeStateInit(function(e,t,i){if(t.getSerial()===r.serial){var a=n.find('.link[data-state="'+i.name+'"]');a.length&&(a.siblings(".selected").removeClass("selected").addClass("link"),a.removeClass("link").addClass("selected"))}})),this},s.createOkButton=function(){var e=this,i=t(r()).on("click.qti-widget",function(t){t.stopPropagation(),e.changeState("sleep")});this.$container.append(i)},s.listenToChoiceStates=function(){var e=this;this.afterStateInit(function(t,i,n){var a=e.getCurrentState();if(i.is("choice")&&e.element.getChoice(i.getSerial())&&a&&n.name!==a.name)switch(n.name){case"choice":e.changeState(n.name)}})},s}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Sleep"],function(e,t){var i=e.extend(t,function(){var e=this.widget;
e.$container.on("click.qti-widget.sleep",function(t){t.stopPropagation(),e.changeState("question")})},function(){var e=this.widget;e.$container.off(".sleep")});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Active",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Active","lodash"],function(e,t,i){var n=function(e,t){var n=!1,a=[];return i.each(e.feedbackRules,function(e){e.feedbackThen&&"modalFeedback"===e.feedbackThen.qtiClass&&a.push(e.feedbackThen),e.feedbackElse&&"modalFeedback"===e.feedbackElse.qtiClass&&a.push(e.feedbackElse)}),i.each(a,function(e){var i=e.getBody().getElement(t);return i?(n=!0,!1):void 0
}),n},a=e.extend(t,function(){var e=this.widget,t=e.$container,i=e.element,a=i.getResponseDeclaration();e.$container.attr("contenteditable",!1),e.beforeStateInit(function(t,r,o){var s=r.getSerial();if("modalFeedback"===r.qtiClass)return!1;if("active"===o.name&&s!==e.serial){var l=i.getComposingElements(),c=n(a,s);l[s]||c||e.changeState("sleep")}},"otherActive"),t.on("mouseenter.active",function(e){e.stopPropagation(),t.parent().trigger("mouseleave.sleep")}).on("mouseleave.active",function(e){e.stopPropagation(),t.parent().trigger("mouseenter.sleep")}).on("click.active",function(e){e.stopPropagation()})},function(){this.widget.offEvents("otherActive")});return a
}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<li class="add-option" data-edit="question" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-role="add-option">\n    <span class="icon-add"></span>\n    ',(o=i.text)?r=o.call(t,{hash:{},data:a}):(o=t&&t.text,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+"\n</li>"})}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice","i18n"],function(e,t,i,n){var a=e.create(t,function(){this.initForm(),this.widget.$form.show(),this.addNewChoiceButton(this.widget)
},function(){this.widget.$form.empty().hide()});return a.prototype.addNewChoiceButton=function(){var e=this.widget,t=e.$container.find(".choice-area"),a=e.element;t.length&&!t.children(".add-option").length&&(t.append(i({serial:this.serial,text:n("Add choice")})),t.children(".add-option").show().on("click.qti-widget",function(e){e.stopPropagation();var t=a.createChoice(),i=$("<li>"),n=t.qtiClass+"."+a.qtiClass,r={interaction:{serial:a.serial,attributes:a.attributes}};$(this).before(i),t.render(r,i,n),t.postRender({ready:function(e){e.changeState("choice")}},n)}))},a.prototype.initForm=function(){e.throwMissingRequiredImplementationError("initForm")},a}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Choice","taoQtiItem/qtiCreator/widgets/helpers/content"],function(e,t,i){var n=e.create(t,function(){var e=this.widget;
e.$container.on("click.choice",function(t){$(t.target).closest(".qti-choice").length||e.changeState("question")}),i.changeInnerWidgetState(this.widget,"sleep")},function(){this.widget.$container.off(".choice")});return n}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var i,n="";return n+='\n        <option value="'+f((i=null==t||t===!1?t:t.key,typeof i===p?i.apply(e):i))+'">'+f(typeof e===p?e.apply(e):e)+"</option>\n        "}function o(e,t){var n,a,r,o="";return o+='\n<hr/>\n\n<div class="panel" data-editx="map">\n    <h3>'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Score range",r):m.call(e,"__","Score range",r)))+'\n    </h3>\n    <div>\n        <label for="lowerBound" class="spinner">Min</label>\n        <input name="lowerBound" value="',(a=i.lowerBound)?n=a.call(e,{hash:{},data:t}):(a=e&&e.lowerBound,n=typeof a===p?a.call(e,{hash:{},data:t}):a),o+=f(n)+'" class="score" type="text" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)" />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Minimal  score for this interaction.",r):m.call(e,"__","Minimal  score for this interaction.",r)))+'</span>\n    </div>\n    <div>\n        <label for="upperBound" class="spinner">Max</label>\n        <input name="upperBound" value="',(a=i.upperBound)?n=a.call(e,{hash:{},data:t}):(a=e&&e.upperBound,n=typeof a===p?a.call(e,{hash:{},data:t}):a),o+=f(n)+'" class="score" type="text" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)" />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Maximal score for this interaction.",r):m.call(e,"__","Maximal score for this interaction.",r)))+'</span>\n    </div>\n</div>\n\n<div class="panel" data-editx="map">\n    <label for="defaultValue" class="spinner">'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Mapping default",r):m.call(e,"__","Mapping default",r)))+'</label>\n    <input name="defaultValue" value="',(a=i.defaultValue)?n=a.call(e,{hash:{},data:t}):(a=e&&e.defaultValue,n=typeof a===p?a.call(e,{hash:{},data:t}):a),o+=f(n)+'" class="score" type="text" data-validate="$notEmpty; $numeric;" data-validate-option="$lazy; $event(type=keyup)" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"The default value from the target set to be used when no explicit mapping for a source value is given.",r):m.call(e,"__","The default value from the target set to be used when no explicit mapping for a source value is given.",r)))+'</span>\n</div>\n\n<div class="panel" data-editx="map">\n    <label>\n        <input name="defineCorrect" type="checkbox" data-role="defineCorrect"',n=i["if"].call(e,e&&e.defineCorrect,{hash:{},inverse:g.noop,fn:g.program(4,s,t),data:t}),(n||0===n)&&(o+=n),o+=' />\n        <span class="icon-checkbox"></span>\n        '+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Define correct response",r):m.call(e,"__","Define correct response",r)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+f((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Define the correct response.",r):m.call(e,"__","Define the correct response.",r)))+"</span>\n</div>\n"
}function s(){return' checked="checked"'}function l(){return'\n<hr/>\n\n<div class="panel feedbackRule-panel"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d,u,h="",p="function",f=this.escapeExpression,m=i.helperMissing,g=this;return h+='<div class="panel">\n    <label for="" class="has-icon">'+f((d=i.__||t&&t.__,u={hash:{},data:a},d?d.call(t,"Response identifier",u):m.call(t,"__","Response identifier",u)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+f((d=i.__||t&&t.__,u={hash:{},data:a},d?d.call(t,'The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',u):m.call(t,"__",'The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',u)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(d=i.identifier)?c=d.call(t,{hash:{},data:a}):(d=t&&t.identifier,c=typeof d===p?d.call(t,{hash:{},data:a}):d),h+=f(c)+'" \n           placeholder="e.g. RESPONSE" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===p?d.call(t,{hash:{},data:a}):d),h+=f(c)+');">\n</div>\n\n<div class="panel">\n    <label for="" class="has-icon">'+f((d=i.__||t&&t.__,u={hash:{},data:a},d?d.call(t,"Response processing",u):m.call(t,"__","Response processing",u)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+f((d=i.__||t&&t.__,u={hash:{},data:a},d?d.call(t,"Select the way the response of your interaction should be processed",u):m.call(t,"__","Select the way the response of your interaction should be processed",u)))+'</div>\n\n    <select name="template" class="select2" data-has-search="false">\n        ',c=i.each.call(t,t&&t.templates,{hash:{},inverse:g.noop,fn:g.program(1,r,a),data:a}),(c||0===c)&&(h+=c),h+="\n    </select>\n</div>\n\n",c=i["if"].call(t,t&&t.editMapping,{hash:{},inverse:g.noop,fn:g.program(3,o,a),data:a}),(c||0===c)&&(h+=c),h+="\n\n",c=i["if"].call(t,t&&t.editFeedbacks,{hash:{},inverse:g.noop,fn:g.program(6,l,a),data:a}),(c||0===c)&&(h+=c),h+="\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement",["lodash","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiItem/core/Element","tooltipster"],function(e,t,i){var n={required:"this is required",invalid:"the score format is not numeric"},a={init:function(e){t.initWidget(e.$form)},syncMaxChoices:function(t,n,a,r){n=n||"minChoices",a=a||"maxChoices",r=r||e.size;var o=t.$form.find("input[name="+n+"]"),s=t.$form.find("input[name="+a+"]"),l=function(){var e={max:r(t.element.getChoices())};o.incrementer("options",e).keyup(),s.incrementer("options",e).keyup()};t.on("choiceCreated",function(e){e.interaction.serial===t.element.serial&&l()
}).on("deleted",function(e){e.parent.serial===t.element.serial&&i.isA(e.element,"choice")&&l()})},setScore:function(t,i){i=e.defaults(i||{},{required:!1,empty:function(){},set:function(){},key:function(){return $(this).attr("name")},tooltipContent:n}),t.hasClass("tooltipstered")||t.tooltipster({theme:"tao-error-tooltip",content:i.tooltipContent.invalid,delay:350,trigger:"custom"});var a=t.val(),r=parseFloat(a),o=i.key.call(t[0]);""===a?i.required?(t.tooltipster("content",i.tooltipContent.required),t.tooltipster("show")):(t.tooltipster("hide"),i.empty(o)):isNaN(r)?(t.tooltipster("content",i.tooltipContent.invalid),t.tooltipster("show")):(t.tooltipster("hide"),i.set(o,r))
}};return a}),define("tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t,n){var a,r,s,l="";return l+='\n            <option value="',(r=i.name)?a=r.call(e,{hash:{},data:t}):(r=e&&e.name,a=typeof r===f?r.call(e,{hash:{},data:t}):r),l+=m(a)+'" ',r=i.equal||e&&e.equal,s={hash:{},inverse:g.noop,fn:g.program(2,o,t),data:t},a=r?r.call(e,e&&e.name,n&&n.condition,s):v.call(e,"equal",e&&e.name,n&&n.condition,s),(a||0===a)&&(l+=a),l+=">",(r=i.label)?a=r.call(e,{hash:{},data:t}):(r=e&&e.label,a=typeof r===f?r.call(e,{hash:{},data:t}):r),l+=m(a)+"</option>\n            "}function o(){return'selected="selected"'
}function s(){return'style="display:none"'}function l(e,t){var n,a,r="";return r+='\n    <a title="'+m((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Add else feedback",a):v.call(e,"__","Add else feedback",a)))+'" href="#" class="adder feedbackRule-add-else">else</a>\n    '}function c(e,t){var n,a,r="";return r+='\n     <div class="feedbackRule-then-else">\n            <span class="feedbackRule-desc i">else</span>\n            <button class="btn-info small" type="button" data-feedback="else">'+m((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Feedback",a):v.call(e,"__","Feedback",a)))+'</button>\n            <span class="feedbackRule-button-delete icon-bin" title="'+m((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Delete else statement",a):v.call(e,"__","Delete else statement",a)))+'" data-role="else"></span>\n        </div>\n    '
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u,h,p="",f="function",m=this.escapeExpression,g=this,v=i.helperMissing;return p+='<div class="feedbackRule-container" data-serial="',(u=i.serial)?d=u.call(t,{hash:{},data:a}):(u=t&&t.serial,d=typeof u===f?u.call(t,{hash:{},data:a}):u),p+=m(d)+'">\n    <div class="feedbackRule-rule-if">\n        <span class="feedbackRule-desc i">if</span>\n        <select class="feedbackRule-condition select2" data-has-search="false">\n            ',d=i.each.call(t,t&&t.availableConditions,{hash:{},inverse:g.noop,fn:g.programWithDepth(1,r,a,t),data:a}),(d||0===d)&&(p+=d),p+='\n        </select>\n        <input class="feedbackRule-compared-value score" type="text" value="',(u=i.comparedValue)?d=u.call(t,{hash:{},data:a}):(u=t&&t.comparedValue,d=typeof u===f?u.call(t,{hash:{},data:a}):u),p+=m(d)+'" ',d=i["if"].call(t,t&&t.hideScore,{hash:{},inverse:g.noop,fn:g.program(4,s,a),data:a}),(d||0===d)&&(p+=d),p+='/>\n    </div>\n    <div class="feedbackRule-then-else">\n        <span class="feedbackRule-desc i">then</span>\n        <button class="btn-info small" type="button" data-feedback="then">'+m((u=i.__||t&&t.__,h={hash:{},data:a},u?u.call(t,"Feedback",h):v.call(t,"__","Feedback",h)))+"</button>\n    </div>\n    ",d=i["if"].call(t,t&&t.addElse,{hash:{},inverse:g.noop,fn:g.program(6,l,a),data:a}),(d||0===d)&&(p+=d),p+="\n    ",d=i["if"].call(t,t&&t.feedbackElse,{hash:{},inverse:g.noop,fn:g.program(8,c,a),data:a}),(d||0===d)&&(p+=d),p+='\n    <span class="feedbackRule-button-delete icon-bin" title="'+m((u=i.__||t&&t.__,h={hash:{},data:a},u?u.call(t,"Delete this modal feedback",h):v.call(t,"__","Delete this modal feedback",h)))+'" data-role="rule"></span>\n</div>'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l=i.helperMissing,c=this.escapeExpression;return s+='<h3 class="has-icon">'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"Modal Feedbacks",o):l.call(t,"__","Modal Feedbacks",o)))+'</h3>\n<span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n<span class="tooltip-content">'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"Modal feedback is shown to the candidate directly following response processing.",o):l.call(t,"__","Modal feedback is shown to the candidate directly following response processing.",o)))+'</span>\n<div class="feedbackRules">\n    <p><i>'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"None defined yet.",o):l.call(t,"__","None defined yet.",o)))+'</i></p>\n</div>\n<a href="#" class="adder feedbackRule-add">'+c((r=i.__||t&&t.__,o={hash:{},data:a},r?r.call(t,"Add a modal feedback",o):l.call(t,"__","Add a modal feedback",o)))+"</a>"
})}),define("taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule",["lodash","jquery","i18n","ui/selecter","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule","tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel"],function(e,t,i,n,a,r,o){var s=[{name:"correct",label:i("correct")},{name:"incorrect",label:i("incorrect")},{name:"lt",label:"<"},{name:"lte",label:"<="},{name:"equal",label:"="},{name:"gte",label:">="},{name:"gt",label:">"}],l=function(e){var i,a,o=e.feedbackElse,a=!o;o&&(i=o.serial);var l=r({availableConditions:s,serial:e.serial,condition:e.condition,comparedValue:e.comparedValue,feedbackThen:e.feedbackThen.serial,feedbackElse:i,addElse:a,hideScore:"correct"===e.condition||"incorrect"===e.condition}),c=t(l);
return n(c),c},c=function(e,i){var n=e.find(".feedbackRules");e.on("click",".feedbackRule-add",function(e){e.preventDefault();var t=i.createFeedbackRule(),a=n.children(".feedbackRule-container:last");a.length?a.after(l(t)):n.html(l(t))}).on("click",".feedbackRule-add-else",function(e){e.preventDefault();{var n=t(this).parents(".feedbackRule-container"),a=n.data("serial"),r=i.getFeedbackRule(a);i.createFeedbackElse(r)}n.replaceWith(l(r))}).on("click",".feedbackRule-button-delete",function(){var e=t(this),n=e.parents(".feedbackRule-container"),a=n.data("serial"),r=i.getFeedbackRule(a);switch(e.data("role")){case"rule":i.deleteFeedbackRule(r),n.remove();break;case"else":i.deleteFeedbackElse(r),n.replaceWith(l(r))
}}).on("change",".feedbackRule-condition",function(){var e=t(this),n=e.val(),r=e.siblings(".feedbackRule-compared-value"),o=i.getFeedbackRule(t(this).parents(".feedbackRule-container").data("serial"));("correct"===o.condition||"incorrect"===o.condition)&&r.val("0"),"correct"===n||"incorrect"===n?r.hide():r.show(),a.setScore(r,{required:!0,set:function(e,t){i.setCondition(o,n,t)}})}).on("keyup",".feedbackRule-compared-value",function(){var e=i.getFeedbackRule(t(this).parents(".feedbackRule-container").data("serial"));a.setScore(t(this),{required:!0,set:function(t,n){i.setCondition(e,e.condition,n)}})}).on("click","[data-feedback]",function(){var e,n,a=t(this),r=i.getFeedbackRule(a.parents(".feedbackRule-container").data("serial"));
switch(a.data("feedback")){case"then":e=r.feedbackThen;break;case"else":e=r.feedbackElse}e&&(n=u(e),n.changeState("active"))})},d={},u=function(e){var i=t("#modalFeedbacks");return d[e.serial]||(i.append(e.render()),d[e.serial]=e.postRender()),d[e.serial]};return{initFeedbacksPanel:function(t,i){t.html(o());var n=t.find(".feedbackRules"),a=i.getFeedbackRules();a&&e.size(a)&&(n.empty(),e.each(a,function(e){n.append(l(e))})),c(t,i)},renderFeedbackRule:l}}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState",["jquery","lodash","taoQtiItem/qtiItem/helper/response","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm","taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule"],function(e,t,i,n,a,r){var o={mappingAttr:function(e,t,i){""===t?e.removeMappingAttribute(i):e.setMappingAttribute(i,t)
}},s={forward:function(e){var t=e.element.getResponseDeclaration();e.changeState(i.isUsingTemplate(t,"MATCH_CORRECT")?"correct":i.isUsingTemplate(t,"MAP_RESPONSE")||i.isUsingTemplate(t,"MAP_RESPONSE_POINT")?"map":"custom")},defineCorrect:function(e,n){var a=!1,r=i.getTemplateNameFromUri(e.template),o=e.getCorrect();return void 0===n?"MAP_RESPONSE"===r||"MAP_RESPONSE_POINT"===r?void 0!==e.data("defineCorrect")?a=!!e.data("defineCorrect"):(a=o&&t.size(o),e.data("defineCorrect",a)):"MATCH_CORRECT"===r&&(a=!0):(n||(e.correctResponse=[]),e.data("defineCorrect",n)),a},initResponseForm:function(c){var d=c.element,u=d.getRelatedItem(),h=u.responseProcessing,p=d.getResponseDeclaration(),f=i.getTemplateNameFromUri(p.template),m=t.indexOf(["MAP_RESPONSE","MAP_RESPONSE_POINT"],f)>=0,g=s.defineCorrect(p);
if(!f){if("custom"!==h.processingType)throw"invalid response template";f="CUSTOM"}c.$responseForm.html(a({identifier:p.id(),serial:p.getSerial(),defineCorrect:g,editMapping:m,editFeedbacks:"CUSTOM"!==f,template:f,templates:l(d),defaultValue:p.getMappingAttribute("defaultValue"),lowerBound:p.getMappingAttribute("lowerBound"),upperBound:p.getMappingAttribute("upperBound")})),c.$responseForm.find("select[name=template]").val(f);var v=function(e){var t=c.$container.find("[data-edit=correct]");e?t.show():t.hide()};m&&v(g),n.setChangeCallbacks(c.$responseForm,p,{identifier:function(e,t){e.id(t),d.attr("responseIdentifier",t)},defaultValue:o.mappingAttr,lowerBound:o.mappingAttr,upperBound:o.mappingAttr,template:function(e,t){h.setProcessingType("templateDriven"),e.setTemplate(t),s.forward(c),s.initResponseForm(c)
},defineCorrect:function(e,t){v(t),s.defineCorrect(e,!!t)}}),r.initFeedbacksPanel(e(".feedbackRule-panel",c.$responseForm),p),n.initWidget(c.$responseForm)},isCorrectDefined:function(e){var i=e.element.getResponseDeclaration();return!!t.size(i.getCorrect())}},l=function(e){var t={CUSTOM:"custom",MATCH_CORRECT:"match correct",MAP_RESPONSE:"map response",MAP_RESPONSE_POINT:"map response"},i=e.getRelatedItem().responseProcessing;switch(e.qtiClass){case"orderInteraction":case"graphicOrderInteraction":case"extendedTextInteraction":delete t.MAP_RESPONSE,delete t.MAP_RESPONSE_POINT;break;case"selectPointInteraction":case"extendedTextInteraction":delete t.MATCH_CORRECT,delete t.MAP_RESPONSE;
break;case"sliderInteraction":delete t.MAP_RESPONSE_POINT,delete t.MAP_RESPONSE;break;default:delete t.MAP_RESPONSE_POINT}return"templateDriven"===i.processingType&&delete t.CUSTOM,t};return s}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/helpers/content"],function(e,t,i,n){var a=e.create(t,function(){this.widget.$container.addClass("runtime"),this.initResponseForm(),this.widget.$responseForm.show(),n.changeInnerWidgetState(this.widget,"inactive")},function(){this.widget.$container.removeClass("runtime"),this.widget.$responseForm.empty().hide(),n.changeInnerWidgetState(this.widget,"sleep")
});return a.prototype.initResponseForm=function(){var e=this.widget;i.initResponseForm(e),e.on("responseTemplateChange",function(){i.forward(e)})},a}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct"],function(e,t){var i=e.create(t,function(){},function(){});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Map",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.create(t,function(){var e=this.widget.$container.find('[data-edit="correct"]');
i.isCorrectDefined(this.widget)?e.show():e.hide()},function(){this.widget.$container.find('[data-edit="correct"]').hide()});return n}),define("taoQtiItem/qtiCreator/widgets/states/Custom",["taoQtiItem/qtiCreator/widgets/states/factory"],function(e){return e.create("custom",["answer","active"],function(){throw new Error('state "custom" prototype init method must be implemented')},function(){throw new Error('state "custom" prototype exit method must be implemented')})}),define("taoQtiItem/qtiCreator/widgets/interactions/states/Custom",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Custom","tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay","i18n"],function(e,t,i,n){var a=e.create(t,function(){this.widget.$container.append(i({message:n("Custom Response Processing Mode")}));
this.widget.$container.find("[data-edit=map], [data-edit=correct]").hide()},function(){this.widget.$container.children(".overlay").remove()});return a}),define("taoQtiItem/qtiCreator/widgets/interactions/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/states","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/states/Active","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/interactions/states/Choice","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/states/Map","taoQtiItem/qtiCreator/widgets/interactions/states/Custom"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content","tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger","i18n"],function(e,t,i,n,a,r){var o=e.extend(t,function(){this.buildPromptEditor()},function(){this.destroyPromptEditor()});return o.prototype.buildPromptEditor=function(){var e=this.widget,t=e.$container.find(".qti-prompt-container"),o=t.find(".qti-prompt"),s=e.element.prompt.getBody();if(t.attr("data-html-editable-container",!0),o.attr("data-html-editable",!0),!i.hasEditor(t)){var l=$(a({serial:e.serial,state:"question"}));
t.append(l),l.show(),i.buildEditor(t,{placeholder:r("define prompt"),change:n.getChangeCallback(s),data:{container:s,widget:e}})}},o.prototype.destroyPromptEditor=function(){var e=this.widget.$container.find(".qti-prompt-container");e.find(".mini-tlb").remove(),i.destroyEditor(e)},o}),define("taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/states","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question"],function(e,t){return e.createBundle(t,arguments)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=this,u=i.helperMissing,h=this.escapeExpression,p="function";return c+='<div class="panel">\n    <label>\n        <input name="shuffle" type="checkbox" ',o=i["if"].call(t,t&&t.shuffle,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Shuffle choices",l):u.call(t,"__","Shuffle choices",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be âshuffledâ of âfixedâ individually.",l):u.call(t,"__","If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be âshuffledâ of âfixedâ individually.",l)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <h3>'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Number of associations",l):u.call(t,"__","Number of associations",l)))+'</h3>\n\n    <div>\n        <label for="minAssociations" class="spinner">Min</label>\n        <input name="minAssociations" value="',(s=i.minAssociations)?o=s.call(t,{hash:{},data:a}):(s=t&&t.minAssociations,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" data-increment="1" data-min="0" data-max="100" type="text" />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",l):u.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",l)))+'\n        </span>\n    </div>\n    <div>\n        <label for="maxAssociations" class="spinner">Max</label>\n        <input name="maxAssociations" value="',(s=i.maxAssociations)?o=s.call(t,{hash:{},data:a}):(s=t&&t.maxAssociations,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" data-increment="1" data-min="0" data-max="100" type="text" />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The maximum number of choices that the candidate is allowed to select to form a valid response.",l):u.call(t,"__","The maximum number of choices that the candidate is allowed to select to form a valid response.",l)))+"\n        </span>\n    </div>\n</div>"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper",["taoQtiItem/qtiCreator/helper/adaptSize","lodash"],function(e,t){return{adaptSize:function(i){t.defer(function(){e.height(i.$container.find(".add-option, .result-area .target, .choice-area .qti-choice"))})}}}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper"],function(e,t,i,n,a){var r=e.extend(t);
return r.prototype.initForm=function(){var e=this.widget,t=e.$form,r=e.element;t.html(n({shuffle:!!r.attr("shuffle"),minAssociations:parseInt(r.attr("minAssociations")),maxAssociations:parseInt(r.attr("maxAssociations"))})),i.initWidget(t);var o=i.getMinMaxAttributeCallbacks(this.widget.$form,"minAssociations","maxAssociations");o.shuffle=i.getAttributeChangeCallback(),i.setChangeCallbacks(t,r,o),a.adaptSize(e),e.on("choiceCreated",function(){a.adaptSize(e)})},r}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Choice","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper"],function(e,t,i){var n=e.extend(t,function(){var e=this.widget;
e.on("containerBodyChange contentChange choiceCreated",function(){i.adaptSize(e)})},function(){});return n}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)},function(){});return n}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget",["taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper","taoQtiItem/qtiCommonRenderer/helpers/Helper","lodash","i18n"],function(e,t,i,n,a){var r={create:function(n,r){var o=n.element;
e.destroy(o),r?(i.appendInstruction(n.element,a("Please define association pairs and their scores below.")),o.responseMappingMode=!0):i.appendInstruction(n.element,a("Please define the correct association pairs below.")),e.render(o),t.adaptSize(n)},setResponse:function(i,n){var a=i.getResponseDeclaration();e.setResponse(i,r.formatResponse(n,a.attr("cardinality"))),t.adaptSize(i.data("widget"))},destroy:function(i){var n=i.element;e.destroy(n),delete n.responseMappingMode,e.renderEmptyPairs(n),t.adaptSize(i)},getResponseSummary:function(e){var t=[],i=n.values(e.getCorrect()),a=e.getMapEntries();return n.each(i,function(e){var i=e.split(" ").sort(),n=i.join(" ");
t[n]={pair:i,correct:!0,score:void 0}}),n.forIn(a,function(e,i){var n=i.split(" ").sort(),a=n.join(" ");t[a]?t[a].score=e:t[a]={pair:n,correct:!1,score:e}}),t},formatResponse:function(e,t){var i;return i="single"===t?{base:{pair:[]}}:{list:{pair:[]}},n.each(e,function(e){var n=e.split(" ");"single"===t?i.base.pair=n:i.list.pair.push(n)}),i},unformatResponse:function(e){var t=[];return e.list&&e.list.pair?n.each(e.list.pair,function(e){t.push(e.join(" "))}):e.base&&e.base.pair&&t.push(e.base.pair.join(" ")),t}};return r}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget","lodash"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget.element,t=e.getResponseDeclaration();
i.create(this.widget,!1),i.setResponse(e,n.values(t.getCorrect())),this.widget.$container.on("responseChange.qti-widget",function(e,n){t.setCorrect(i.unformatResponse(n.response))})},function(){this.widget.$container.off("responseChange.qti-widget"),i.destroy(this.widget)});return a}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="mini-tlb" data-edit="answer" data-for="',(s=i.choiceSerial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choiceSerial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    <label class="tlb-button right" title="This answer is correct" data-edit="correct">\n        <input \n            type="checkbox" \n            data-role="correct"\n            name="correct_',(s=i.interactionSerial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.interactionSerial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'[]" \n            value="',(s=i.choiceIdentifier)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choiceIdentifier,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" \n            ',o=i["if"].call(t,t&&t.correct,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='/>\n        <span class="icon-checkbox"></span>\n    </label>\n    <label class="tlb-button right" title="Score of this answer" data-edit="map">\n        <input value="',(s=i.score)?o=s.call(t,{hash:{},data:a}):(s=t&&t.score,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" type="text" data-role="score" data-for="',(s=i.choiceIdentifier)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choiceIdentifier,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" name="score" class="score" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)" />\n    </label>\n</div>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget","lodash","tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer"],function(e,t,i,n,a){var r=e.create(t,function(){var e=this.widget,t=e.element,a=t.getResponseDeclaration();i.create(e,!0),this.bindResponseChangeListener(),i.setResponse(t,n.keys(i.getResponseSummary(a)))},function(){this.widget.$container.off("responseChange.qti-widget"),i.destroy(this.widget),this.widget.$container.find(".mini-tlb").remove()
});return r.prototype.bindResponseChangeListener=function(){var e=this.widget,t=e.element,n=t.getResponseDeclaration(),r=0,o=function(){var t=[];$('input[name="correct_'+e.serial+'[]"]:checked').each(function(){t.push($(this).data("pairIdentifier"))}),n.setCorrect(t)};e.$container.on("responseChange.qti-widget",function(e,s,l){if("added"===l.type){var c=[],d=[],u=l.$pair.children(".filled");if(2===u.length){d=i.getResponseSummary(n),u.each(function(){var e=$(this).data("serial"),i=t.getChoice(e);c.push(i.id())}),c.sort();var h=c.join(" "),p=l.$pair.children(".mini-tlb");p.length||(l.$pair.append(a({interactionSerial:t.getSerial(),choiceSerial:"n/a",choiceIdentifier:"n/a"})),p=l.$pair.children(".mini-tlb")),p.show(),p.data("pairIdentifier",h);
var f=p.find("[data-role=correct]").data("pairIdentifier",h);d[h]&&d[h].correct?f.prop("checked",!0):f.prop("checked",!1);var m=p.find("[data-role=score]").data("pairIdentifier",h);m.val(d[h]&&d[h].score?d[h].score:r)}}else p=l.$pair.children(".mini-tlb"),p.hide(),n.removeMapEntry(p.data("pairIdentifier")),p.removeData("pairIdentifier"),p.find("[data-role=correct]").prop("checked",!1).removeData("pairIdentifier"),p.find("[data-role=score]").val(r).removeData("pairIdentifier"),o()}),e.$container.find(".result-area").on("change","[data-role=correct]",o).on("keyup","[data-role=score]",function(){var e=$(this);n.setMapEntry(e.data("pairIdentifier"),e.val())})},r}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper"],function(e,t,i){var n=e.clone();return n.initCreator=function(){this.registerStates(t),e.initCreator.call(this),i.adaptSize(this)},n}),define("taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return t.renderEmptyPairs(e),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===h?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(){return" horizontal"}function s(e){var t;return t=typeof e===h?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h="function",p=this.escapeExpression,f=this,m=i.blockHelperMissing;
return u+='<div class="qti-interaction qti-blockInteraction qti-choiceInteraction" data-serial="',(c=i.serial)?l=c.call(t,{hash:{},data:a}):(c=t&&t.serial,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'" data-qti-class="choiceInteraction">\n  ',l=i["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='\n  <div class="instruction-container"></div>\n  <ol class="plain block-listing solid choice-area',l=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+='">\n      ',d={hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a},(c=i.choices)?l=c.call(t,d):(c=t&&t.choices,l=typeof c===h?c.call(t,d):c),i.choices||(l=m.call(t,l,{hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a})),(l||0===l)&&(u+=l),u+='\n  </ol>\n  <div class="notification-container"></div>\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",["lodash","jquery","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r){var o=function(e){var i=a.getContainer(e);i.off(".commonRenderer"),i.on("click.commonRenderer",".qti-choice",function(i){i.preventDefault(),i.stopPropagation();var n=t(this),r=n.find("input:radio").not("[disabled]").not(".disabled"),o=n.find("input:checkbox").not("[disabled]").not(".disabled");r.length&&(r.not(":checked").prop("checked",!0),r.trigger("change")),o.length&&(o.prop("checked",!o.prop("checked")),o.trigger("change")),a.validateInstructions(e,{choice:n}),a.triggerResponseChangeEvent(e)
})},s=function(e){o(e),l(e)},l=function(t){var n=t.attr("minChoices"),r=t.attr("maxChoices"),o=e.size(t.getChoices()),s=!1;if(r>1&&o>r){var l=function(e){var i=e.find(".real-label > input"),n=e.css("color","#BA122B"),r=e.find(".real-label > span").css("color","#BA122B").addClass("cross error");setTimeout(function(){i.prop("checked",!1),n.removeAttr("style"),r.removeAttr("style").removeClass("cross"),a.triggerResponseChangeEvent(t)},150)};if(r===n){s=!0;var c=i("You must select exactly")+" "+r+" "+i("choices");a.appendInstruction(t,c,function(e){u(t).length>=r?(this.setLevel("success"),this.checkState("fulfilled")&&this.update({level:"warning",message:i("Maximum choices reached"),timeout:2e3,start:function(){l(e.choice)
},stop:function(){this.update({level:"success",message:c})}}),this.setState("fulfilled")):this.reset()})}else r>n&&a.appendInstruction(t,i("You can select maximum")+" "+r+" "+i("choices"),function(e){u(t).length>=r?(this.setMessage(i("Maximum choices reached")),this.checkState("fulfilled")&&this.update({level:"warning",timeout:2e3,start:function(){l(e.choice)},stop:function(){this.setLevel("info")}}),this.setState("fulfilled")):this.reset()})}!s&&n>0&&o>n&&a.appendInstruction(t,i("You must select at least")+" "+n+" "+i("choices"),function(){u(t).length>=n?this.setLevel("success"):this.reset()})},c=function(e){a.getContainer(e).find(".real-label > input").prop("checked",!1)
},d=function(t,i){var n=a.getContainer(t);try{e.each(r.unserialize(i,t),function(e){n.find(".real-label > input[value="+e+"]").prop("checked",!0)}),a.validateInstructions(t)}catch(o){throw new Error("wrong response format in argument : "+o)}},u=function(e){var i=[];return a.getContainer(e).find(".real-label > input[name=response-"+e.getSerial()+"]:checked").each(function(){i.push(t(this).val())}),i},h=function(e){return r.serialize(u(e),e)},p=function(t,i){return e.merge(i||{},{horizontal:"horizontal"===t.attr("orientation")})},f=function(e){t(document).off(".commonRenderer"),a.getContainer(e).off(".commonRenderer"),c(e),a.removeInstructions(e)};return{qtiClass:"choiceInteraction",template:n,getData:p,render:s,getContainer:a.getContainer,setResponse:d,getResponse:h,resetResponse:c,destroy:f}
}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=this,u=i.helperMissing,h=this.escapeExpression,p="function";return c+='<div class="panel">\n    <label>\n        <input name="shuffle" type="checkbox" ',o=i["if"].call(t,t&&t.shuffle,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Shuffle choices",l):u.call(t,"__","Shuffle choices",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,'If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be "shuffled" of "fixed" individually.',l):u.call(t,"__",'If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be "shuffled" of "fixed" individually.',l)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <h3>'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Allowed number of choices",l):u.call(t,"__","Allowed number of choices",l)))+'</h3>\n\n    <div>\n        <label for="minChoices" class="spinner">Min</label>\n        <input name="minChoices" value="',(s=i.minChoices)?o=s.call(t,{hash:{},data:a}):(s=t&&t.minChoices,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" data-increment="1" data-min="0" data-max="',(s=i.choicesCount)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choicesCount,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" type="text" />\n\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",l):u.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",l)))+'\n        </span>\n    </div>\n    <div>\n        <label for="maxChoices" class="spinner">Max</label>\n        <input name="maxChoices" value="',(s=i.maxChoices)?o=s.call(t,{hash:{},data:a}):(s=t&&t.maxChoices,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" data-increment="1" data-min="0" data-max="',(s=i.choicesCount)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choicesCount,o=typeof s===p?s.call(t,{hash:{},data:a}):s),c+=h(o)+'" type="text" />\n\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <span class="tooltip-content">\n            '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The maximum number of choices that the candidate is allowed to select to form a valid response.",l):u.call(t,"__","The maximum number of choices that the candidate is allowed to select to form a valid response.",l)))+"\n        </span>\n    </div>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice","lodash"],function(e,t,i,n,a,r){var o=e.extend(t);return o.prototype.initForm=function(e){var t=this.widget,o=t.$form,s=t.element;o.html(a({shuffle:!!s.attr("shuffle"),maxChoices:parseInt(s.attr("maxChoices")),minChoices:parseInt(s.attr("minChoices")),choicesCount:r.size(t.element.getChoices())})),i.initWidget(o);
var l=i.getMinMaxAttributeCallbacks(this.widget.$form,"minChoices","maxChoices",e);l.shuffle=i.getAttributeChangeCallback(),i.setChangeCallbacks(o,s,l),n.syncMaxChoices(t),t.on("attributeChange",function(e){var i=t.$container.find(".real-label > span");e.element.serial===s.serial&&"maxChoices"===e.key&&(1===parseInt(e.value)?i.removeClass("icon-checkbox").addClass("icon-radio"):i.removeClass("icon-radio").addClass("icon-checkbox"))})},o}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)
},function(){});return n}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="mini-tlb" data-edit="answer" data-for="',(o=i.choiceSerial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choiceSerial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    <label class="tlb-button right" title="Score of this answer" data-edit="map">\n        <input value="',(o=i.score)?r=o.call(t,{hash:{},data:a}):(o=t&&t.score,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" \n       title="Score of this answer" \n       type="text" \n       data-for="',(o=i.choiceIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choiceIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" \n       name="score" \n       class="score" \n       placeholder = "',(o=i.placeholder)?r=o.call(t,{hash:{},data:a}):(o=t&&t.placeholder,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'"\n       data-validate="$numeric" \n       data-validate-option="$allowEmpty; $event(type=keyup)" />\n    </label>\n</div>'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'style="display:block;"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c=this,d="function",u=this.escapeExpression;return l+='<div class="mini-tlb-label" data-edit="answer" ',o=i["if"].call(t,t&&t.show,{hash:{},inverse:c.noop,fn:c.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='>\n    <label class="right">',(s=i.label)?o=s.call(t,{hash:{},data:a}):(s=t&&t.label,o=typeof s===d?s.call(t,{hash:{},data:a}):s),l+=u(o)+"</label>\n</div>"})}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget",["taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score","tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label","lodash","i18n","polyfill/placeholders"],function(e,t,i,n,a,r,o,s,l){var c=function(e){1===e.element.attr("maxChoices")?e.$container.find(".real-label > :checkbox").replaceWith(function(){var e=$(this);
return $("<input>",{type:"radio",value:e.attr("value"),name:e.attr("name")})}):e.$container.find(".real-label > :radio").replaceWith(function(){var e=$(this);return $("<input>",{type:"checkbox",value:e.attr("value"),name:e.attr("name")})})},d={create:function(i,n){var a=i.element;e.destroy(a),c(i),n?(t.appendInstruction(i.element,l("Please define the correct response and the score below.")),a.data("responseMappingMode",!0),d.createScoreWidgets(i),d.createCorrectWidgets(i)):(t.appendInstruction(i.element,l("Please define the correct response below.")),d.createCorrectWidgets(i)),e.render(a)},setResponse:function(t,n){e.setResponse(t,i.serialize(s.values(n),t))},destroy:function(t){var i=t.element;
e.destroy(i),i.removeData("responseMappingMode"),t.$container.off("responseChange.qti-widget"),t.$container.find(".real-label > input").attr("disabled","disabled"),t.$container.find(".mini-tlb-label[data-edit=answer], .mini-tlb[data-edit=answer]").remove()},createScoreWidgets:function(e){var t=e.$container,i=e.element,a=i.getResponseDeclaration(),s=a.getMapEntries(),c=a.getMappingAttribute("defaultValue"),d=$(o({label:l("score"),show:!0})).css({right:3,left:"auto"});t.find(".qti-choice:first .pseudo-label-box").append(d),t.find(".qti-choice").each(function(){var e,t=$(this),n=t.data("identifier"),a=t.data("serial");e=$(r({serial:i.getSerial(),choiceSerial:a,choiceIdentifier:n,score:s[n]?s[n]:"",placeholder:c})),t.find(".pseudo-label-box").append(e),e.show().on("click",function(e){e.stopPropagation(),e.preventDefault()
})});var u=t.find(".score");e.on("mappingAttributeChange",function(e){"defaultValue"===e.key&&u.attr("placeholder",e.value)}),n.setChangeCallbacks(t,a,{score:function(e,t){var i=$(this).data("for");""===t?e.removeMapEntry(i):e.setMapEntry(i,t,!0)}})},createCorrectWidgets:function(e){var t=e.$container,n=e.element,r=n.getResponseDeclaration(),s=t.find(".real-label > input");t.find(".qti-choice:first .pseudo-label-box").append(o({label:l("correct"),show:!1})),t.on("responseChange.qti-widget",function(e,t){r.setCorrect(i.unserialize(t.response,n))});var c=function(e){e?s.removeAttr("disabled"):s.attr("disabled","disabled").prop("checked",!1)};c(a.defineCorrect(r)),e.on("metaChange",function(e){e.element.serial===r.serial&&"defineCorrect"===e.key&&c(e.value)
})},formatResponse:function(e){return i.serialize(s.values(e))},unformatResponse:function(e){return i.unserialize(e)}};return d}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget","lodash"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget,t=e.element,a=t.getResponseDeclaration();i.create(e),i.setResponse(t,n.values(a.getCorrect()))},function(){i.destroy(this.widget)});return a}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget","lodash"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget,t=e.element,a=t.getResponseDeclaration();
i.create(e,!0),i.setResponse(t,n.values(a.getCorrect()))},function(){i.destroy(this.widget)});return a}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)
},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<div class="qti-interaction qti-customInteraction" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n    ',(o=i.markup)?r=o.call(t,{hash:{},data:a}):(o=t&&t.markup,r=typeof o===l?o.call(t,{hash:{},data:a}):o),(r||0===r)&&(s+=r),s+="\n</div>"})}),define("taoQtiItem/runtime/qtiCustomInteractionContext",[],function(){window._pciHooks=window._pciHooks||{};
var e={register:function(e){window._pciHooks[e.getTypeIdentifier()]=e},notifyReady:function(){},notifyDone:function(){},createPciInstance:function(e){if(window._pciHooks[e]){var t={},i=window._pciHooks[e];for(var n in i)t[n]="function"==typeof i[n]?i[n]:null!==i[n]&&"object"==typeof i[n]?i[n].constructor():i[n];return t}throw"no portable custom interaction hook found with the id "+e}};return e}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/CustomInteraction.amd",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/runtime/qtiCustomInteractionContext","taoQtiItem/qtiItem/helper/util","context"],function(e,t,i,n,a,r){var o=function(e){window.require.config({context:"portableCustomInteraction",paths:e})
},s=function(e,t){var i=window.require.config({context:"portableCustomInteraction"});i(e,t)},l=function(e){var t,i=e.data("pci")||void 0;if(!i){if(t=e.typeIdentifier,i=n.createPciInstance(t),!i)throw"no custom interaction hook found for the type "+t;e.data("pci",i),i._taoCustomInteraction=e}return i},c=function(e,t){t=t||{};var n=r.root_url+"taoQtiItem/views/js/portableSharedLibraries/",c=e.attr("responseIdentifier"),d=i.getContainer(e).children();o({css:r.root_url+"tao/views/js/lib/require-css/css",qtiCustomInteractionContext:r.root_url+"taoQtiItem/views/js/runtime/qtiCustomInteractionContext",IMSGlobal:n+"IMSGlobal",OAT:n+"OAT"});var u={},h={base:null},p=e.properties,f=a.fullpath(e.entryPoint,this.getOption("baseUrl"));
s([f],function(){var t=l(e);t&&(t.initialize(c,d[0],p),t.setSerializedState(u),t.setResponse(h))})},d=function(e,t){l(e).setResponse(t)},u=function(e){return l(e).getResponse()},h=function(e){l(e).resetResponse()},p=function(e){l(e).destroy()},f=function(e,t){l(e).setSerializedState(t)},m=function(e){return l(e).getSerializedState()};return{qtiClass:"customInteraction",template:t,render:c,getContainer:i.getContainer,setResponse:d,getResponse:u,resetResponse:h,destroy:p,getSerializedState:m,setSerializedState:f}}),define("taoQtiItem/qtiCreator/renderers/interactions/CustomInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/CustomInteraction.amd","taoQtiItem/qtiCreator/editor/customInteractionRegistry","taoQtiItem/qtiCreator/helper/commonRenderer"],function(e,t,i,n){var a=e.clone(t);
return a.render=function(e,a){t.render.call(n.get(),e,{baseUrl:i.getBaseUrl(e.typeIdentifier)});var r=i.getCreator(e.typeIdentifier),o=r.getWidget();return o.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),a)},a}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===p?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(e,t){var n,a,r,o="";return o+='\r\n    <div id="'+f((n=e&&e.attributes,n=null==n||n===!1?n:n.identifier,typeof n===p?n.apply(e):n))+'">\r\n        ',r={hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t},(a=i.maxStringLoop)?n=a.call(e,r):(a=e&&e.maxStringLoop,n=typeof a===p?a.call(e,r):a),i.maxStringLoop||(n=g.call(e,n,{hash:{},inverse:m.noop,fn:m.program(4,s,t),data:t})),(n||0===n)&&(o+=n),o+="\r\n    </div>\r\n    "
}function s(e){var t,i="";return i+='<input id="'+f((t=e&&e.attributes,t=null==t||t===!1?t:t.identifier,typeof t===p?t.apply(e):t))+"_"+f(typeof e===p?e.apply(e):e)+'" name="'+f((t=e&&e.attributes,t=null==t||t===!1?t:t.identifier,typeof t===p?t.apply(e):t))+"_"+f(typeof e===p?e.apply(e):e)+'"/><br />'}function l(e,t){var n,a="";return a+='\r\n        <div id="text-container">\r\n            <textarea id="'+f((n=e&&e.attributes,n=null==n||n===!1?n:n.identifier,typeof n===p?n.apply(e):n))+'" class="solid',n=i["if"].call(e,(n=e&&e.attributes,null==n||n===!1?n:n["class"]),{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(n||0===n)&&(a+=n),a+='" cols="72"></textarea>\r\n        </div>\r\n    '
}function c(){return" attributes.class"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u,h="",p="function",f=this.escapeExpression,m=this,g=i.blockHelperMissing;return h+='<div class="qti-interaction qti-blockInteraction qti-extendedTextInteraction" data-serial="',(u=i.serial)?d=u.call(t,{hash:{},data:a}):(u=t&&t.serial,d=typeof u===p?u.call(t,{hash:{},data:a}):u),h+=f(d)+'" data-qti-class="extendedTextInteraction">\r\n    ',d=i["if"].call(t,t&&t.prompt,{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(d||0===d)&&(h+=d),h+='\r\n    <div class="instruction-container"></div>\r\n    ',d=i["if"].call(t,t&&t.multiple,{hash:{},inverse:m.program(6,l,a),fn:m.program(3,o,a),data:a}),(d||0===d)&&(h+=d),h+="\r\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","i18n","ckeditor","ckConfigurator","polyfill/placeholders"],function(e,t,i,n,a,r,o){var s=function(e,t){var i=new RegExp("^"+t+"$");e.on("keyup",function(){e.removeClass("field-error"),i.test(e.val())||e.addClass("field-error")})},l=function(e){var t=e.getAttributes(),i=e.getResponseDeclaration();return!(!t.maxStrings||"multiple"!==i.attr("cardinality")&&"ordered"!==i.attr("cardinality"))},c=function(e){var i,c,d,u=e.getAttributes(),h=e.getContainer(),p=(e.getResponseDeclaration(),l(e));
if(r.on("instanceCreated",function(t){var i=t.editor,a="block";i.on("configLoaded",function(){i.config=o.getConfig(i,a,v)}),i.on("change",function(){n.triggerResponseChangeEvent(e,{})})}),p){if(i=h.find("input"),u.minStrings){var f=function(e){var i=0;return e.each(function(){""!==t(this).val()&&i++}),i},g=parseInt(u.minStrings);g>0&&i.on("blur",function(){setTimeout(function(){!i.is(":focus")&&f(i)<g&&n.appendNotification(e,a("The minimum number of answers is ")+" : "+g,"warning")},100)})}u.expectedLength&&(c=parseInt(u.expectedLength,10),c>0&&i.each(function(){t(this).css("width",c+"em")})),u.patternMask&&i.each(function(){s(t(this),u.patternMask)}),u.placeholderText&&(d="first","multiple"===d?i.each(function(){t(this).attr("placeholder",u.placeholderText)
}):"first"===d&&i.first().attr("placeholder",u.placeholderText))}else{i=h.find("textarea");var v={extraPlugins:"confighelper",resize_enabled:!0};u.placeholderText&&i.attr("placeholder",u.placeholderText),"xhtml"==m(e)?(r.replace(e.attr("identifier"),v),h.find("#text-container").addClass("solid")):i.bind("keyup change",function(){n.triggerResponseChangeEvent(e,{})})}},d=function(e){e.getContainer().find("input, textarea").val("")},u=function(e,t){var i=function(t,i){e.getContainer().find("#"+t).val(i)},n=function(t){e.getContainer().find("textarea").val(t)},a=e.getResponseDeclaration().attr("baseType");if(t.base&&void 0!==t.base[a])n(t.base[a]);else{if(!t.list||!t.list[a])throw new Error("wrong response format in argument.");
for(var r in t.list[a]){var o=void 0===t.list.identifier?"":t.list.identifier[r];i(o+"_"+r,t.list[a][r])}}},h=function(e){var i=e.getContainer(),n=e.getAttributes(),a=e.getResponseDeclaration(),r=a.attr("baseType"),o=n.base||10,s=!(!n.maxStrings||"multiple"!==a.attr("cardinality")&&"ordered"!==a.attr("cardinality")),l=s?{list:{}}:{base:{}};if(s){var c=[];i.find("input").each(function(e){$el=t(this),n.placeholderText&&$el.val()===n.placeholderText?c[e]="":"integer"===r?(c[e]=parseInt($el.val(),o),c[e]=isNaN(c[e])?"":c[e]):"float"===r?(c[e]=parseFloat($el.val()),c[e]=isNaN(c[e])?"":c[e]):"string"===r&&(c[e]=$el.val())}),l.list[r]=c}else{var d="";n.placeholderText&&p(e)===n.placeholderText?d="":"integer"===r?d=parseInt(p(e),o):"float"===r?d=parseFloat(p(e)):"string"===r&&(d=p(e)),l.base[r]=isNaN(d)&&"number"==typeof d?"":d
}return l},p=function(e){return"xhtml"===m(e)?f(e):n.getContainer(e).find("textarea").val()},f=function(e){return r.instances[e.attr("identifier")].getData()},m=function(e){var t=e.attr("format");switch(t){case"plain":case"xhtml":case"preFormatted":return t;default:return"plain"}},g=function(e,t){n.getContainer(e);"xhtml"==e.attr("format")?r.replace(e.attr("identifier")):"xhtml"==t&&r.instances[e.attr("identifier")].destroy()},v=function(e){var t=n.getContainer(e);t.find("input, textarea").removeAttr("disabled"),"xhtml"==e.attr("format")&&(r.instances[e.attr("identifier")].destroy(),r.replace(e.attr("identifier")))},b=function(e){var t=n.getContainer(e);t.find("input, textarea").attr("disabled","disabled"),"xhtml"==e.attr("format")&&(r.instances[e.attr("identifier")].destroy(),r.replace(e.attr("identifier")))
},y=function(e){C(e,"")},C=function(e,t){var i=n.getContainer(e);"xhtml"==e.attr("format")?r.instances[e.attr("identifier")].setData(t):i.find("textarea").val(t)};return{qtiClass:"extendedTextInteraction",template:i,render:c,getContainer:n.getContainer,setResponse:u,getResponse:h,resetResponse:d,updateFormat:g,enable:v,disable:b,clearText:y,setText:C}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n    		<option value="'+h((n=null==t||t===!1?t:t.key,typeof n===u?n.apply(e):n))+'" ',n=i["if"].call(e,e&&e.selected,{hash:{},inverse:p.noop,fn:p.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=">",(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===u?a.call(e,{hash:{},data:t}):a),r+=h(n)+"</option>\n    	"
}function o(){return'selected="selected"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u="function",h=this.escapeExpression,p=this,f=i.helperMissing;return d+='<div class="panel">\n    <label for="format" class="spinner">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Format",c):f.call(t,"__","Format",c)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Used to control the format of the text entered by the candidate.",c):f.call(t,"__","Used to control the format of the text entered by the candidate.",c)))+'</span>\n    <select name="format" class="select2" data-has-search="false">\n    	',s=i.each.call(t,t&&t.formats,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+="\n    </select>\n</div>"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText"],function(e,t,i,n,a,r,o,s){var l=function(){this.widget.$container.find("input, textarea").attr("disabled","disabled")},c=function(){this.widget.$container.find("input, textarea").removeAttr("disabled")},d=n.extend(a,l,c);return d.prototype.initForm=function(){var n=this.widget,a=n.$form,l=n.element,c=l.attr("format"),d={plain:{label:i("Plain text"),selected:!1},preformatted:{label:i("Pre-formatted text"),selected:!1},xhtml:{label:i("XHTML"),selected:!1}};
d[c]&&(d[c].selected=!0),a.html(s({formats:d})),r.initWidget(a);var u={};u.format=function(i,n){var a=i.getResponseDeclaration(),r=t.values(a.getCorrect()),s=i.attr("format");i.attr("format",n),o.updateFormat(i,s),"xhtml"===s&&"undefined"!=typeof r[0]&&a.setCorrect(e("<p>"+r[0]+"</p>").text())},r.setChangeCallbacks(a,l,u)},d}),define("taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t){var i=e.extend(t,function(){this.widget.changeState("correct")
},function(){});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","lodash","i18n"],function(e,t,i,n,a,r){var o=e.create(t,function(){s(this.widget)},function(){l(this.widget)}),s=function(e){var t=e.element,o=t.getResponseDeclaration(),s=a.values(o.getCorrect());i.enable(t),i.setText(t,s[0]),n.appendInstruction(t,r("Please type the correct response below.")),e.$container.on("responseChange.qti-widget",function(){o.setCorrect([i.getResponse(t).base.string])
})},l=function(e){var t=e.element;i.clearText(t),n.removeInstructions(e.element),e.$container.off("responseChange.qti-widget")};return o}),define("taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction","taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return t.render(e),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;
return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===u?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(e){var t;return t=typeof e===u?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u="function",h=this.escapeExpression,p=this,f=i.blockHelperMissing;return d+='<div class="qti-interaction qti-blockInteraction qti-gapMatchInteraction" data-serial="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===u?l.call(t,{hash:{},data:a}):l),d+=h(s)+'" data-qti-class="gapMatchInteraction">\n    ',s=i["if"].call(t,t&&t.prompt,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+='\n    <ul class="choice-area none block-listing solid horizontal source" data-eyecatcher=">li">\n        ',c={hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a},(l=i.choices)?s=l.call(t,c):(l=t&&t.choices,s=typeof l===u?l.call(t,c):l),i.choices||(s=f.call(t,s,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a})),(s||0===s)&&(d+=s),d+='\n    </ul>\n    <div class="instruction-container"></div>\n    <div class="qti-flow-container">',(l=i.body)?s=l.call(t,{hash:{},data:a}):(l=t&&t.body,s=typeof l===u?l.call(t,{hash:{},data:a}):l),(s||0===s)&&(d+=s),d+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",["lodash","i18n","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","eyecatcher"],function(e,t,i,n,a,r){var o={},s=function(e,t,i){var n=t.data("serial"),r=e.getChoice(n);o[n]||(o[n]=0),o[n]++,i.data("serial",n).html(t.html()).addClass("filled"),!e.responseMappingMode&&r.attr("matchMax")&&o[n]>=r.attr("matchMax")&&t.addClass("deactivated"),a.triggerResponseChangeEvent(e)},l=function(e,t){var i=t.data("serial"),n=a.getContainer(e);n.find(".choice-area [data-serial="+i+"]").removeClass("deactivated"),o[i]--,t.removeClass("filled").removeData("serial").empty(),e.swapping||a.triggerResponseChangeEvent(e)
},c=function(e,t){return a.getContainer(e).find(".choice-area [data-identifier="+t+"]")},d=function(e,t){return a.getContainer(e).find(".qti-flow-container [data-identifier="+t+"]")},u=function(e){var n=a.getContainer(e),r=n.find(".choice-area"),o=n.find(".qti-flow-container"),c=null,d=function(e){return r.find("[data-serial="+e+"]")},u=function(t,i){return s(e,t,i)},h=function(){c&&(o.find(".remove-choice").remove(),c.removeClass("active"),n.find(".empty").removeClass("empty"),c=null)},p=function(t){return l(e,t)},f=function(){return c&&!c.hasClass("filled")},m=function(){return c&&c.hasClass("filled")};n.on("mousedown.commonRenderer",function(){h()}),r.on("mousedown.commonRenderer",">li",function(e){return e.stopPropagation(),i(this).hasClass("deactivated")?void e.preventDefault():void(m()||c?(p(c),u(i(this),c),h()):i(this).hasClass("active")?h():(h(),c=i(this),i(this).addClass("active"),o.find(".gapmatch-content").addClass("empty")))
}),o.on("mousedown.commonRenderer",".gapmatch-content",function(e){if(e.stopPropagation(),f()){var n=i(this),a=c.data("serial"),s=n.data("serial");s!==a&&(s&&p(n),u(c,n)),h()}else if(m()){var n=i(this),s=n.data("serial"),a=c.data("serial");s!==a&&(p(c),s&&(p(n),u(d(s),c)),u(d(a),n)),h()}else if(i(this).data("serial")&&i(this).hasClass("filled")){var l=i(this).data("serial");c=i(this),c.addClass("active"),o.find(">li>div").filter(function(){return i(this).data("serial")!==l}).addClass("empty"),r.find(">li:not(.deactivated)").filter(function(){return i(this).data("serial")!==l}).addClass("empty");var g=i("<span>",{"class":"icon-undo remove-choice",title:t("remove")});
g.on("mousedown",function(e){e.stopPropagation(),p(c),h()}),i(this).append(g)}})},h=function(e){a.getContainer(e).find(".gapmatch-content").each(function(){l(e,i(this))})},p=function(t,i){e.each(i,function(e){e&&s(t,c(t,e[0]),d(t,e[1]).find(".gapmatch-content"))})},f=function(e,t){h(e),p(e,r.unserialize(t,e))},m=function(e){var t=[];return a.getContainer(e).find(".gapmatch-content").each(function(){var n=i(this).data("serial"),a=[];n&&a.push(e.getChoice(n).attr("identifier")),a.push(i(this).data("identifier")),2===a.length&&t.push(a)}),t},g=function(e){return r.serialize(m(e),e)},v=function(e){var t=a.getContainer(e);t.find(".gapmatch-content .active").trigger("mousedown.commonRenderer"),i(document).off(".commonRenderer"),t.off(".commonRenderer"),t.find(".choice-area").off(".commonRenderer"),t.find(".qti-flow-container").off(".commonRenderer"),h(e),t.find(".gapmatch-content").empty(),t.find(".active").removeClass("active"),t.find(".remove-choice").remove(),t.find(".empty").removeClass("empty")
};return{qtiClass:"gapMatchInteraction",template:n,render:u,getContainer:a.getContainer,setResponse:f,getResponse:g,resetResponse:h,destroy:v}}),define("taoQtiItem/qtiCreator/widgets/helpers/textWrapper",["jquery"],function(e){function t(){var e;return window.getSelection?e=window.getSelection():document.selection&&(e=document.selection.createRange()),e}function i(e,t){if(1===t.commonAncestorContainer.nodeType)for(var i=t.cloneContents().childNodes,n=0;n<i.length;n++)if(i[n].className&&i[n].className.indexOf("qti-choice")>-1)return!0;return!1}function n(e){var n=t();if(n.rangeCount){var a=n.getRangeAt(0).cloneRange();if(a.startOffset!==a.endOffset&&a.toString().trim()&&!i(n,a))return a.surroundContents(e),n.removeAllRanges(),n.addRange(a),!0
}return!1}function a(t){t.trigger("beforeunwrap"),t.find("#selection-wrapper").replaceWith(function(){return e(this).html()}),t.trigger("unwrapped")}var r={create:function(t){r.destroy(t),t.on("mouseup.textwrapper",function(i){var a=e(i.target);if(!a.hasClass("html-editable-shield")&&!a.hasClass("widget-box")){var r=e("<span>",{id:"selection-wrapper","class":"inline-text-wrapper"});if(n(r[0])){var o=r.text().trim();t.trigger("wrapped",[r,o])}}}).on("mousedown.textwrapper",function(){a(t)})},destroy:function(e){a(e),e.off(".textwrapper")}};return r}),define("taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor","taoQtiItem/qtiCreator/editor/gridEditor/content","taoQtiItem/qtiCreator/widgets/helpers/content","taoQtiItem/qtiCreator/widgets/helpers/textWrapper","tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger"],function(e,t,i,n,a,r,o){var s=e.extend(t,function(){this.buildEditor()
},function(){this.destroyTextWrapper(),this.destroyEditor()});return s.prototype.buildEditor=function(){var e=this,t=this.widget,a=t.element.getBody(),r=t.$container,s=r.find(".qti-flow-container");if(s.attr("data-html-editable-container",!0),!i.hasEditor(s)){var l=$(o({serial:t.serial,state:"question"}));s.append(l),l.show(),e.initTextWrapper(),r.find(".gapmatch-content").html("..."),i.buildEditor(s,{shieldInnerContent:!1,change:n.getChangeCallbackForBlockStatic(a),data:{container:a,widget:t}}),r.find(".gapmatch-content").empty()}},s.prototype.destroyEditor=function(){var e=this.widget.$container,t=e.find(".qti-flow-container");e.find(".gapmatch-content").html("..."),i.destroyEditor(t),e.find(".gapmatch-content").empty(),t.find(".mini-tlb[data-role=cke-launcher-tlb]").remove()
},s.prototype.initTextWrapper=function(){var e=this.widget,t=e.element,n=e.$container.find(".qti-flow-container [data-html-editable]"),o=this.getGapModel(),s=$(o.toolbarTpl()).show();s.on("mousedown",function(l){l.stopPropagation();var c=s.parent(),d=c.text().trim();s.detach(),c.removeAttr("id").addClass("widget-box").attr("data-new",!0).attr("data-qti-class",o.qtiClass),r.destroy(n),a.createElements(t.getBody(),n,i.getData(n),function(t){t.changeState("question"),r.create(n),o.afterCreate(e,t,d)})}).on("mouseup",function(e){e.stopPropagation()}),n.on("editorready.wrapper",function(){r.create($(this))}).on("wrapped.wrapper",function(e,t){t.append(s)}).on("beforeunwrap.wrapper",function(){s.detach()
})},s.prototype.destroyTextWrapper=function(){var e=this.widget.$container.find(".qti-flow-container [data-html-editable]");r.destroy(e),e.off(".wrapper")},s.prototype.getGapModel=function(){this.throwMissingRequiredImplementationError("getModel")},s}),define("taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question"],function(e,t){return e.createBundle(t,arguments)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=this,u=i.helperMissing,h=this.escapeExpression;return c+='<div class="panel">\n    <label>\n        <input name="shuffle" type="checkbox" ',o=i["if"].call(t,t&&t.shuffle,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Shuffle choices",l):u.call(t,"__","Shuffle choices",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,'If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be "shuffled" of "fixed" individually.',l):u.call(t,"__",'If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be "shuffled" of "fixed" individually.',l)))+"\n    </span>\n</div>"
})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<span class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-role="create-gap-tlb">\n    <span class="rgt tlb-button" title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Create gap",s):u.call(t,"__","Create gap",s)))+'" data-role="create-gap">\n        <span class="icon-magicwand"></span>\n    </span>\n</span>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch","tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create","lodash"],function(e,t,i,n,a,r){var o=e.extend(t,function(){this.syncCardinality(),this.preventSingleChoiceDeletion()},function(){this.widget.offEvents("question")});return o.prototype.syncCardinality=function(){var e=this.widget.element,t=e.getResponseDeclaration(),i=function(i){var n,a=i.element||i.choice;
"gap"===a.qtiClass&&(n=1===r.size(e.getGaps())?"single":"multiple",t.attr("cardinality",n))};this.widget.on("elementCreated",i).on("deleted",i)},o.prototype.initForm=function(){var e=this.widget,t=e.$form,a=e.element;t.html(n({shuffle:!!a.attr("shuffle")})),i.initWidget(t),i.setChangeCallbacks(t,a,{shuffle:i.getAttributeChangeCallback()})},o.prototype.getGapModel=function(){return{toolbarTpl:a,qtiClass:"gap",afterCreate:function(e,t,i){var n=e.element.createChoice(i);e.$container.find(".choice-area .add-option").before(n.render()),n.postRender().changeState("question"),t.changeState("choice")}}},o.prototype.preventSingleChoiceDeletion=function(){var e=this.widget.element,t=this.widget.$container,i=function(){var i=0,n=t.find(".choice-area .qti-choice [data-role=delete]");
r.each(e.getChoices(),function(e){e.data("deleting")||i++}),1>=i?n.hide():n.show()};i(),this.widget.on("deleted",i).on("choiceCreated",i),this.widget.afterStateInit(function(e,t,n){"deleting"===n.name&&t.is("gapText")&&i()},"question"),this.widget.afterStateExit(function(e,t,n){"deleting"===n.name&&t.is("gapText")&&i()},"question")},o}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)},function(){});
return n}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){var s=i.create(n,function(){var i=this.widget,n=i.element,s=n.getResponseDeclaration(),l=e.values(s.getCorrect());a.destroy(n),r.appendInstruction(n,t("Please fill the gap with the correct choices.")),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.invoke(l,String.prototype.split," "),n)),i.$container.on("responseChange.qti-widget",function(t,i){var n="single"===s.attr("cardinality")?"base":"list";
i.response&&i.response[n]&&s.setCorrect("base"===n?i.response.base.directedPair.join(" "):e.map(i.response.list.directedPair,function(e){return e.join(" ")}))})},function(){var e=this.widget,t=this.widget.element;e.$container.off("responseChange.qti-widget"),a.destroy(t),r.removeInstructions(t)});return s}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n                    <option value="',(a=i.id)?n=a.call(e,{hash:{},data:t}):(a=e&&e.id,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+'">',(a=i.value)?n=a.call(e,{hash:{},data:t}):(a=e&&e.value,n=typeof a===h?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="</option> \n                    "
}function o(){return'style="display:block"'}function s(e){var t,i="";return i+="\n            ",t=typeof e===h?e.apply(e):e,(t||0===t)&&(i+=t),i+="\n        "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h="function",p=this.escapeExpression,f=i.helperMissing,m=this;return u+='    <div class="form-container">\n        <h1>',(c=i.title)?l=c.call(t,{hash:{},data:a}):(c=t&&t.title,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'</h1>\n\n        <hr />\n        <div class="panel grid-row">\n            <h2>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Add new pairs",d):f.call(t,"__","Add new pairs",d)))+':</h2>\n        </div> \n        <div class="panel grid-row">\n            <div class="col-4">\n                <select class="select2 new-pair-left" data-placeholder="'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Select a ",d):f.call(t,"__","Select a ",d))),(c=i.leftTitle)?l=c.call(t,{hash:{},data:a}):(c=t&&t.leftTitle,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'">\n                    <option></option>\n                    ',l=i.each.call(t,t&&t.pairLeft,{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='\n                </select>\n             </div>\n             <div class="col-4">\n                <select class="select2 new-pair-right"  data-placeholder="'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Select a ",d):f.call(t,"__","Select a ",d))),(c=i.rightTitle)?l=c.call(t,{hash:{},data:a}):(c=t&&t.rightTitle,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'">\n                    <option></option>\n                    ',l=i.each.call(t,t&&t.pairRight,{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='\n                </select>\n             </div>\n             <div class="col-1">\n                &nbsp;\n            </div>\n             <div class="col-2">\n                <button class="pair-adder btn-info small"><span class="icon-add"></span>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Add",d):f.call(t,"__","Add",d)))+'</button>\n            </div> \n        </div>\n        <hr />\n        <div class="panel grid-row heading">\n             <div class="col-4">',(c=i.leftTitle)?l=c.call(t,{hash:{},data:a}):(c=t&&t.leftTitle,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'</div>\n             <div class="col-3">',(c=i.rightTitle)?l=c.call(t,{hash:{},data:a}):(c=t&&t.rightTitle,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=p(l)+'</div>\n            \n            <div class="col-2" data-edit="correct" ',l=i["if"].call(t,t&&t.defineCorrect,{hash:{},inverse:m.noop,fn:m.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+=">\n                <span>"+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Correct",d):f.call(t,"__","Correct",d)))+'</span>\n                <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n                <span class="tooltip-content">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Is this pair the correct response?",d):f.call(t,"__","Is this pair the correct response?",d)))+'</span>\n            </div>\n\n            <div class="col-2">\n                <span>'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Score",d):f.call(t,"__","Score",d)))+'</span>\n                <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n                <span class="tooltip-content">'+p((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Set the score for this response",d):f.call(t,"__","Set the score for this response",d)))+'</span>\n            </div>\n            <div class="col-1"></div>\n        </div>\n\n        <div class="panel pairs">\n        ',l=i.each.call(t,t&&t.pairs,{hash:{},inverse:m.noop,fn:m.program(5,s,a),data:a}),(l||0===l)&&(u+=l),u+='\n        </div>\n\n        <hr />\n\n        <span class="arrow"></span>\n        <span class="arrow-cover"></span>\n    </div>\n'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'style="display:block"'}function o(){return' checked="checked"'}function s(){return'data-default="true"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h="function",p=this,f=this.escapeExpression,m=i.helperMissing;return u+='<div class="grid-row">\n    <div class="col-4">\n       ',(c=i.left)?l=c.call(t,{hash:{},data:a}):(c=t&&t.left,l=typeof c===h?c.call(t,{hash:{},data:a}):c),(l||0===l)&&(u+=l),u+='\n    </div>\n    <div class="col-3">\n       ',(c=i.right)?l=c.call(t,{hash:{},data:a}):(c=t&&t.right,l=typeof c===h?c.call(t,{hash:{},data:a}):c),(l||0===l)&&(u+=l),u+='\n    </div>\n    \n    <div class="col-2" data-edit="correct" ',l=i["if"].call(t,t&&t.defineCorrect,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+='>\n        <label>\n            <input name="',(c=i.id)?l=c.call(t,{hash:{},data:a}):(c=t&&t.id,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=f(l)+'-correct" type="checkbox" ',l=i["if"].call(t,t&&t.correct,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+=' />\n            <span class="icon-checkbox"></span>\n        </label>\n    </div>\n\n    <div class="col-2">\n        <input type="text" \n               value="',(c=i.score)?l=c.call(t,{hash:{},data:a}):(c=t&&t.score,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=f(l)+'" \n               name="',(c=i.id)?l=c.call(t,{hash:{},data:a}):(c=t&&t.id,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=f(l)+'-score" \n               class="score" \n               ',l=i["if"].call(t,t&&t.defaultScore,{hash:{},inverse:p.noop,fn:p.program(5,s,a),data:a}),(l||0===l)&&(u+=l),u+='  \n               data-validate="$numeric" \n               data-validate-option="$allowEmpty; $event(type=keyup)" \n        />\n    </div>\n    <div class="col-1">\n        <a href="#" class="pair-deleter" id="',(c=i.id)?l=c.call(t,{hash:{},data:a}):(c=t&&t.id,l=typeof c===h?c.call(t,{hash:{},data:a}):c),u+=f(l)+'-delete" title="'+f((c=i.__||t&&t.__,d={hash:{},data:a},c?c.call(t,"Remove pair",d):m.call(t,"__","Remove pair",d)))+'"><span class="icon-bin"></span></a>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm",["jquery","lodash","i18n","taoQtiItem/qtiCommonRenderer/helpers/Helper","tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm","tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/helpers/formElement","ui/tooltipster","ui/selecter"],function(e,t,i,n,a,r,o,s,l,c){function d(t){var i=e('<div class="mapping-editor arrow-top-left"></div>'),n=t.innerWidth(),a=t.innerHeight();return e(".mapping-editor",t).remove(),i.css({top:a-30,width:n-100}).appendTo(t),i}var u={html:"::",qti:" "};
return function(n,h){function p(i){var n=(e(".panel-new-pair",i),e(".pair-adder",i)),a=e(".new-pair-left",i),r=e(".new-pair-right",i),o=e(".select2 > option",i);a.on("change",function(){var e=a.select2("val"),i=r.select2("val");o.removeProp("disabled"),t(w).where({leftId:e}).forEach(function(e){r.find('option[value="'+e.rightId+'"]').prop("disabled",!0)}),t(w).where({rightId:i}).forEach(function(e){a.find('option[value="'+e.leftId+'"]').prop("disabled",!0)}),"pair"===h.type&&t(w).where({rightId:e}).forEach(function(e){r.find('option[value="'+e.leftId+'"]').prop("disabled",!0)})}),r.on("change",function(){var e=r.select2("val"),i=a.select2("val");o.removeProp("disabled"),t(w).where({rightId:e}).forEach(function(e){a.find('option[value="'+e.leftId+'"]').prop("disabled",!0)
}),t(w).where({leftId:i}).forEach(function(e){r.find('option[value="'+e.rightId+'"]').prop("disabled",!0)}),"pair"===h.type&&t(w).where({leftId:e}).forEach(function(e){a.find('option[value="'+e.rightId+'"]').prop("disabled",!0)})}),n.on("click",function(e){o.removeProp("disabled"),e.preventDefault();var t,i=a.select2("val"),n=r.select2("val");i&&n&&(t=i+u.qti+n,x.addPair(t),a.select2("val",""),r.select2("val",""))})}function f(t){t.off("click",".pair-deleter").on("click",".pair-deleter",function(t){t.preventDefault();var i=e(this),n=i.attr("id").replace(/-delete$/,"").replace(u.html,u.qti);x.removePair(n),i.closest(".grid-row").remove()})}function m(e){var i=parseFloat(I.mappingAttributes.defaultValue);
return t.map(e,function(e,t){return g(e,t,parseFloat(e)===i)})}function g(e,i,n){var a=i.split(u.qti);return{id:i.replace(u.qti,u.html),score:e,defaultScore:!!n,leftId:a[0],rightId:a[1],left:t.isFunction(h.formatLeft)?h.formatLeft(a[0]):a[0],right:t.isFunction(h.formatRight)?h.formatRight(a[1]):a[1],defineCorrect:o.defineCorrect(I),correct:t.contains(t.values(I.getCorrect()),i)}}function v(){var i={},a=t.values(I.getCorrect());b.length&&(n.on("mappingAttributeChange",function(i){"defaultValue"===i.key&&t.forEach(w,function(t){var n=e('[name="'+t.id+'-score"]',b);n.data("default")&&(n.val(i.value),I.setMapEntry(t.id.replace(u.html,u.qti),i.value))})}),t.forEach(w,function(n){var r=n.id.replace(u.html,u.qti);
i[n.id+"-score"]=function(t,i){e('[name="'+n.id+'-score"]',b).removeAttr("data-default").removeData("default"),t.setMapEntry(r,i)},i[n.id+"-correct"]=function(e,i){i===!0?t.contains(a,r)||a.push(r):a=t.without(a,r),e.setCorrect(a)}}),s.setChangeCallbacks(b,I,i))}var b,y=n.$container,C=n.element,I=C.getResponseDeclaration(),E=[],w=[],x={load:function(){var n=(t.values(I.getCorrect()),I.getMapEntries());return E.length?E.empty():E=d(y),h&&(h.entries?(w=m(h.entries),I.removeMapEntries(),t.forEach(w,function(e){("undefined"==typeof e.score||null===e.score)&&(e.score=I.mappingAttributes.defaultValue||0),I.setMapEntry(e.id.replace(u.html,u.qti),e.score)})):w=m(n),b=e(a({title:h.title||i("Pair scoring"),leftTitle:h.leftTitle||i("Choices"),rightTitle:h.rightTitle||i("Gaps"),defineCorrect:o.defineCorrect(I),scoreMin:I.getMappingAttribute("lowerBound"),scoreMax:I.getMappingAttribute("upperBound"),pairs:t.map(w,r),pairLeft:t.isFunction(h.pairLeft)?h.pairLeft():t.values(C.getChoices()),pairRight:t.isFunction(h.pairRight)?h.pairRight():t.values(C.getChoices())})),v(),E.append(b),c(E),l(E),f(E),p(E)),this
},addPair:function(i){var n=I.mappingAttributes.defaultValue,a=g(n,i,!0);return w.push(a),I.setMapEntry(i,n),e(".pairs",E).append(r(a)),v(),t.isFunction(h.add)&&h.add(i),this},removePair:function(e){return t.remove(w,{id:e.replace(u.qti,u.html)}),I.removeMapEntry(e),t.isFunction(h.remove)&&h.remove(e),this},destroy:function(){E.length&&E.remove(),e("#item-editor-panel").css("overflow","")}};return x.load()}}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm"],function(e,t,i,n,a,r,o,s,l){function c(){{var e=this.widget,n=e.element,a=n.getResponseDeclaration(),s=t.values(a.getCorrect());
0===t.size(a.getMapEntries())?s:t.keys(a.getMapEntries())}r.destroy(n),o.appendInstruction(n,i("Please fill the gap with the texts below, then edit the score for each pair.")),n.responseMappingMode=!0,r.render.call(n.getRenderer(),n),u(e.$container),0===t.size(a.getMapEntries())?h(e,s):h(e),e.$container.on("responseChange.qti-widget",function(i,r){var o,s,l="single"===a.attr("cardinality")?"base":"list";r&&r.response&&r.response[l]&&(o=t.invoke(r.response[l].directedPair,Array.prototype.join," "),s=t.keys(a.getMapEntries()),t(o).difference(s).forEach(n.pairScoringForm.addPair,n.pairScoringForm)),u(e.$container)})}function d(){var e=this.widget,t=e.element;e.$container.off("responseChange.qti-widget"),t.pairScoringForm&&t.pairScoringForm.destroy(),o.removeInstructions(t),r.destroy(t)
}function u(t){e(".gapmatch-content",t).removeClass("filled").addClass("gap-info").each(function(){var t=e(this);t.text(t.data("identifier"))})}function h(e,n){var a=e.element,r=a.getResponseDeclaration(),o=r.getMapEntries(),s=t.transform(a.getChoices(),function(e,t){e[t.id()]=t.val()},{}),c={leftTitle:i("Choice"),rightTitle:i("Gap"),type:"directedPair",pairLeft:function(){return t.map(a.getChoices(),function(e){return{id:e.id(),value:e.val()}})},pairRight:function(){return t.map(a.getGaps(),function(e){return{id:e.id(),value:e.id()}})},formatLeft:function(e){return s[e]||e}};n&&(c.entries=t.transform(n,function(e,t){e[t]=void 0!==o[t]?o[t]:r.mappingAttributes.defaultValue
},{})),a.pairScoringForm=l(e,c)}return n.create(a,c,d)}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction","taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),function(e){var t,i,n="0.4.2",a="hasOwnProperty",r=/[\.\/]/,o="*",s=function(){},l=function(e,t){return e-t},c={n:{}},d=function(e,n){e=String(e);var a,r=i,o=Array.prototype.slice.call(arguments,2),s=d.listeners(e),c=0,u=[],h={},p=[],f=t;
t=e,i=0;for(var m=0,g=s.length;g>m;m++)"zIndex"in s[m]&&(u.push(s[m].zIndex),s[m].zIndex<0&&(h[s[m].zIndex]=s[m]));for(u.sort(l);u[c]<0;)if(a=h[u[c++]],p.push(a.apply(n,o)),i)return i=r,p;for(m=0;g>m;m++)if(a=s[m],"zIndex"in a)if(a.zIndex==u[c]){if(p.push(a.apply(n,o)),i)break;do if(c++,a=h[u[c]],a&&p.push(a.apply(n,o)),i)break;while(a)}else h[a.zIndex]=a;else if(p.push(a.apply(n,o)),i)break;return i=r,t=f,p.length?p:null};d._events=c,d.listeners=function(e){var t,i,n,a,s,l,d,u,h=e.split(r),p=c,f=[p],m=[];for(a=0,s=h.length;s>a;a++){for(u=[],l=0,d=f.length;d>l;l++)for(p=f[l].n,i=[p[h[a]],p[o]],n=2;n--;)t=i[n],t&&(u.push(t),m=m.concat(t.f||[]));f=u}return m},d.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};
for(var i=e.split(r),n=c,a=0,o=i.length;o>a;a++)n=n.n,n=n.hasOwnProperty(i[a])&&n[i[a]]||(n[i[a]]={n:{}});for(n.f=n.f||[],a=0,o=n.f.length;o>a;a++)if(n.f[a]==t)return s;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},d.f=function(e){var t=[].slice.call(arguments,1);return function(){d.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},d.stop=function(){i=1},d.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},d.nts=function(){return t.split(r)},d.off=d.unbind=function(e,t){if(!e)return void(d._events=c={n:{}});var i,n,s,l,u,h,p,f=e.split(r),m=[c];for(l=0,u=f.length;u>l;l++)for(h=0;h<m.length;h+=s.length-2){if(s=[h,1],i=m[h].n,f[l]!=o)i[f[l]]&&s.push(i[f[l]]);
else for(n in i)i[a](n)&&s.push(i[n]);m.splice.apply(m,s)}for(l=0,u=m.length;u>l;l++)for(i=m[l];i.n;){if(t){if(i.f){for(h=0,p=i.f.length;p>h;h++)if(i.f[h]==t){i.f.splice(h,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[a](n)&&i.n[n].f){var g=i.n[n].f;for(h=0,p=g.length;p>h;h++)if(g[h]==t){g.splice(h,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[a](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},d.once=function(e,t){var i=function(){return d.unbind(e,i),t.apply(this,arguments)};return d.on(e,i)},d.version=n,d.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=d:"undefined"!=typeof define?define("eve",[],function(){return d
}):e.eve=d}(window||this),function(e,t){"function"==typeof define&&define.amd?define("raphael",["eve"],function(i){return t(e,i)}):t(e,e.eve||"function"==typeof require&&require("eve"))}(this,function(e,t){function i(e){if(i.is(e,"function"))return C?e():t.on("raphael.DOMload",e);if(i.is(e,U))return i._engine.create[D](i,e.splice(0,3+i.is(e[0],j))).add(e);var n=Array.prototype.slice.call(arguments,0);if(i.is(n[n.length-1],"function")){var a=n.pop();return C?a.call(i._engine.create[D](i,n)):t.on("raphael.DOMload",function(){a.call(i._engine.create[D](i,n))})}return i._engine.create[D](i,arguments)}function n(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;
for(var i in e)e[T](i)&&(t[i]=n(e[i]));return t}function a(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function r(e,t,i){function n(){var r=Array.prototype.slice.call(arguments,0),o=r.join("â"),s=n.cache=n.cache||{},l=n.count=n.count||[];return s[T](o)?(a(l,o),i?i(s[o]):s[o]):(l.length>=1e3&&delete s[l.shift()],l.push(o),s[o]=e[D](t,r),i?i(s[o]):s[o])}return n}function o(){return this.hex}function s(e,t){for(var i=[],n=0,a=e.length;a-2*!t>n;n+=2){var r=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?a-4==n?r[3]={x:+e[0],y:+e[1]}:a-2==n&&(r[2]={x:+e[0],y:+e[1]},r[3]={x:+e[2],y:+e[3]}):r[0]={x:+e[a-2],y:+e[a-1]}:a-4==n?r[3]=r[2]:n||(r[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])
}return i}function l(e,t,i,n,a){var r=-3*t+9*i-9*n+3*a,o=e*r+6*t-12*i+6*n;return e*o-3*t+3*i}function c(e,t,i,n,a,r,o,s,c){null==c&&(c=1),c=c>1?1:0>c?0:c;for(var d=c/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;u>m;m++){var g=d*h[m]+d,v=l(g,e,i,a,o),b=l(g,t,n,r,s),y=v*v+b*b;f+=p[m]*L.sqrt(y)}return d*f}function d(e,t,i,n,a,r,o,s,l){if(!(0>l||c(e,t,i,n,a,r,o,s)<l)){var d,u=1,h=u/2,p=u-h,f=.01;for(d=c(e,t,i,n,a,r,o,s,p);B(d-l)>f;)h/=2,p+=(l>d?1:-1)*h,d=c(e,t,i,n,a,r,o,s,p);return p}}function u(e,t,i,n,a,r,o,s){if(!($(e,i)<F(a,o)||F(e,i)>$(a,o)||$(t,n)<F(r,s)||F(t,n)>$(r,s))){var l=(e*n-t*i)*(a-o)-(e-i)*(a*s-r*o),c=(e*n-t*i)*(r-s)-(t-n)*(a*s-r*o),d=(e-i)*(r-s)-(t-n)*(a-o);
if(d){var u=l/d,h=c/d,p=+u.toFixed(2),f=+h.toFixed(2);if(!(p<+F(e,i).toFixed(2)||p>+$(e,i).toFixed(2)||p<+F(a,o).toFixed(2)||p>+$(a,o).toFixed(2)||f<+F(t,n).toFixed(2)||f>+$(t,n).toFixed(2)||f<+F(r,s).toFixed(2)||f>+$(r,s).toFixed(2)))return{x:u,y:h}}}}function h(e,t,n){var a=i.bezierBBox(e),r=i.bezierBBox(t);if(!i.isBBoxIntersect(a,r))return n?0:[];for(var o=c.apply(0,e),s=c.apply(0,t),l=$(~~(o/5),1),d=$(~~(s/5),1),h=[],p=[],f={},m=n?0:[],g=0;l+1>g;g++){var v=i.findDotsAtSegment.apply(i,e.concat(g/l));h.push({x:v.x,y:v.y,t:g/l})}for(g=0;d+1>g;g++)v=i.findDotsAtSegment.apply(i,t.concat(g/d)),p.push({x:v.x,y:v.y,t:g/d});for(g=0;l>g;g++)for(var b=0;d>b;b++){var y=h[g],C=h[g+1],I=p[b],E=p[b+1],w=B(C.x-y.x)<.001?"y":"x",x=B(E.x-I.x)<.001?"y":"x",T=u(y.x,y.y,C.x,C.y,I.x,I.y,E.x,E.y);
if(T){if(f[T.x.toFixed(4)]==T.y.toFixed(4))continue;f[T.x.toFixed(4)]=T.y.toFixed(4);var _=y.t+B((T[w]-y[w])/(C[w]-y[w]))*(C.t-y.t),k=I.t+B((T[x]-I[x])/(E[x]-I[x]))*(E.t-I.t);_>=0&&1.001>=_&&k>=0&&1.001>=k&&(n?m++:m.push({x:T.x,y:T.y,t1:F(_,1),t2:F(k,1)}))}}return m}function p(e,t,n){e=i._path2curve(e),t=i._path2curve(t);for(var a,r,o,s,l,c,d,u,p,f,m=n?0:[],g=0,v=e.length;v>g;g++){var b=e[g];if("M"==b[0])a=l=b[1],r=c=b[2];else{"C"==b[0]?(p=[a,r].concat(b.slice(1)),a=p[6],r=p[7]):(p=[a,r,a,r,l,c,l,c],a=l,r=c);for(var y=0,C=t.length;C>y;y++){var I=t[y];if("M"==I[0])o=d=I[1],s=u=I[2];else{"C"==I[0]?(f=[o,s].concat(I.slice(1)),o=f[6],s=f[7]):(f=[o,s,o,s,d,u,d,u],o=d,s=u);
var E=h(p,f,n);if(n)m+=E;else{for(var w=0,x=E.length;x>w;w++)E[w].segment1=g,E[w].segment2=y,E[w].bez1=p,E[w].bez2=f;m=m.concat(E)}}}}}return m}function f(e,t,i,n,a,r){null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+n,this.e=+a,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function m(){return this.x+K+this.y+K+this.width+" Ã "+this.height}function g(e,t,i,n,a,r){function o(e){return((u*e+d)*e+c)*e}function s(e,t){var i=l(e,t);return((f*i+p)*i+h)*i}function l(e,t){var i,n,a,r,s,l;for(a=e,l=0;8>l;l++){if(r=o(a)-e,B(r)<t)return a;if(s=(3*u*a+2*d)*a+c,B(s)<1e-6)break;a-=r/s}if(i=0,n=1,a=e,i>a)return i;if(a>n)return n;for(;n>i;){if(r=o(a),B(r-e)<t)return a;
e>r?i=a:n=a,a=(n-i)/2+i}return a}var c=3*t,d=3*(n-t)-c,u=1-c-d,h=3*i,p=3*(a-i)-h,f=1-h-p;return s(e,1/(200*r))}function v(e,t){var i=[],n={};if(this.ms=t,this.times=1,e){for(var a in e)e[T](a)&&(n[Z(a)]=e[a],i.push(Z(a)));i.sort(ut)}this.anim=n,this.top=i[i.length-1],this.percents=i}function b(e,n,a,r,o,s){a=Z(a);var l,c,d,u,h,p,m=e.ms,v={},b={},y={};if(r)for(I=0,w=li.length;w>I;I++){var C=li[I];if(C.el.id==n.id&&C.anim==e){C.percent!=a?(li.splice(I,1),d=1):c=C,n.attr(C.totalOrigin);break}}else r=+b;for(var I=0,w=e.percents.length;w>I;I++){if(e.percents[I]==a||e.percents[I]>r*e.top){a=e.percents[I],h=e.percents[I-1]||0,m=m/e.top*(a-h),u=e.percents[I+1],l=e.anim[a];
break}r&&n.attr(e.anim[e.percents[I]])}if(l){if(c)c.initstatus=r,c.start=new Date-c.ms*r;else{for(var x in l)if(l[T](x)&&(nt[T](x)||n.paper.customAttributes[T](x)))switch(v[x]=n.attr(x),null==v[x]&&(v[x]=it[x]),b[x]=l[x],nt[x]){case j:y[x]=(b[x]-v[x])/m;break;case"colour":v[x]=i.getRGB(v[x]);var _=i.getRGB(b[x]);y[x]={r:(_.r-v[x].r)/m,g:(_.g-v[x].g)/m,b:(_.b-v[x].b)/m};break;case"path":var k=Mt(v[x],b[x]),R=k[1];for(v[x]=k[0],y[x]=[],I=0,w=v[x].length;w>I;I++){y[x][I]=[0];for(var D=1,q=v[x][I].length;q>D;D++)y[x][I][D]=(R[I][D]-v[x][I][D])/m}break;case"transform":var S=n._,K=Ft(S[x],b[x]);if(K)for(v[x]=K.from,b[x]=K.to,y[x]=[],y[x].real=!0,I=0,w=v[x].length;w>I;I++)for(y[x][I]=[v[x][I][0]],D=1,q=v[x][I].length;q>D;D++)y[x][I][D]=(b[x][I][D]-v[x][I][D])/m;
else{var M=n.matrix||new f,P={_:{transform:S.transform},getBBox:function(){return n.getBBox(1)}};v[x]=[M.a,M.b,M.c,M.d,M.e,M.f],Lt(P,b[x]),b[x]=P._.transform,y[x]=[(P.matrix.a-M.a)/m,(P.matrix.b-M.b)/m,(P.matrix.c-M.c)/m,(P.matrix.d-M.d)/m,(P.matrix.e-M.e)/m,(P.matrix.f-M.f)/m]}break;case"csv":var Q=A(l[x])[N](E),L=A(v[x])[N](E);if("clip-rect"==x)for(v[x]=L,y[x]=[],I=L.length;I--;)y[x][I]=(Q[I]-v[x][I])/m;b[x]=Q;break;default:for(Q=[][O](l[x]),L=[][O](v[x]),y[x]=[],I=n.paper.customAttributes[x].length;I--;)y[x][I]=((Q[I]||0)-(L[I]||0))/m}var $=l.easing,F=i.easing_formulas[$];if(!F)if(F=A($).match(Y),F&&5==F.length){var B=F;F=function(e){return g(e,+B[1],+B[2],+B[3],+B[4],m)
}}else F=pt;if(p=l.start||e.start||+new Date,C={anim:e,percent:a,timestamp:p,start:p+(e.del||0),status:0,initstatus:r||0,stop:!1,ms:m,easing:F,from:v,diff:y,to:b,el:n,callback:l.callback,prev:h,next:u,repeat:s||e.times,origin:n.attr(),totalOrigin:o},li.push(C),r&&!c&&!d&&(C.stop=!0,C.start=new Date-m*r,1==li.length))return di();d&&(C.start=new Date-C.ms*r),1==li.length&&ci(di)}t("raphael.anim.start."+n.id,n,e)}}function y(e){for(var t=0;t<li.length;t++)li[t].el.paper==e&&li.splice(t--,1)}i.version="2.1.2",i.eve=t;var C,I,E=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},x=/\{(\d+)\}/g,T="hasOwnProperty",_={doc:document,win:e},k={was:Object.prototype[T].call(_.win,"Raphael"),is:_.win.Raphael},R=function(){this.ca=this.customAttributes={}
},D="apply",O="concat",q="ontouchstart"in _.win||_.win.DocumentTouch&&_.doc instanceof DocumentTouch,S="",K=" ",A=String,N="split",M="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[N](K),P={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Q=A.prototype.toLowerCase,L=Math,$=L.max,F=L.min,B=L.abs,z=L.pow,H=L.PI,j="number",W="string",U="array",V=Object.prototype.toString,G=(i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},Y=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,J=L.round,Z=parseFloat,et=parseInt,tt=A.prototype.toUpperCase,it=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},nt=i._availableAnimAttrs={blur:j,"clip-rect":"csv",cx:j,cy:j,fill:"colour","fill-opacity":j,"font-size":j,height:j,opacity:j,path:"path",r:j,rx:j,ry:j,stroke:"colour","stroke-opacity":j,"stroke-width":j,transform:"transform",width:j,x:j,y:j},at=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,rt={hs:1,rg:1},ot=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,dt=(i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(e,t){return Z(e)-Z(t)
},ht=function(){},pt=function(e){return e},ft=i._rectPath=function(e,t,i,n,a){return a?[["M",e+a,t],["l",i-2*a,0],["a",a,a,0,0,1,a,a],["l",0,n-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-i,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-n],["a",a,a,0,0,1,a,-a],["z"]]:[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]]},mt=function(e,t,i,n){return null==n&&(n=i),[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},gt=i._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return mt(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return mt(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ft(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;
return ft(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ft(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return ft(t.x,t.y,t.width,t.height)}},vt=i.mapPath=function(e,t){if(!t)return e;var i,n,a,r,o,s,l;for(e=Mt(e),a=0,o=e.length;o>a;a++)for(l=e[a],r=1,s=l.length;s>r;r+=2)i=t.x(l[r],l[r+1]),n=t.y(l[r],l[r+1]),l[r]=i,l[r+1]=n;return e};if(i._g=_,i.type=_.win.SVGAngle||_.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==i.type){var bt,yt=_.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',bt=yt.firstChild,bt.style.behavior="url(#default#VML)",!bt||"object"!=typeof bt.adj)return i.type=S;
yt=null}i.svg=!(i.vml="VML"==i.type),i._Paper=R,i.fn=I=R.prototype=i.prototype,i._id=0,i._oid=0,i.is=function(e,t){return t=Q.call(t),"finite"==t?!X[T](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||V.call(e).slice(8,-1).toLowerCase()==t},i.angle=function(e,t,n,a,r,o){if(null==r){var s=e-n,l=t-a;return s||l?(180+180*L.atan2(-l,-s)/H+360)%360:0}return i.angle(e,t,r,o)-i.angle(n,a,r,o)},i.rad=function(e){return e%360*H/180},i.deg=function(e){return 180*e/H%360},i.snapTo=function(e,t,n){if(n=i.is(n,"finite")?n:10,i.is(e,U)){for(var a=e.length;a--;)if(B(e[a]-t)<=n)return e[a]
}else{e=+e;var r=t%e;if(n>r)return t-r;if(r>e-n)return t-r+e}return t};i.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*L.random()|0,i="x"==e?t:3&t|8;return i.toString(16)});i.setWindow=function(e){t("raphael.setWindow",i,_.win,e),_.win=e,_.doc=_.win.document,i._engine.initWin&&i._engine.initWin(_.win)};var Ct=function(e){if(i.vml){var t,n=/^\s+|\s+$/g;try{var a=new ActiveXObject("htmlfile");a.write("<body>"),a.close(),t=a.body}catch(o){t=createPopup().document.body}var s=t.createTextRange();Ct=r(function(e){try{t.style.color=A(e).replace(n,S);var i=s.queryCommandValue("ForeColor");
return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(a){return"none"}})}else{var l=_.doc.createElement("i");l.title="RaphaÃ«l Colour Picker",l.style.display="none",_.doc.body.appendChild(l),Ct=r(function(e){var t;return l.style.color=e,t=_.doc.defaultView.getComputedStyle(l,S),t?t.getPropertyValue("color"):e})}return Ct(e)},It=function(){return"hsb("+[this.h,this.s,this.b]+")"},Et=function(){return"hsl("+[this.h,this.s,this.l]+")"},wt=function(){return this.hex},xt=function(e,t,n){if(null==t&&i.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,t=e.g,e=e.r),null==t&&i.is(e,W)){var a=i.getRGB(e);e=a.r,t=a.g,n=a.b}return(e>1||t>1||n>1)&&(e/=255,t/=255,n/=255),[e,t,n]
},Tt=function(e,t,n,a){e*=255,t*=255,n*=255;var r={r:e,g:t,b:n,hex:i.rgb(e,t,n),toString:wt};return i.is(a,"finite")&&(r.opacity=a),r};i.color=function(e){var t;return i.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=i.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):i.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=i.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(i.is(e,"string")&&(e=i.getRGB(e)),i.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=i.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=i.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=wt,e},i.hsb2rgb=function(e,t,i,n){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,n=e.o),e*=360;
var a,r,o,s,l;return e=e%360/60,l=i*t,s=l*(1-B(e%2-1)),a=r=o=i-l,e=~~e,a+=[l,s,0,0,s,l][e],r+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],Tt(a,r,o,n)},i.hsl2rgb=function(e,t,i,n){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var a,r,o,s,l;return e=e%360/60,l=2*t*(.5>i?i:1-i),s=l*(1-B(e%2-1)),a=r=o=i-l/2,e=~~e,a+=[l,s,0,0,s,l][e],r+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],Tt(a,r,o,n)},i.rgb2hsb=function(e,t,i){i=xt(e,t,i),e=i[0],t=i[1],i=i[2];var n,a,r,o;return r=$(e,t,i),o=r-F(e,t,i),n=0==o?null:r==e?(t-i)/o:r==t?(i-e)/o+2:(e-t)/o+4,n=(n+360)%6*60/360,a=0==o?0:o/r,{h:n,s:a,b:r,toString:It}},i.rgb2hsl=function(e,t,i){i=xt(e,t,i),e=i[0],t=i[1],i=i[2];
var n,a,r,o,s,l;return o=$(e,t,i),s=F(e,t,i),l=o-s,n=0==l?null:o==e?(t-i)/l:o==t?(i-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,r=(o+s)/2,a=0==l?0:.5>r?l/(2*r):l/(2-2*r),{h:n,s:a,l:r,toString:Et}},i._path2string=function(){return this.join(",").replace(ot,"$1")};i._preload=function(e,t){var i=_.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,_.doc.body.removeChild(this)},i.onerror=function(){_.doc.body.removeChild(this)},_.doc.body.appendChild(i),i.src=e};i.getRGB=r(function(e){if(!e||(e=A(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:o};
!(rt[T](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=Ct(e));var t,n,a,r,s,l,c=e.match(G);return c?(c[2]&&(a=et(c[2].substring(5),16),n=et(c[2].substring(3,5),16),t=et(c[2].substring(1,3),16)),c[3]&&(a=et((s=c[3].charAt(3))+s,16),n=et((s=c[3].charAt(2))+s,16),t=et((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][N](at),t=Z(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),n=Z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),a=Z(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(r=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100)),c[5]?(l=c[5][N](at),t=Z(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),n=Z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),a=Z(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),("deg"==l[0].slice(-3)||"Â°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(r=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),i.hsb2rgb(t,n,a,r)):c[6]?(l=c[6][N](at),t=Z(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),n=Z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),a=Z(l[2]),"%"==l[2].slice(-1)&&(a*=2.55),("deg"==l[0].slice(-3)||"Â°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(r=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(r/=100),i.hsl2rgb(t,n,a,r)):(c={r:t,g:n,b:a,toString:o},c.hex="#"+(16777216|a|n<<8|t<<16).toString(16).slice(1),i.is(r,"finite")&&(c.opacity=r),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o}
},i),i.hsb=r(function(e,t,n){return i.hsb2rgb(e,t,n).hex}),i.hsl=r(function(e,t,n){return i.hsl2rgb(e,t,n).hex}),i.rgb=r(function(e,t,i){return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)}),i.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=function(e){if(!e)return null;var t=_t(e);if(t.arr)return Rt(t.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[];return i.is(e,U)&&i.is(e[0],U)&&(a=Rt(e)),a.length||A(e).replace(st,function(e,t,i){var r=[],o=t.toLowerCase();
if(i.replace(ct,function(e,t){t&&r.push(+t)}),"m"==o&&r.length>2&&(a.push([t][O](r.splice(0,2))),o="l",t="m"==t?"l":"L"),"r"==o)a.push([t][O](r));else for(;r.length>=n[o]&&(a.push([t][O](r.splice(0,n[o]))),n[o]););}),a.toString=i._path2string,t.arr=Rt(a),a},i.parseTransformString=r(function(e){if(!e)return null;var t=[];return i.is(e,U)&&i.is(e[0],U)&&(t=Rt(e)),t.length||A(e).replace(lt,function(e,i,n){{var a=[];Q.call(i)}n.replace(ct,function(e,t){t&&a.push(+t)}),t.push([i][O](a))}),t.toString=i._path2string,t});var _t=function(e){var t=_t.ps=_t.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[T](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])
}),t[e]};i.findDotsAtSegment=function(e,t,i,n,a,r,o,s,l){var c=1-l,d=z(c,3),u=z(c,2),h=l*l,p=h*l,f=d*e+3*u*l*i+3*c*l*l*a+p*o,m=d*t+3*u*l*n+3*c*l*l*r+p*s,g=e+2*l*(i-e)+h*(a-2*i+e),v=t+2*l*(n-t)+h*(r-2*n+t),b=i+2*l*(a-i)+h*(o-2*a+i),y=n+2*l*(r-n)+h*(s-2*r+n),C=c*e+l*i,I=c*t+l*n,E=c*a+l*o,w=c*r+l*s,x=90-180*L.atan2(g-b,v-y)/H;return(g>b||y>v)&&(x+=180),{x:f,y:m,m:{x:g,y:v},n:{x:b,y:y},start:{x:C,y:I},end:{x:E,y:w},alpha:x}},i.bezierBBox=function(e,t,n,a,r,o,s,l){i.is(e,"array")||(e=[e,t,n,a,r,o,s,l]);var c=Nt.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},i.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2
},i.isBBoxIntersect=function(e,t){var n=i.isPointInsideBBox;return n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},i.pathIntersection=function(e,t){return p(e,t)},i.pathIntersectionNumber=function(e,t){return p(e,t,1)},i.isPointInsidePath=function(e,t,n){var a=i.pathBBox(e);return i.isPointInsideBBox(a,t,n)&&p(e,[["M",t,n],["H",a.x2+10]],1)%2==1},i._removedFactory=function(e){return function(){t("raphael.log",null,"RaphaÃ«l: you are calling to method â"+e+"â of removed object",e)}};var kt=i.pathBBox=function(e){var t=_t(e);
if(t.bbox)return n(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=Mt(e);for(var i,a=0,r=0,o=[],s=[],l=0,c=e.length;c>l;l++)if(i=e[l],"M"==i[0])a=i[1],r=i[2],o.push(a),s.push(r);else{var d=Nt(a,r,i[1],i[2],i[3],i[4],i[5],i[6]);o=o[O](d.min.x,d.max.x),s=s[O](d.min.y,d.max.y),a=i[5],r=i[6]}var u=F[D](0,o),h=F[D](0,s),p=$[D](0,o),f=$[D](0,s),m=p-u,g=f-h,v={x:u,y:h,x2:p,y2:f,width:m,height:g,cx:u+m/2,cy:h+g/2};return t.bbox=n(v),v},Rt=function(e){var t=n(e);return t.toString=i._path2string,t},Dt=i._pathToRelative=function(e){var t=_t(e);if(t.rel)return Rt(t.rel);i.is(e,U)&&i.is(e&&e[0],U)||(e=i.parsePathString(e));var n=[],a=0,r=0,o=0,s=0,l=0;"M"==e[0][0]&&(a=e[0][1],r=e[0][2],o=a,s=r,l++,n.push(["M",a,r]));
for(var c=l,d=e.length;d>c;c++){var u=n[c]=[],h=e[c];if(h[0]!=Q.call(h[0]))switch(u[0]=Q.call(h[0]),u[0]){case"a":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]-a).toFixed(3),u[7]=+(h[7]-r).toFixed(3);break;case"v":u[1]=+(h[1]-r).toFixed(3);break;case"m":o=h[1],s=h[2];default:for(var p=1,f=h.length;f>p;p++)u[p]=+(h[p]-(p%2?a:r)).toFixed(3)}else{u=n[c]=[],"m"==h[0]&&(o=h[1]+a,s=h[2]+r);for(var m=0,g=h.length;g>m;m++)n[c][m]=h[m]}var v=n[c].length;switch(n[c][0]){case"z":a=o,r=s;break;case"h":a+=+n[c][v-1];break;case"v":r+=+n[c][v-1];break;default:a+=+n[c][v-2],r+=+n[c][v-1]}}return n.toString=i._path2string,t.rel=Rt(n),n},Ot=i._pathToAbsolute=function(e){var t=_t(e);
if(t.abs)return Rt(t.abs);if(i.is(e,U)&&i.is(e&&e[0],U)||(e=i.parsePathString(e)),!e||!e.length)return[["M",0,0]];var n=[],a=0,r=0,o=0,l=0,c=0;"M"==e[0][0]&&(a=+e[0][1],r=+e[0][2],o=a,l=r,c++,n[0]=["M",a,r]);for(var d,u,h=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),p=c,f=e.length;f>p;p++){if(n.push(d=[]),u=e[p],u[0]!=tt.call(u[0]))switch(d[0]=tt.call(u[0]),d[0]){case"A":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]+a),d[7]=+(u[7]+r);break;case"V":d[1]=+u[1]+r;break;case"H":d[1]=+u[1]+a;break;case"R":for(var m=[a,r][O](u.slice(1)),g=2,v=m.length;v>g;g++)m[g]=+m[g]+a,m[++g]=+m[g]+r;n.pop(),n=n[O](s(m,h));break;
case"M":o=+u[1]+a,l=+u[2]+r;default:for(g=1,v=u.length;v>g;g++)d[g]=+u[g]+(g%2?a:r)}else if("R"==u[0])m=[a,r][O](u.slice(1)),n.pop(),n=n[O](s(m,h)),d=["R"][O](u.slice(-2));else for(var b=0,y=u.length;y>b;b++)d[b]=u[b];switch(d[0]){case"Z":a=o,r=l;break;case"H":a=d[1];break;case"V":r=d[1];break;case"M":o=d[d.length-2],l=d[d.length-1];default:a=d[d.length-2],r=d[d.length-1]}}return n.toString=i._path2string,t.abs=Rt(n),n},qt=function(e,t,i,n){return[e,t,i,n,i,n]},St=function(e,t,i,n,a,r){var o=1/3,s=2/3;return[o*e+s*i,o*t+s*n,o*a+s*i,o*r+s*n,a,r]},Kt=function(e,t,i,n,a,o,s,l,c,d){var u,h=120*H/180,p=H/180*(+a||0),f=[],m=r(function(e,t,i){var n=e*L.cos(i)-t*L.sin(i),a=e*L.sin(i)+t*L.cos(i);
return{x:n,y:a}});if(d)x=d[0],T=d[1],E=d[2],w=d[3];else{u=m(e,t,-p),e=u.x,t=u.y,u=m(l,c,-p),l=u.x,c=u.y;var g=(L.cos(H/180*a),L.sin(H/180*a),(e-l)/2),v=(t-c)/2,b=g*g/(i*i)+v*v/(n*n);b>1&&(b=L.sqrt(b),i=b*i,n=b*n);var y=i*i,C=n*n,I=(o==s?-1:1)*L.sqrt(B((y*C-y*v*v-C*g*g)/(y*v*v+C*g*g))),E=I*i*v/n+(e+l)/2,w=I*-n*g/i+(t+c)/2,x=L.asin(((t-w)/n).toFixed(9)),T=L.asin(((c-w)/n).toFixed(9));x=E>e?H-x:x,T=E>l?H-T:T,0>x&&(x=2*H+x),0>T&&(T=2*H+T),s&&x>T&&(x-=2*H),!s&&T>x&&(T-=2*H)}var _=T-x;if(B(_)>h){var k=T,R=l,D=c;T=x+h*(s&&T>x?1:-1),l=E+i*L.cos(T),c=w+n*L.sin(T),f=Kt(l,c,i,n,a,0,s,R,D,[T,k,E,w])}_=T-x;var q=L.cos(x),S=L.sin(x),K=L.cos(T),A=L.sin(T),M=L.tan(_/4),P=4/3*i*M,Q=4/3*n*M,$=[e,t],F=[e+P*S,t-Q*q],z=[l+P*A,c-Q*K],j=[l,c];
if(F[0]=2*$[0]-F[0],F[1]=2*$[1]-F[1],d)return[F,z,j][O](f);f=[F,z,j][O](f).join()[N](",");for(var W=[],U=0,V=f.length;V>U;U++)W[U]=U%2?m(f[U-1],f[U],p).y:m(f[U],f[U+1],p).x;return W},At=function(e,t,i,n,a,r,o,s,l){var c=1-l;return{x:z(c,3)*e+3*z(c,2)*l*i+3*c*l*l*a+z(l,3)*o,y:z(c,3)*t+3*z(c,2)*l*n+3*c*l*l*r+z(l,3)*s}},Nt=r(function(e,t,i,n,a,r,o,s){var l,c=a-2*i+e-(o-2*a+i),d=2*(i-e)-2*(a-i),u=e-i,h=(-d+L.sqrt(d*d-4*c*u))/2/c,p=(-d-L.sqrt(d*d-4*c*u))/2/c,f=[t,s],m=[e,o];return B(h)>"1e12"&&(h=.5),B(p)>"1e12"&&(p=.5),h>0&&1>h&&(l=At(e,t,i,n,a,r,o,s,h),m.push(l.x),f.push(l.y)),p>0&&1>p&&(l=At(e,t,i,n,a,r,o,s,p),m.push(l.x),f.push(l.y)),c=r-2*n+t-(s-2*r+n),d=2*(n-t)-2*(r-n),u=t-n,h=(-d+L.sqrt(d*d-4*c*u))/2/c,p=(-d-L.sqrt(d*d-4*c*u))/2/c,B(h)>"1e12"&&(h=.5),B(p)>"1e12"&&(p=.5),h>0&&1>h&&(l=At(e,t,i,n,a,r,o,s,h),m.push(l.x),f.push(l.y)),p>0&&1>p&&(l=At(e,t,i,n,a,r,o,s,p),m.push(l.x),f.push(l.y)),{min:{x:F[D](0,m),y:F[D](0,f)},max:{x:$[D](0,m),y:$[D](0,f)}}
}),Mt=i._path2curve=r(function(e,t){var i=!t&&_t(e);if(!t&&i.curve)return Rt(i.curve);for(var n=Ot(e),a=t&&Ot(t),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t,i){var n,a,r={T:1,Q:1};if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in r)&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][O](Kt[D](0,[t.x,t.y][O](e.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*t.x-t.bx,a=2*t.y-t.by):(n=t.x,a=t.y),e=["C",n,a][O](e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][O](St(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][O](St(t.x,t.y,e[1],e[2],e[3],e[4]));
break;case"L":e=["C"][O](qt(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][O](qt(t.x,t.y,e[1],t.y));break;case"V":e=["C"][O](qt(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][O](qt(t.x,t.y,t.X,t.Y))}return e}),l=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)e.splice(t++,0,["C"][O](i.splice(0,6)));e.splice(t,1),u=$(n.length,a&&a.length||0)}},c=function(e,t,i,r,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=e[o][1],i.y=e[o][2],u=$(n.length,a&&a.length||0))},d=0,u=$(n.length,a&&a.length||0);u>d;d++){n[d]=s(n[d],r),l(n,d),a&&(a[d]=s(a[d],o)),a&&l(a,d),c(n,a,r,o,d),c(a,n,o,r,d);var h=n[d],p=a&&a[d],f=h.length,m=a&&p.length;
r.x=h[f-2],r.y=h[f-1],r.bx=Z(h[f-4])||r.x,r.by=Z(h[f-3])||r.y,o.bx=a&&(Z(p[m-4])||o.x),o.by=a&&(Z(p[m-3])||o.y),o.x=a&&p[m-2],o.y=a&&p[m-1]}return a||(i.curve=Rt(n)),a?[n,a]:n},null,Rt),Pt=(i._parseDots=r(function(e){for(var t=[],n=0,a=e.length;a>n;n++){var r={},o=e[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=i.getRGB(o[1]),r.color.error)return null;r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),t.push(r)}for(n=1,a=t.length-1;a>n;n++)if(!t[n].offset){for(var s=Z(t[n-1].offset||0),l=0,c=n+1;a>c;c++)if(t[c].offset){l=t[c].offset;break}l||(l=100,c=a),l=Z(l);for(var d=(l-s)/(c-n+1);c>n;n++)s+=d,t[n].offset=s+"%"}return t}),i._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)
}),Qt=(i._tofront=function(e,t){t.top!==e&&(Pt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},i._toback=function(e,t){t.bottom!==e&&(Pt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},i._insertafter=function(e,t,i){Pt(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},i._insertbefore=function(e,t,i){Pt(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},i.toMatrix=function(e,t){var i=kt(e),n={_:{transform:S},getBBox:function(){return i}};return Lt(n,t),n.matrix}),Lt=(i.transformPath=function(e,t){return vt(e,Qt(e,t))},i._extractTransform=function(e,t){if(null==t)return e._.transform;
t=A(t).replace(/\.{3}|\u2026/g,e._.transform||S);var n=i.parseTransformString(t),a=0,r=0,o=0,s=1,l=1,c=e._,d=new f;if(c.transform=n||[],n)for(var u=0,h=n.length;h>u;u++){var p,m,g,v,b,y=n[u],C=y.length,I=A(y[0]).toLowerCase(),E=y[0]!=I,w=E?d.invert():0;"t"==I&&3==C?E?(p=w.x(0,0),m=w.y(0,0),g=w.x(y[1],y[2]),v=w.y(y[1],y[2]),d.translate(g-p,v-m)):d.translate(y[1],y[2]):"r"==I?2==C?(b=b||e.getBBox(1),d.rotate(y[1],b.x+b.width/2,b.y+b.height/2),a+=y[1]):4==C&&(E?(g=w.x(y[2],y[3]),v=w.y(y[2],y[3]),d.rotate(y[1],g,v)):d.rotate(y[1],y[2],y[3]),a+=y[1]):"s"==I?2==C||3==C?(b=b||e.getBBox(1),d.scale(y[1],y[C-1],b.x+b.width/2,b.y+b.height/2),s*=y[1],l*=y[C-1]):5==C&&(E?(g=w.x(y[3],y[4]),v=w.y(y[3],y[4]),d.scale(y[1],y[2],g,v)):d.scale(y[1],y[2],y[3],y[4]),s*=y[1],l*=y[2]):"m"==I&&7==C&&d.add(y[1],y[2],y[3],y[4],y[5],y[6]),c.dirtyT=1,e.matrix=d
}e.matrix=d,c.sx=s,c.sy=l,c.deg=a,c.dx=r=d.e,c.dy=o=d.f,1==s&&1==l&&!a&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+o):c.dirtyT=1}),$t=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Ft=i._equaliseTransform=function(e,t){t=A(t).replace(/\.{3}|\u2026/g,e),e=i.parseTransformString(e)||[],t=i.parseTransformString(t)||[];for(var n,a,r,o,s=$(e.length,t.length),l=[],c=[],d=0;s>d;d++){if(r=e[d]||$t(t[d]),o=t[d]||$t(r),r[0]!=o[0]||"r"==r[0].toLowerCase()&&(r[2]!=o[2]||r[3]!=o[3])||"s"==r[0].toLowerCase()&&(r[3]!=o[3]||r[4]!=o[4]))return;
for(l[d]=[],c[d]=[],n=0,a=$(r.length,o.length);a>n;n++)n in r&&(l[d][n]=r[n]),n in o&&(c[d][n]=o[n])}return{from:l,to:c}};i._getContainer=function(e,t,n,a){var r;return r=null!=a||i.is(e,"object")?e:_.doc.getElementById(e),null!=r?r.tagName?null==t?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:t,height:n}:{container:1,x:e,y:t,width:n,height:a}:void 0},i.pathToRelative=Dt,i._engine={},i.path2curve=Mt,i.matrix=function(e,t,i,n,a,r){return new f(e,t,i,n,a,r)},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function n(e){var i=L.sqrt(t(e));e[0]&&(e[0]/=i),e[1]&&(e[1]/=i)}e.add=function(e,t,i,n,a,r){var o,s,l,c,d=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,i,a],[t,n,r],[0,0,1]];
for(e&&e instanceof f&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),o=0;3>o;o++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=u[o][l]*h[l][s];d[o][s]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new f(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,n){null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},e.rotate=function(e,t,n){e=i.rad(e),t=t||0,n=n||0;var a=+L.cos(e).toFixed(9),r=+L.sin(e).toFixed(9);
this.add(a,r,-r,a,t,n),this.add(1,0,0,1,-t,-n)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[A.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]
},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var a=[[this.a,this.c],[this.b,this.d]];e.scalex=L.sqrt(t(a[0])),n(a[0]),e.shear=a[0][0]*a[1][0]+a[0][1]*a[1][1],a[1]=[a[1][0]-a[0][0]*e.shear,a[1][1]-a[0][1]*e.shear],e.scaley=L.sqrt(t(a[1])),n(a[1]),e.shear/=e.scaley;var r=-a[0][1],o=a[1][1];return 0>o?(e.rotate=i.deg(L.acos(o)),0>r&&(e.rotate=360-e.rotate)):e.rotate=i.deg(L.asin(r)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[N]();
return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:S)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:S)+(t.rotate?"r"+[t.rotate,0,0]:S)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(f.prototype);var Bt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);I.safari="Apple Computer, Inc."==navigator.vendor&&(Bt&&Bt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Bt&&Bt[1]<8?function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()
})}:ht;for(var zt=function(){this.returnValue=!1},Ht=function(){return this.originalEvent.preventDefault()},jt=function(){this.cancelBubble=!0},Wt=function(){return this.originalEvent.stopPropagation()},Ut=function(e){var t=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,i=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft;return{x:e.clientX+i,y:e.clientY+t}},Vt=function(){return _.doc.addEventListener?function(e,t,i,n){var a=function(e){var t=Ut(e);return i.call(n,e,t.x,t.y)};if(e.addEventListener(t,a,!1),q&&P[t]){var r=function(t){for(var a=Ut(t),r=t,o=0,s=t.targetTouches&&t.targetTouches.length;s>o;o++)if(t.targetTouches[o].target==e){t=t.targetTouches[o],t.originalEvent=r,t.preventDefault=Ht,t.stopPropagation=Wt;
break}return i.call(n,t,a.x,a.y)};e.addEventListener(P[t],r,!1)}return function(){return e.removeEventListener(t,a,!1),q&&P[t]&&e.removeEventListener(P[t],a,!1),!0}}:_.doc.attachEvent?function(e,t,i,n){var a=function(e){e=e||_.win.event;var t=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,a=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft,r=e.clientX+a,o=e.clientY+t;return e.preventDefault=e.preventDefault||zt,e.stopPropagation=e.stopPropagation||jt,i.call(n,e,r,o)};e.attachEvent("on"+t,a);var r=function(){return e.detachEvent("on"+t,a),!0};return r}:void 0}(),Gt=[],Xt=function(e){for(var i,n=e.clientX,a=e.clientY,r=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,o=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft,s=Gt.length;s--;){if(i=Gt[s],q&&e.touches){for(var l,c=e.touches.length;c--;)if(l=e.touches[c],l.identifier==i.el._drag.id){n=l.clientX,a=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();
break}}else e.preventDefault();var d,u=i.el.node,h=u.nextSibling,p=u.parentNode,f=u.style.display;_.win.opera&&p.removeChild(u),u.style.display="none",d=i.el.paper.getElementByPoint(n,a),u.style.display=f,_.win.opera&&(h?p.insertBefore(u,h):p.appendChild(u)),d&&t("raphael.drag.over."+i.el.id,i.el,d),n+=o,a+=r,t("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,a-i.el._drag.y,n,a,e)}},Yt=function(e){i.unmousemove(Xt).unmouseup(Yt);for(var n,a=Gt.length;a--;)n=Gt[a],n.el._drag={},t("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,e);Gt=[]},Jt=i.el={},Zt=M.length;Zt--;)!function(e){i[e]=Jt[e]=function(t,n){return i.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:Vt(this.shape||this.node||_.doc,e,t,n||this)})),this
},i["un"+e]=Jt["un"+e]=function(t){for(var n=this.events||[],a=n.length;a--;)n[a].name!=e||!i.is(t,"undefined")&&n[a].f!=t||(n[a].unbind(),n.splice(a,1),!n.length&&delete this.events);return this}}(M[Zt]);Jt.data=function(e,n){var a=dt[this.id]=dt[this.id]||{};if(0==arguments.length)return a;if(1==arguments.length){if(i.is(e,"object")){for(var r in e)e[T](r)&&this.data(r,e[r]);return this}return t("raphael.data.get."+this.id,this,a[e],e),a[e]}return a[e]=n,t("raphael.data.set."+this.id,this,n,e),this},Jt.removeData=function(e){return null==e?dt[this.id]={}:dt[this.id]&&delete dt[this.id][e],this},Jt.getData=function(){return n(dt[this.id]||{})},Jt.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)
},Jt.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var ei=[];Jt.drag=function(e,n,a,r,o,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,d=l.clientY,u=_.doc.documentElement.scrollTop||_.doc.body.scrollTop,h=_.doc.documentElement.scrollLeft||_.doc.body.scrollLeft;if(this._drag.id=l.identifier,q&&l.touches)for(var p,f=l.touches.length;f--;)if(p=l.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){c=p.clientX,d=p.clientY;break}this._drag.x=c+h,this._drag.y=d+u,!Gt.length&&i.mousemove(Xt).mouseup(Yt),Gt.push({el:this,move_scope:r,start_scope:o,end_scope:s}),n&&t.on("raphael.drag.start."+this.id,n),e&&t.on("raphael.drag.move."+this.id,e),a&&t.on("raphael.drag.end."+this.id,a),t("raphael.drag.start."+this.id,o||r||this,l.clientX+h,l.clientY+u,l)
}return this._drag={},ei.push({el:this,start:l}),this.mousedown(l),this},Jt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Jt.undrag=function(){for(var e=ei.length;e--;)ei[e].el==this&&(this.unmousedown(ei[e].start),ei.splice(e,1),t.unbind("raphael.drag.*."+this.id));!ei.length&&i.unmousemove(Xt).unmouseup(Yt),Gt=[]},I.circle=function(e,t,n){var a=i._engine.circle(this,e||0,t||0,n||0);return this.__set__&&this.__set__.push(a),a},I.rect=function(e,t,n,a,r){var o=i._engine.rect(this,e||0,t||0,n||0,a||0,r||0);return this.__set__&&this.__set__.push(o),o},I.ellipse=function(e,t,n,a){var r=i._engine.ellipse(this,e||0,t||0,n||0,a||0);
return this.__set__&&this.__set__.push(r),r},I.path=function(e){e&&!i.is(e,W)&&!i.is(e[0],U)&&(e+=S);var t=i._engine.path(i.format[D](i,arguments),this);return this.__set__&&this.__set__.push(t),t},I.image=function(e,t,n,a,r){var o=i._engine.image(this,e||"about:blank",t||0,n||0,a||0,r||0);return this.__set__&&this.__set__.push(o),o},I.text=function(e,t,n){var a=i._engine.text(this,e||0,t||0,A(n));return this.__set__&&this.__set__.push(a),a},I.set=function(e){!i.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new hi(e);return this.__set__&&this.__set__.push(t),t.paper=this,t.type="set",t},I.setStart=function(e){this.__set__=e||this.set()
},I.setFinish=function(){var e=this.__set__;return delete this.__set__,e},I.setSize=function(e,t){return i._engine.setSize.call(this,e,t)},I.setViewBox=function(e,t,n,a,r){return i._engine.setViewBox.call(this,e,t,n,a,r)},I.top=I.bottom=null,I.raphael=i;var ti=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,a=i.documentElement,r=a.clientTop||n.clientTop||0,o=a.clientLeft||n.clientLeft||0,s=t.top+(_.win.pageYOffset||a.scrollTop||n.scrollTop)-r,l=t.left+(_.win.pageXOffset||a.scrollLeft||n.scrollLeft)-o;return{y:s,x:l}};I.getElementByPoint=function(e,t){var i=this,n=i.canvas,a=_.doc.elementFromPoint(e,t);if(_.win.opera&&"svg"==a.tagName){var r=ti(n),o=n.createSVGRect();
o.x=e-r.x,o.y=t-r.y,o.width=o.height=1;var s=n.getIntersectionList(o,null);s.length&&(a=s[s.length-1])}if(!a)return null;for(;a.parentNode&&a!=n.parentNode&&!a.raphael;)a=a.parentNode;return a==i.canvas.parentNode&&(a=n),a=a&&a.raphael?i.getById(a.raphaelid):null},I.getElementsByBBox=function(e){var t=this.set();return this.forEach(function(n){i.isBBoxIntersect(n.getBBox(),e)&&t.push(n)}),t},I.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},I.forEach=function(e,t){for(var i=this.bottom;i;){if(e.call(t,i)===!1)return this;i=i.next}return this},I.getElementsByPoint=function(e,t){var i=this.set();return this.forEach(function(n){n.isPointInside(e,t)&&i.push(n)
}),i},Jt.isPointInside=function(e,t){var n=this.realPath=gt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=i.transformPath(n,this.attr("transform"))),i.isPointInsidePath(n,e,t)},Jt.getBBox=function(e){if(this.removed)return{};var t=this._;return e?((t.dirty||!t.bboxwt)&&(this.realPath=gt[this.type](this),t.bboxwt=kt(this.realPath),t.bboxwt.toString=m,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&((t.dirty||!this.realPath)&&(t.bboxwt=0,this.realPath=gt[this.type](this)),t.bbox=kt(vt(this.realPath,this.matrix)),t.bbox.toString=m,t.dirty=t.dirtyT=0),t.bbox)},Jt.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());
return this.__set__&&this.__set__.push(e),e},Jt.glow=function(e){if("text"==this.type)return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,n=this.paper,a=n.set(),r=this.realPath||gt[this.type](this);r=this.matrix?vt(r,this.matrix):r;for(var o=1;i+1>o;o++)a.push(n.path(r).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*o).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return a.insertBefore(this).translate(t.offsetx,t.offsety)};var ii=function(e,t,n,a,r,o,s,l,u){return null==u?c(e,t,n,a,r,o,s,l):i.findDotsAtSegment(e,t,n,a,r,o,s,l,d(e,t,n,a,r,o,s,l,u))
},ni=function(e,t){return function(n,a,r){n=Mt(n);for(var o,s,l,c,d,u="",h={},p=0,f=0,m=n.length;m>f;f++){if(l=n[f],"M"==l[0])o=+l[1],s=+l[2];else{if(c=ii(o,s,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>a){if(t&&!h.start){if(d=ii(o,s,l[1],l[2],l[3],l[4],l[5],l[6],a-p),u+=["C"+d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],r)return u;h.start=u,u=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),p+=c,o=+l[5],s=+l[6];continue}if(!e&&!t)return d=ii(o,s,l[1],l[2],l[3],l[4],l[5],l[6],a-p),{x:d.x,y:d.y,alpha:d.alpha}}p+=c,o=+l[5],s=+l[6]}u+=l.shift()+l}return h.end=u,d=e?p:t?h:i.findDotsAtSegment(o,s,l[0],l[1],l[2],l[3],l[4],l[5],1),d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d
}},ai=ni(1),ri=ni(),oi=ni(0,1);i.getTotalLength=ai,i.getPointAtLength=ri,i.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return oi(e,t).end;var n=oi(e,i,1);return t?oi(n,t).end:n},Jt.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():ai(e)},Jt.getPointAtLength=function(e){var t=this.getPath();if(t)return ri(t,e)},Jt.getPath=function(){var e,t=i._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return t&&(e=t(this)),e},Jt.getSubpath=function(e,t){var n=this.getPath();if(n)return i.getSubpath(n,e,t)};var si=i.easing_formulas={linear:function(e){return e},"<":function(e){return z(e,1.7)
},">":function(e){return z(e,.48)},"<>":function(e){var t=.48-e/1.04,i=L.sqrt(.1734+t*t),n=i-t,a=z(B(n),1/3)*(0>n?-1:1),r=-i-t,o=z(B(r),1/3)*(0>r?-1:1),s=a+o+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:z(2,-10*e)*L.sin(2*(e-.075)*H/.3)+1},bounce:function(e){var t,i=7.5625,n=2.75;return 1/n>e?t=i*e*e:2/n>e?(e-=1.5/n,t=i*e*e+.75):2.5/n>e?(e-=2.25/n,t=i*e*e+.9375):(e-=2.625/n,t=i*e*e+.984375),t}};si.easeIn=si["ease-in"]=si["<"],si.easeOut=si["ease-out"]=si[">"],si.easeInOut=si["ease-in-out"]=si["<>"],si["back-in"]=si.backIn,si["back-out"]=si.backOut;
var li=[],ci=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},di=function(){for(var e=+new Date,n=0;n<li.length;n++){var a=li[n];if(!a.el.removed&&!a.paused){var r,o,s=e-a.start,l=a.ms,c=a.easing,d=a.from,u=a.diff,h=a.to,p=(a.t,a.el),f={},m={};if(a.initstatus?(s=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*l,a.status=a.initstatus,delete a.initstatus,a.stop&&li.splice(n--,1)):a.status=(a.prev+(a.percent-a.prev)*(s/l))/a.anim.top,!(0>s))if(l>s){var g=c(s/l);for(var v in d)if(d[T](v)){switch(nt[v]){case j:r=+d[v]+g*l*u[v];break;case"colour":r="rgb("+[ui(J(d[v].r+g*l*u[v].r)),ui(J(d[v].g+g*l*u[v].g)),ui(J(d[v].b+g*l*u[v].b))].join(",")+")";
break;case"path":r=[];for(var y=0,C=d[v].length;C>y;y++){r[y]=[d[v][y][0]];for(var I=1,E=d[v][y].length;E>I;I++)r[y][I]=+d[v][y][I]+g*l*u[v][y][I];r[y]=r[y].join(K)}r=r.join(K);break;case"transform":if(u[v].real)for(r=[],y=0,C=d[v].length;C>y;y++)for(r[y]=[d[v][y][0]],I=1,E=d[v][y].length;E>I;I++)r[y][I]=d[v][y][I]+g*l*u[v][y][I];else{var w=function(e){return+d[v][e]+g*l*u[v][e]};r=[["m",w(0),w(1),w(2),w(3),w(4),w(5)]]}break;case"csv":if("clip-rect"==v)for(r=[],y=4;y--;)r[y]=+d[v][y]+g*l*u[v][y];break;default:var x=[][O](d[v]);for(r=[],y=p.paper.customAttributes[v].length;y--;)r[y]=+x[y]+g*l*u[v][y]}f[v]=r}p.attr(f),function(e,i,n){setTimeout(function(){t("raphael.anim.frame."+e,i,n)
})}(p.id,p,a.anim)}else{if(function(e,n,a){setTimeout(function(){t("raphael.anim.frame."+n.id,n,a),t("raphael.anim.finish."+n.id,n,a),i.is(e,"function")&&e.call(n)})}(a.callback,p,a.anim),p.attr(h),li.splice(n--,1),a.repeat>1&&!a.next){for(o in h)h[T](o)&&(m[o]=a.totalOrigin[o]);a.el.attr(m),b(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&b(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}i.svg&&p&&p.paper&&p.paper.safari(),li.length&&ci(di)},ui=function(e){return e>255?255:0>e?0:e};Jt.animateWith=function(e,t,n,a,r,o){var s=this;if(s.removed)return o&&o.call(s),s;var l=n instanceof v?n:i.animation(n,a,r,o);b(l,s,l.percents[0],null,s.attr());
for(var c=0,d=li.length;d>c;c++)if(li[c].anim==t&&li[c].el==e){li[d-1].start=li[c].start;break}return s},Jt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(e){var t=new v(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},v.prototype.repeat=function(e){var t=new v(this.anim,this.ms);return t.del=this.del,t.times=L.floor($(e,0))||1,t},i.animation=function(e,t,n,a){if(e instanceof v)return e;(i.is(n,"function")||!n)&&(a=a||n||null,n=null),e=Object(e),t=+t||0;var r,o,s={};for(o in e)e[T](o)&&Z(o)!=o&&Z(o)+"%"!=o&&(r=!0,s[o]=e[o]);return r?(n&&(s.easing=n),a&&(s.callback=a),new v({100:s},t)):new v(e,t)
},Jt.animate=function(e,t,n,a){var r=this;if(r.removed)return a&&a.call(r),r;var o=e instanceof v?e:i.animation(e,t,n,a);return b(o,r,o.percents[0],null,r.attr()),r},Jt.setTime=function(e,t){return e&&null!=t&&this.status(e,F(t,e.ms)/e.ms),this},Jt.status=function(e,t){var i,n,a=[],r=0;if(null!=t)return b(e,this,-1,F(t,1)),this;for(i=li.length;i>r;r++)if(n=li[r],n.el.id==this.id&&(!e||n.anim==e)){if(e)return n.status;a.push({anim:n.anim,status:n.status})}return e?0:a},Jt.pause=function(e){for(var i=0;i<li.length;i++)li[i].el.id!=this.id||e&&li[i].anim!=e||t("raphael.anim.pause."+this.id,this,li[i].anim)!==!1&&(li[i].paused=!0);return this},Jt.resume=function(e){for(var i=0;i<li.length;i++)if(li[i].el.id==this.id&&(!e||li[i].anim==e)){var n=li[i];
t("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},Jt.stop=function(e){for(var i=0;i<li.length;i++)li[i].el.id!=this.id||e&&li[i].anim!=e||t("raphael.anim.stop."+this.id,this,li[i].anim)!==!1&&li.splice(i--,1);return this},t.on("raphael.remove",y),t.on("raphael.clear",y),Jt.toString=function(){return"RaphaÃ«lâs object"};var hi=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,i=e.length;i>t;t++)!e[t]||e[t].constructor!=Jt.constructor&&e[t].constructor!=hi||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},pi=hi.prototype;pi.push=function(){for(var e,t,i=0,n=arguments.length;n>i;i++)e=arguments[i],!e||e.constructor!=Jt.constructor&&e.constructor!=hi||(t=this.items.length,this[t]=this.items[t]=e,this.length++);
return this},pi.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},pi.forEach=function(e,t){for(var i=0,n=this.items.length;n>i;i++)if(e.call(t,this.items[i],i)===!1)return this;return this};for(var fi in Jt)Jt[T](fi)&&(pi[fi]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e][D](i,t)})}}(fi));return pi.attr=function(e,t){if(e&&i.is(e,U)&&i.is(e[0],"object"))for(var n=0,a=e.length;a>n;n++)this.items[n].attr(e[n]);else for(var r=0,o=this.items.length;o>r;r++)this.items[r].attr(e,t);return this},pi.clear=function(){for(;this.length;)this.pop()},pi.splice=function(e,t){e=0>e?$(this.length+e,0):e,t=$(0,F(this.length-e,t));
var i,n=[],a=[],r=[];for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;t>i;i++)a.push(this[e+i]);for(;i<this.length-e;i++)n.push(this[e+i]);var o=r.length;for(i=0;i<o+n.length;i++)this.items[e+i]=this[e+i]=o>i?r[i]:n[i-o];for(i=this.items.length=this.length-=t-o;this[i];)delete this[i++];return new hi(a)},pi.exclude=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return this.splice(t,1),!0},pi.animate=function(e,t,n,a){(i.is(n,"function")||!n)&&(a=n||null);var r,o,s=this.items.length,l=s,c=this;if(!s)return this;a&&(o=function(){!--s&&a.call(c)}),n=i.is(n,W)?n:o;var d=i.animation(e,t,n,o);for(r=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(r,d,d),this.items[l]&&!this.items[l].removed||s--;
return this},pi.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},pi.getBBox=function(){for(var e=[],t=[],i=[],n=[],a=this.items.length;a--;)if(!this.items[a].removed){var r=this.items[a].getBBox();e.push(r.x),t.push(r.y),i.push(r.x+r.width),n.push(r.y+r.height)}return e=F[D](0,e),t=F[D](0,t),i=$[D](0,i),n=$[D](0,n),{x:e,y:t,x2:i,y2:n,width:i-e,height:n-t}},pi.clone=function(e){e=this.paper.set();for(var t=0,i=this.items.length;i>t;t++)e.push(this.items[t].clone());return e},pi.toString=function(){return"RaphaÃ«lâs set"},pi.glow=function(e){var t=this.paper.set();return this.forEach(function(i){var n=i.glow(e);null!=n&&n.forEach(function(e){t.push(e)
})}),t},pi.isPointInside=function(e,t){var i=!1;return this.forEach(function(n){return n.isPointInside(e,t)?(i=!0,!1):void 0}),i},i.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var n in e.face)e.face[T](n)&&(t.face[n]=e.face[n]);if(this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t],!e.svg){t.face["units-per-em"]=et(e.face["units-per-em"],10);for(var a in e.glyphs)if(e.glyphs[T](a)){var r=e.glyphs[a];if(t.glyphs[a]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},r.k)for(var o in r.k)r[T](o)&&(t.glyphs[a].k[o]=r.k[o])
}}return e},I.getFont=function(e,t,n,a){if(a=a||"normal",n=n||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,i.fonts){var r=i.fonts[e];if(!r){var o=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,S)+"(\\s|$)","i");for(var s in i.fonts)if(i.fonts[T](s)&&o.test(s)){r=i.fonts[s];break}}var l;if(r)for(var c=0,d=r.length;d>c&&(l=r[c],l.face["font-weight"]!=t||l.face["font-style"]!=n&&l.face["font-style"]||l.face["font-stretch"]!=a);c++);return l}},I.print=function(e,t,n,a,r,o,s,l){o=o||"middle",s=$(F(s||0,1),-1),l=$(F(l||1,3),1);var c,d=A(n)[N](S),u=0,h=0,p=S;if(i.is(a,"string")&&(a=this.getFont(a)),a){c=(r||16)/a.face["units-per-em"];for(var f=a.face.bbox[N](E),m=+f[0],g=f[3]-f[1],v=0,b=+f[1]+("baseline"==o?g+ +a.face.descent:g/2),y=0,C=d.length;C>y;y++){if("\n"==d[y])u=0,w=0,h=0,v+=g*l;
else{var I=h&&a.glyphs[d[y-1]]||{},w=a.glyphs[d[y]];u+=h?(I.w||a.w)+(I.k&&I.k[d[y]]||0)+a.w*s:0,h=1}w&&w.d&&(p+=i.transformPath(w.d,["t",u*c,v*c,"s",c,c,m,b,"t",(e-m)/c,(t-b)/c]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},I.add=function(e){if(i.is(e,"array"))for(var t,n=this.set(),a=0,r=e.length;r>a;a++)t=e[a]||{},w[T](t.type)&&n.push(this[t.type]().attr(t));return n},i.format=function(e,t){var n=i.is(t,U)?[0][O](t):arguments;return e&&i.is(e,W)&&n.length-1&&(e=e.replace(x,function(e,t){return null==n[++t]?S:n[t]})),e||S},i.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,n){var a=n;
return i.replace(t,function(e,t,i,n,r){t=t||n,a&&(t in a&&(a=a[t]),"function"==typeof a&&r&&(a=a()))}),a=(null==a||a==n?e:a)+""};return function(t,n){return String(t).replace(e,function(e,t){return i(e,t,n)})}}(),i.ninja=function(){return k.was?_.win.Raphael=k.is:delete Raphael,i},i.st=pi,function(e,t,n){function a(){/in/.test(e.readyState)?setTimeout(a,9):i.eve("raphael.DOMload")}null==e.readyState&&e.addEventListener&&(e.addEventListener(t,n=function(){e.removeEventListener(t,n,!1),e.readyState="complete"},!1),e.readyState="loading"),a()}(document,"DOMContentLoaded"),t.on("raphael.DOMload",function(){C=!0}),function(){if(i.svg){var e="hasOwnProperty",t=String,n=parseFloat,a=parseInt,r=Math,o=r.max,s=r.abs,l=r.pow,c=/[, ]+/,d=i.eve,u="",h=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};
i.toString=function(){return"Your browser supports SVG.\nYou are running RaphaÃ«l "+this.version};var g=function(n,a){if(a){"string"==typeof n&&(n=g(n));for(var r in a)a[e](r)&&("xlink:"==r.substring(0,6)?n.setAttributeNS(p,r.substring(6),t(a[r])):n.setAttribute(r,t(a[r])))}else n=i._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,a){var c="linear",d=e.id+a,h=.5,p=.5,f=e.node,m=e.paper,v=f.style,b=i._g.doc.getElementById(d);if(!b){if(a=t(a).replace(i._radial_gradient,function(e,t,i){if(c="radial",t&&i){h=n(t),p=n(i);var a=2*(p>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=r.sqrt(.25-l(h-.5,2))*a+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*a)
}return u}),a=a.split(/\s*\-\s*/),"linear"==c){var y=a.shift();if(y=-n(y),isNaN(y))return null;var C=[0,0,r.cos(i.rad(y)),r.sin(i.rad(y))],I=1/(o(s(C[2]),s(C[3]))||1);C[2]*=I,C[3]*=I,C[2]<0&&(C[0]=-C[2],C[2]=0),C[3]<0&&(C[1]=-C[3],C[3]=0)}var E=i._parseDots(a);if(!E)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&d!=e.gradient.id&&(m.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){b=g(c+"Gradient",{id:d}),e.gradient=b,g(b,"radial"==c?{fx:h,fy:p}:{x1:C[0],y1:C[1],x2:C[2],y2:C[3],gradientTransform:e.matrix.invert()}),m.defs.appendChild(b);for(var w=0,x=E.length;x>w;w++)b.appendChild(g("stop",{offset:E[w].offset?E[w].offset:w?"100%":"0%","stop-color":E[w].color||"#fff"}))
}}return g(f,{fill:"url(#"+d+")",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1,1},b=function(e){var t=e.getBBox(1);g(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},y=function(n,a,r){if("path"==n.type){for(var o,s,l,c,d,h=t(a).toLowerCase().split("-"),p=n.paper,v=r?"end":"start",b=n.node,y=n.attrs,C=y["stroke-width"],I=h.length,E="classic",w=3,x=3,T=5;I--;)switch(h[I]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":E=h[I];break;case"wide":x=5;break;case"narrow":x=2;break;case"long":w=5;break;case"short":w=2}if("open"==E?(w+=2,x+=2,T+=2,l=1,c=r?4:1,d={fill:"none",stroke:y.stroke}):(c=l=w/2,d={fill:y.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&m[n._.arrows.endPath]--,n._.arrows.endMarker&&m[n._.arrows.endMarker]--):(n._.arrows.startPath&&m[n._.arrows.startPath]--,n._.arrows.startMarker&&m[n._.arrows.startMarker]--):n._.arrows={},"none"!=E){var _="raphael-marker-"+E,k="raphael-marker-"+v+E+w+x;
i._g.doc.getElementById(_)?m[_]++:(p.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[E],id:_})),m[_]=1);var R,D=i._g.doc.getElementById(k);D?(m[k]++,R=D.getElementsByTagName("use")[0]):(D=g(g("marker"),{id:k,markerHeight:x,markerWidth:w,orient:"auto",refX:c,refY:x/2}),R=g(g("use"),{"xlink:href":"#"+_,transform:(r?"rotate(180 "+w/2+" "+x/2+") ":u)+"scale("+w/T+","+x/T+")","stroke-width":(1/((w/T+x/T)/2)).toFixed(4)}),D.appendChild(R),p.defs.appendChild(D),m[k]=1),g(R,d);var O=l*("diamond"!=E&&"oval"!=E);r?(o=n._.arrows.startdx*C||0,s=i.getTotalLength(y.path)-O*C):(o=O*C,s=i.getTotalLength(y.path)-(n._.arrows.enddx*C||0)),d={},d["marker-"+v]="url(#"+k+")",(s||o)&&(d.d=i.getSubpath(y.path,o,s)),g(b,d),n._.arrows[v+"Path"]=_,n._.arrows[v+"Marker"]=k,n._.arrows[v+"dx"]=O,n._.arrows[v+"Type"]=E,n._.arrows[v+"String"]=a
}else r?(o=n._.arrows.startdx*C||0,s=i.getTotalLength(y.path)-o):(o=0,s=i.getTotalLength(y.path)-(n._.arrows.enddx*C||0)),n._.arrows[v+"Path"]&&g(b,{d:i.getSubpath(y.path,o,s)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(d in m)if(m[e](d)&&!m[d]){var q=i._g.doc.getElementById(d);q&&q.parentNode.removeChild(q)}}},C={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},I=function(e,i,n){if(i=C[t(i).toLowerCase()]){for(var a=e.attrs["stroke-width"]||"1",r={round:a,square:a,butt:0}[e.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],s=i.length;s--;)o[s]=i[s]*a+(s%2?1:-1)*r;
g(e.node,{"stroke-dasharray":o.join(",")})}},E=function(n,r){var l=n.node,d=n.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var f in r)if(r[e](f)){if(!i._availableAttrs[e](f))continue;var m=r[f];switch(d[f]=m,f){case"blur":n.blur(m);break;case"title":var C=l.getElementsByTagName("title");if(C.length&&(C=C[0]))C.firstChild.nodeValue=m;else{C=g("title");var E=i._g.doc.createTextNode(m);C.appendChild(E),l.appendChild(C)}break;case"href":case"target":var w=l.parentNode;if("a"!=w.tagName.toLowerCase()){var T=g("a");w.insertBefore(T,l),T.appendChild(l),w=T}"target"==f?w.setAttributeNS(p,"show","blank"==m?"new":m):w.setAttributeNS(p,f,m);break;case"cursor":l.style.cursor=m;
break;case"transform":n.transform(m);break;case"arrow-start":y(n,m);break;case"arrow-end":y(n,m,1);break;case"clip-rect":var _=t(m).split(c);if(4==_.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var k=g("clipPath"),R=g("rect");k.id=i.createUUID(),g(R,{x:_[0],y:_[1],width:_[2],height:_[3]}),k.appendChild(R),n.paper.defs.appendChild(k),g(l,{"clip-path":"url(#"+k.id+")"}),n.clip=R}if(!m){var D=l.getAttribute("clip-path");if(D){var O=i._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g,u));O&&O.parentNode.removeChild(O),g(l,{"clip-path":u}),delete n.clip}}break;case"path":"path"==n.type&&(g(l,{d:m?d.path=i._pathToAbsolute(m):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&y(n,n._.arrows.startString),"endString"in n._.arrows&&y(n,n._.arrows.endString,1)));
break;case"width":if(l.setAttribute(f,m),n._.dirty=1,!d.fx)break;f="x",m=d.x;case"x":d.fx&&(m=-d.x-(d.width||0));case"rx":if("rx"==f&&"rect"==n.type)break;case"cx":l.setAttribute(f,m),n.pattern&&b(n),n._.dirty=1;break;case"height":if(l.setAttribute(f,m),n._.dirty=1,!d.fy)break;f="y",m=d.y;case"y":d.fy&&(m=-d.y-(d.height||0));case"ry":if("ry"==f&&"rect"==n.type)break;case"cy":l.setAttribute(f,m),n.pattern&&b(n),n._.dirty=1;break;case"r":"rect"==n.type?g(l,{rx:m,ry:m}):l.setAttribute(f,m),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(p,"href",m);break;case"stroke-width":(1!=n._.sx||1!=n._.sy)&&(m/=o(s(n._.sx),s(n._.sy))||1),n.paper._vbSize&&(m*=n.paper._vbSize),l.setAttribute(f,m),d["stroke-dasharray"]&&I(n,d["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&y(n,n._.arrows.startString),"endString"in n._.arrows&&y(n,n._.arrows.endString,1));
break;case"stroke-dasharray":I(n,m,r);break;case"fill":var q=t(m).match(i._ISURL);if(q){k=g("pattern");var S=g("image");k.id=i.createUUID(),g(k,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(S,{x:0,y:0,"xlink:href":q[1]}),k.appendChild(S),function(e){i._preload(q[1],function(){var t=this.offsetWidth,i=this.offsetHeight;g(e,{width:t,height:i}),g(S,{width:t,height:i}),n.paper.safari()})}(k),n.paper.defs.appendChild(k),g(l,{fill:"url(#"+k.id+")"}),n.pattern=k,n.pattern&&b(n);break}var K=i.getRGB(m);if(K.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=t(m).charAt())&&v(n,m)){if("opacity"in d||"fill-opacity"in d){var A=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));
if(A){var N=A.getElementsByTagName("stop");g(N[N.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=m,d.fill="none";break}}else delete r.gradient,delete d.gradient,!i.is(d.opacity,"undefined")&&i.is(r.opacity,"undefined")&&g(l,{opacity:d.opacity}),!i.is(d["fill-opacity"],"undefined")&&i.is(r["fill-opacity"],"undefined")&&g(l,{"fill-opacity":d["fill-opacity"]});K[e]("opacity")&&g(l,{"fill-opacity":K.opacity>1?K.opacity/100:K.opacity});case"stroke":K=i.getRGB(m),l.setAttribute(f,K.hex),"stroke"==f&&K[e]("opacity")&&g(l,{"stroke-opacity":K.opacity>1?K.opacity/100:K.opacity}),"stroke"==f&&n._.arrows&&("startString"in n._.arrows&&y(n,n._.arrows.startString),"endString"in n._.arrows&&y(n,n._.arrows.endString,1));
break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=t(m).charAt())&&v(n,m);break;case"opacity":d.gradient&&!d[e]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(d.gradient){A=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)),A&&(N=A.getElementsByTagName("stop"),g(N[N.length-1],{"stop-opacity":m}));break}default:"font-size"==f&&(m=a(m,10)+"px");var M=f.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[M]=m,n._.dirty=1,l.setAttribute(f,m)}}x(n,r),l.style.visibility=h},w=1.2,x=function(n,r){if("text"==n.type&&(r[e]("text")||r[e]("font")||r[e]("font-size")||r[e]("x")||r[e]("y"))){var o=n.attrs,s=n.node,l=s.firstChild?i._g.doc.defaultView.getComputedStyle(s.firstChild,u):void 0,c=l?a(l.getPropertyValue("font-size"),10):10;
if(r[e]("text")){for(o.text=r.text;s.firstChild;)s.removeChild(s.firstChild);for(var d,h=t(r.text).split("\n"),p=[],f=0,m=h.length;m>f;f++)d=g("tspan"),f&&g(d,{dy:c*w,x:o.x}),d.appendChild(i._g.doc.createTextNode(h[f])),s.appendChild(d),p[f]=d}else for(p=s.getElementsByTagName("tspan"),f=0,m=p.length;m>f;f++)f?g(p[f],{dy:c*w,x:o.x}):g(p[0],{dy:0});g(s,{x:o.x,y:o.y}),n._.dirty=1;var v=n._getBBox(),b=o.y-(v.y+v.height/2);b&&i.is(b,"finite")&&g(p[0],{dy:b})}},T=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=i._oid++,e.raphaelid=this.id,this.matrix=i.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null
},_=i.el;T.prototype=_,_.constructor=T,i._engine.path=function(e,t){var i=g("path");t.canvas&&t.canvas.appendChild(i);var n=new T(i,t);return n.type="path",E(n,{fill:"none",stroke:"#000",path:e}),n},_.rotate=function(e,i,a){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(i=n(e[1]),a=n(e[2])),e=n(e[0]),null==a&&(i=a),null==i||null==a){var r=this.getBBox(1);i=r.x+r.width/2,a=r.y+r.height/2}return this.transform(this._.transform.concat([["r",e,i,a]])),this},_.scale=function(e,i,a,r){if(this.removed)return this;if(e=t(e).split(c),e.length-1&&(i=n(e[1]),a=n(e[2]),r=n(e[3])),e=n(e[0]),null==i&&(i=e),null==r&&(a=r),null==a||null==r)var o=this.getBBox(1);
return a=null==a?o.x+o.width/2:a,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",e,i,a,r]])),this},_.translate=function(e,i){return this.removed?this:(e=t(e).split(c),e.length-1&&(i=n(e[1])),e=n(e[0])||0,i=+i||0,this.transform(this._.transform.concat([["t",e,i]])),this)},_.transform=function(t){var n=this._;if(null==t)return n.transform;if(i._extractTransform(this,t),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&g(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var a=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":a})}return this},_.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this
},_.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},_.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),i._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var t in this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;this.removed=!0}},_._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()
}catch(i){}finally{t=t||{}}return e&&this.hide(),t},_.attr=function(t,n){if(this.removed)return this;if(null==t){var a={};for(var r in this.attrs)this.attrs[e](r)&&(a[r]=this.attrs[r]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==n&&i.is(t,"string")){if("fill"==t&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==t)return this._.transform;for(var o=t.split(c),s={},l=0,u=o.length;u>l;l++)t=o[l],s[t]=t in this.attrs?this.attrs[t]:i.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:i._availableAttrs[t];return u-1?s:s[o[0]]}if(null==n&&i.is(t,"array")){for(s={},l=0,u=t.length;u>l;l++)s[t[l]]=this.attr(t[l]);
return s}if(null!=n){var h={};h[t]=n}else null!=t&&i.is(t,"object")&&(h=t);for(var p in h)d("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&h[e](p)&&i.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var m in f)f[e](m)&&(h[m]=f[m])}return E(this,h),this},_.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&i._tofront(this,e),this
},_.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper);this.paper;return this},_.insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),i._insertafter(this,e,this.paper),this},_.insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),i._insertbefore(this,e,this.paper),this
},_.blur=function(e){var t=this;if(0!==+e){var n=g("filter"),a=g("feGaussianBlur");t.attrs.blur=e,n.id=i.createUUID(),g(a,{stdDeviation:+e||1.5}),n.appendChild(a),t.paper.defs.appendChild(n),t._blur=n,g(t.node,{filter:"url(#"+n.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},i._engine.circle=function(e,t,i,n){var a=g("circle");e.canvas&&e.canvas.appendChild(a);var r=new T(a,e);return r.attrs={cx:t,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",g(a,r.attrs),r},i._engine.rect=function(e,t,i,n,a,r){var o=g("rect");e.canvas&&e.canvas.appendChild(o);var s=new T(o,e);
return s.attrs={x:t,y:i,width:n,height:a,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},s.type="rect",g(o,s.attrs),s},i._engine.ellipse=function(e,t,i,n,a){var r=g("ellipse");e.canvas&&e.canvas.appendChild(r);var o=new T(r,e);return o.attrs={cx:t,cy:i,rx:n,ry:a,fill:"none",stroke:"#000"},o.type="ellipse",g(r,o.attrs),o},i._engine.image=function(e,t,i,n,a,r){var o=g("image");g(o,{x:i,y:n,width:a,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var s=new T(o,e);return s.attrs={x:i,y:n,width:a,height:r,src:t},s.type="image",s},i._engine.text=function(e,t,n,a){var r=g("text");e.canvas&&e.canvas.appendChild(r);
var o=new T(r,e);return o.attrs={x:t,y:n,"text-anchor":"middle",text:a,font:i._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",E(o,o.attrs),o},i._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},i._engine.create=function(){var e=i._getContainer.apply(0,arguments),t=e&&e.container,n=e.x,a=e.y,r=e.width,o=e.height;if(!t)throw new Error("SVG container not found.");var s,l=g("svg"),c="overflow:hidden;";return n=n||0,a=a||0,r=r||512,o=o||342,g(l,{height:o,version:1.1,width:r,xmlns:"http://www.w3.org/2000/svg"}),1==t?(l.style.cssText=c+"position:absolute;left:"+n+"px;top:"+a+"px",i._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l)),t=new i._Paper,t.width=r,t.height=o,t.canvas=l,t.clear(),t._left=t._top=0,s&&(t.renderfix=function(){}),t.renderfix(),t
},i._engine.setViewBox=function(e,t,i,n,a){d("raphael.setViewBox",this,this._viewBox,[e,t,i,n,a]);var r,s,l=o(i/this.width,n/this.height),c=this.top,u=a?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,r="0 0 "+this.width+h+this.height):(this._vbSize=l,r=e+h+t+h+i+h+n),g(this.canvas,{viewBox:r,preserveAspectRatio:u});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[e,t,i,n,!!a],this},i.prototype.renderfix=function(){var e,t=this.canvas,i=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(n){e=t.createSVGMatrix()}var a=-e.e%1,r=-e.f%1;
(a||r)&&(a&&(this._left=(this._left+a)%1,i.left=this._left+"px"),r&&(this._top=(this._top+r)%1,i.top=this._top+"px"))},i.prototype.clear=function(){i.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(i._g.doc.createTextNode("Created with RaphaÃ«l "+i.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},i.prototype.remove=function(){d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?i._removedFactory(e):null};var k=i.st;for(var R in _)_[e](R)&&!k[e](R)&&(k[R]=function(e){return function(){var t=arguments;
return this.forEach(function(i){i[e].apply(i,t)})}}(R))}}(),function(){if(i.vml){var e="hasOwnProperty",t=String,n=parseFloat,a=Math,r=a.round,o=a.max,s=a.min,l=a.abs,c="fill",d=/[, ]+/,u=i.eve,h=" progid:DXImageTransform.Microsoft",p=" ",f="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,b=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",C=21600,I={path:1,rect:1,image:1},E={circle:1,ellipse:1},w=function(e){var n=/[ahqstv]/gi,a=i._pathToAbsolute;if(t(e).match(n)&&(a=i._path2curve),n=/[clmz]/g,a==i._pathToAbsolute&&!t(e).match(n)){var o=t(e).replace(g,function(e,t,i){var n=[],a="m"==t.toLowerCase(),o=m[t];
return i.replace(b,function(e){a&&2==n.length&&(o+=n+m["m"==t?"l":"L"],n=[]),n.push(r(e*C))}),o+n});return o}var s,l,c=a(e);o=[];for(var d=0,u=c.length;u>d;d++){s=c[d],l=c[d][0].toLowerCase(),"z"==l&&(l="x");for(var h=1,v=s.length;v>h;h++)l+=r(s[h]*C)+(h!=v-1?",":f);o.push(l)}return o.join(p)},x=function(e,t,n){var a=i.matrix();return a.rotate(-e,.5,.5),{dx:a.x(t,n),dy:a.y(t,n)}},T=function(e,t,i,n,a,r){var o=e._,s=e.matrix,d=o.fillpos,u=e.node,h=u.style,f=1,m="",g=C/t,v=C/i;if(h.visibility="hidden",t&&i){if(u.coordsize=l(g)+p+l(v),h.rotation=r*(0>t*i?-1:1),r){var b=x(r,n,a);n=b.dx,a=b.dy}if(0>t&&(m+="x"),0>i&&(m+=" y")&&(f=-1),h.flip=m,u.coordorigin=n*-g+p+a*-v,d||o.fillsize){var y=u.getElementsByTagName(c);
y=y&&y[0],u.removeChild(y),d&&(b=x(r,s.x(d[0],d[1]),s.y(d[0],d[1])),y.position=b.dx*f+p+b.dy*f),o.fillsize&&(y.size=o.fillsize[0]*l(t)+p+o.fillsize[1]*l(i)),u.appendChild(y)}h.visibility="visible"}};i.toString=function(){return"Your browser doesnât support SVG. Falling down to VML.\nYou are running RaphaÃ«l "+this.version};var _=function(e,i,n){for(var a=t(i).toLowerCase().split("-"),r=n?"end":"start",o=a.length,s="classic",l="medium",c="medium";o--;)switch(a[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=a[o];break;case"wide":case"narrow":c=a[o];break;case"long":case"short":l=a[o]}var d=e.node.getElementsByTagName("stroke")[0];
d[r+"arrow"]=s,d[r+"arrowlength"]=l,d[r+"arrowwidth"]=c},k=function(a,l){a.attrs=a.attrs||{};var u=a.node,h=a.attrs,m=u.style,g=I[a.type]&&(l.x!=h.x||l.y!=h.y||l.width!=h.width||l.height!=h.height||l.cx!=h.cx||l.cy!=h.cy||l.rx!=h.rx||l.ry!=h.ry||l.r!=h.r),v=E[a.type]&&(h.cx!=l.cx||h.cy!=l.cy||h.r!=l.r||h.rx!=l.rx||h.ry!=l.ry),b=a;for(var y in l)l[e](y)&&(h[y]=l[y]);if(g&&(h.path=i._getPath[a.type](a),a._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&a.blur(l.blur),(l.path&&"path"==a.type||g)&&(u.path=w(~t(h.path).toLowerCase().indexOf("r")?i._pathToAbsolute(h.path):h.path),"image"==a.type&&(a._.fillpos=[h.x,h.y],a._.fillsize=[h.width,h.height],T(a,1,1,0,0,0))),"transform"in l&&a.transform(l.transform),v){var x=+h.cx,k=+h.cy,D=+h.rx||+h.r||0,O=+h.ry||+h.r||0;
u.path=i.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r((x-D)*C),r((k-O)*C),r((x+D)*C),r((k+O)*C),r(x*C)),a._.dirty=1}if("clip-rect"in l){var S=t(l["clip-rect"]).split(d);if(4==S.length){S[2]=+S[2]+ +S[0],S[3]=+S[3]+ +S[1];var K=u.clipRect||i._g.doc.createElement("div"),A=K.style;A.clip=i.format("rect({1}px {2}px {3}px {0}px)",S),u.clipRect||(A.position="absolute",A.top=0,A.left=0,A.width=a.paper.width+"px",A.height=a.paper.height+"px",u.parentNode.insertBefore(K,u),K.appendChild(u),u.clipRect=K)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(a.textpath){var N=a.textpath.style;l.font&&(N.font=l.font),l["font-family"]&&(N.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(N.fontSize=l["font-size"]),l["font-weight"]&&(N.fontWeight=l["font-weight"]),l["font-style"]&&(N.fontStyle=l["font-style"])
}if("arrow-start"in l&&_(b,l["arrow-start"]),"arrow-end"in l&&_(b,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var M=u.getElementsByTagName(c),P=!1;if(M=M&&M[0],!M&&(P=M=q(c)),"image"==a.type&&l.src&&(M.src=l.src),l.fill&&(M.on=!0),(null==M.on||"none"==l.fill||null===l.fill)&&(M.on=!1),M.on&&l.fill){var Q=t(l.fill).match(i._ISURL);if(Q){M.parentNode==u&&u.removeChild(M),M.rotate=!0,M.src=Q[1],M.type="tile";var L=a.getBBox(1);
M.position=L.x+p+L.y,a._.fillpos=[L.x,L.y],i._preload(Q[1],function(){a._.fillsize=[this.offsetWidth,this.offsetHeight]})}else M.color=i.getRGB(l.fill).hex,M.src=f,M.type="solid",i.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=t(l.fill).charAt())&&R(b,l.fill,M)&&(h.fill="none",h.gradient=l.fill,M.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var $=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+i.getRGB(l.fill).o+1||2)-1);$=s(o($,0),1),M.opacity=$,M.src&&(M.color="none")}u.appendChild(M);var F=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],B=!1;!F&&(B=F=q("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(F.on=!0),("none"==l.stroke||null===l.stroke||null==F.on||0==l.stroke||0==l["stroke-width"])&&(F.on=!1);
var z=i.getRGB(l.stroke);F.on&&l.stroke&&(F.color=z.hex),$=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+z.o+1||2)-1);var H=.75*(n(l["stroke-width"])||1);if($=s(o($,0),1),null==l["stroke-width"]&&(H=h["stroke-width"]),l["stroke-width"]&&(F.weight=H),H&&1>H&&($*=H)&&(F.weight=1),F.opacity=$,l["stroke-linejoin"]&&(F.joinstyle=l["stroke-linejoin"]||"miter"),F.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(F.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};
F.dashstyle=j[e](l["stroke-dasharray"])?j[l["stroke-dasharray"]]:f}B&&u.appendChild(F)}if("text"==b.type){b.paper.canvas.style.display=f;var W=b.paper.span,U=100,V=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);m=W.style,h.font&&(m.font=h.font),h["font-family"]&&(m.fontFamily=h["font-family"]),h["font-weight"]&&(m.fontWeight=h["font-weight"]),h["font-style"]&&(m.fontStyle=h["font-style"]),V=n(h["font-size"]||V&&V[0])||10,m.fontSize=V*U+"px",b.textpath.string&&(W.innerHTML=t(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=W.getBoundingClientRect();b.W=h.w=(G.right-G.left)/U,b.H=h.h=(G.bottom-G.top)/U,b.X=h.x,b.Y=h.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=i.format("m{0},{1}l{2},{1}",r(h.x*C),r(h.y*C),r(h.x*C)+1));
for(var X=["x","y","text","font","font-family","font-weight","font-style","font-size"],Y=0,J=X.length;J>Y;Y++)if(X[Y]in l){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},R=function(e,r,o){e.attrs=e.attrs||{};var s=(e.attrs,Math.pow),l="linear",c=".5 .5";if(e.attrs.gradient=r,r=t(r).replace(i._radial_gradient,function(e,t,i){return l="radial",t&&i&&(t=n(t),i=n(i),s(t-.5,2)+s(i-.5,2)>.25&&(i=a.sqrt(.25-s(t-.5,2))*(2*(i>.5)-1)+.5),c=t+p+i),f
}),r=r.split(/\s*\-\s*/),"linear"==l){var d=r.shift();if(d=-n(d),isNaN(d))return null}var u=i._parseDots(r);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(o),o.on=!0,o.method="none",o.color=u[0].color,o.color2=u[u.length-1].color;for(var h=[],m=0,g=u.length;g>m;m++)u[m].offset&&h.push(u[m].offset+p+u[m].color);o.colors=h.length?h.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-d)%360),e.appendChild(o)}return 1},D=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=i._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=i.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null
},O=i.el;D.prototype=O,O.constructor=D,O.transform=function(e){if(null==e)return this._.transform;var n,a=this.paper._viewBoxShift,r=a?"s"+[a.scale,a.scale]+"-1-1t"+[a.dx,a.dy]:f;a&&(n=e=t(e).replace(/\.{3}|\u2026/g,this._.transform||f)),i._extractTransform(this,r+e);var o,s=this.matrix.clone(),l=this.skew,c=this.node,d=~t(this.attrs.fill).indexOf("-"),u=!t(this.attrs.fill).indexOf("url(");if(s.translate(1,1),u||d||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=s.split(),d&&o.noRotation||!o.isSimple){c.style.filter=s.toFilter();var h=this.getBBox(),m=this.getBBox(1),g=h.x-m.x,v=h.y-m.y;c.coordorigin=g*-C+p+v*-C,T(this,1,1,g,v,0)}else c.style.filter=f,T(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);
else c.style.filter=f,l.matrix=t(s),l.offset=s.offset();return n&&(this._.transform=n),this},O.rotate=function(e,i,a){if(this.removed)return this;if(null!=e){if(e=t(e).split(d),e.length-1&&(i=n(e[1]),a=n(e[2])),e=n(e[0]),null==a&&(i=a),null==i||null==a){var r=this.getBBox(1);i=r.x+r.width/2,a=r.y+r.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,i,a]])),this}},O.translate=function(e,i){return this.removed?this:(e=t(e).split(d),e.length-1&&(i=n(e[1])),e=n(e[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",e,i]])),this)},O.scale=function(e,i,a,r){if(this.removed)return this;
if(e=t(e).split(d),e.length-1&&(i=n(e[1]),a=n(e[2]),r=n(e[3]),isNaN(a)&&(a=null),isNaN(r)&&(r=null)),e=n(e[0]),null==i&&(i=e),null==r&&(a=r),null==a||null==r)var o=this.getBBox(1);return a=null==a?o.x+o.width/2:a,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",e,i,a,r]])),this._.dirtyT=1,this},O.hide=function(){return!this.removed&&(this.node.style.display="none"),this},O.show=function(){return!this.removed&&(this.node.style.display=f),this},O._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},O.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),i.eve.unbind("raphael.*.*."+this.id),i._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);
for(var e in this)this[e]="function"==typeof this[e]?i._removedFactory(e):null;this.removed=!0}},O.attr=function(t,n){if(this.removed)return this;if(null==t){var a={};for(var r in this.attrs)this.attrs[e](r)&&(a[r]=this.attrs[r]);return a.gradient&&"none"==a.fill&&(a.fill=a.gradient)&&delete a.gradient,a.transform=this._.transform,a}if(null==n&&i.is(t,"string")){if(t==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=t.split(d),s={},l=0,h=o.length;h>l;l++)t=o[l],s[t]=t in this.attrs?this.attrs[t]:i.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:i._availableAttrs[t];return h-1?s:s[o[0]]}if(this.attrs&&null==n&&i.is(t,"array")){for(s={},l=0,h=t.length;h>l;l++)s[t[l]]=this.attr(t[l]);
return s}var p;null!=n&&(p={},p[t]=n),null==n&&i.is(t,"object")&&(p=t);for(var f in p)u("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&p[e](f)&&i.is(this.paper.customAttributes[f],"function")){var m=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var g in m)m[e](g)&&(p[g]=m[g])}p.text&&"text"==this.type&&(this.textpath.string=p.text),k(this,p)}return this},O.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&i._tofront(this,this.paper),this},O.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper)),this)
},O.insertAfter=function(e){return this.removed?this:(e.constructor==i.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),i._insertafter(this,e,this.paper),this)},O.insertBefore=function(e){return this.removed?this:(e.constructor==i.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),i._insertbefore(this,e,this.paper),this)},O.blur=function(e){var t=this.node.runtimeStyle,n=t.filter;return n=n.replace(v,f),0!==+e?(this.attrs.blur=e,t.filter=n+p+h+".Blur(pixelradius="+(+e||1.5)+")",t.margin=i.format("-{0}px 0 0 -{0}px",r(+e||1.5))):(t.filter=n,t.margin=0,delete this.attrs.blur),this
},i._engine.path=function(e,t){var i=q("shape");i.style.cssText=y,i.coordsize=C+p+C,i.coordorigin=t.coordorigin;var n=new D(i,t),a={fill:"none",stroke:"#000"};e&&(a.path=e),n.type="path",n.path=[],n.Path=f,k(n,a),t.canvas.appendChild(i);var r=q("skew");return r.on=!0,i.appendChild(r),n.skew=r,n.transform(f),n},i._engine.rect=function(e,t,n,a,r,o){var s=i._rectPath(t,n,a,r,o),l=e.path(s),c=l.attrs;return l.X=c.x=t,l.Y=c.y=n,l.W=c.width=a,l.H=c.height=r,c.r=o,c.path=s,l.type="rect",l},i._engine.ellipse=function(e,t,i,n,a){{var r=e.path();r.attrs}return r.X=t-n,r.Y=i-a,r.W=2*n,r.H=2*a,r.type="ellipse",k(r,{cx:t,cy:i,rx:n,ry:a}),r},i._engine.circle=function(e,t,i,n){{var a=e.path();
a.attrs}return a.X=t-n,a.Y=i-n,a.W=a.H=2*n,a.type="circle",k(a,{cx:t,cy:i,r:n}),a},i._engine.image=function(e,t,n,a,r,o){var s=i._rectPath(n,a,r,o),l=e.path(s).attr({stroke:"none"}),d=l.attrs,u=l.node,h=u.getElementsByTagName(c)[0];return d.src=t,l.X=d.x=n,l.Y=d.y=a,l.W=d.width=r,l.H=d.height=o,d.path=s,l.type="image",h.parentNode==u&&u.removeChild(h),h.rotate=!0,h.src=t,h.type="tile",l._.fillpos=[n,a],l._.fillsize=[r,o],u.appendChild(h),T(l,1,1,0,0,0),l},i._engine.text=function(e,n,a,o){var s=q("shape"),l=q("path"),c=q("textpath");n=n||0,a=a||0,o=o||"",l.v=i.format("m{0},{1}l{2},{1}",r(n*C),r(a*C),r(n*C)+1),l.textpathok=!0,c.string=t(o),c.on=!0,s.style.cssText=y,s.coordsize=C+p+C,s.coordorigin="0 0";
var d=new D(s,e),u={fill:"#000",stroke:"none",font:i._availableAttrs.font,text:o};d.shape=s,d.path=l,d.textpath=c,d.type="text",d.attrs.text=t(o),d.attrs.x=n,d.attrs.y=a,d.attrs.w=1,d.attrs.h=1,k(d,u),s.appendChild(c),s.appendChild(l),e.canvas.appendChild(s);var h=q("skew");return h.on=!0,s.appendChild(h),d.skew=h,d.transform(f),d},i._engine.setSize=function(e,t){var n=this.canvas.style;return this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),n.width=e,n.height=t,n.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&i._engine.setViewBox.apply(this,this._viewBox),this},i._engine.setViewBox=function(e,t,n,a,r){i.eve("raphael.setViewBox",this,this._viewBox,[e,t,n,a,r]);
var s,l,c=this.width,d=this.height,u=1/o(n/c,a/d);return r&&(s=d/a,l=c/n,c>n*s&&(e-=(c-n*s)/2/s),d>a*l&&(t-=(d-a*l)/2/l)),this._viewBox=[e,t,n,a,!!r],this._viewBoxShift={dx:-e,dy:-t,scale:u},this.forEach(function(e){e.transform("...")}),this};var q;i._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),q=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(i){q=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},i._engine.initWin(i._g.win),i._engine.create=function(){var e=i._getContainer.apply(0,arguments),t=e.container,n=e.height,a=e.width,r=e.x,o=e.y;
if(!t)throw new Error("VML container not found.");var s=new i._Paper,l=s.canvas=i._g.doc.createElement("div"),c=l.style;return r=r||0,o=o||0,a=a||512,n=n||342,s.width=a,s.height=n,a==+a&&(a+="px"),n==+n&&(n+="px"),s.coordsize=1e3*C+p+1e3*C,s.coordorigin="0 0",s.span=i._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",a,n),1==t?(i._g.doc.body.appendChild(l),c.left=r+"px",c.top=o+"px",c.position="absolute"):t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),s.renderfix=function(){},s
},i.prototype.clear=function(){i.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=i._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},i.prototype.remove=function(){i.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?i._removedFactory(e):null;return!0};var S=i.st;for(var K in O)O[e](K)&&!S[e](K)&&(S[K]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(K))}}(),k.was?_.win.Raphael=i:Raphael=i,"object"==typeof exports&&(module.exports=i),i
}),define("scale.raphael",["jquery","raphael"],function(e,t){var i=function(i,n,a){var r=i.style?i:document.getElementById(i);r.style.position||(r.style.position="relative"),r.style.width=n+"px",r.style.height=a+"px";var o;"VML"===t.type?(r.innerHTML="<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml'></rvml:group>",o=e(".rvml",e(r))[0]):(r.innerHTML="<div class='svggroup'></div>",o=e(".svggroup",e(r))[0]);var s,l=new t(o,n,a);return"SVG"===t.type?l.canvas.setAttribute("viewBox","0 0 "+n+" "+a):s=r.getElementsByTagName("div")[0],l.changeSize=function(e,i,c,d){d=!d;var u=e/n,h=i/a,p=h>u?u:h,f=parseInt(a*p),m=parseInt(n*p);
if("VML"===t.type){var g=document.getElementsByTagName("textpath");for(var v in g){var b=g[v];if(b.style){if(!b._fontSize){var y=b.style.font.split("px");b._fontSize=parseInt(y[0]),b._font=y[1]}b.style.font=b._fontSize*p+"px"+b._font}}var C;C=f>m?1e3*m/n:1e3*f/a,C=parseInt(C),o.style.width=C+"px",o.style.height=C+"px",d&&(o.style.left=parseInt((e-m)/2)+"px",o.style.top=parseInt((i-f)/2)+"px"),s.style.overflow="visible"}d&&(m=e,f=i),r.style.width=m+"px",r.style.height=f+"px",l.setSize(m,f),c&&(r.style.position="absolute",r.style.left=parseInt((e-m)/2)+"px",r.style.top=parseInt((i-f)/2)+"px")},l.scaleAll=function(e){l.changeSize(n*e,a*e)},l.changeSize(n,a),l.w=n,l.h=a,l
};return i}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicAssociateInteraction clearfix '+d((o=t&&t.attributes,o=null==o||o===!1?o:o["class"],typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json",function(){return{basic:{stroke:"#8D949E","stroke-width":2,"stroke-dasharray":"","stroke-linejoin":"round",fill:"#cccccc","fill-opacity":.5,cursor:"pointer"},hover:{stroke:"#3E7DA7",fill:"#0E5D91","fill-opacity":.3},selectable:{"stroke-dasharray":"-",stroke:"#3E7DA7",fill:"#cccccc","fill-opacity":.5},active:{stroke:"#3E7DA7","stroke-dasharray":"",fill:"#0E5D91","fill-opacity":.5},error:{stroke:"#C74155","stroke-dasharray":"","fill-opacity":.5,fill:"#661728"},success:{stroke:"#C74155","stroke-dasharray":"",fill:"#0E914B","fill-opacity":.5},layer:{fill:"#ffffff",opacity:0,cursor:"pointer"},creator:{"fill-opacity":.5,stroke:"#3E7DA7","stroke-dasharray":"",fill:"#0E5D91",cursor:"pointer"},"imageset-rect-stroke":{fill:"#ffffff",stroke:"#666666","stroke-width":1,"stroke-linejoin":"round",cursor:"pointer"},"imageset-rect-no-stroke":{fill:"#ffffff",stroke:"#ffffff","stroke-width":2,"stroke-linejoin":"round",cursor:"pointer"},"imageset-img":{cursor:"pointer"},"order-text":{fill:"#ffffff",stroke:"#000000","stroke-width":.7,"font-family":"sans-serif","font-weight":"bold","font-size":22,cursor:"pointer"},"score-text-default":{stroke:"#444444","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":20,cursor:"pointer"},"score-text":{stroke:"#000000","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":20,cursor:"pointer"},"small-text":{stroke:"#000000","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":16,cursor:"pointer"},"layer-pos-text":{stroke:"#333","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":14},target:{path:"m 18,8.4143672 -1.882582,0 C 15.801891,4.9747852 13.071059,2.2344961 9.63508,1.9026738 L 9.63508,0 8.2305176,0 l 0,1.9026387 C 4.7947148,2.2343027 2.0637246,4.9746621 1.7481973,8.4143672 l -1.7481973,0 0,1.4045625 1.754877,0 c 0.3460429,3.4066753 3.0632871,6.1119843 6.4756406,6.4413813 l 0,1.739689 1.4045624,0 0,-1.739725 c 3.412547,-0.329537 6.129633,-3.034793 6.475641,-6.4413453 l 1.889279,0 z m -8.36492,6.5188648 0,-4.064673 -1.4045624,0 0,4.063882 C 5.5511016,14.612555 3.4232695,12.494619 3.0864551,9.8189297 l 4.0449512,0 0,-1.4045625 -4.0546368,0 C 3.3788672,5.6984941 5.5228887,3.5393379 8.2305176,3.2161113 l 0,3.9153125 1.4045624,0 0,-3.9160859 c 2.711162,0.3203965 4.858576,2.4808887 5.160955,5.1990293 l -3.927441,0 0,1.4045625 3.917773,0 C 14.449289,12.496957 12.318363,14.616158 9.63508,14.933232 z",fill:"#0E914B",width:1,"stroke-width":0,cursor:"pointer"},"target-hover":{fill:"#3E7DA7","fill-opacity":1},"target-success":{fill:"#0E914B","fill-opacity":1},assoc:{"stroke-width":2,"stroke-linecap":"round",cursor:"pointer"},"assoc-layer":{"stroke-width":12,cursor:"pointer","stroke-opacity":0},"assoc-bullet":{fill:"#000000"},close:{path:"m 8.9997236,18.000001 c -4.9703918,0 -8.99972284217367,-4.02901 -8.99972284217367,-9 C 7.5782633e-7,4.029011 4.0293108,9.8531742e-7 8.9997236,9.8531742e-7 13.970691,9.8531742e-7 18.000001,4.029011 18.000001,9.000001 c 0,4.97099 -4.02931,9 -9.0002774,9 z m 0.0045,-16.37151 c -4.06191,0 -7.35492,3.29635 -7.35492,7.36251 0,4.06562 3.292989,7.36255 7.35492,7.36255 4.0630384,0 7.3554334,-3.29693 7.3554334,-7.36255 0,-4.06614 -3.292969,-7.36251 -7.3554334,-7.36251 v 0 z m 3.1314894,9.31167 -1.953823,-1.94014 1.953843,-1.94018 c 0.08964,-0.089 0.134622,-0.19099 0.135073,-0.30584 4.31e-4,-0.11488 -0.04383,-0.21712 -0.132838,-0.30681 l -0.54267,-0.54685 c -0.08898,-0.0897 -0.190903,-0.13473 -0.305719,-0.13514 -0.114837,-4.4e-4 -0.217064,0.0439 -0.306703,0.1329 l -1.9623724,1.94865 -1.962395,-1.94865 c -0.08964,-0.089 -0.191845,-0.13336 -0.306702,-0.1329 -0.114837,4.3e-4 -0.216736,0.0455 -0.305719,0.13514 l -0.54265,0.54685 c -0.08902,0.0897 -0.133269,0.19193 -0.132838,0.30681 4.3e-4,0.11485 0.04543,0.21681 0.135073,0.30584 l 1.953823,1.94018 -1.953782,1.94014 c -0.0896,0.089 -0.134684,0.19094 -0.135114,0.3058 -4.31e-4,0.11486 0.04386,0.21716 0.132838,0.30681 l 0.542671,0.54687 c 0.08896,0.0897 0.190923,0.13467 0.305718,0.13516 0.114857,3.9e-4 0.217105,-0.0439 0.306724,-0.13288 l 1.962332,-1.94863 1.9623324,1.94863 c 0.08962,0.089 0.191886,0.13323 0.306744,0.13288 0.114836,-4.5e-4 0.216736,-0.0455 0.305698,-0.13516 l 0.542691,-0.54687 c 0.089,-0.0897 0.133227,-0.19193 0.132838,-0.30681 -3.9e-4,-0.1149 -0.0455,-0.21683 -0.135073,-0.3058 z",fill:"#0E5D91",width:1,opacity:0,"stroke-width":0,cursor:"pointer"},"close-bg":{fill:"#ffffff",stroke:"none",cursor:"pointer",opacity:0},"touch-circle":{fill:"none",stroke:"#3E7DA7","stroke-width":2}}
}),define("taoQtiItem/qtiCommonRenderer/helpers/Graphic",["jquery","lodash","raphael","scale.raphael","json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json"],function(e,t,i,n,a){var r={"default":"rect",poly:"path"},o={rect:4,ellipse:4,circle:3,poly:6,"default":0},s={rect:function(e){return[e[0],e[1],e[2]-e[0],e[3]-e[1]]},"default":function(e){return[0,0,e.width,e.height]},poly:function(e){var t,i=e.length;for(e[0]!==e[i-2]&&e[1]!==e[i-1]&&(e.push(e[0]),e.push(e[1])),e[0]="M"+e[0],t=1;i>t;t++)t%2===0&&(e[t]="L"+e[t]);return[e.join(" ")]}},l={rect:function(e){return[e.x,e.y,e.x+e.width,e.y+e.height]},circle:function(e){return[e.cx,e.cy,e.r]},ellipse:function(e){return[e.cx,e.cy,e.rx,e.ry]
},"default":function(e){return this.rect(e)},path:function(e){var i,n=[];if(t.isArray(e.path))for(i=1;i<e.path.length;i++)3===e.path[i].length&&(n.push(e.path[i][1]),n.push(e.path[i][2]));return n}},c={_style:a,setStyle:function(e,t){e&&a[t]&&e.attr(a[t])},responsivePaper:function(a,r,o){function s(e,t){e&&e.stopPropagation();var i=1,n=u.outerWidth()-u.width()+(d.outerWidth()-d.width())+1,a=h.width(),r=d.innerWidth();(r>0||t>0)&&(!t&&d.children(".image-sidebar").length&&(n+=d.children(".image-sidebar").outerWidth(!0)),r>t&&a>t?r=t-n:r>a?r=a-n:r-=n,d.hasClass("responsive")?(i=r/f,l.changeSize(r,m*i,!1,!1),l.scaleAll(i)):l.changeSize(r,m,!1,!1),"function"==typeof o.resize&&o.resize(r,i),d.trigger("resized.qti-widget"))
}var l,c,d=o.container||e("#"+a).parent(),u=e(".image-editor",d),h=d.closest(".qti-itemBody"),p="SVG"===i.type?n:i,f=o.width||d.innerWidth(),m=o.height||d.innerHeight(),g=t.throttle(s,10);return l=p.call(null,a,f,m),c=l.image(o.img,0,0,f,m),o.imgId&&(c.id=o.imgId),e(c.node).attr("externalResourcesRequired","true").on("load",function(){s()}),"SVG"===i.type?(s(),e(window).on("resize.qti-widget."+r,g),e(document).on("customcssloaded.styleeditor",function(){t.delay(g,200)}),d.on("resize.qti-widget."+r,function(e,t){g(e,t)})):(l.canvas.setAttribute("viewBox","0 0 "+f+" "+m),d.find(".main-image-box").width(f),"function"==typeof o.resize&&o.resize(f,1)),l},createElement:function(e,t,i,n){var o,s=this,l=r[t]?e[r[t]]:e[t],c=n.qtiCoords!==!1?s.raphaelCoords(e,t,i):i;
if("function"!=typeof l)throw new Error("Unable to find method "+t+" on paper");return o=l.apply(e,c),o&&(n.id&&(o.id=n.id),n.title&&o.attr("title",n.title),o.attr(a[n.style||"basic"]).toFront(),n.hover!==!1&&o.hover(function(){o.flashing||s.updateElementState(this,"hover")},function(){o.flashing||s.updateElementState(this,this.active?"active":this.selectable?"selectable":"basic")}),n.touchEffect!==!1&&o.touchstart(function(){s.createTouchCircle(e,o.getBBox())})),o},createTarget:function(e,i){var n=this;i=i||{};var r,o=i.point||{x:0,y:0},s=18,l=e.w&&e.width?e.width/e.w:1,c=1!==l?Math.floor(18/l)+1:s,d=c/2,u=o.x>=d?o.x-d:0,h=o.y>=d?o.y-d:0,p="undefined"==typeof i.hover?!0:!!i.hover,f=e.path(a.target.path).transform("T"+u+","+h+"s"+c/s).attr(a.target).attr("title",t("Click again to remove"));
if(i.id)f.id=i.id;else{var m=0;e.forEach(function(e){e.data("target")&&m++}),f.id="target-"+m}r=f.getBBox();var g=e.rect(r.x,r.y,r.width,r.height).attr(a.layer).click(function(){var e=f.id,n=this.data("point");t.isFunction(i.select)&&i.select(f,n,this),t.isFunction(i.remove)&&(this.remove(),f.remove(),i.remove(e,n))});return p&&g.hover(function(){f.flashing||n.setStyle(f,"target-hover")},function(){f.flashing||n.setStyle(f,"target-success")}),g.id="layer-"+f.id,g.data("point",o),f.data("target",o),t.isFunction(i.create)&&i.create(f),f},raphaelCoords:function(e,i,n){var a;if(t.isString(n)&&(n=t.map(n.split(","),function(e){return parseInt(e,10)})),!t.isArray(n)||n.length<o[i])throw new Error("Invalid coords "+JSON.stringify(n)+"  for type "+i);
switch(i){case"rect":a=s.rect(n);break;case"default":a=s["default"].call(null,e);break;case"poly":a=s.poly(n);break;default:a=n}return a},qtiCoords:function(e){var i=l[e.type],n="";return t.isFunction(i)&&(n=t.map(i.call(l,e.attr()),function(e){return t.parseInt(e)}).join(",")),n},createTouchCircle:function(e,i){var n=i.width>i.height?i.width:i.height,r=e.circle(i.x+i.width/2,i.y+i.height/2,n);r.attr(a["touch-circle"]),t.defer(function(){r.animate({r:n+5,opacity:.7},300,function(){r.remove()})})},createText:function(e,t){var i,n,r=t.top||0,o=t.left||0,s=t.content||"",l=t.style||"small-text",c=t.title||"",d=1;e.width&&e.w&&(d=e.width/e.w);var u=e.text(o,r,s).toFront();
return t.id&&(u.id=t.id),t.hide&&u.hide(),u.attr(a[l]),"undefined"!=typeof d&&1!==d&&(i=parseInt(u.attr("font-size"),10),n=Math.floor(i/d)+1,u.attr("font-size",n)),c&&this.updateTitle(u,c),u},createShapeText:function(e,i,n){var a=this,r=i.getBBox(),o=this.createText(e,t.merge({left:r.x+r.width/2,top:r.y+r.height/2},n));return n.shapeClick&&o.click(function(){a.trigger(i,"click")}),o},createBorderedImage:function(e,t){var n=t.padding>=0?t.padding:6,r=n/2,o=t.left,s=t.top,l=t.width+n,c=t.height+n,d=t.left+r,u=t.top+r,h=t.width,p=t.height,f=e.set(),m=e.rect(o,s,l,c).attr(t.border?a["imageset-rect-stroke"]:a["imageset-rect-no-stroke"]),g=e.image(t.url,d,u,h,p).attr(a["imageset-img"]);
return t.shadow&&f.push(m.glow({width:2,offsetx:1,offsety:1})),f.push(m,g),f.move=function(e,t,n){var a=i.animation({x:e,y:t},n||400),o=m.animate(a);return g.animateWith(o,a,{x:e+r,y:t+r},n||400),f},f},updateElementState:function(e,t,i){e&&e.animate&&(e.animate(a[t],200,"linear",function(){e.attr(a[t])}),i&&this.updateTitle(e,i))},updateTitle:function(e,i){e&&e.node&&(t.forEach(e.node.children,function(t){"title"===t.nodeName.toLowerCase()&&e.node.removeChild(t)}),e.attr("title",i))},highlightError:function(e,i){var n=this;e&&(e.flashing=!0,n.updateElementState(e,"error"),t.delay(function(){n.updateElementState(e,i||"basic"),e.flashing=!1},800))},trigger:function(e,i){var n=t.where(e.events,{name:i});
n.length&&n[0]&&"function"==typeof n[0].f&&n[0].f.apply(e,Array.prototype.slice.call(arguments,2))},getPoint:function(e,t,i,n){var a,r,o,s=this.clickPoint(i,e);return t.w&&t.w!==t.width&&(n?(o=t.w/t.width,s.x=Math.round(s.x*o),s.y=Math.round(s.y*o)):t.width>t.w?(a=(t.width-t.w)/2,s.x=Math.round(s.x-a)):(o=t.w/t.width,s.x=Math.round(s.x*o),r=(t.height-t.height*(2-o))/2,s.y=Math.round(s.y*o-r))),s},position:function(e,t){var i=parseInt(t.w||t.width,10),n=parseInt(e.width(),10),a=parseInt(t.w||t.width,10),r=parseInt(e.height(),10);return{left:(n-i)/2,top:(r-a)/2}},clickPoint:function(e,t){var i,n,a=e.offset();return t.pageX||t.pageY?(i=t.pageX-a.left,n=t.pageY-a.top):(t.clientX||t.clientY)&&(i=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-a.left,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop-a.top),{x:i,y:n}
}};return c}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t,i,n,a,r,o,s,l){var c=function(i){{var n=l.getContainer(i),a=i.object.attributes,r=this.getOption("baseUrl")||"";e(".main-image-box",n)}i._vsets=[],i.paper=o.responsivePaper("graphic-paper-"+i.serial,i.serial,{width:a.width,height:a.height,img:r+a.data,imgId:"bg-image-"+i.serial,container:n}),t.forEach(i.getChoices(),t.partial(d,i)),u(i),l.minMaxChoiceInstructions(i,{min:i.attr("minAssociations"),max:i.attr("maxAssociations"),getResponse:v,onError:function(e){e&&e.target&&o.highlightError(e.target)
}})},d=function(e,n){{var a=n.attr("shape"),r=n.attr("coords"),s=e.attr("maxAssociations");o.createElement(e.paper,a,r,{id:n.serial,title:i("Select this area to start an association")}).data("max",n.attr("matchMax")).data("matching",0).removeData("assocs").click(function(){var a,r,c=this;return s>0&&v(e).length>=s?(m(e),void l.validateInstructions(e,{choice:n,target:this})):(this.selectable?(a=h(e),a&&(a.data("matching",a.data("matching")+1),this.data("matching",this.data("matching")+1),r=a.data("assocs")||[],r.push(n.id()),a.data("assocs",r),p(e,a,this,function(){a.data("matching",a.data("matching")-1),c.data("matching",c.data("matching")-1),a.data("assocs",t.remove(a.data("assocs")||[],n.id())),l.triggerResponseChangeEvent(e),l.validateInstructions(e,{choice:n,target:c})
})),m(e)):this.active?(o.updateElementState(this,"basic",i("Select another area to complete the association")),this.active=!1,m(e)):g(this)&&(o.updateElementState(this,"active",i("Select this area to start an association")),this.active=!0,f(e,this)),l.triggerResponseChangeEvent(e),void l.validateInstructions(e,{choice:n,target:this}))})}},u=function(e){var t=l.getContainer(e),i=e.paper.getById("bg-image-"+e.serial);i&&i.click(function(){m(e),t.trigger("unselect.graphicassociate")})},h=function(e){var i;return t.forEach(e.getChoices(),function(t){var n=e.paper.getById(t.serial);return n&&n.active===!0?(i=n,!1):void 0}),i},p=function(e,i,n,a){function r(){w.toFront().animate({opacity:.8},300).click(c),x.toFront().animate({opacity:1},300).click(c)
}function s(){w&&w.type&&(w.animate({opacity:0},300,function(){w.toBack()}).unclick(),x.animate({opacity:0},300,function(){x.toBack()}).unclick())}function c(){t.invoke(u,"remove"),e._vsets=t.without(e._vsets,u),"function"==typeof a&&a()}var d=l.getContainer(e),u=[],h=i.getBBox(),p=h.x+h.width/2,f=h.y+h.height/2,m=n.getBBox(),g=m.x+m.width/2,v=m.y+m.height/2,b=e.paper.circle(p,f,3).attr(o._style["assoc-bullet"]),y=e.paper.circle(g,v,3).attr(o._style["assoc-bullet"]),C=e.paper.path("M"+p+","+f+"L"+p+","+f).attr(o._style.assoc).animate({path:"M"+p+","+f+"L"+g+","+v},300),I=e.paper.path("M"+p+","+f+"L"+g+","+v).attr(o._style["assoc-layer"]),E=I.getPointAtLength(I.getTotalLength()/2),w=e.paper.circle(E.x,E.y,9).attr(o._style["close-bg"]).toBack(),x=e.paper.path(o._style.close.path).attr(o._style.close).transform("T"+(E.x-9)+","+(E.y-9)).attr("title",t("Click again to remove")).toBack();
i.toFront(),n.toFront(),u=[b,C,y,I,w,x],e._vsets.push(u),t.invoke(u,"data","assoc-path",!0),I.click(function(){0===x.attrs.opacity?r():s()}),d.on("unselect.graphicassociate",function(){s()})},f=function(e,i){var n=i.data("assocs")||[];t.forEach(e.getChoices(),function(a){var r;t.contains(n,a.id())||(r=e.paper.getById(a.serial),!r.active&&r.id!==i.id&&g(r,i)&&(r.selectable=!0,o.updateElementState(r,"selectable")))})},m=function(e){t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);i&&(i.selectable=!1,i.active=!1,o.updateElementState(i,"basic"))})},g=function(e){var t,i,n=!1;return e&&(i=e.data("max")||0,t=e.data("matching")||0,n=0===i||i>t),n
},v=function(e){var i=[];return t.forEach(e.getChoices(),function(n){var a=e.paper.getById(n.serial),r=a.data("assocs");a&&r&&(i=i.concat(t.map(r,function(e){return[n.id(),e]})))}),i},b=function(e,i){var n;if(i&&e.paper){try{n=s.unserialize(i,e)}catch(a){}if(t.isArray(n)){var r=t.transform(e.getChoices(),function(t,i){t[i.id()]=e.paper.getById(i.serial)});t.forEach(n,function(e){var i,n;t.isArray(e)&&2===e.length&&(i=r[e[0]],n=r[e[1]],i&&n&&(o.trigger(i,"click"),o.trigger(n,"click")))})}}},y=function(e){var i=[];t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);i&&i.data({max:t.attr("matchMax"),matching:0,assocs:[]})}),e.paper.forEach(function(e){e.data("assoc-path")&&i.push(e)
}),t.invoke(i,"remove")},C=function(e){var t=(v(e),s.serialize(v(e),e));return t},I=function(t){var i;t.paper&&(i=l.getContainer(t),e(window).off("resize.qti-widget."+t.serial),i.off("resize.qti-widget."+t.serial),t.paper.clear(),l.removeInstructions(t),i.off(".graphicassociate"),e(".main-image-box",i).empty().removeAttr("style"),e(".image-editor",i).removeAttr("style"),e("ul",i).empty())};return{qtiClass:"graphicAssociateInteraction",template:r,render:c,getContainer:l.getContainer,setResponse:b,getResponse:C,resetResponse:y,destroy:I}}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/helper/dummyElement"],function(e,t,i,n,a){var r={createPaper:function(e){var t,i=this.$original,a=i.parents(".qti-item"),r=this.element.object.attributes,o=this.element.serial;
return r.data?(t=n.responsivePaper("graphic-paper-"+o,o,{width:r.width,height:r.height,img:this.baseUrl+r.data,imgId:"bg-image-"+o,container:i,resize:e}),a.on("resize.gridEdit."+o,function(){i.trigger("resize.qti-widget."+o)})):this._createPlaceholder(),t},_createPlaceholder:function(){var t=this,n=this.$original,r=n.find(".main-image-box"),o=n.find(".image-editor"),s=o.outerWidth()-o.width()+(n.outerWidth()-n.width())+1;a.get({icon:"image",css:{width:n.innerWidth()-s,height:200},title:i("Select an image first.")}).click(function(){var i=e('[data-role="upload-trigger"]',t.$form);i.length&&i.trigger("click")}).appendTo(r)},createChoices:function(){t.forEach(this.element.getChoices(),this._currentChoices,this)
},_currentChoices:function(e){n.createElement(this.element.paper,e.attr("shape"),e.attr("coords"),{id:e.serial,touchEffect:!1})}};return r}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=function(){var e=this.widget,t=e.element;e.on("metaChange",function(i){"responsive"===i.key&&(i.value===!0?t.addClass("responsive"):t.removeClass("responsive"),e.rebuild())})},n=function(){};return e.extend(t,i,n)}),define("tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"tall"
}function o(e,t){var n,a,r="";return r+='\n        <li class="separator"></li>\n        <li data-type="target"><span title="'+h((n=i.__||e&&e.__,a={hash:{},data:t},n?n.call(e,"Drop the target to select a point",a):u.call(e,"__","Drop the target to select a point",a)))+'" class="icon-target"></span></li>\n        '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u=i.helperMissing,h=this.escapeExpression,p=this;return d+='<div class="image-sidebar lft  ',s=i["if"].call(t,t&&t.showTarget,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+='">\n    <ul class="none forms solid">\n        <li data-type="rect"><span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Draw a rectangle on the image",c):u.call(t,"__","Draw a rectangle on the image",c)))+'" class="icon-rectangle"></span></li>\n        <li data-type="circle"><span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Draw a circle on the image",c):u.call(t,"__","Draw a circle on the image",c)))+'" class="icon-circle"></span></li>\n        <li data-type="ellipse"><span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Draw an ellipsis on the image",c):u.call(t,"__","Draw an ellipsis on the image",c)))+'" class="icon-ellipsis"></span></li>\n        <li data-type="path"><span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Draw a free form on the image",c):u.call(t,"__","Draw a free form on the image",c)))+'" class="icon-free-form"></span></li>\n    \n        ',s=i["if"].call(t,t&&t.showTarget,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a}),(s||0===s)&&(d+=s),d+='\n\n        <li class="separator"></li>\n        <li class="bin disabled"><span title="'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Remove the selected shape",c):u.call(t,"__","Remove the selected shape",c)))+'" class="icon-bin"></span></li>\n    </ul>\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar",["jquery","lodash","tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar"],function(e,t,i){var n={create:function(n,a){var r=n.find(".image-editor"),o=n.data("serial"),s=(e(".main-image-box",r),e(i({showTarget:!!a})).insertBefore(r)),l=e("li[data-type]",s),c=e("li.bin",s),d=function(t){l.filter(".active").each(function(){u(e(this))}),t.addClass("active"),s.trigger("shapeactive.qti-widget",[t,t.data("type")])},u=function(e){e.removeClass("active"),s.trigger("shapedeactive.qti-widget",[e,e.data("type")])};return s.on("enablebin.qti-widget",function(){c.removeClass("disabled").on("click",function(e){e.preventDefault(),s.trigger("bin.qti-widget")
})}),s.on("disablebin.qti-widget",function(){c.addClass("disabled").off("click")}),l.click(function(t){t.preventDefault();var i=e(this);i.hasClass("active")?u(i):d(i)}),n.on("resize.qti-widget."+o,function(){t.defer(function(){s.find(".forms").height(r.innerHeight())})}),n.trigger("resize.qti-widget."+o),s},remove:function(t){{var i=e(".image-sidebar",t),n=t.find(".image-editor");e(".main-image-box",n)}i.length&&(i.remove(),t.off("resize.qti-widget.sidebar"),t.trigger("resize.qti-widget"))}};return n}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers",["jquery","lodash","raphael"],function(e,t,i){var n=function(e,n){var a=function(e){var n,a=e.getBBox(),r=a.width>25?6:4,o=r/2,s=a.width/2,l=a.height/2;
switch(e.type){case"circle":n={midTop:[a.x+s-o,a.y-r,r,r],midRight:[a.x+a.width,a.y+l-o,r,r],midBot:[a.x+s-o,a.y+a.height,r,r],midLeft:[a.x-r,a.y+l-o,r,r]};break;case"path":n={},t.forEach(i.parsePathString(e.attr("path")),function(e,t){3===e.length&&(n["point"+t]=e.slice(1).concat(o))});break;case"rect":case"ellipse":n={topLeft:[a.x-r,a.y-r,r,r],midTop:[a.x+s-o,a.y-r,r,r],topRight:[a.x+a.width,a.y-r,r,r],midRight:[a.x+a.width,a.y+l-o,r,r],botRight:[a.x+a.width,a.y+a.height,r,r],midBot:[a.x+s-o,a.y+a.height,r,r],botLeft:[a.x-r,a.y+a.height,r,r],midLeft:[a.x-r,a.y+l-o,r,r]}}return n};return t.map(a(n),function(t,i){var a,r,o;if("path"===n.type)a="move",o="circle";
else switch(o="rect",i){case"topLeft":a="nw-resize",r={ix:!0,iy:!0};break;case"midTop":a="ns-resize",r={iy:!0};break;case"topRight":a="ne-resize",r={x:!0,iy:!0};break;case"midRight":a="ew-resize",r={x:!0};break;case"botRight":a="se-resize";break;case"midBot":a="ns-resize",r={y:!0};break;case"botLeft":a="sw-resize",r={ix:!0,y:!0};break;case"midLeft":a="ew-resize",r={ix:!0}}return e[o].apply(e,t).attr({fill:"#eeeeee",cursor:a}).data("constraints",r)})};return n}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic"],function(e,t){var i=function(e,i){function a(){var t;switch(e.type){case"circle":t={x:e.attrs.cx,y:e.attrs.cy};
break;case"ellipse":case"rect":t=e.getBBox()}return t}var r;e&&e.type&&i.stop&&(r=t.bind(n[e.type],n),i.start||(i.start=a(e)),t.isFunction(r)&&e.animate(r(i),100,"linear",t.isFunction(i.resized)?i.resized:t.noop))},n={rect:function(e){var t=e.start,i=e.stop,n=e.constraints,a={};return(!n||n.x)&&(a.width=i.x-t.x,a.width<0&&(a.x=i.x,a.width=-1*a.width)),(!n||n.y)&&(a.height=i.y-t.y,a.height<0&&(a.y=i.y,a.height=-1*a.height)),n&&n.ix&&(a.x=i.x,a.width=t.width-(i.x-t.x),a.width<0&&(a.x=i.x,a.width=-1*a.width)),n&&n.iy&&(a.y=i.y,a.height=t.height-(i.y-t.y),a.height<0&&(a.y=i.y,a.height=-1*a.height)),a.width<10&&(a.width=10),a.height<10&&(a.height=10),a},circle:function(e){var t=e.start,i=e.stop,n=i.x>t.x?i.x-t.x:t.x-i.x,a=i.y>t.y?i.y-t.y:t.y-i.y,r=Math.floor(Math.sqrt(Math.pow(n,2)+Math.pow(a,2)));
return{r:5>r?5:r}},ellipse:function(e){var t={},i=this.rect(e);return i.x&&(t.x=i.x),i.y&&(t.y=i.y),i.width&&(t.rx=i.width/2),i.height&&(t.ry=i.height/2),t},path:function(e){var i={};return e.path&&e.start&&(i.path="",t.forEach(e.path,function(t,n){i.path+=t[0],3===t.length&&(i.path+=n===e.pointIndex||0===e.pointIndex&&1===n?e.stop.x+","+e.stop.y:t[1]+","+t[2])})),i}};return i}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover",["jquery","lodash"],function(e,t){var i=function(e,i,a){var r;e&&e.type&&(r=t.bind(n[e.type],n),t.isFunction(r)&&e.animate(r(i,a)))},n={rect:function(e,t){return{x:t.x-e.x,y:t.y-e.y}},circle:function(e,t){return{cx:t.x,cy:t.y}
},ellipse:function(e,t){return{cx:t.x,cy:t.y}},path:function(e,i){var n={path:""};return t.forEach(e.path,function(t){n.path+=t[0],3===t.length&&(n.path+=t[1]+i.x-e.x+","+(t[2]+i.y-e.y))}),n}};return i}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic"],function(e,t,i){var n=function(e){var n={_path:null,closed:!1,set:null,points:[],getPath:function(){return this._path},start:function(e){return this.points=[],this.add(e)},add:function(t){var n,a=this;return n=e.circle(t.x,t.y,3).attr({stroke:"black","stroke-width":1,fill:"white",opacity:.7,cursor:"pointer"}).click(function(e){e.preventDefault(),e.stopPropagation(),a.points.length>2&&(this.attr("fill","green"),a.close())
}),0===this.points.length&&(n.attr("fill","red"),this.set=e.set(),this._path=e.path("M"+t.x+","+t.y).attr(i._style.active).attr("opacity",.3),this.set.push(this._path)),this.points.push(t),this.set.push(n),this._path.animate({path:this._path.attr("path")+"L"+t.x+","+t.y}),this},close:function(){return this._path.attr({path:this._path.attr("path")+"Z"}).attr(i._style.active).attr("opacity",1),this.set.forEach(function(e){"circle"===e.type&&e.remove()}),this.closed=!0,t.isFunction(this.closeCb)&&this.closeCb(),this},onClose:function(e){return this.closeCb=e,this}};return n};return n}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover","taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder"],function(e,t,i,n,a,r,o){var s=function(e){var n=e.paper,r=e.background,s=e.$container,l=e.isResponsive||!1,c=e.type||"rect",d={states:{drawing:!1},_events:{},on:function(e,i){t.isFunction(i)&&(this._events[e]=i)
},is:function(e){return this.states[e]===!0},setState:function(e,t){this.states[e]=t},start:function(){switch(c){case"path":this.startDrawingPath();break;case"target":this.startPositionTarget();break;default:this.startWithMouse()}},startPositionTarget:function(){var e=this;e.setState("drawing",!0),r.click(function(t){t.preventDefault(),t.stopPropagation();var a=i.getPoint(t,n,s,l);i.createTarget(n,{point:a,create:function(t){e.setState("drawing",!1),r.unclick(),e._events["created.qti-widget"]&&e._events["created.qti-widget"].call(this,t)},remove:!1,hover:!1})})},startDrawingPath:function(){function e(){t.setState("drawing",!1),r.unclick(),t._events["created.qti-widget"]&&t._events["created.qti-widget"].call(this,a.getPath())
}var t=this,a=o(n);t.setState("drawing",!0),a.onClose(e),r.click(function(e){e.preventDefault(),e.stopPropagation(),t.is("drawing")&&a.add(i.getPoint(e,n,s,l))})},startWithMouse:function(){function e(){h.setState("drawing",!1),r.unmousedown().unmousemove().unmouseup(),u.unmousedown().unmouseup().unmousemove(),h._events["created.qti-widget"]&&h._events["created.qti-widget"].call(this,u)}function o(e){h.is("drawing")&&a(u,{start:d,stop:i.getPoint(e,n,s,l)})}var d,u,h=this,p=t.throttle(o,10);r.mousedown(function(t){t.preventDefault(),h.is("drawing")||(h.setState("drawing",!0),d=i.getPoint(t,n,s,l),u=i.createElement(n,c,[d.x,d.y,25,25],{style:"creator",hover:!1,touchEffect:!1,qtiCoords:!1}),u.mouseup(e),r.mouseup(e),u.mousemove(p),r.mousemove(p))
})},stop:function(){r.unmousedown().unmousemove().unmouseup().unclick()}};return d};return s}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover","taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder"],function(e,t,i,n,a,r){var o=function(o,s){var l=s.paper,c=s.background,d=s.$container,u=s.isResponsive||!1,h={shape:null,handlers:[],states:{drawing:!1,handling:!1,resizing:!1,moving:!1},_events:{},on:function(e,i){return t.isFunction(i)&&(this._events[e]=i),this
},trigger:function(e){return t.isFunction(this._events[e])&&this._events[e].apply(this,Array.prototype.slice.call(arguments,1)),this},is:function(e){return this.states[e]===!0},setState:function(e,t){return this.states[e]=t,this},_init:function(e){var t=this;return e&&e.type&&(t.shape=e,c.click(function(){!t.is("resizing")&&t.is("handling")&&t.quitHandling()}),t.shape.click(function(){t.is("resizing")||(t.is("handling")?t.quitHandling():t.enterHandling())})),this},enterHandling:function(){function s(){var e,n=this;b.setState("resizing",!0).trigger("shapechanging.qti-widget"),b.layer=b.shape.clone(),b.layer.attr(i._style.basic),b.layer.attr("cursor",n.attrs.cursor),e=b.layer.getBBox(),b.layerTxt=i.createShapeText(l,b.layer,{style:"layer-pos-text",content:parseInt(e.width,10)+" x "+parseInt(e.height,10)}),"path"===b.shape.type&&t.forEach(b.shape.attr("path"),function(e,t){return 3===e.length&&e[1]===this.attr("cx")&&e[2]===this.attr("cy")?(this.pointIndex=t,!1):void 0
},n),t.invoke(t.reject(t.clone(b.handlers),function(e){return e===n}),"hide")}function h(e,n,r,o,s){var c,h;b.is("resizing")&&(c=i.getPoint(s,l,d,u),h={stop:c,constraints:this.data("constraints"),resized:t.throttle(function(){var e=this.getBBox();b.layerTxt.attr("text",parseInt(e.width,10)+" x "+parseInt(e.height,10))},100)},"path"===b.shape.type&&(h.start=t.pick(this.attrs,["cx","cy"]),h.path=b.layer.attr("path"),h.pointIndex=this.pointIndex),a(b.layer,h),this.animate("circle"===this.type?{cx:c.x,cy:c.y}:c))}function p(){b.shape.animate(t.pick(b.layer.attrs,["x","y","cx","cy","r","rx","ry","width","height","path"]),200,function(){b.setState("resizing",!1).trigger("shapechange.qti-widget")
}),b.layer.remove(),b.layerTxt.remove(),t.invoke(b.handlers,"remove"),b.handlers=[]}function f(e){var i,n,a;if(!b.is("moving")){switch(b.setState("moving",!0),t.invoke(b.handlers,"remove"),i=o.attr(),b.shape.type){case"rect":a={x:0,y:0},n={x:39===e?i.x+1:37===e?i.x-1:i.x,y:40===e?i.y+1:38===e?i.y-1:i.y};break;case"ellipse":case"circle":a={x:0,y:0},n={x:39===e?i.cx+1:37===e?i.cx-1:i.cx,y:40===e?i.cy+1:38===e?i.cy-1:i.cy};break;case"path":a={path:i.path},n={}}r(b.shape,a,n),b.setState("moving",!1).trigger("shapechange.qti-widget")}}function m(e,n,a){b.setState("moving",!0).trigger("shapechanging.qti-widget");var r=i.getPoint(a,l,d,u);this.startPoint={x:r.x-this.attr("x"),y:r.y-this.attr("y")},"path"===this.type&&(this.startPoint.path=this.attr("path")),b.shape.attr("cursor","move"),c.attr("cursor","move"),t.invoke(b.handlers,"remove")
}function g(e,t,n,a,o){b.is("moving")&&r(this,this.startPoint,i.getPoint(o,l,d,u))}function v(){delete this.startPoint,b.shape.attr("cursor","pointer"),c.attr("cursor","default"),b.setState("moving",!1).trigger("shapechange.qti-widget")}var b=this;if(b.setState("handling",!0).trigger("enterhandling.qti-widget"),"set"!==b.shape.type){b.handlers=n(l,b.shape),t.forEach(b.handlers,function(e){e.drag(h,s,p)}),b.shape.drag(g,m,v);var y=t.throttle(f,20);return e(document).on("keydown.qti-widget",function(e){var t=e.which;t>=37&&40>=t&&(e.preventDefault(),y(t))}),this}},quitHandling:function(){return e(document).off("keydown.qti-widget"),this.shape.undrag(),t.invoke(this.handlers,"remove"),this.handlers=[],this.setState("moving",!1).setState("resizing",!1).setState("handling",!1).trigger("quithandling.qti-widget"),this
},removeShape:function(){var e,t;return this.shape&&(this.quitHandling(),e=this.shape.id,t=this.shape.data,this.shape.remove(),this.trigger("remove.qti-widget",e,t)),this},destroy:function(){return this.is("handling")&&this.quitHandling(),this.shape&&(this.shape.unclick(),c.unclick()),this.shape=null,this.handlers=[],this._events={},this}};return h._init(o)};return o}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory","taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor"],function(e,t,i,n,a,r){return function(e,o){var s={editors:[],create:function(){function s(e,i){var n=r(e,b);
n.on("enterhandling.qti-widget",function(){t.invoke(t.reject(d,n),"quitHandling"),y.trigger("enablebin.qti-widget").on("bin.qti-widget",function(){n.removeShape(),n.destroy(),d=t.reject(d,n),n=void 0}),t.isFunction(o.enterHandling)&&o.enterHandling(e)}).on("shapechanging.qti-widget",function(){t.isFunction(o.shapeChanging)&&o.shapeChanging(e)}).on("shapechange.qti-widget",function(){t.isFunction(o.shapeChange)&&o.shapeChange(e)}).on("quithandling.qti-widget",function(){t.isFunction(o.quitHandling)&&o.quitHandling(e),y.trigger("disablebin.qti-widget").off("click").off("bin.qti-widget")}).on("remove.qti-widget",function(e,i){t.isFunction(o.shapeRemoved)&&o.shapeRemoved(e,i),t.remove(v,e)
}),d.push(n),i&&n.enterHandling()}function l(e,i){var n=u[e];u[e]||(n=a(t.merge({type:e},b)),u[e]=n),n.on("created.qti-widget",i),n.start()}function c(e,t,i){var n,a;"target"!==e?s(t,i):(n=m.getById("layer-"+t.id),a=m.set(t,n),a.id=t.id,a.data=t.data(),s(a,i))}var d=this.editors,u={},h=e.$container,p=e.$original,f=e.element,m=f.paper,g=m.getById("bg-image-"+f.serial),v=o.currents||t.pluck(f.getChoices(),"serial"),b={paper:f.paper,background:g,$container:h.find(".main-image-box"),isResponsive:p.hasClass("responsive")},y=n.create(p,!!o.target);y.on("shapeactive.qti-widget",function(e,i,n){l(n,function(e){t.isFunction(o.shapeCreated)&&o.shapeCreated(e,n),i.removeClass("active"),c(n,e)
})}),y.on("shapedeactive.qti-widget",function(e,t,i){u&&u[i]&&u[i].stop()}),t.forEach(v,function(e){var t=m.getById(e);t&&(t.attr(i._style.creator).unmouseover().unmouseout(),/^target/.test(t.id)?c("target",t):c(t.type,t,!1))})},destroy:function(){var a=e.$original,r=e.element,s=r.paper,l=o.currents||t.pluck(r.getChoices(),"serial");n.remove(a),t.invoke(this.editors,"destroy"),t.forEach(l,function(e){var t=s.getById(e);t&&t.attr(i._style.basic).hover(function(){t.flashing||i.updateElementState(this,"hover")},function(){t.flashing||i.updateElementState(this,this.active?"active":this.selectable?"selectable":"basic")})})}};return s}}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector",["jquery","lodash","i18n","util/image","ui/resourcemgr"],function(e,t,i,n){return function(a,r){var o=e('[data-role="upload-trigger"]',a),s=e("input[name=data]",a),l=e("input[name=width]",a),c=e("input[name=height]",a),d=e("input[name=type]",a),u=r.title?r.title:i('Please select a background picture for your interaction from the resource manager. You can add new files from your computer with the button "Add file(s)".'),h=function(){o.resourcemgr({title:u,appendContainer:r.mediaManager.appendContainer,root:"/",browseUrl:r.mediaManager.browseUrl,uploadUrl:r.mediaManager.uploadUrl,deleteUrl:r.mediaManager.deleteUrl,downloadUrl:r.mediaManager.downloadUrl,fileExistsUrl:r.mediaManager.fileExistsUrl,params:{uri:r.uri,lang:r.lang,filters:"image/jpeg,image/png,image/gif"},pathParam:"path",select:function(e,i){var a;
i.length>0&&(a=i[0],n.getSize(r.baseUrl+i[0].file,function(e){e&&e.width>=0&&(l.val(e.width).trigger("change"),c.val(e.height).trigger("change")),d.val(a.mime).trigger("change"),t.defer(function(){s.val(a.file).trigger("change")})}))},open:function(){s.hasClass("tooltipstered")&&s.blur().tooltipster("hide")},close:function(){s.blur()}})};o.on("click",h),s.val()||h()}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Interaction Background",s):c.call(t,"__","Interaction Background",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div class="panel">\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime Type",s):c.call(t,"__","Mime Type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n    \n     <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of associations",s):c.call(t,"__","Allowed number of associations",s)))+'\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of associations that the candidate is required to make to form a valid response.",s):c.call(t,"__","The minimum number of associations that the candidate is required to make to form a valid response.",s)))+"<br>\n            "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"he maximum number of associations that the candidate is allowed to make.",s):c.call(t,"__","he maximum number of associations that the candidate is allowed to make.",s)))+'\n        </span>\n    </h3>\n\n    <div class="panel">\n        <label for="minAssociations" class="spinner">Min</label>\n        <input name="minAssociations" value="',(o=i.minAssociations)?r=o.call(t,{hash:{},data:a}):(o=t&&t.minAssociations,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="maxAssociations" class="spinner">Max</label>\n        <input name="maxAssociations" value="',(o=i.maxAssociations)?r=o.call(t,{hash:{},data:a}):(o=t&&t.maxAssociations,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n</div>\n'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='\n<div class="panel">\n    <label for="">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"identifier",s):c.call(t,"__","identifier",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n           placeholder="e.g. my-hotspot_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n</div>\n\n<h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of matches",s):c.call(t,"__","Allowed number of matches",s)))+'\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices this choice must be associated with to form a valid response.",s):c.call(t,"__","The minimum number of choices this choice must be associated with to form a valid response.",s)))+"<br>\n        "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices this choice may be associated with.",s):c.call(t,"__","The maximum number of choices this choice may be associated with.",s)))+'\n    </span>\n</h3>\n\n<div>\n    <label for="matchMin" class="spinner">Min</label>\n    <input name="matchMin" value="',(o=i.matchMin)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMin,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n</div>\n<div>\n    <label for="matchMax" class="spinner">Max</label>\n    <input name="matchMax" value="',(o=i.matchMax)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMax,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n</div>\n\n<h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Shape position",s):c.call(t,"__","Shape position",s)))+'</h3>\n\n<div class="panel">\n    <label for="x">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Left",s):c.call(t,"__","Left",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="x" value="',(o=i.x)?r=o.call(t,{hash:{},data:a}):(o=t&&t.x,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="y">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Top",s):c.call(t,"__","Top",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="y" value="',(o=i.y)?r=o.call(t,{hash:{},data:a}):(o=t&&t.y,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question",["jquery","lodash","i18n","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor","taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot","taoQtiItem/qtiCreator/helper/dummyElement","taoQtiItem/qtiCreator/editor/editor"],function(e,t,i,n,a,r,o,s,l,c,d,u,h,p,f){var m=function(){function i(i){var n,a,r=s.getChoice(i);
if(r){n=s.paper.getById(i),a=n.getBBox(),v.empty().html(h({identifier:r.id(),fixed:r.attr("fixed"),serial:i,matchMin:r.attr("matchMin"),matchMax:r.attr("matchMax"),choicesCount:t.size(s.getChoices()),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10)})),l.initWidget(v);var o=l.getMinMaxAttributeCallbacks(v,"matchMin","matchMax");o.identifier=d.updateChoiceIdentifier,o.fixed=l.getAttributeChangeCallback(),l.setChangeCallbacks(v,r,o),y.show(),f.openSections(y.children("section")),f.closeSections(b.children("section")),u=e("input[name=x]",v),p=e("input[name=y]",v),m=e("input[name=width]",v),g=e("input[name=height]",v)}}function a(){"none"!==y.css("display")&&(f.openSections(b.children("section")),y.hide(),v.empty())
}var r=this.widget,s=r.element,c=(r.options,s.paper);if(c){var u,p,m,g,v=r.choiceForm,b=e("#item-editor-interaction-property-bar"),y=e("#item-editor-choice-property-bar");r._editor=o(r,{shapeCreated:function(e,t){var i=s.createChoice({shape:"path"===t?"poly":t,coords:n.qtiCoords(e)});e.id=i.serial},shapeRemoved:function(e){s.removeChoice(e)},enterHandling:function(e){i(e.id)},quitHandling:function(){a()},shapeChange:function(e){var t,i=s.getChoice(e.id);i&&(i.attr("coords",n.qtiCoords(e)),u&&u.length&&(t=e.getBBox(),u.val(parseInt(t.x,10)),p.val(parseInt(t.y,10)),m.val(parseInt(t.width,10)),g.val(parseInt(t.height,10))))}}),r._editor.create()}},g=function(){var t=this.widget,i=t.element,n=i.paper;
n&&(e(window).off("resize.changestate"),t._editor&&t._editor.destroy())},v=a.extend(r,m,g);return v.prototype.initForm=function(){var e=this.widget,i=e.options,n=e.element,a=e.$form,r=function(e){var t=0;return e>0?Math.round(e*(e-1)/2):t};a.html(u({baseUrl:i.baseUrl,maxAssociations:parseInt(n.attr("maxAssociations"),10),minAssociations:parseInt(n.attr("minAssociations"),10),choicesCount:r(t.size(n.getChoices())),data:n.object.attr("data"),width:n.object.attr("width"),height:n.object.attr("height"),type:n.object.attr("type")})),s(a,i),l.initWidget(a);var o=l.getMinMaxAttributeCallbacks(a,"minAssociations","maxAssociations");o.data=function(t,i){n.object.attr("data",i),e.rebuild({ready:function(e){e.changeState("question")
}})},o.width=function(e,t){n.object.attr("width",t)},o.height=function(e,t){n.object.attr("height",t)},o.type=function(e,t){t&&""!==t?n.object.attr("type",t):n.object.removeAttr("type")},l.setChangeCallbacks(a,n,o,{validateOnInit:!1}),c.syncMaxChoices(e,"minAssociations","maxAssociations")},v}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){function n(){i.forward(this.widget)}function a(){}return e.extend(t,n,a)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){function s(){var i=this.widget,n=i.element,s=n.getResponseDeclaration(),l=e.values(s.getCorrect());
a.destroy(n),n.paper&&(r.appendInstruction(n,t("Please set the correct associations by linking the choices.")),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.invoke(l,String.prototype.split," "),n)),i.$container.on("responseChange.qti-widget",function(t,i){i.response&&i.response.list&&s.setCorrect(e.map(i.response.list.pair,function(e){return e.join(" ")}))}))}function l(){var e=this.widget,t=e.element;t.paper&&(e.$container.off("responseChange.qti-widget"),r.removeInstructions(t),a.destroy(t),t.paper=e.createPaper(),e.createChoices())}return i.create(n,s,l)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm"],function(e,t,i,n,a,r,o,s,l,c){function d(){{var e=this.widget,n=e.element,a=n.getResponseDeclaration(),s=t.values(a.getCorrect());
0===t.size(a.getMapEntries())?s:t.keys(a.getMapEntries())}r.destroy(n),n.paper&&(o.appendInstruction(n,i("Create assocations and fill the score in the form below")),n.responseMappingMode=!0,r.render.call(n.getRenderer(),n),p(n),0===t.size(a.getMapEntries())?f(e,s):f(e),e.$container.on("responseChange.qti-widget",function(e,i){var r,o,s="single"===a.attr("cardinality")?"base":"list";i&&i.response&&i.response[s]&&(r=t.invoke(i.response[s].pair,Array.prototype.join," "),o=t.keys(a.getMapEntries()),t(r).difference(o).forEach(n.pairScoringForm.addPair,n.pairScoringForm),u(n))}))}function u(e){t.delay(function(){t.forEach(e._vsets,function(e){t.invoke(e,"remove")}),e._vsets=[]
},500)}function h(){var e=this.widget,t=e.element;t.paper&&(e.$container.off("responseChange.qti-widget"),t.pairScoringForm&&t.pairScoringForm.destroy(),o.removeInstructions(t),r.destroy(t),t.paper=e.createPaper(),e.createChoices())}function p(e){t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);i&&s.createShapeText(e.paper,i,{shapeClick:!0,content:t.id()}).transform("t0,-10").toFront()})}function f(e,n){var a=e.element,r=a.getResponseDeclaration(),o=r.getMapEntries(),s=function(){return t.map(a.getChoices(),function(e){return{id:e.id(),value:e.id()}})},l={leftTitle:i("left"),rightTitle:i("right"),type:"pair",pairLeft:s,pairRight:s};n&&(l.entries=t.transform(n,function(e,t){e[t]=void 0!==o[t]?o[t]:r.mappingAttributes.defaultValue
},{})),a.pairScoringForm=c(e,l)}return n.create(a,d,h)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states"],function(e,t,i,n,a,r){var o=t.extend(n.clone(),a,{initCreator:function(e){var t;this.baseUrl=e.baseUrl,this.choiceForm=e.choiceForm,this.registerStates(r),n.initCreator.call(this),t=this.createPaper(),t&&(this.element.paper=t,this.createChoices())},destroy:function(){var t=this.$original,i=t.parents(".qti-item");i.off("resize.gridEdit."+this.element.serial),e(window).off("resize.qti-widget."+this.element.serial),t.off("resize.qti-widget."+this.element.serial),n.destroy.call(this)
}});return o}),define("taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction","taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.choiceForm=this.getOption("choiceOptionForm"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;
return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===u?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(e){var t;return t=typeof e===u?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u="function",h=this.escapeExpression,p=this,f=i.blockHelperMissing;return d+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicGapMatchInteraction '+h((s=t&&t.attributes,s=null==s||s===!1?s:s["class"],typeof s===u?s.apply(t):s))+' clearfix" data-serial="',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===u?l.call(t,{hash:{},data:a}):l),d+=h(s)+'">\n    ',s=i["if"].call(t,t&&t.prompt,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(l=i.serial)?s=l.call(t,{hash:{},data:a}):(l=t&&t.serial,s=typeof l===u?l.call(t,{hash:{},data:a}):l),d+=h(s)+'\' class="main-image-box"></div>\n        <div class="clearfix"></div>\n        <ul class="none block-listing solid horizontal source">\n            ',c={hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a},(l=i.gapImgs)?s=l.call(t,c):(l=t&&t.gapImgs,s=typeof l===u?l.call(t,c):l),i.gapImgs||(s=f.call(t,s,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a})),(s||0===s)&&(d+=s),d+="\n        </ul>\n    </div>\n</div>\n"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t,i,n,a,r,o){var s=function(i){var n=o.getContainer(i),r=e("ul.source",n),s=(e(".main-image-box",n),i.object.attributes),u=this.getOption("baseUrl")||"";i.gapFillers=[],i.paper=a.responsivePaper("graphic-paper-"+i.serial,i.serial,{width:s.width,height:s.height,img:u+s.data,imgId:"bg-image-"+i.serial,container:n,resize:function(t,i){r.css("max-width",t+"px"),1!==i&&r.find("img").each(function(){var t=e(this);
t.width(t.attr("width")*i),t.height(t.attr("height")*i)})}}),t.forEach(i.getChoices(),t.partial(l,i)),c(i,r),d(i)},l=function(e,t){a.createElement(e.paper,t.attr("shape"),t.attr("coords"),{id:t.serial,title:i("Select an image first"),hover:!1}).data("max",t.attr("matchMax")).data("matching",[]).click(function(){f(this)&&this.selectable===!0&&u(e,this)})},c=function(t,i){i.children("li").click(function(n){n.preventDefault();var a=e(this);a.hasClass("disabled")||(a.hasClass("active")?(a.removeClass("active"),p(t)):(i.children("li").removeClass("active"),a.addClass("active"),h(t)))})},d=function(t){var i=o.getContainer(t),n=e("ul > li",i),a=t.paper.getById("bg-image-"+t.serial);
a&&a.click(function(){p(t),n.removeClass("active")})},u=function(i,n,r){var s,l,c,d,u,h,f,m,g;"undefined"==typeof r&&(r=!0);var v=o.getContainer(i),b=e("ul",v),y=b.find(".active:first"),C=e(".main-image-box",v),I=C.offset();y.length&&(d=y.data("identifier"),m=n.data("matching")||[],m.push(d),n.data("matching",m),g=m.length,s=y.find("img"),p(i),b.children().removeClass("active"),l=s.clone(),h=e(n.node).offset(),f=y.offset(),l.css({position:"absolute",display:"block","z-index":1e4,opacity:.8,top:f.top-I.top,left:f.left-I.left}),l.appendTo(C),l.animate({top:h.top-I.top,left:h.left-I.left},400,function(){l.remove(),u=n.getBBox(),c=a.createBorderedImage(i.paper,{url:s.attr("src"),left:u.x+3*(g-1),top:u.y+3*(g-1),width:parseInt(s.attr("width"),10),height:parseInt(s.attr("height"),10),padding:0,border:!1,shadow:!0}).data("identifier",d).toFront().unclick().click(function(e){e.preventDefault(),e.stopPropagation(),b.find(".active").length>0?a.trigger(n,"click"):(n.data("matching",t.without(n.data("matching")||[],this.data("identifier"))),i.gapFillers=t.without(i.gapFillers,c),c.remove(),o.triggerResponseChangeEvent(i))
}),i.gapFillers.push(c),o.triggerResponseChangeEvent(i)}))},h=function(e){var n=i("Select the area to add an image");t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);f(i)&&(i.selectable=!0,a.updateElementState(i,"selectable",n))}),t.forEach(e.gapFillers,function(e){e.forEach(function(e){a.updateTitle(e,n)})})},p=function(e){t.forEach(e.getChoices(),function(t){var n=e.paper.getById(t.serial);n&&(n.selectable=!1,a.updateElementState(n,"basic",i("Select an image first")))}),t.forEach(e.gapFillers,function(e){e.forEach(function(e){a.updateTitle(e,i("Remove"))})})},f=function(e){var t,i,n=!1;return e&&(i=e.data("max")||0,t=e.data("matching")||[],n=0===i||i>t.length),n
},m=function(e){var i=[];return t.forEach(e.getChoices(),function(n){var a=e.paper.getById(n.serial);a&&t.isArray(a.data("matching"))&&t.forEach(a.data("matching"),function(e){i.push([n.id(),e])})}),i},g=function(i,n){var a,s=o.getContainer(i);if(n&&i.paper){try{a=r.unserialize(n,i)}catch(l){}t.isArray(a)&&t.forEach(i.getChoices(),function(n){var r=i.paper.getById(n.serial);r&&t.forEach(a,function(a){var o=t.indexOf(a,n.id());o>-1&&2===a.length&&(e("[data-identifier="+a[0===o?1:0]+"]",s).addClass("active"),u(i,r,!1))})})}},v=function(e){o.getContainer(e);p(e),t.forEach(e.gapFillers,function(e){a.trigger(e.items[0],"click")})},b=function(e){var t=(m(e),r.serialize(m(e),e));
return t},y=function(t){var i;t.paper&&(i=o.getContainer(t),e(window).off("resize.qti-widget."+t.serial),i.off("resize.qti-widget."+t.serial),t.paper.clear(),o.removeInstructions(t),e(".main-image-box",i).empty().removeAttr("style"),e(".image-editor",i).removeAttr("style"),e("ul",i).empty())};return{qtiClass:"graphicGapMatchInteraction",template:n,render:s,getContainer:o.getContainer,setResponse:g,getResponse:b,resetResponse:v,destroy:y}}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=function(){var e=this.widget,t=e.element;
e.on("metaChange",function(i){"responsive"===i.key&&(i.value===!0?t.addClass("responsive"):t.removeClass("responsive"),e.rebuild())})},n=function(){};return e.extend(t,i,n)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Interaction Background",s):c.call(t,"__","Interaction Background",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div class="panel">\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime Type",s):c.call(t,"__","Mime Type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n</div>\n'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n\n    <div class="panel">\n        <label for="">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"identifier",s):c.call(t,"__","identifier",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n        <input type="text" \n               name="identifier" \n               value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n               placeholder="e.g. my-hotspot_1" \n               data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n    </div>\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Choice Image",s):c.call(t,"__","Choice Image",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div>\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div>\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div>\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime type",s):c.call(t,"__","Mime type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <hr>\n\n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of matches",s):c.call(t,"__","Allowed number of matches",s)))+'\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices this choice may be associated with.",s):c.call(t,"__","The maximum number of choices this choice may be associated with.",s)))+"<br>\n            "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices this choice must be associated with to form a valid response.",s):c.call(t,"__","The minimum number of choices this choice must be associated with to form a valid response.",s)))+'\n        </span>\n    </h3>\n\n    <div>\n        <label for="matchMin" class="spinner">Min</label>\n        <input name="matchMin" value="',(o=i.matchMin)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMin,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n    <div>\n        <label for="matchMax" class="spinner">Max</label>\n        <input name="matchMax" value="',(o=i.matchMax)?r=o.call(t,{hash:{},data:a}):(o=t&&t.matchMax,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question",["jquery","lodash","i18n","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor","taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg","tpl!taoQtiItem/qtiCreator/tpl/toolbars/media","taoQtiItem/qtiCreator/helper/dummyElement","taoQtiItem/qtiCreator/editor/editor"],function(e,t,i,n,a,r,o,s,l,c,d,u,h,p,f,m){var g=function(){function a(){var t=e("ul.source",b.$original),i=e('<li class="empty add-option"><div><span class="icon-add"></span></div></li>');
i.on("click",function(){var e=y.createGapImg({});e.object.removeAttr("type"),r(e)}),i.appendTo(t)}function r(t,n){var a,r=e("ul.source",b.$original),o=e(".empty",r),s=e('[data-serial="'+t.serial+'"]',r);s.length||(s=e("<li></li>").insertBefore(o),s.data("serial",t.serial).attr("data-serial",t.serial)),t.object&&t.object.attributes.data?n===!0&&(s.replaceWith(t.render()),s=e('[data-serial="'+t.serial+'"]',r)):(a=f.get({icon:"image",css:{width:58,height:58},title:i("Select an image.")}),s.addClass("placeholder qti-choice qti-gapImg").empty().append(a)),s.addClass("widget-box"),e(p()).appendTo(s).show().click(function(e){e.preventDefault(),e.stopPropagation(),s.remove(),y.removeGapImg(t)
}),s.off("click").on("click",function(){if(s.hasClass("active"))s.removeClass("active"),g();else if(e(".active",r).removeClass("active"),s.addClass("active"),v(t.serial),s.hasClass("placeholder")){var i=e('[data-role="upload-trigger"]',_);i.length&&i.trigger("click")}})}function d(i){var n,a,r=y.getChoice(i);if(r){n=y.paper.getById(i),a=n.getBBox(),_.empty().html(u({identifier:r.id(),fixed:r.attr("fixed"),serial:i,matchMin:r.attr("matchMin"),matchMax:r.attr("matchMax"),choicesCount:t.size(y.getChoices()),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10)})),l.initWidget(_);var o=l.getMinMaxAttributeCallbacks(_,"matchMin","matchMax");
o.identifier=c.updateChoiceIdentifier,o.fixed=l.getAttributeChangeCallback(),l.setChangeCallbacks(_,r,o),R.show(),m.openSections(R.children("section")),m.closeSections(k.children("section")),E=e("input[name=x]",_),w=e("input[name=y]",_),x=e("input[name=width]",_),T=e("input[name=height]",_)}}function g(){"none"!==R.css("display")&&(m.openSections(k.children("section")),R.hide(),_.empty())}function v(e){var n,a,o=y.getGapImg(e);o&&(_.empty().html(h({identifier:o.id(),fixed:o.attr("fixed"),serial:e,matchMin:o.attr("matchMin"),matchMax:o.attr("matchMax"),choicesCount:t.size(y.getChoices()),baseUrl:C.baseUrl,data:o.object.attr("data"),width:o.object.attr("width"),height:o.object.attr("height"),type:o.object.attr("type")})),a=t.clone(C),a.title=i('Please select the picture from the resource manager. You can add new files from your computer with the button "Add file(s)".'),s(_,a),l.initWidget(_),n=l.getMinMaxAttributeCallbacks(_,"matchMin","matchMax"),n.identifier=c.updateChoiceIdentifier,n.fixed=l.getAttributeChangeCallback(),n.data=function(e,t){o.object.attr("data",t),r(o,!0)
},n.width=function(e,t){o.object.attr("width",t)},n.height=function(e,t){o.object.attr("height",t)},n.type=function(e,t){t&&""!==t?o.object.attr("type",t):y.object.removeAttr("type")},l.setChangeCallbacks(_,o,n),R.show(),m.openSections(R.children("section")),m.closeSections(k.children("section")),"function"==typeof window.scroll&&window.scroll(0,_.offset().top))}var b=this.widget,y=b.element,C=b.options,I=y.paper;if(I){var E,w,x,T,_=b.choiceForm,k=e("#item-editor-interaction-property-bar"),R=e("#item-editor-choice-property-bar");b._editor=o(b,{shapeCreated:function(e,t){var i=y.createChoice({shape:"path"===t?"poly":t,coords:n.qtiCoords(e)});e.id=i.serial},shapeRemoved:function(e){y.removeChoice(e)
},enterHandling:function(e){d(e.id)},quitHandling:function(){g()},shapeChange:function(e){var t,i=y.getChoice(e.id);i&&(i.attr("coords",n.qtiCoords(e)),E&&E.length&&(t=e.getBBox(),E.val(parseInt(t.x,10)),w.val(parseInt(t.y,10)),x.val(parseInt(t.width,10)),T.val(parseInt(t.height,10))))}}),b._editor.create(),t.forEach(y.getGapImgs(),r),a(),e(window).on("resize.changestate",function(){b.changeState("sleep")})}},v=function(){var t=this.widget,i=t.element,n=i.paper;n&&(e(window).off("resize.changestate"),t._editor&&t._editor.destroy(),e("ul.source .empty",t.$original).remove(),t.$container.find(".qti-gapImg").removeClass("active").find(".mini-tlb").remove())},b=a.extend(r,g,v);
return b.prototype.initForm=function(){var e=this.widget,t=e.options,i=e.element,n=e.$form;n.html(d({baseUrl:t.baseUrl,data:i.object.attr("data"),width:i.object.attr("width"),height:i.object.attr("height"),type:i.object.attr("type")})),s(n,t),l.initWidget(n);var a={};a.data=function(t,n){i.object.attr("data",n),e.rebuild({ready:function(e){e.changeState("question")}})},a.width=function(e,t){i.object.attr("width",t)},a.height=function(e,t){i.object.attr("height",t)},a.type=function(e,t){t&&""!==t?i.object.attr("type",t):i.object.removeAttr("type")},l.setChangeCallbacks(n,i,a,{validateOnInit:!1})},b}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){function n(){i.forward(this.widget)
}function a(){}return e.extend(t,n,a)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){function s(){var i=this.widget,n=i.element,s=n.getResponseDeclaration(),l=e.values(s.getCorrect());a.destroy(n),n.paper&&(r.appendInstruction(n,t("Please fill the gap with the correct choices below.")),i.createGapImgs(),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.invoke(l,String.prototype.split," "),n)),i.$container.on("responseChange.qti-widget",function(t,i){i.response&&i.response.list&&s.setCorrect(e.map(i.response.list.directedPair,function(e){return e.join(" ")
}))}))}function l(){var t=this.widget,i=t.element;i.paper&&(t.$container.off("responseChange.qti-widget"),r.removeInstructions(i),a.destroy(i),i.paper=t.createPaper(e.bind(t.scaleGapList,t)),t.createChoices(),t.createGapImgs())}return i.create(n,s,l)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm"],function(e,t,i,n,a,r,o,s,l,c){function d(){{var e=this.widget,n=e.element,a=n.getResponseDeclaration(),s=t.values(a.getCorrect());
0===t.size(a.getMapEntries())?s:t.keys(a.getMapEntries())}r.destroy(n),n.paper&&(o.appendInstruction(n,i("Please fill the gap with the images below, then edit the score for each gap/image pair.")),n.responseMappingMode=!0,e.createGapImgs(),r.render.call(n.getRenderer(),n),p(n),0===t.size(a.getMapEntries())?f(e,s):f(e),e.$container.on("responseChange.qti-widget",function(e,i){var r,o,s="single"===a.attr("cardinality")?"base":"list";i&&i.response&&i.response[s]&&(r=t.invoke(i.response[s].directedPair,Array.prototype.join," "),o=t.keys(a.getMapEntries()),t(r).difference(o).forEach(n.pairScoringForm.addPair,n.pairScoringForm)),h(n)}))}function u(){var e=this.widget,i=e.element;
i.paper&&(e.$container.off("responseChange.qti-widget"),i.pairScoringForm&&i.pairScoringForm.destroy(),o.removeInstructions(i),r.destroy(i),i.paper=e.createPaper(t.bind(e.scaleGapList,e)),e.createChoices(),e.createGapImgs())}function h(e){t.forEach(e.gapFillers,function(e){e.remove()}),e.gapFillers=[]}function p(e){t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);i&&s.createShapeText(e.paper,i,{shapeClick:!0,content:t.id()})})}function f(e,n){var a=e.element,r=a.getResponseDeclaration(),o=r.getMapEntries(),s={};t.forEach(a.getGapImgs(),function(t){t.object&&t.object.attr("data")&&(s[t.id()]=e.options.baseUrl+t.object.attr("data"))});var l={leftTitle:i("Choice"),rightTitle:i("Gap"),type:"directedPair",pairLeft:function(){return t.map(a.getChoices(),function(e){return{id:e.id(),value:e.id()}
})},pairRight:function(){return t.map(a.getGapImgs(),function(e){return{id:e.id(),value:e.id()}})},formatRight:function(e){var t=e;return s[e]&&(t+="<br><img height='24px' src='"+s[e]+"' />"),t}};n&&(l.entries=t.transform(n,function(e,t){e[t]=void 0!==o[t]?o[t]:r.mappingAttributes.defaultValue},{})),a.pairScoringForm=c(e,l)}return n.create(a,d,u)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t,i="";return i+='alt="'+d((t=e&&e.attributes,t=null==t||t===!1?t:t.objetLabel,typeof t===c?t.apply(e):t))+'" '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<li class="qti-choice qti-gapImg selectable" data-identifier="'+d((o=t&&t.attributes,o=null==o||o===!1?o:o.identifier,typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    <img src="'+d((o=t&&t.object,o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.data,typeof o===c?o.apply(t):o))+'" \n         width="'+d((o=t&&t.object,o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.width,typeof o===c?o.apply(t):o))+'"\n         height="'+d((o=t&&t.object,o=null==o||o===!1?o:o.attributes,o=null==o||o===!1?o:o.height,typeof o===c?o.apply(t):o))+'"\n         ',o=i["if"].call(t,(o=t&&t.attributes,null==o||o===!1?o:o.objectLabel),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+="\n    />\n</li>"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states","tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg"],function(e,t,i,n,a,r){var o=t.extend(n.clone(),a,{initCreator:function(e){var i;this.baseUrl=e.baseUrl,this.choiceForm=e.choiceForm,this.registerStates(r),n.initCreator.call(this),i=this.createPaper(t.bind(this.scaleGapList,this)),i&&(this.element.paper=i,this.createChoices(),this.createGapImgs())
},destroy:function(){var t=this.$original,i=t.parents(".qti-item");i.off("resize.gridEdit."+this.element.serial),e(window).off("resize.qti-widget."+this.element.serial),t.off("resize.qti-widget."+this.element.serial),n.destroy.call(this)},scaleGapList:function(t,i){var n=this.$original,a=e("ul.source",n);a.css("max-width",t+"px"),i&&1!==i&&a.find("img").each(function(){var t=e(this);t.width(t.attr("width")*i),t.height(t.attr("height")*i)})},createGapImgs:function(){var i=this.element,n=this.$original,a=e("ul.source",n);a.empty(),t.forEach(i.gapImgs,function(e){a.append(e.render())})}});return o}),define("taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction","taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.choiceForm=this.getOption("choiceOptionForm"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicOrderInteraction clearfix '+d((o=t&&t.attributes,o=null==o||o===!1?o:o["class"],typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'\' class="main-image-box"></div>\n        <div class="clearfix"></div>\n        <ul class="none block-listing solid horizontal ordinals"></ul>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t,i,n,a,r,o,s,l){var c=function(i){var n=l.getContainer(i),a=e("ul",n),r=i.object.attributes,s=this.getOption("baseUrl")||"";i.paper=o.responsivePaper("graphic-paper-"+i.serial,i.serial,{width:r.width,height:r.height,img:s+r.data,imgId:"bg-image-"+i.serial,container:n}),u(i,a),t.forEach(i.getChoices(),t.partial(d,i,a)),l.minMaxChoiceInstructions(i,{min:i.attr("minChoices"),max:i.attr("maxChoices"),getResponse:v,onError:function(e){o.highlightError(e.target)
}})},d=function(e,t,n){o.createElement(e.paper,n.attr("shape"),n.attr("coords"),{id:n.serial,title:i("Select this area")}).click(function(){this.active?p(e.paper,this,t):h(e.paper,this,t),l.triggerResponseChangeEvent(e),l.validateInstructions(e,{choice:n})})},u=function(i,n){var a,r=t.size(i.getChoices()),o=i.attr("minChoices"),s=i.attr("maxChoices");s>0&&r>s?r=s:o>0&&r>o&&(r=o),t.times(r,function(t){var i=t+1,a=e('<li class="selectable" data-number="'+i+'">'+i+"</li>");0===t&&a.addClass("active"),n.append(a)}),f(i.paper,r,n),a=n.children("li"),a.click(function(t){t.preventDefault();var i=e(this);i.hasClass("active")||i.hasClass("disabled")||(a.removeClass("active"),i.addClass("active"))
})},h=function(e,t,i){var n=i.find(".active:first");n.length&&n.data("number")>0&&(t.data("number",n.data("number")),t.active=!0,m(e,t),o.updateElementState(t,"active"),n.toggleClass("active disabled").siblings(":not(.disabled)").first().toggleClass("active"))},p=function(e,t,i){var n=t.data("number");t.active=!1,g(e,t),t.removeData("number"),o.updateElementState(t,"basic"),i.children().removeClass("active").filter("[data-number="+n+"]").removeClass("disabled").addClass("active")},f=function(e,n){var a=[];return t.times(n,function(n){var r=n+1,s=o.createText(e,{id:"text-"+r,content:r,title:i("Remove"),style:"order-text",hide:!0});s.click(function(){e.forEach(function(e){if(e.data("number")===r&&e.events){var i=t.where(e.events,{name:"click"});
i.length&&i[0]&&"function"==typeof i[0].f&&i[0].f.call(e)}})}),a.push(s)}),a},m=function(e,t){var i,n=t.getBBox(),a=e.getById("text-"+t.data("number"));a&&(i="T"+(n.x+n.width/2)+","+(n.y+n.height/2),a.transform(i).show().toFront())},g=function(e,t){var i=e.getById("text-"+t.data("number"));i&&i.hide()},v=function(e){var i=[];return t.forEach(e.getChoices(),function(t){var n=e.paper.getById(t.serial);n&&n.data("number")&&i.push({index:n.data("number"),id:t.id()})}),t(i).sortBy("index").map("id").value()},b=function(i,n){var a,r=l.getContainer(i),o=e("ul",r);if(n&&i.paper){try{a=s.unserialize(n,i)}catch(c){}t.isArray(a)&&t.forEach(a,function(e,n){var a,r=n+1,s=t(i.getChoices()).where({attributes:{identifier:e}}).first();
s&&(a=i.paper.getById(s.serial),a&&(o.children("[data-number="+r+"]").addClass("active"),h(i.paper,a,o)))})}},y=function(i){var n=l.getContainer(i),a=e("ul",n);t.forEach(i.getChoices(),function(e){var t=i.paper.getById(e.serial);t&&p(i.paper,t,a)}),a.children("li").removeClass("active disabled").first().addClass("active")},C=function(e){return s.serialize(v(e),e)},I=function(t){var i;t.paper&&(i=l.getContainer(t),e(window).off("resize.qti-widget."+t.serial),i.off("resize.qti-widget."+t.serial),t.paper.clear(),l.removeInstructions(t),e(".main-image-box",i).empty().removeAttr("style"),e(".image-editor",i).removeAttr("style"),e("ul",i).empty())};return{qtiClass:"graphicOrderInteraction",template:r,render:c,getContainer:l.getContainer,setResponse:b,getResponse:C,resetResponse:y,destroy:I}
}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=function(){var e=this.widget,t=e.element;e.on("metaChange",function(i){"responsive"===i.key&&(i.value===!0?t.addClass("responsive"):t.removeClass("responsive"),e.rebuild())})},n=function(){};return e.extend(t,i,n)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";
return l+='<div class="panel">\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Interaction Background",s):c.call(t,"__","Interaction Background",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div class="panel">\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime Type",s):c.call(t,"__","Mime Type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <hr>\n\n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of choices",s):c.call(t,"__","Allowed number of choices",s)))+'\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",s):c.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",s)))+"<br>\n            "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices that the candidate is allowed to select.",s):c.call(t,"__","The maximum number of choices that the candidate is allowed to select.",s)))+'\n        </span>\n    </h3>\n\n    <div class="panel">\n        <label for="minChoices" class="spinner">Min</label>\n        <input name="minChoices" value="',(o=i.minChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.minChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="maxChoices" class="spinner">Max</label>\n        <input name="maxChoices" value="',(o=i.maxChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.maxChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n</div>\n'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='\n<div class="panel">\n    <label for="">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"identifier",s):c.call(t,"__","identifier",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s):c.call(t,"__",'The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore ("_") and contain only Letters, underscores, hyphens ("-"), period (".", a.k.a. full-stop), Digits, CombiningChars and Extenders.',s)))+'</div>\n\n    <input type="text" \n           name="identifier" \n           value="',(o=i.identifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.identifier,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" \n           placeholder="e.g. my-hotspot_1" \n           data-validate="$notEmpty; $qtiIdentifier; $availableIdentifier(serial=',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+');">\n</div>\n\n<h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Shape position",s):c.call(t,"__","Shape position",s)))+'</h3>\n\n<div class="panel">\n    <label for="x">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Left",s):c.call(t,"__","Left",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="x" value="',(o=i.x)?r=o.call(t,{hash:{},data:a}):(o=t&&t.x,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="y">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Top",s):c.call(t,"__","Top",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="y" value="',(o=i.y)?r=o.call(t,{hash:{},data:a}):(o=t&&t.y,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The shape width in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n\n<div class="panel">\n    <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",s):c.call(t,"__","The shape height in pixels. This value may be scaled when the background image size is adapted to it's container",s)))+'</div>\n    <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor","taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot","taoQtiItem/qtiCreator/editor/editor"],function(e,t,i,n,a,r,o,s,l,c,d,u,h){var p=function(){function t(t){var i,n,a=o.getChoice(t);
a&&(i=o.paper.getById(t),n=i.getBBox(),g.empty().html(u({identifier:a.id(),fixed:a.attr("fixed"),serial:t,x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10)})),s.initWidget(g),s.setChangeCallbacks(g,a,{identifier:c.updateChoiceIdentifier,fixed:s.getAttributeChangeCallback()}),b.show(),h.openSections(b.children("section")),h.closeSections(v.children("section")),d=e("input[name=x]",g),p=e("input[name=y]",g),f=e("input[name=width]",g),m=e("input[name=height]",g))}function n(){"none"!==b.css("display")&&(h.openSections(v.children("section")),b.hide(),g.empty())}var a=this.widget,o=a.element,l=o.paper;if(l){var d,p,f,m,g=a.choiceForm,v=e("#item-editor-interaction-property-bar"),b=e("#item-editor-choice-property-bar");
a._editor=r(a,{shapeCreated:function(e,t){var n=o.createChoice({shape:"path"===t?"poly":t,coords:i.qtiCoords(e)});e.id=n.serial},shapeRemoved:function(e){o.removeChoice(e)},enterHandling:function(e){t(e.id)},quitHandling:function(){n()},shapeChange:function(e){var t,n=o.getChoice(e.id);n&&(n.attr("coords",i.qtiCoords(e)),d&&d.length&&(t=e.getBBox(),d.val(parseInt(t.x,10)),p.val(parseInt(t.y,10)),f.val(parseInt(t.width,10)),m.val(parseInt(t.height,10))))}}),a._editor.create(),e(window).on("resize.changestate",function(){a.changeState("sleep")}),a.on("attributeChange",function(e){"maxChoices"===e.key&&a.renderOrderList()})}},f=function(){var t=this.widget,i=t.element,n=i.paper;
n&&(e(window).off("resize.changestate"),t._editor&&t._editor.destroy())},m=n.extend(a,p,f);return m.prototype.initForm=function(){var e=this.widget,i=e.options,n=e.element,a=e.$form;a.html(d({baseUrl:i.baseUrl,maxChoices:parseInt(n.attr("maxChoices")),minChoices:parseInt(n.attr("minChoices")),choicesCount:t.size(n.getChoices()),data:n.object.attr("data"),width:n.object.attr("width"),height:n.object.attr("height"),type:n.object.attr("type")})),o(a,i),s.initWidget(a);var r=s.getMinMaxAttributeCallbacks(this.widget.$form,"minChoices","maxChoices");r.data=function(t,i){n.object.attr("data",i),e.rebuild({ready:function(e){e.changeState("question")}})},r.width=function(e,t){n.object.attr("width",t)
},r.height=function(e,t){n.object.attr("height",t)},r.type=function(e,t){t&&""!==t?n.object.attr("type",t):n.object.removeAttr("type")},s.setChangeCallbacks(a,n,r,{validateOnInit:!1}),l.syncMaxChoices(e)},m}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){function n(){i.forward(this.widget)}function a(){}return e.extend(t,n,a)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){function s(){var i=this.widget,n=i.element,s=n.getResponseDeclaration();
a.destroy(n),n.paper&&(r.appendInstruction(n,t("Please order the choices below to set the correct answer")),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.values(s.getCorrect()),n)),i.$container.on("responseChange.qti-widget",function(e,t){s.setCorrect(o.unserialize(t.response,n))}))}function l(){var t=this.widget,i=t.element;i.paper&&(t.$container.off("responseChange.qti-widget"),r.removeInstructions(i),a.destroy(i),i.paper=t.createPaper(e.bind(t.scaleOrderList,t)),t.createChoices(),t.renderOrderList())}return i.create(n,s,l)}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states"],function(e,t,i,n,a,r){var o=t.extend(n.clone(),a,{initCreator:function(e){var i;this.baseUrl=e.baseUrl,this.choiceForm=e.choiceForm,this.registerStates(r),n.initCreator.call(this),i=this.createPaper(t.bind(this.scaleOrderList,this)),i&&(this.element.paper=i,this.createChoices(),this.renderOrderList())},destroy:function(){var t=this.$original,i=t.parents(".qti-item");
i.off("resize.gridEdit."+this.element.serial),e(window).off("resize.qti-widget."+this.element.serial),t.off("resize.qti-widget."+this.element.serial),n.destroy.call(this)},scaleOrderList:function(t){e("ul.block-listing",this.$original).css("max-width",t+"px")},renderOrderList:function(){var i=this.element,n=t.size(i.getChoices()),a=i.attr("minChoices"),r=i.attr("maxChoices"),o=e("ul.block-listing",this.$original);r>0&&n>r?n=r:a>0&&n>a&&(n=a),o.empty(),t.times(n,function(t){var i=t+1,n=e('<li class="selectable" data-number="'+i+'">'+i+"</li>");0===t&&n.addClass("active"),o.append(n)})}});return o}),define("taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction","taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget"],function(e,t,i){var n=e.clone(t);
return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.choiceForm=this.getOption("choiceOptionForm"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-hotspotInteraction clearfix '+d((o=t&&t.attributes,o=null==o||o===!1?o:o["class"],typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t,i,n,a,r,o,s,l){var c=function(e){var n=l.getContainer(e),a=e.object.attributes,r=this.getOption("baseUrl")||"";e.paper=o.responsivePaper("graphic-paper-"+e.serial,e.serial,{width:a.width,height:a.height,img:r+a.data,container:n}),t.forEach(e.getChoices(),t.partial(d,e)),l.minMaxChoiceInstructions(e,{min:e.attr("minChoices"),max:e.attr("maxChoices"),getResponse:u,onError:function(t){t.target.active&&(t.target.active=!1,o.updateElementState(this,"basic",i("Select this area")),o.highlightError(t.target),l.triggerResponseChangeEvent(e),n.trigger("inactiveChoice.qti-widget",[t.choice,t.target]))
}})},d=function(e,t){{var n=l.getContainer(e);o.createElement(e.paper,t.attr("shape"),t.attr("coords"),{id:t.serial,title:i("Select this area")}).click(function(){this.active?(o.updateElementState(this,"basic",i("Select this area")),this.active=!1,n.trigger("inactiveChoice.qti-widget",[t,this])):(o.updateElementState(this,"active",i("Click again to remove")),this.active=!0,n.trigger("activeChoice.qti-widget",[t,this])),l.triggerResponseChangeEvent(e),l.validateInstructions(e,{choice:t,target:this})})}},u=function(e){return t(e.getChoices()).map(function(t){var i=e.paper.getById(t.serial);return i&&i.active===!0?t.id():!1}).filter(t.isString).value()},h=function(e,n){var a;
if(n&&e.paper){try{a=s.unserialize(n,e)}catch(r){}t.isArray(a)&&t.forEach(e.getChoices(),function(n){var r;t.contains(a,n.attributes.identifier)&&(r=e.paper.getById(n.serial),r&&(r.active=!0,o.updateElementState(r,"active",i("Click again to remove")),l.validateInstructions(e,{choice:n,target:r})))})}},p=function(e){t.forEach(e.getChoices(),function(t){var i=e.paper.getById(t.serial);i&&(i.active=!1,o.updateElementState(i,"basic"))}),l.resetInstructions(e)},f=function(e){var t=(u(e),s.serialize(u(e),e));return t},m=function(t){var i;t.paper&&(i=l.getContainer(t),e(window).off("resize.qti-widget."+t.serial),i.off("resize.qti-widget."+t.serial),t.paper.clear(),l.removeInstructions(t),e(".main-image-box",i).empty().removeAttr("style"),e(".image-editor",i).removeAttr("style"))
};return{qtiClass:"hotspotInteraction",template:r,render:c,getContainer:l.getContainer,setResponse:h,getResponse:f,resetResponse:p,destroy:m}}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=function(){var e=this.widget,t=e.element;e.on("metaChange",function(i){"responsive"===i.key&&(i.value===!0?t.addClass("responsive"):t.removeClass("responsive"),e.rebuild())})},n=function(){};return e.extend(t,i,n)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Interaction Background",s):c.call(t,"__","Interaction Background",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div class="panel">\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime Type",s):c.call(t,"__","Mime Type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" readonly />\n    </div>\n\n    <hr>\n\n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of choices",s):c.call(t,"__","Allowed number of choices",s)))+'\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",s):c.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",s)))+"<br>\n            "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices that the candidate is allowed to select.",s):c.call(t,"__","The maximum number of choices that the candidate is allowed to select.",s)))+'\n        </span>\n    </h3>\n\n    <div class="panel">\n        <label for="minChoices" class="spinner">Min</label>\n        <input name="minChoices" value="',(o=i.minChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.minChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="maxChoices" class="spinner">Max</label>\n        <input name="maxChoices" value="',(o=i.maxChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.maxChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question",["jquery","lodash","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor","taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot","taoQtiItem/qtiCreator/editor/editor"],function(e,t,i,n,a,r,o,s,l,c,d,u,h){var p=function(){function t(t){var i,n,a=o.getChoice(t);
a&&(i=o.paper.getById(t),n=i.getBBox(),g.empty().html(u({identifier:a.id(),fixed:a.attr("fixed"),serial:t,x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10)})),s.initWidget(g),s.setChangeCallbacks(g,a,{identifier:c.updateChoiceIdentifier,fixed:s.getAttributeChangeCallback()}),b.show(),h.openSections(b.children("section")),h.closeSections(v.children("section")),d=e("input[name=x]",g),p=e("input[name=y]",g),f=e("input[name=width]",g),m=e("input[name=height]",g))}function n(){"none"!==b.css("display")&&(h.openSections(v.children("section")),b.hide(),g.empty())}var a=this.widget,o=a.element,l=o.paper;if(l){var d,p,f,m,g=a.choiceForm,v=e("#item-editor-interaction-property-bar"),b=e("#item-editor-choice-property-bar");
a._editor=r(a,{shapeCreated:function(e,t){var n=o.createChoice({shape:"path"===t?"poly":t,coords:i.qtiCoords(e)});e.id=n.serial},shapeRemoved:function(e){o.removeChoice(e)},enterHandling:function(e){t(e.id)},quitHandling:function(){n()},shapeChange:function(e){var t,n=o.getChoice(e.id);n&&(n.attr("coords",i.qtiCoords(e)),d&&d.length&&(t=e.getBBox(),d.val(parseInt(t.x,10)),p.val(parseInt(t.y,10)),f.val(parseInt(t.width,10)),m.val(parseInt(t.height,10))))}}),a._editor.create(),e(window).on("resize.changestate",function(){a.changeState("sleep")})}},f=function(){var t=this.widget,i=t.element,n=i.paper;n&&(e(window).off("resize.changestate"),t._editor&&t._editor.destroy())
},m=n.extend(a,p,f);return m.prototype.initForm=function(){var e=this.widget,i=e.options,n=e.element,a=e.$form;a.html(d({baseUrl:i.baseUrl,maxChoices:parseInt(n.attr("maxChoices")),minChoices:parseInt(n.attr("minChoices")),choicesCount:t.size(n.getChoices()),data:n.object.attr("data"),width:n.object.attr("width"),height:n.object.attr("height"),type:n.object.attr("type")})),o(a,i),s.initWidget(a);var r=s.getMinMaxAttributeCallbacks(this.widget.$form,"minChoices","maxChoices");r.data=function(i,a){n.object.attr("data",a),e.rebuild({ready:function(e){t.defer(function(){e.changeState("question")})}})},r.width=function(e,t){n.object.attr("width",t)},r.height=function(e,t){n.object.attr("height",t)
},r.type=function(e,t){t&&""!==t?n.object.attr("type",t):n.object.removeAttr("type")},s.setChangeCallbacks(a,n,r,{validateOnInit:!1}),l.syncMaxChoices(e)},m}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){function n(){i.forward(this.widget)}function a(){}return e.extend(t,n,a)}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){function s(){var i=this.widget,n=i.element,s=n.getResponseDeclaration();
a.destroy(n),n.paper&&(r.appendInstruction(n,t("Please select the correct hotspot choices below.")),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.values(s.getCorrect()),n)),i.$container.on("responseChange.qti-widget",function(e,t){s.setCorrect(o.unserialize(t.response,n))}))}function l(){var e=this.widget,t=e.element;t.paper&&(e.$container.off("responseChange.qti-widget"),r.removeInstructions(t),a.destroy(t),t.paper=e.createPaper(),e.createChoices())}return i.create(n,s,l)}),define("taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup",["jquery","lodash"],function(e){return function(t,i,n,a){var r,o=10,s=e(i.node),l=e('<div class="mapping-editor arrow-left-top"></div>'),c=n.offset(),d=s.offset(),u=i.getBBox(),h=u.width;
return a&&(r=t.w/t.width,h=Math.round(h*(2-r))),l.css({top:d.top-c.top-o,left:d.left-c.left+h+o}).appendTo(n),l}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,s="";return s+='\n        <div class="panel" data-edit="correct">\n            <label>\n                '+h((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Correct",r):u.call(e,"__","Correct",r)))+'\n                <input name="correct" type="checkbox" ',n=i["if"].call(e,e&&e.correct,{hash:{},inverse:p.noop,fn:p.program(2,o,t),data:t}),(n||0===n)&&(s+=n),s+=' />\n                <span class="icon-checkbox"></span>\n            </label>\n            <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n            <span class="tooltip-content">'+h((a=i.__||e&&e.__,r={hash:{},data:t},a?a.call(e,"Is this choice the correct response?",r):u.call(e,"__","Is this choice the correct response?",r)))+"</span>\n        </div>\n"
}function o(){return' checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u=i.helperMissing,h=this.escapeExpression,p=this,f="function";return d+='    <a class="closer" href="#" data-close=":parent .mapping-editor"></a>\n    <div class="form-container">\n        <h2>',(l=i.identifier)?s=l.call(t,{hash:{},data:a}):(l=t&&t.identifier,s=typeof l===f?l.call(t,{hash:{},data:a}):l),d+=h(s)+"</h2>\n\n",s=i.unless.call(t,t&&t.noCorrect,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+='\n        <div class="panel">\n            <label for="score">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Score",c):u.call(t,"__","Score",c)))+'</label>\n            <input value="',(l=i.score)?s=l.call(t,{hash:{},data:a}):(l=t&&t.score,s=typeof l===f?l.call(t,{hash:{},data:a}):l),d+=h(s)+'" type="text" data-for="',(l=i.identifier)?s=l.call(t,{hash:{},data:a}):(l=t&&t.identifier,s=typeof l===f?l.call(t,{hash:{},data:a}):l),d+=h(s)+'" name="score" class="score" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)" />\n            <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n            <span class="tooltip-content">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"Set the score for this response",c):u.call(t,"__","Set the score for this response",c)))+'</span>\n        </div>\n        <span class="arrow"></span>\n        <span class="arrow-cover"></span>\n    </div>\n'
})}),define("tpl!ui/deleter/undo",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="undobox feedback-info">\n    <span class="icon-info"></span>\n        ',(o=i.undoMessage)?r=o.call(t,{hash:{},data:a}):(o=t&&t.undoMessage,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'\n        <a class="undo" href="#">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Undo",s):u.call(t,"__","Undo",s)))+'</a>\n    <span title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Remove Message",s):u.call(t,"__","Remove Message",s)))+'" class="icon-close" data-close=":parent .undobox"></span>\n</div>\n'
})}),define("ui/deleter",["jquery","lodash","i18n","core/pluginifier","core/dataattrhandler","tpl!ui/deleter/undo"],function(e,t,i,n,a,r){var o="deleter",s="ui."+o,l={bindEvent:"click",undo:!1,undoTimeout:5e3,undoMessage:i("Element deleted."),undoContainer:!1,confirm:!1,confirmMessage:i("Are you sure you want to delete it?"),disableClass:"disabled"},c={init:function(i){return i=t.defaults(i,l),this.each(function(){var t=e(this);t.data(s)||(t.data(s,i),i.bindEvent!==!1&&t.on(i.bindEvent,function(e){e.preventDefault(),c._delete(t)}),t.trigger("create."+o))})},_delete:function(i){var n,a,r,l,d,u,h,p=c,f=!0,m=i.data(s),g=function(){f&&n&&(n.remove(),r.trigger("deleted."+o))
};m&&!i.hasClass(m.disableClass)&&(n=m.target,m.confirm===!0&&(f=window.confirm(m.confirmMessage)),f&&(a=n.parent(),r=n.has(i).length>0?a:i,i.trigger("delete."+o,[n]),n.trigger("delete",[m.undo]),l=e('<span style="display:none;" />').insertAfter(n),n.detach(),m.undo?(e(document).off(".unundo."+o),d=p._createUndoBox(m),d.find(".undo").click(function(e){e.preventDefault(),"number"==typeof h&&clearTimeout(h),f=!1,d.remove(),n.insertBefore(l),l.remove(),i.trigger("undo."+o,[n]),n.trigger("undo."+o)}),u=function(){d&&d.length&&(d.remove(),l.remove()),g(),e(document).off(".unundo."+o)},e(document).one("mousedown.unundo."+o,function(i){return i.preventDefault(),i.stopImmediatePropagation(),0===d.find(i.target).length&&"number"==typeof h&&(clearTimeout(h),u()),t.delay(function(){e(i.target).trigger("mousedown")
},10),!1}),h=setTimeout(function(){u()},m.undoTimeout)):g()))},_createUndoBox:function(t){var i=t.undoContainer||e("#feedback-messages-main");return i.length||(i=e('<div id="feedback-messages-main" class="tao-scope"></div>').appendTo("body")),e(r(t)).appendTo(i)},destroy:function(){this.each(function(){var t=e(this),i=t.data(s);i.bindEvent!==!1&&t.off(i.bindEvent),t.removeData(s),t.trigger("destroy."+o)})}};return n.register(o,c,{expose:["delete"]}),function(e){new a("delete",{container:e,listenerEvent:"click",namespace:s,bubbled:!0}).init(function(e,t){var i={target:t,bindEvent:!1,undo:!0},n=e.data("delete-confirm"),a=e.data("delete-undo");n&&(i.confirm=!0,i.undo=!1,n.length>0&&(i.confirmMessage=n)),null!==a&&void 0!==a&&(a===!1?i.undo=!1:(i.confirm=!1,i.undo=!0,a.length>0&&(i.undoMessage=a))),e.deleter(i)
}).trigger(function(e){e.deleter("delete")}),new a("close",{container:e,listenerEvent:"click",namespace:s,bubbled:!0}).init(function(e,t){{var i={target:t,bindEvent:!1,undo:!1},n=e.data("delete-confirm");e.data("delete-undo")}n&&(i.confirm=!0,i.undo=!1,n.length>0&&(i.confirmMessage=n)),e.deleter(i)}).trigger(function(e){e.deleter("delete")})}}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup","tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm","taoQtiItem/qtiCreator/widgets/helpers/formElement","ui/deleter","ui/tooltipster"],function(e,t,i,n,a,r,o,s,l,c,d,u,h,p,f){function m(){var e=this.widget,n=e.element,a=n.getResponseDeclaration();
r.destroy(n),n.paper&&(o.appendInstruction(n,i("Please the score of each hotspot choice.")),n.responseMappingMode=!0,n.paper=e.createPaper(),e.createChoices(),v(e),r.setResponse(n,l.serialize(t.values(a.getCorrect()),n)))}function g(){var e=this.widget,t=e.element;t.paper&&(o.removeInstructions(t),r.destroy(t),t.paper=e.createPaper(),e.createChoices())}function v(i){var n={},a=i.element,r=i.$original,o=r.hasClass("responsive"),l=e(".main-image-box",r),m=a.getResponseDeclaration(),g=m.getMapEntries(),v=t.values(m.getCorrect());t.forEach(a.getChoices(),function(p){var f=a.paper.getById(p.serial),b=d(a.paper,f,l,o),y=g[p.id()]||m.mappingAttributes.defaultValue||"0";
n[p.serial]=s.createShapeText(a.paper,f,{id:"score-"+p.serial,content:y,style:"score-text-default",shapeClick:!0}).data("default",!0);var C=e(u({identifier:p.id(),correctDefined:c.isCorrectDefined(i),correct:t.contains(m.getCorrect(),p.id()),score:y,scoreMin:m.getMappingAttribute("lowerBound"),scoreMax:m.getMappingAttribute("upperBound")}));h.setChangeCallbacks(C,m,{score:function(e,t){var i=n[p.serial];""===t?(e.removeMapEntry(p.id()),i.attr({text:e.mappingAttributes.defaultValue}).data("default",!0)):(e.setMapEntry(p.id(),t,!0),i.attr({text:t}).data("default",!1))},correct:function(e,i){i===!0?t.contains(v,p.id())||(v.push(p.id()),f.active=!0,s.updateElementState(f,"active")):(v=t.without(v,p.id()),f.active=!1,s.updateElementState(f,"basic")),e.setCorrect(v)
}}),f.click(function(){e(".mapping-editor",r).hide(),b.show()}),b.append(C)}),p(r),f(r),a.paper.getById("bg-image-"+a.serial).click(function(){e(".mapping-editor",r).hide()}),e(".mapping-editor",r).on("click",".closer",function(){e(this).parent(".mapping-editor").hide()}),i.on("mappingAttributeChange",function(e){"defaultValue"===e.key&&t.forEach(n,function(t){t.data("default")===!0&&t.attr({text:e.value})})})}return n.create(a,m,g)}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states"],function(e,t,i,n,a,r){var o=t.extend(n.clone(),a,{initCreator:function(e){var t;this.baseUrl=e.baseUrl,this.choiceForm=e.choiceForm,this.registerStates(r),n.initCreator.call(this),t=this.createPaper(),t&&(this.element.paper=t,this.createChoices())},destroy:function(){var t=this.$original,i=t.parents(".qti-item");i.off("resize.gridEdit."+this.element.serial),e(window).off("resize.qti-widget."+this.element.serial),t.off("resize.qti-widget."+this.element.serial),n.destroy.call(this)
}});return o}),define("taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction","taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.choiceForm=this.getOption("choiceOptionForm"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;
return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div id="'+d((o=t&&t.attributes,o=null==o||o===!1?o:o.identifier,typeof o===c?o.apply(t):o))+'" class="qti-interaction qti-blockInteraction qti-hottextInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" data-qti-class="hottextInteraction">\n  ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n  <div class="instruction-container"></div>\n  <div class="qti-flow-container">',(s=i.body)?o=s.call(t,{hash:{},data:a}):(s=t&&t.body,o=typeof s===c?s.call(t,{hash:{},data:a}):s),(o||0===o)&&(l+=o),l+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n"],function(e,t,i,n,a){var r=function(i){var a=function(t,i){var a=t.find("input");if(a.prop("checked")||a.hasClass("disabled"))a.prop("checked",!1);else{var r=parseInt(i.attr("maxChoices")),o=e.values(c(i)).length;(r>o||0===r)&&a.prop("checked",!0)}n.triggerResponseChangeEvent(i),n.validateInstructions(i,{choice:t})};n.getContainer(i).find(".hottext").on("click",function(e){e.preventDefault(),a(t(this),i)
})},o=function(e){r(e),n.minMaxChoiceInstructions(e,{min:e.attr("minChoices"),max:e.attr("maxChoices"),getResponse:c,onError:function(e){var t,i,n;e.choice&&e.choice.length&&(i=e.choice.addClass("error"),t=i.find("input"),n=i.find(" > label > span").addClass("error cross"),setTimeout(function(){t.prop("checked",!1),i.removeClass("error"),n.removeClass("error cross")},350))}})},s=function(e){n.getContainer(e).find("input").prop("checked",!1)},l=function(t,i){var r=n.getContainer(t);try{e.each(a.unserialize(i,t),function(e){r.find("input[value="+e+"]").prop("checked",!0)}),n.validateInstructions(t)}catch(o){throw new Error("wrong response format in argument : "+o)
}},c=function(e){var i=[];return n.getContainer(e).find("input:checked").each(function(){i.push(t(this).val())}),i},d=function(e){return a.serialize(c(e),e)},u=function(e){var t=n.getContainer(e);s(e),t.find(".hottext").off("click")};return{qtiClass:"hottextInteraction",template:i,render:o,getContainer:n.getContainer,setResponse:l,getResponse:d,resetResponse:s,destroy:u}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of choices",s):c.call(t,"__","Allowed number of choices",s)))+'</h3>\n\n    <div>\n        <label for="minChoices" class="spinner">Min</label>\n        <input name="minChoices" value="',(o=i.minChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.minChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",s):c.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",s)))+'\n        </span>\n    </div>\n    <div>\n        <label for="maxChoices" class="spinner">Max</label>\n        <input name="maxChoices" value="',(o=i.maxChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.maxChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.choicesCount)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choicesCount,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n            <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices that the candidate is allowed to select to form a valid response.",s):c.call(t,"__","The maximum number of choices that the candidate is allowed to select to form a valid response.",s)))+"\n        </span>\n    </div>\n</div>\n"
})}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<span class="mini-tlb" data-edit="',(o=i.state)?r=o.call(t,{hash:{},data:a}):(o=t&&t.state,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-for="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-role="create-hottext-tlb">\n    <span class="rgt tlb-button" title="'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Create hottext",s):u.call(t,"__","Create hottext",s)))+'" data-role="create-hottext">\n        <span class="icon-magicwand"></span>\n    </span>\n</span>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question",["lodash","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext","tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create"],function(e,t,i,n,a,r,o){var s=t.extend(i);return s.prototype.initForm=function(){var t=this.widget,i=t.$form,o=t.element;i.html(r({maxChoices:o.attr("maxChoices"),minChoices:o.attr("minChoices"),choicesCount:e.size(o.getChoices())})),n.initWidget(i);
var s=n.getMinMaxAttributeCallbacks(i,"minChoices","maxChoices",!0);n.setChangeCallbacks(i,o,s),a.syncMaxChoices(t)},s.prototype.getGapModel=function(){return{toolbarTpl:o,qtiClass:"hottext",afterCreate:function(e,t,i){t.element.body(i),t.$container.find(".hottext-content").html(i),t.changeState("choice")}}},s}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){this.widget.$original.find(".hottext-checkmark > input").removeProp("disabled"),i.forward(this.widget)
},function(){this.widget.$original.find(".hottext-checkmark > input").prop("disabled","disabled")});return n}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o){function s(){var i=this.widget,n=i.element,s=n.getResponseDeclaration();a.destroy(n),r.appendInstruction(n,t("Please select the correct hottext choices below.")),a.render.call(n.getRenderer(),n),a.setResponse(n,o.serialize(e.values(s.getCorrect()),n)),i.$container.on("responseChange.qti-widget",function(e,t){s.setCorrect(o.unserialize(t.response,n))
})}function l(){var e=this.widget,t=e.element;e.$container.off("responseChange.qti-widget"),r.removeInstructions(t),a.destroy(t)}return i.create(n,s,l)}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(e,t,i,n,a,r,o,s,l,c){function d(){var e=this.widget,n=e.element,a=n.getResponseDeclaration(),l=t.values(a.getCorrect());
r.destroy(n),s.appendInstruction(n,i("Please enter the score for the given hottexts.")),n.responseMappingMode=!0,p(n,e.$container),r.render.call(n.getRenderer(),n),r.setResponse(n,c.serialize(l,n)),e.$container.on("responseChange.qti-widget",function(e,t){var i="single"===a.attr("cardinality")?"base":"list";t&&t.response&&t.response[i]&&a.setCorrect(t.response[i].identifier)}),e.on("metaChange",function(t){"defineCorrect"===t.key&&(h(e.$container,t.value),t.value===!1&&a.setCorrect([]))}),h(e.$container,o.defineCorrect(a))}function u(){var t=this.widget,i=t.element,n=t.$container;n.off("responseChange.qti-widget"),e(".score",n).remove(),h(n,!0),s.removeInstructions(i),r.destroy(i)
}function h(t,i){i?e(".hottext-checkmark > input",t).removeProp("disabled").removeClass("disabled"):e(".hottext-checkmark > input",t).prop("disabled",!0).prop("checked",!1).addClass("disabled")}function p(n,a){var r={},s=n.getResponseDeclaration(),c=s.getMapEntries();e(".hottext",a).on("click",function(t){(e(t.target).hasClass("score")||o.defineCorrect(s)===!1)&&(t.preventDefault(),t.stopImmediatePropagation())}),t.forEach(n.getChoices(),function(t){var n,o=t.serial+"-score",l=e('[data-serial="'+t.serial+'"]',a);l.length&&(n=e("<input type='text' name='"+o+"' class='score' title='"+i("Score value")+"' data-validate='$numeric' data-validate-option='$allowEmpty; $event(type=keyup)' />"),n.val(void 0!==c[t.id()]?c[t.id()]:s.mappingAttributes.defaultValue),l.append(n),r[o]=function(e,i){""===i?e.removeMapEntry(t.id()):e.setMapEntry(t.id(),i,!0)
})}),l.setChangeCallbacks(a,s,r)}return n.create(a,d,u)}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction","taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t;return t=typeof e===d?e.apply(e):e,t||0===t?t:""
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d="function",u=this.escapeExpression,h=this,p=i.blockHelperMissing;return c+='<select class="qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction" \n        data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===d?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" \n        data-qti-class="inlineChoiceInteraction" \n        data-has-search="false">\n    <option></option>\n    <option value="empty"></option>\n    ',l={hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a},(s=i.choices)?o=s.call(t,l):(s=t&&t.choices,o=typeof s===d?s.call(t,l):s),i.choices||(o=p.call(t,o,{hash:{},inverse:h.noop,fn:h.program(1,r,a),data:a})),(o||0===o)&&(c+=o),c+="\n</select>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","select2","tooltipster"],function(e,t,i,n,a){var r="empty",o={allowEmpty:!0,placeholderText:a("select a choice")},s=function(t,n){var s=e.clone(o),c=!!t.attr("required");e.extend(s,n);var d=i.getContainer(t);s.allowEmpty&&!c?d.find("option[value="+r+"]").text("--- "+a("leave empty")+" ---"):d.find("option[value="+r+"]").remove(),d.select2({width:"resolve",placeholder:s.placeholderText,minimumResultsForSearch:-1});
var u=d.select2("container");l(t),d.on("change",function(){c&&""!==d.val()&&u.tooltipster("hide"),i.triggerResponseChangeEvent(t)}).on("select2-open",function(){u.tooltipster("hide")}).on("select2-close",function(){c&&""===d.val()&&u.tooltipster("show")})},l=function(e){var t=!!e.attr("required"),i=e.getContainer(),n=i.select2("container");t&&(n.tooltipster({theme:"tao-warning-tooltip",content:a("A choice must be selected"),delay:250,trigger:"custom"}),""===i.val()&&n.tooltipster("show"))},c=function(e){d(e,r)},d=function(e,t){i.getContainer(e).val(t).select2("val",t).change()},u=function(e,t){d(e,n.unserialize(t,e)[0])},h=function(e){var t=i.getContainer(e).val();
return t&&t!==r?[t]:[]},p=function(e){return n.serialize(h(e),e)};return{qtiClass:"inlineChoiceInteraction",template:t,render:s,getContainer:i.getContainer,setResponse:u,getResponse:p,resetResponse:c}}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget"],function(e){var t=e.clone();return t.destroy=function(){this.$original.off(".qti-widget"),this.$container.remove(),this.offEvents()},t}),define("taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Question","taoQtiItem/qtiCreator/widgets/choices/helpers/formElement","lodash"],function(e,t,i,n,a){var r=t.extend(i,function(){this.buildEditor()
},function(){this.destroyEditor()});return r.prototype.createToolbar=function(){var e=this.widget,t=e.$container.find("td:last");return n.initShufflePinToggle(e),n.initDelete(e),t},r.prototype.buildEditor=function(){var t=this.widget,i=t.$container.children("td:first");i.attr("contentEditable",!0),i.on("keyup.qti-widget",a.throttle(function(){t.element.val(e(this).text()),t.$original.width(e(this).width())},200)).on("focus.qti-widget",function(){t.changeState("choice")}).on("keypress.qti-widget",function(i){13===i.which&&(i.preventDefault(),e(this).blur(),t.changeState("question"))})},r.prototype.destroyEditor=function(){var e=this.widget.$container;e.find("td").removeAttr("contentEditable"),e.children("td:first").off("keyup.qti-widget")
},r}),define("taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/Choice","tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/helpers/identifier"],function(e,t,i,n,a){var r=e.extend(t);return r.prototype.initForm=function(){var e=this.widget;e.$form.html(i({serial:e.element.getSerial(),identifier:e.element.id()})),n.setChangeCallbacks(e.$form,e.element,{identifier:a.updateChoiceIdentifier})},r}),define("taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/choices/states/states","taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question","taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget",["taoQtiItem/qtiCreator/widgets/choices/Widget","taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){e.initCreator.call(this),this.registerStates(t)},i}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=e.create(t,function(){var e=this.widget,t=this.widget.$original;t.on("click.qti-widget.sleep",function(t){t.stopPropagation(),e.changeState("question")}),t.on("mouseenter.sleep",function(){t.addClass("hover"),t.parent().trigger("mouseleave.sleep")
}).on("mouseleave.sleep",function(){t.removeClass("hover"),t.parent().trigger("mouseenter.sleep")})},function(){this.widget.$original.removeClass("hover").off(".sleep")});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active",["jquery","lodash","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Active"],function(e,t,i,n){var a=i.extend(n,function(){var i=this;e(window).on("resize.active",t.throttle(function(){i.positionWidget()},200)),this.positionWidget()},function(){e(window).off(".active"),this.widget.$container.hide()});return a.prototype.positionWidget=function(){var e=this.widget,t=e.$itemContainer.offset(),i=e.$original.offset();
e.$container.show().css({position:"absolute",top:i.top-t.top-22,left:i.left-t.left-32})},a}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/states","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active"],function(e,t){return e.createBundle(t,arguments)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var o,s,l,c="",d=this,u=i.helperMissing,h=this.escapeExpression;return c+='<div class="panel">\n    <label>\n        <input name="shuffle" type="checkbox" ',o=i["if"].call(t,t&&t.shuffle,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Shuffle choices",l):u.call(t,"__","Shuffle choices",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be âshuffledâ of âfixedâ individually.",l):u.call(t,"__","If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\n        However each choice may be âshuffledâ of âfixedâ individually.",l)))+'\n    </span>\n</div>\n<div class="panel">\n    <label>\n        <input name="required" type="checkbox" ',o=i["if"].call(t,t&&t.required,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"required",l):u.call(t,"__","required",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n'+h((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.",l):u.call(t,"__","Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.",l)))+"\n    </span>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice"],function(e,t,i,n,a){var r=t.extend(i,function(){var t=this.widget.$container.find(".main-option"),i=this.widget.$original;e(document).on("choiceTextChange.qti-widget.question",function(){i.width(t.width())})},function(){e(document).off(".qti-widget.question")});return r.prototype.addNewChoiceButton=function(){var t=this.widget,i=t.$container.find(".add-option"),n=t.element;
i.data("initialized")||(i.on("click.qti-widget",function(i){i.stopPropagation();var a=n.createChoice();e(this).closest("tr").before(t.renderChoice(a)),t.buildChoice(a,{ready:function(e){e.changeState("question")}})}),i.data("initialized",!0))},r.prototype.initForm=function(){var e=this.widget,t=e.$form,i=e.element;t.html(a({shuffle:!!i.attr("shuffle"),required:!!i.attr("required")})),n.initWidget(t),n.setChangeCallbacks(t,i,{shuffle:n.getAttributeChangeCallback(),required:n.getAttributeChangeCallback()})},r}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)
},function(){});return n}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget",["taoQtiItem/qtiCommonRenderer/renderers/Renderer","taoQtiItem/qtiCommonRenderer/helpers/Helper","lodash","i18n"],function(e,t,i,n){var a={create:function(t,i){var a=this,r=t.element,o=$("<select>"),s=t.$container.find(".widget-response").append(o);this.commonRenderer=new e({shuffleChoices:!1}),this.commonRenderer.load(function(){r.render({},o,"",this),r.postRender({allowEmpty:!1,placeholderText:n("select correct choice")},"",this),i.call(a,this),s.siblings(".padding").width(s.width()+50)},["inlineChoice","inlineChoiceInteraction"])},setResponse:function(e,t){this.commonRenderer.setResponse(e.element,this.formatResponse(t))
},destroy:function(e){e.$container.find(".widget-response").empty(),e.$container.find(".padding").removeAttr("style")},formatResponse:function(e){return i.isString(e)||(e=i.values(e),e&&e.length&&(e=e[0])),{base:{identifier:e}}},unformatResponse:function(e){var t=[];return e.base&&e.base.identifier&&t.push(e.base.identifier),t}};return a}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget","lodash"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget,t=this.widget.element.getResponseDeclaration();
e.$container.find("table").hide(),i.create(e,function(){i.setResponse(e,n.values(t.getCorrect())),e.$container.on("responseChange.qti-widget",function(e,n){t.setCorrect(i.unformatResponse(n.response))})})},function(){var e=this.widget.$container;e.find("table").show(),e.off("responseChange.qti-widget"),i.destroy(this.widget)});return a}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiItem/helper/interactionHelper","lodash"],function(e,t,i,n,a,r){var o=t.create(i,function(){var t=this.widget,i=t.$container,o=t.element,s=o.getResponseDeclaration();
i.find("[data-edit=map]").show();var l=r.values(s.getCorrect());if(l.length){var c=o.getChoiceByIdentifier(l.pop());c&&i.find('input[name=correct][value="'+c.serial+'"]').prop("checked",!0)}n.setChangeCallbacks(i,s,{correct:function(e,t){e.setCorrect(a.serialToIdentifier(o,t))},score:function(t,i){var n=parseFloat(i);isNaN(n)||t.setMapEntry(a.serialToIdentifier(o,e(this).data("for")),n)}})},function(){});return o}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t;return t=typeof e===d?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d="function",u=this.escapeExpression,h=i.helperMissing,p=this,f=i.blockHelperMissing;return c+='<div class="widget-box widget-inline widget-inlineChoiceInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===d?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" data-edit="active">\n    <div class="qti-interaction qti-inlineChoiceInteraction">\n        <table>\n            <colgroup>\n                <col class="text">\n                <col class="icon">\n                <col class="icon">\n            </colgroup>\n            <tbody>\n                <tr>\n                    <td class="main-option"><div>-- '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"edit choices",l):h.call(t,"__","edit choices",l)))+' --<span class="icon-down"></span></div></td>\n                    <td class="icon-title" data-edit="map">correct</td>\n                    <td class="icon-title" data-edit="map">score</td>\n                </tr>\n                ',l={hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a},(s=i.choices)?o=s.call(t,l):(s=t&&t.choices,o=typeof s===d?s.call(t,l):s),i.choices||(o=f.call(t,o,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a})),(o||0===o)&&(c+=o),c+='\n                <tr data-edit="question">\n                    <td>\n                        <div class="add-option">\n                            <span class="icon-add"></span>\n                            '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Add choice",l):h.call(t,"__","Add choice",l)))+'\n                        </div>\n                    </td>\n                    <td colspan="2"></td>\n                </tr>\n            </tbody>\n        </table>\n        <div>\n            <div class="widget-response" data-edit="correct"></div>\n            <div class="padding"></div>\n        </div>\n    </div>\n</div>'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"pin"}function o(){return"shuffle"}function s(){var e="";return e}function l(){return"display:none;"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d,u="",h="function",p=this.escapeExpression,f=this;return u+='<tr class="widget-box widget-inlineChoice qti-choice" data-edit="active" data-serial="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'">\n    <td class="option"><div contenteditable="true">',(d=i.body)?c=d.call(t,{hash:{},data:a}):(d=t&&t.body,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'</div></td>\n    <td class="mini-tlb">\n        <span data-edit="question" class="tlb-button">\n            <span  class="icon-',c=i["if"].call(t,(c=t&&t.attributes,null==c||c===!1?c:c.fixed),{hash:{},inverse:f.program(3,o,a),fn:f.program(1,r,a),data:a}),(c||0===c)&&(u+=c),u+='" data-role="shuffle-pin" style="',c=i["if"].call(t,t&&t.interactionShuffle,{hash:{},inverse:f.program(7,l,a),fn:f.program(5,s,a),data:a}),(c||0===c)&&(u+=c),u+='"></span>\n        </span>\n        <label data-edit="map">\n            <input name="correct" type="radio" value="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'">\n            <span class="icon-radio"></span>\n        </label>\n    </td>\n    <td class="mini-tlb">\n        <span data-edit="question" class="icon-bin" data-role="delete"></span>\n        <input class="score" name="score" data-edit="map" value="',(d=i.score)?c=d.call(t,{hash:{},data:a}):(d=t&&t.score,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'" data-for="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+'" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)"/>\n    </td>\n</tr>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget","taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice"],function(e,t,i,n,a,r,o){var s=i.clone();return s.initCreator=function(t){var n=this;this.registerStates(a),i.initCreator.call(this),this.$choiceOptionForm=t.choiceOptionForm,e.each(this.element.getChoices(),function(e){n.buildChoice(e)
}),this.$container.find(".tlb-title").remove()},s.renderChoice=function(e,t){var i={tag:e.qtiClass,serial:e.serial,attributes:e.attributes,body:e.text,interactionShuffle:t};return o(i)},s.renderInteraction=function(){var i=this,n=this.element,a=n.attr("shuffle"),o={tag:n.qtiClass,serial:n.serial,attributes:n.attributes,choices:[]};return e.each(n.getChoices(),function(e){t.isA(e,"choice")&&o.choices.push(i.renderChoice(e,a))}),r(o)},s.buildChoice=function(e,t){n.build(e,this.$container.find('.widget-inlineChoice[data-serial="'+e.serial+'"]'),this.$choiceOptionForm,t)},s.buildContainer=function(){var e,t;this.$original.length&&(e=this.$original[0].previousSibling,t=this.$original[0].nextSibling,(!e||3===e.nodeType&&""===e.nodeValue||3!==e.nodeType)&&this.$original.before("&nbsp;"),(!t||3===t.nodeType&&""===t.nodeValue||3!==t.nodeType)&&this.$original.after("&nbsp;")),this.$itemContainer=this.$original.parents(".item-editor-item"),this.$itemContainer.append(this.renderInteraction()),this.$container=this.$itemContainer.find(".widget-inlineChoiceInteraction[data-serial="+this.element.getSerial()+"]")
},s}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<span class="widget-box inlineChoiceInteraction-placeholder" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-qti-class="inlineChoiceInteraction">\n    <label>-- '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"edit choices",s):u.call(t,"__","edit choices",s)))+' --</label>\n    <span class="icon-down"></span>\n</span>'
})}),define("taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction","taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder"],function(e,t,i,n){var a=e.clone(t);return a.template=n,a.render=function(e,t){return t=t||{},t.choiceOptionForm=this.getOption("choiceOptionForm"),i.build(e,$('.inlineChoiceInteraction-placeholder[data-serial="'+e.serial+'"]'),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),t)},a}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;
return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===p?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function o(e){var t;return t=typeof e===p?e.apply(e):e,t||0===t?t:""}function s(e,t,n){var a,r="";return r+="\n      <tr>\n        ",a=typeof e===p?e.apply(e):e,(a||0===a)&&(r+=a),r+="\n        ",a=i.each.call(e,n&&n.matchSet1,{hash:{},inverse:f.noop,fn:f.program(6,l,t),data:t}),(a||0===a)&&(r+=a),r+="\n      </tr>\n      "}function l(){return'\n        <td>\n          <label>\n            <input type="checkbox" >\n            <span class="icon-checkbox cross"></span>\n          </label>\n        </td>\n        '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var c,d,u,h="",p="function",f=this,m=this.escapeExpression,g=i.blockHelperMissing;return h+='<div class="qti-interaction qti-blockInteraction qti-matchInteraction" data-serial="',(d=i.serial)?c=d.call(t,{hash:{},data:a}):(d=t&&t.serial,c=typeof d===p?d.call(t,{hash:{},data:a}):d),h+=m(c)+'" data-qti-class="matchInteraction">\n  ',c=i["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(c||0===c)&&(h+=c),h+='\n  <div class="instruction-container"></div>\n  <div class="match-interaction-area">\n    <table class="matrix">\n      <thead>\n      <tr>\n        <th> </th>\n        ',u={hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a},(d=i.matchSet1)?c=d.call(t,u):(d=t&&t.matchSet1,c=typeof d===p?d.call(t,u):d),i.matchSet1||(c=g.call(t,c,{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a})),(c||0===c)&&(h+=c),h+="\n      </tr>\n      </thead>\n      <tbody>\n      ",u={hash:{},inverse:f.noop,fn:f.programWithDepth(5,s,a,t),data:a},(d=i.matchSet2)?c=d.call(t,u):(d=t&&t.matchSet2,c=typeof d===p?d.call(t,u):d),i.matchSet2||(c=g.call(t,c,{hash:{},inverse:f.noop,fn:f.programWithDepth(5,s,a,t),data:a})),(c||0===c)&&(h+=c),h+='\n      </tbody>\n    </table>\n  </div>\n  <div class="notification-container"></div>\n</div>'
})}),function(e,t){function i(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,a){var r,o=a.re.exec(t),s=o&&a.parse(o),l=a.space||"rgba";return s?(r=i[l](s),i[d[l].cache]=r[d[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function a(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var r,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]
}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,a){return new e.Color.fn.parse(t,i,n,a)
},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(a,o,s,l){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(o),o=t);var u=this,h=e.type(a),p=this._rgba=[];
return o!==t&&(a=[a,o,s,l],h="array"),"string"===h?this.parse(n(a)||r._default):"array"===h?(f(d.rgba.props,function(e,t){p[t.idx]=i(a[t.idx],t)}),this):"object"===h?(a instanceof c?f(d,function(e,t){a[t.cache]&&(u[t.cache]=a[t.cache].slice())}):f(d,function(t,n){var r=n.cache;f(n.props,function(e,t){if(!u[r]&&n.to){if("alpha"===e||null==a[e])return;u[r]=n.to(u._rgba)}u[r][t.idx]=i(a[e],t,!0)}),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,n.from&&(u._rgba=n.from(u[r])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(d,function(e,a){var r,o=t[a.cache];return o&&(r=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,t){return null!=o[t.idx]?i=o[t.idx]===r[t.idx]:void 0
})),i}),i},_space:function(){var e=[],t=this;return f(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),a=n._space(),r=d[a],o=0===this.alpha()?c("transparent"):this,s=o[r.cache]||r.to(o._rgba),l=s.slice();return n=n[r.cache],f(r.props,function(e,a){var r=a.idx,o=s[r],c=n[r],d=u[a.type]||{};null!==c&&(null===o?l[r]=c:(d.mod&&(c-o>d.mod/2?o+=d.mod:o-c>d.mod/2&&(o-=d.mod)),l[r]=i((c-o)*t+o,a)))}),this[a](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),a=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*a[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e
});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,a=e[1]/255,r=e[2]/255,o=e[3],s=Math.max(n,a,r),l=Math.min(n,a,r),c=s-l,d=s+l,u=.5*d;
return t=l===s?0:n===s?60*(a-r)/c+360:a===s?60*(r-n)/c+120:60*(n-a)/c+240,i=0===c?0:.5>=u?c/d:c/(2-d),[Math.round(t)%360,i,u,null==o?1:o]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=.5>=n?n*(1+i):n+i-n*i,s=2*n-o;return[Math.round(255*a(s,o,t+1/3)),Math.round(255*a(s,o,t)),Math.round(255*a(s,o,t-1/3)),r]},f(d,function(n,a){var r=a.props,o=a.cache,l=a.to,d=a.from;c.fn[n]=function(n){if(l&&!this[o]&&(this[o]=l(this._rgba)),n===t)return this[o].slice();var a,s=e.type(n),u="array"===s||"object"===s?n:arguments,h=this[o].slice();return f(r,function(e,t){var n=u["object"===s?e:t.idx];
null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),d?(a=c(d(h)),a[o]=h,a):c(h)},f(r,function(t,i){c.fn[t]||(c.fn[t]=function(a){var r,o=e.type(a),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===o?d:("function"===o&&(a=a.call(this,d),o=e.type(a)),null==a&&i.empty?this:("string"===o&&(r=s.exec(a),r&&(a=d+parseFloat(r[2])*("+"===r[1]?1:-1))),c[i.idx]=a,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,a){var r,o,s="";if("transparent"!==a&&("string"!==e.type(a)||(r=n(a)))){if(a=c(r||a),!h.rgba&&1!==a._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode
}catch(l){}a=a.blend(s&&"transparent"!==s?s:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}
}(jQuery),define("lib/jquery.color",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","lib/jquery.color"],function(e,t,i,n,a,r){var o=!1,s=function(e){var t=n.getContainer(e);C(e),t.on("click.commonRenderer","input[type=checkbox]",function(t){f(e,t)}),n.validateInstructions(e)},l=function(i,a){a=u(a),"undefined"!=typeof a.list&&"undefined"!=typeof a.list.directedPair&&e(a.list.directedPair).forEach(function(e){var i=t("th[data-identifier="+e[0]+"]").index()-1,n=t("th[data-identifier="+e[1]+"]").parent().index();
t(".matrix > tbody tr").eq(n).find("input[type=checkbox]").eq(i).attr("checked",!0)}),n.validateInstructions(i)},c=function(e){var t=a.serialize(h(e),e);return t},d=function(e){n.getContainer(e).find("input[type=checkbox]:checked").each(function(){t(this).prop("checked",!1)}),n.validateInstructions(e)},u=function(e){if("undefined"==typeof e.list){if("undefined"==typeof e.base)throw"The given response is not compliant with PCI JSON representation.";if(null==e.base)return{list:{directedPair:[]}};if("undefined"==typeof e.base.directedPair)throw"The matchInteraction only accepts directedPair values as responses.";return{list:{directedPair:[e.base.directedPair]}}}if("undefined"==typeof e.list.directedPair)throw"The matchInteraction only accept directedPair values as responses.";
return e},h=function(e){var t=n.getContainer(e),i=[];return t.find("input[type=checkbox]:checked").each(function(){i.push(p(this))}),i},p=function(e){var i=t(e),n=i.closest("tr").index(),a=i.closest("td").index(),r=t(".matrix > thead th").eq(a).data("identifier"),o=t(".matrix > tbody th").eq(n).data("identifier");return[r,o]},f=function(t,i){var a=h(t),r=(t.attr("minAssociations"),t.attr("maxAssociations"));0===r&&(r=v(t)),e.size(a)>r?(i.preventDefault(),n.validateInstructions(t)):(choice=m(t,i.target))!==!1?(i.preventDefault(),n.validateInstructions(t,choice)):(n.triggerResponseChangeEvent(t,{}),n.validateInstructions(t))},m=function(t,i){var n=p(i),a=!1;return e(n).forEach(function(e){var i=b(t,e),n=(i.attributes.matchMin,i.attributes.matchMax),r=g(t,i);
n>0&&r>n&&(a=i)}),a},g=function(t,i){var n=h(t),a=0;return e(n).forEach(function(e){(e[0]==i.attributes.identifier||e[1]==i.attributes.identifier)&&a++}),a},v=function(e){var t=n.getContainer(e);return t.find("input[type=checkbox]").length},b=function(e,t){var i=y(e);return i[t]},y=function(t){var i={};return e(t.choices).forEach(function(t){e(t).forEach(function(e){i[e.attributes.identifier]=e})}),i},C=function(t){var i=t.attr("minAssociations"),a=t.attr("maxAssociations"),s=v(t),l=function(){var l=function(e,t){o===!1&&(o=!0,e.update({level:"warning",message:r("Maximum number of choices reached."),timeout:2e3,stop:function(){e.update({level:"success",message:t}),o=!1
}}))},c=function(e,t,i,a,s){var l=n.getContainer(e);if(o===!1){o=!0;var c=l.find('.qti-simpleAssociableChoice[data-identifier="'+t.attributes.identifier+'"]'),d=c.css("background-color"),u=c.css("color");i.update({level:"warning",message:r("The highlighted choice cannot be associated more than %d time(s).").replace("%d",t.attributes.matchMax),timeout:3e3,start:function(){c.animate({backgroundColor:"#fff",color:"#ba122b"},250,function(){c.animate({backgroundColor:"#ba122b",color:"#fff"},250)})},stop:function(){c.animate({backgroundColor:d,color:u},500),i.update({level:s,message:a}),o=!1}})}};if(0==i&&a>0){var d=r("You must select 0 to %d choices.").replace("%d",a);
n.appendInstruction(t,d,function(i){var n=e.size(h(t)),r="undefined"!=typeof i;1==r&&i.attributes.matchMax>0&&g(t,i)>i.attributes.matchMax?c(t,i,this,d,this.getLevel()):a>=n?this.setLevel("success"):n>a?l(this,d):this.reset()})}else if(0==i&&0==a){var d=r("You must select 0 to %d choices.").replace("%d",s);n.appendInstruction(t,d,function(e){var i="undefined"!=typeof e;1==i&&e.attributes.matchMax>0&&g(t,e)>e.attributes.matchMax?c(t,e,this,d,this.getLevel()):this.setLevel("success")})}else if(i>0&&0==a){var d=r("You must select %1$d to %2$d choices.");d=d.replace("%1$d",i),d=d.replace("%2$d",s),n.appendInstruction(t,d,function(n){var a=e.size(h(t)),r="undefined"!=typeof n;
1==r&&n.attributes.matchMax>0&&g(t,n)>n.attributes.matchMax?c(t,n,this,d,this.getLevel()):i>a?this.setLevel("info"):a>s?l(this,d):this.setLevel("success")})}else if(i>0&&a>0){if(i!=a){var d=r("You must select %1$d to %2$d choices.");d=d.replace("%1$d",i),d=d.replace("%2$d",a)}else{var d=r("You must select exactly %d choice(s).");d=d.replace("%d",i)}n.appendInstruction(t,d,function(n){var r=e.size(h(t)),o="undefined"!=typeof n;1==o&&n.attributes.matchMax>0&&g(t,n)>n.attributes.matchMax?c(t,n,this,d,this.getLevel()):i>r?this.setLevel("info"):r>a?l(this,d):r>=i&&a>=r&&this.setLevel("success")})}};l()},I=function(e){n.getContainer(e).off(".commonRenderer"),d(e),n.removeInstructions(e)
};return{qtiClass:"matchInteraction",template:i,render:s,getContainer:n.getContainer,setResponse:l,getResponse:c,resetResponse:d,destroy:I,inferValue:p}}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder",["handlebars"],function(e){return e.template(function(e,t,i,n,a){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{},'<div class="clearfix add-options" data-edit="question">\n    <div class="rgt">\n        <span class="add-option" data-role="add-row"><span class="icon-add"></span>Add new row</span>\n        <span class="add-option" data-role="add-col"><span class="icon-add"></span>Add new column</span>\n    </div>\n</div>'
})}),define("tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'\n    <td>\n        <label>\n            <input type="checkbox" >\n            <span class="icon-checkbox cross"></span>\n        </label>\n    </td>\n    '}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d="function",u=this,h=i.helperMissing;return c+="<tr>\n    ",(s=i.choice)?o=s.call(t,{hash:{},data:a}):(s=t&&t.choice,o=typeof s===d?s.call(t,{hash:{},data:a}):s),(o||0===o)&&(c+=o),c+="\n    ",s=i["for"]||t&&t["for"],l={hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a},o=s?s.call(t,0,t&&t.otherMatchSetCount,1,l):h.call(t,"for",0,t&&t.otherMatchSetCount,1,l),(o||0===o)&&(c+=o),c+="\n</tr>"
})}),define("tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell",["handlebars"],function(e){return e.template(function(e,t,i,n,a){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{},'<td>\n    <label>\n        <input type="checkbox" >\n        <span class="icon-checkbox cross"></span>\n    </label>\n</td>'})}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question",["jquery","lodash","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question","tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder","tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row","tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell","taoQtiItem/qtiCreator/helper/adaptSize"],function(e,t,i,n,a,r,o,s,l){var c=i.extend(n);
return c.prototype.initForm=a.prototype.initForm,c.prototype.addNewChoiceButton=function(){var i=this.widget,n=i.element,a=i.$container.find(".match-interaction-area"),c="simpleAssociableChoice.matchInteraction",d=function(e){e.postRender({ready:function(e){e.changeState("question")}},c)};a.find(".add-option").length||(a.append(r()),a.find(".add-options").show(),a.find(".add-option[data-role=add-col]").on("click",function(){var e=n.createChoice(0);a.find("thead > tr").append(e.render(c)),a.find("tbody > tr").append(s({})),d(e)}),a.find(".add-option[data-role=add-row]").on("click",function(){var e=n.createChoice(1);a.find("tbody").append(o({choice:e.render(c),otherMatchSetCount:t.size(n.choices[0])})),d(e)
})),e(".qti-item").on("toolbarchange",function(){a.find("tbody .mini-tlb").each(function(){var t=e(this);"false"!==t.parent().attr("contenteditable")&&t.css({left:-1*(t.width()+10),top:-1})})}),a.find("tr ").each(function(){var t=e(this).find('[data-html-editable="true"]');i.on("containerBodyChange",function(){l.height(t)})})},c}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)},function(){});
return n}),define("tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<input value="',(o=i.score)?r=o.call(t,{hash:{},data:a}):(o=t&&t.score,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" \n       title="Score of this answer" \n       type="text" \n       data-for="',(o=i.choiceIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.choiceIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" \n       name="score" \n       class="score" \n       placeholder = "',(o=i.placeholder)?r=o.call(t,{hash:{},data:a}):(o=t&&t.placeholder,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'"\n       data-validate="$numeric" \n       data-validate-option="$allowEmpty; $event(type=keyup)" />'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget",["taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score","lodash","i18n","polyfill/placeholders"],function(e,t,i,n,a,r){var o={create:function(i,n){var a=i.element;e.destroy(a),n?(t.appendInstruction(i.element,r("Please define the correct response and the score below.")),a.data("responseMappingMode",!0),o.createScoreWidgets(i),o.createCorrectWidgets(i)):(t.appendInstruction(i.element,r("Please define the correct response below.")),o.createCorrectWidgets(i)),e.render(a),i.$container.find("table.matrix input[type=checkbox]").removeProp("disabled").attr("data-edit","correct").attr("data-role","correct")
},setResponse:function(t,i){e.setResponse(t,o.formatResponse(i))},destroy:function(t){var i=t.element;e.destroy(i),i.removeData("responseMappingMode"),t.$container.find("table.matrix input[type=checkbox]").prop("disabled","disabled"),t.$container.find("table.matrix .score").remove(),t.$container.off("responseChange.qti-widget")},createScoreWidgets:function(t){var a=t.$container,r=t.element,o=r.getResponseDeclaration(),s=o.getMapEntries(),l=o.getMappingAttribute("defaultValue");a.find("table.matrix td>label").each(function(){var t=e.inferValue(this).join(" ");$(this).append(n({serial:r.getSerial(),choiceIdentifier:t,score:s[t]?s[t]:"",placeholder:l}))});var c=a.find("table.matrix .score");
c.on("click",function(e){e.stopPropagation(),e.preventDefault()}),t.on("mappingAttributeChange",function(e){"defaultValue"===e.key&&c.attr("placeholder",e.value)}),i.setChangeCallbacks(a,o,{score:function(e,t){var i=$(this).data("for");""===t?e.removeMapEntry(i):e.setMapEntry(i,t,!0)}})},createCorrectWidgets:function(e){var t=e.element,i=t.getResponseDeclaration();e.$container.on("responseChange.qti-widget",function(e,t){i.setCorrect(o.unformatResponse(t.response))})},formatResponse:function(e){var t={list:{directedPair:[]}};if(1===a.size(e)){var i=a.values(e).pop().split(" ");t={base:{directedPair:i}}}else t={list:{directedPair:[]}},a.each(e,function(e){var i=e.split(" ");
t.list.directedPair.push(i)});return t},unformatResponse:function(e){var t=[];return e.list&&e.list.directedPair?a.each(e.list.directedPair,function(e){t.push(e.join(" "))}):e.base&&e.base.directedPair&&t.push(e.base.directedPair.join(" ")),t}};return o}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget","lodash"],function(e,t,i,n){var a=e.create(t,function(){var e=this.widget,t=e.element,a=t.getResponseDeclaration();i.create(e),i.setResponse(t,n.values(a.getCorrect()))
},function(){i.destroy(this.widget)});return a}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget","lodash"],function(e,t,i,n,a){var r=t.create(i,function(){var t=this.widget,i=t.element,r=i.getResponseDeclaration();n.create(t,!0),n.setResponse(i,a.values(r.getCorrect())),t.on("metaChange",function(i){"defineCorrect"===i.key&&(i.value?e('.match-interaction-area input[type="checkbox"]',t.$container).removeProp("disabled").removeClass("disabled"):e('.match-interaction-area input[type="checkbox"]',t.$container).prop("disabled",!0).prop("checked",!1).addClass("disabled"),i.value===!1&&r.setCorrect([]))
})},function(){n.destroy(this.widget)});return r}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction","taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-mediaInteraction '+d((o=t&&t.attributes,o=null==o||o===!1?o:o["class"],typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n    <div class="instruction-container"></div>\n    <div class="media-container"></div>\n</div>\n'})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper","mediaElement"],function(e,t,i,n,a,r,o){var s=function(e){var t="";
return""!==e&&(-1!==e.indexOf("youtube")?t="video/youtube":0===e.indexOf("video")||e.indexOf("application/ogg")?t="video":0===e.indexOf("audio")&&(t="audio")),t},l={type:"video/mp4",video:{width:480,height:270},audio:{width:400,height:30}},c=function(i){var n,a,c=r.getContainer(i),u=i.object,h=this.getOption("baseUrl")||"",p=s(u.attr("type")||l.type),f=c.hasClass("pause"),m=parseInt(i.attr("maxPlays"),10)||0,g=!1,v=!1,b=f?["playpause","progress","current","duration","volume"]:["playpause","current","duration","volume"],y=function(){!i.mediaElement&&n&&n.length&&new o(n,a)},C=function(){var e=parseInt(c.data("timesPlayed"),10);return 0===m||m>e};0===t.size(u.attributes)&&(u.attr("type",l.type),u.attr("width",c.innerWidth()),u.attr("height",l.video.height),u.attr("data","")),a={defaultVideoWidth:l.video.width,defaultVideoHeight:l.video.height,videoWidth:u.attr("width"),videoHeight:u.attr("height"),audioWidth:u.attr("width")||l.audio.width,audioHeight:u.attr("height")||l.audio.height,features:b,startVolume:1,loop:!!i.attr("loop"),enableAutosize:!0,alwaysShowControls:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,alwaysShowHours:!1,enableKeyboard:!1,pauseOtherPlayers:!1,success:function(n,o){var s=!0,l=e(o).closest(".mejs-container"),d=e(".mejs-layers",l),h=e(".mejs-playpause-button",l),m=e(".mejs-overlay-play",l),b=e(".mejs-controls",l),y=b.outerHeight();
i.mediaElement=n,"video/youtube"===p&&t.defer(function(){e("iframe.me-plugin",c).css("min-height",u.attr("height"))}),c.data("timesPlayed")||c.data("timesPlayed",0),i.attr("autostart")&&C()&&("video/youtube"!==p&&(n.load(),n.play()),n.addEventListener("canplay",function(){s&&n.play()},!1)),n.addEventListener("play",function(){s=!1,g===!0?g=!1:f||(m.detach(),h.detach(),("video/youtube"===p||"flash"===n.pluginType)&&e('<div class="overlay"></div>').width(a.videoWidth).height(a.videoHeight-y).appendTo(d))},!1),n.addEventListener("ended",function(){c.data("timesPlayed",c.data("timesPlayed")+1),r.triggerResponseChangeEvent(i),C()&&!f?(b.prepend(h),d.append(m),e(".overlay",d).remove()):C()||(m.detach(),h.detach(),("video/youtube"===p||"flash"===n.pluginType)&&e('<div class="overlay"></div>').width(a.videoWidth).height(a.videoHeight-y).appendTo(d),i.attr("loop")&&(i.mediaElement.pluginApi?e(o).remove():i.mediaElement.setSrc("")))
},!1),h.on("click.qti-element",function(e){v=!0,f||(e.preventDefault(),e.stopPropagation())}),n.addEventListener("pause",function(){v&&(g=!0,v=!1)}),c.trigger("playerready")},error:function(t){e(t).closest("div.mejs-container").find(".me-cannotplay").remove()}},n=e(d(u,p,h)).appendTo(e(".media-container",c)),n.on("contextmenu",function(e){e.preventDefault()}).on("click.qit-element",function(e){return v=!0,f?void 0:(e.preventDefault(),e.stopPropagation(),!1)}),c.on("responseSet",function(){y()}),t.defer(function(){y()})},d=function(e,i,n){var a,r,o,s=function(e){return t.reduce(e,function(e,t,i){return e+=i+'="'+t+'" '},"")};return e&&(r=e.attr("data")?e.attr("data").replace(/^\//,""):"",o={width:e.attr("width")+"px",height:e.attr("height")+"px",preload:"none"},/^http(s)?:\/\//.test(r)||(r=n+r,o.type=e.attr("type")),"video/youtube"===i?a="<video "+s(o)+'>  <source type="video/youtube" src="'+r+'" /> </video>':(o.src=r,i||(i="video"),a="<"+i+" "+s(o)+"></"+i+">")),a
},u=function(t){var i=r.getContainer(t);t.mediaElement&&(t.mediaElement.pluginApi||t.mediaElement.setSrc(""),t.mediaElement=void 0),e(".instruction-container",i).empty(),e(".media-container",i).empty(),i.removeData("timesPlayed")},h=function(e){return[r.getContainer(e).data("timesPlayed")]},p=function(e,t){if(t)try{var i;i=a.unserialize(t,e),r.getContainer(e).data("timesPlayed",i[0])}catch(n){}},f=function(e){r.getContainer(e).data("timesPlayed",0)},m=function(e){return a.serialize(h(e),e)};return{qtiClass:"mediaInteraction",template:n,render:c,getContainer:r.getContainer,setResponse:p,getResponse:m,resetResponse:f,destroy:u}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d=i.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<!--\n<div class="panel">\n      TO BE COMPLETED : add "object" editor (see : http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10173)\n</div>\n-->\n\n<div class="panel">\n    \n    <div>\n        <label>\n            <div>'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Media file path or YouTube video address",l):d.call(t,"__","Media file path or YouTube video address",l)))+'</div>\n            <input type="text" name="data" placeholder="Please select media file" value="',(s=i.data)?o=s.call(t,{hash:{},data:a}):(s=t&&t.data,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" data-validate="$notEmpty;"/>\n            <div><button class=\'selectMediaFile btn-info small block\'>'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Select media file",l):d.call(t,"__","Select media file",l)))+'</button></div>\n        </label>\n    </div>\n    \n    <div>\n        <label for="width" class="spinner">Width</label>\n        <input name="width" value="',(s=i.width)?o=s.call(t,{hash:{},data:a}):(s=t&&t.width,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text"   data-increment="1" data-min="0" data-max="1920" style=\'min-width: 55px!important;\' />\n    </div>\n    \n    <div>\n        <label for="height" class="spinner">Height</label>\n        <input name="height" value="',(s=i.height)?o=s.call(t,{hash:{},data:a}):(s=t&&t.height,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" type="text"  data-increment="1" data-min="0" data-max="1080" style=\'min-width: 55px!important;\' />\n    </div>\n    \n</div>\n\n<div class="panel">\n    <label>\n        <input name="autostart" type="checkbox" ',o=i["if"].call(t,t&&t.autostart,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Autostart",l):d.call(t,"__","Autostart",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).",l):d.call(t,"__","The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).",l)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label>\n        <input name="loop" type="checkbox" ',o=i["if"].call(t,t&&t.loop,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Loop",l):d.call(t,"__","Loop",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n       '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).",l):d.call(t,"__","The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).",l)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <label>\n        <input name="pause" type="checkbox" ',o=i["if"].call(t,t&&t.pause,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(o||0===o)&&(c+=o),c+='/>\n        <span class="icon-checkbox"></span>\n        '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Pause",l):d.call(t,"__","Pause",l)))+'\n    </label>\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">\n       '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"Enable the test taker to pause and restart the playing.",l):d.call(t,"__","Enable the test taker to pause and restart the playing.",l)))+'\n    </span>\n</div>\n\n<div class="panel">\n    <div>\n        <label for="maxPlays" class="spinner">Max plays count</label>\n        <input name="maxPlays" value="',(s=i.maxPlays)?o=s.call(t,{hash:{},data:a}):(s=t&&t.maxPlays,o=typeof s===h?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" data-increment="1" data-min="0" data-max="1000" type="text" style=\'min-width: 55px!important;\' />\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+u((s=i.__||t&&t.__,l={hash:{},data:a},s?s.call(t,"The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.",l):d.call(t,"__","The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.",l)))+"\n        </span>\n    </div>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media","ui/resourcemgr"],function(e,t,i,n,a,r,o){var s=function(){this.widget.renderInteraction()},l=function(){this.widget.destroyInteraction()},c=n.extend(a,s,l);return c.prototype.initForm=function(){var n=this.widget,a=n.$form,s=n.$original,l=n.options,c=n.element,d={},u=t.throttle(function(e){h(e),n.destroyInteraction(),n.renderInteraction()
},1e3),h=function(e){e.attr("responseIdentifier",e.attr("responseIdentifier"))};a.html(o({autostart:!!c.attr("autostart"),loop:!!c.attr("loop"),maxPlays:parseInt(c.attr("maxPlays"),10),pause:c.hasClass("pause"),data:c.object.attr("data"),type:c.object.attr("type"),width:c.object.attr("width"),height:c.object.attr("height")})),r.initWidget(a),d.autostart=function(e,t,i){e.attr(i,t),u(e)},d.loop=function(e,t,i){e.attr(i,t),u(e)},d.maxPlays=function(e,t,i){e.attr(i,t),u(e)},d.pause=function(e,t){t?s.hasClass("pause")||(s.addClass("pause"),e.addClass("pause")):(s.removeClass("pause"),e.removeClass("pause"))},d.width=function(e,t,i){e.object.attr(i,t),u(e)},d.height=function(e,t,i){e.object.attr(i,t),u(e)
},d.data=function(t,i,a){if(t.object.attr(a)!==i){t.object.attr(a,i),h(t);var r=e.trim(i).toLowerCase();/^http(s)?:\/\/(www\.)?youtu/.test(r)&&t.object.attr("type","video/youtube"),t.object&&(!t.object.attr("width")||parseInt(t.object.attr("width"),10)<=0)&&t.object.attr("width",n.$original.innerWidth()),u(t)}},r.setChangeCallbacks(a,c,d,{invalidate:!0});var p=a.find("input[name=data]"),f=a.find(".selectMediaFile"),m=function(){f.resourcemgr({title:i('Please select a media file (video or audio) from the resource manager. You can add files from your computer with the button "Add file(s)".'),appendContainer:l.mediaManager.appendContainer,root:"/",browseUrl:l.mediaManager.browseUrl,uploadUrl:l.mediaManager.uploadUrl,deleteUrl:l.mediaManager.deleteUrl,downloadUrl:l.mediaManager.downloadUrl,fileExistsUrl:l.mediaManager.fileExistsUrl,params:{uri:l.uri,lang:l.lang,filters:"video/mp4,video/avi,video/ogv,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-ms-wmv,video/x-flv,audio/mp3,audio/vnd.wav,audio/ogg,audio/vorbis,audio/webm,audio/mpeg,application/ogg"},pathParam:"path",select:function(e,t){t&&t.length&&(c.object.attr("type",t[0].mime),a.find("input[name=data]").val(t[0].file).trigger("change"))
},open:function(){p.hasClass("tooltipstered")&&p.blur().tooltipster("hide")},close:function(){p.blur()}})};f.on("click",m),p.val()||m()},c}),define("taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep",["lodash","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t,i){var n=function(){this.widget.renderInteraction(),this.widget.$original.append('<div class="overlay"></div>')},a=function(){this.widget.destroyInteraction(),this.widget.$original.children(".overlay").remove()};return t.extend(i,n,a)}),define("taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep"],function(e,t){return e.createBundle(t,arguments,["answer","correct","map"])
}),define("taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget",["jquery","lodash","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states","taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction"],function(e,t,i,n,a){var r=t.extend(i.clone(),{initCreator:function(){var e=this,a=this.$original,r=a.parents(".qti-item");this.registerStates(n),i.initCreator.call(this),r.off("."+this.element.serial).on("resize."+this.element.serial,t.throttle(function(){var t=a.innerWidth();t>0&&(e.element.object.attr("width",a.innerWidth()),e.destroyInteraction(),e.renderInteraction())
},100))},destroy:function(){var e=this.$original,t=e.parents(".qti-item");t.off("resize."+this.element.serial),i.destroy.call(this)},renderInteraction:function(){var e=(this.$original,this.element);a.render.call(e.getRenderer(),e,{features:"full",controlPlaying:!1})},destroyInteraction:function(){var e=this.element;a.destroy.call(e.getRenderer(),e)}});return r}),define("tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-mediaInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n	',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n	<div class="instruction-container"></div>\n    <div class="media-container"></div>\n</div>\n'})}),define("taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction","taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget","tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction"],function(e,t,i,n){var t=e.clone(t);
return t.template=n,t.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},t}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"qti-horizontal"}function o(){return"qti-vertical"}function s(){return"horizontal"}function l(){return"vertical"}function c(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===y?a.call(e,{hash:{},data:t}):a),n||0===n?n:""
}function d(e){var t;return t=typeof e===y?e.apply(e):e,t||0===t?t:""}function u(){return"icon-down"}function h(){return"icon-right"}function p(){return"icon-up"}function f(){return"icon-left"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var m,g,v,b="",y="function",C=this,I=this.escapeExpression,E=i.blockHelperMissing;return b+='<div class="qti-interaction qti-blockInteraction qti-orderInteraction ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(3,o,a),fn:C.program(1,r,a),data:a}),(m||0===m)&&(b+=m),b+='" \n     data-serial="',(g=i.serial)?m=g.call(t,{hash:{},data:a}):(g=t&&t.serial,m=typeof g===y?g.call(t,{hash:{},data:a}):g),b+=I(m)+'" \n     data-qti-class="orderInteraction" \n     data-orientation="',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(7,l,a),fn:C.program(5,s,a),data:a}),(m||0===m)&&(b+=m),b+='">\n    ',m=i["if"].call(t,t&&t.prompt,{hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a}),(m||0===m)&&(b+=m),b+='\n    <div class="instruction-container"></div>\n    <div class="order-interaction-area">\n        <ul class="choice-area square source solid block-listing ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.noop,fn:C.program(5,s,a),data:a}),(m||0===m)&&(b+=m),b+='">\n            ',v={hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a},(g=i.choices)?m=g.call(t,v):(g=t&&t.choices,m=typeof g===y?g.call(t,v):g),i.choices||(m=E.call(t,m,{hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a})),(m||0===m)&&(b+=m),b+='\n        </ul>\n        <div class="arrow-bar middle">\n            <span class="icon-add-to-selection ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(15,h,a),fn:C.program(13,u,a),data:a}),(m||0===m)&&(b+=m),b+='"></span>\n            <span class="icon-remove-from-selection ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(19,f,a),fn:C.program(17,p,a),data:a}),(m||0===m)&&(b+=m),b+=' inactive"></span>\n        </div>\n        <ul class="result-area decimal target solid block-listing ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.noop,fn:C.program(5,s,a),data:a}),(m||0===m)&&(b+=m),b+='">\n        </ul>\n        <div class="arrow-bar">\n            <span class="icon-move-before ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(17,p,a),fn:C.program(19,f,a),data:a}),(m||0===m)&&(b+=m),b+=' inactive"></span>\n            <span class="icon-move-after ',m=i["if"].call(t,t&&t.horizontal,{hash:{},inverse:C.program(13,u,a),fn:C.program(15,h,a),data:a}),(m||0===m)&&(b+=m),b+=' inactive"></span>\n        </div>\n    </div>\n    <div class="notification-container"></div>\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","jqueryui"],function(e,t,i,n,a,r){var o=function(e){var i=n.getContainer(e),a=i.find(".choice-area"),r=i.find(".result-area"),o=i.find(".icon-add-to-selection"),c=i.find(".icon-remove-from-selection"),d=i.find(".icon-move-before"),u=i.find(".icon-move-after"),h=null,p=function(){o.addClass("inactive"),c.removeClass("inactive").addClass("active"),d.removeClass("inactive").addClass("active"),u.removeClass("inactive").addClass("active")
},f=function(){o.removeClass("inactive"),c.removeClass("active").addClass("inactive"),d.removeClass("active").addClass("inactive"),u.removeClass("active").addClass("inactive")},m=function(e){h&&h.removeClass("active"),h=e,h.addClass("active"),p()},g=function(){h&&(h.removeClass("active"),h=null),f()};i.on("mousedown.commonRenderer",function(){g()}),a.on("mousedown.commonRenderer",">li:not(.deactivated)",function(i){i.stopPropagation(),g(),o.addClass("triggered"),setTimeout(function(){o.removeClass("triggered")},150),r.append(t(this)),n.triggerResponseChangeEvent(e),n.validateInstructions(e)}),r.on("mousedown.commonRenderer",">li",function(e){e.stopPropagation();
var i=t(this);i.hasClass("active")?g():m(t(this))}),c.on("mousedown.commonRenderer",function(t){t.stopPropagation(),h&&(a.append(h),n.triggerResponseChangeEvent(e),n.validateInstructions(e)),g()}),d.on("mousedown.commonRenderer",function(t){t.stopPropagation();var i=h.prev();i.length&&(i.before(h),n.triggerResponseChangeEvent(e))}),u.on("mousedown.commonRenderer",function(t){t.stopPropagation();var i=h.next();i.length&&(i.after(h),n.triggerResponseChangeEvent(e))}),l(e),t(document).on("attributeChange.qti-widget.commonRenderer",function(t,i){i.element.getSerial()===e.getSerial()&&("maxChoices"===i.key||"minChoices"===i.key)&&(n.removeInstructions(e),l(e),n.validateInstructions(e))
}),s(i)},s=function(e){var t=e.find(".order-interaction-area");t.height(t.height())},l=function(i){var a=n.getContainer(i).find(".choice-area"),o=n.getContainer(i).find(".result-area"),s=parseInt(i.attr("minChoices")),l=parseInt(i.attr("maxChoices"));if(s&&n.appendInstruction(i,r("You must use at least "+s+" choices"),function(){o.find(">li").length>=s?this.setLevel("success"):this.reset()}),l&&l<e.size(i.getChoices())){var c=n.appendInstruction(i,r("You can use maximum "+l+" choices"),function(){o.find(">li").length>=l?(a.find(">li").addClass("deactivated"),this.setMessage(r("Maximum choices reached"))):(a.find(">li").removeClass("deactivated"),this.reset())
});a.on("mousedown.commonRenderer",">li.deactivated",function(){var e=t(this);e.addClass("brd-error"),c.setLevel("warning",2e3),setTimeout(function(){e.removeClass("brd-error")},150)})}},c=function(i){var a=e.keys(i.getChoices()),r=n.getContainer(i).find(".choice-area").append(n.getContainer(i).find(".result-area>li")),o=r.children(".qti-choice");o.detach().sort(function(i,n){return e.indexOf(a,t(i).data("serial"))>e.indexOf(a,t(n).data("serial"))}),r.prepend(o)},d=function(t,i){var r=n.getContainer(t).find(".choice-area"),o=n.getContainer(t).find(".result-area");if(null===i||e.isEmpty(i))c(t);else try{e.each(a.unserialize(i,t),function(e){o.append(r.find("[data-identifier="+e+"]"))
})}catch(s){throw new Error("wrong response format in argument : "+s)}n.validateInstructions(t)},u=function(e){var i=[];return n.getContainer(e).find(".result-area>li").each(function(){i.push(t(this).data("identifier"))}),i},h=function(e){return a.serialize(u(e),e)},p=function(t,i){return e.merge(i||{},{horizontal:"horizontal"===t.attr("orientation")})},f=function(e){var i=n.getContainer(e);i.find(".qti-choice.active").mousedown();var a=[".choice-area",".result-area",".icon-add-to-selection",".icon-remove-from-selection",".icon-move-before",".icon-move-after"];i.find(a.join(",")).andSelf().off(".commonRenderer"),t(document).off(".commonRenderer"),i.find(".order-interaction-area").removeAttr("style"),c(e),n.removeInstructions(e)
};return{qtiClass:"orderInteraction",getData:p,template:i,render:o,getContainer:n.getContainer,setResponse:d,getResponse:h,destroy:f}}),define("taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question"],function(e,t,i){var n=e.extend(t);return n.prototype.initForm=function(){i.prototype.initForm.call(this,!1)},n}),define("taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer"],function(e,t){var i=e.extend(t,function(){this.widget.changeState("correct")
},function(){});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","lodash","i18n"],function(e,t,i,n,a,r){var o=e.create(t,function(){s(this.widget)},function(){l(this.widget)}),s=function(e){var t=e.element,o=t.getResponseDeclaration(),s=a.values(o.getCorrect());n.appendInstruction(e.element,r("Please define the correct order in the box to the right.")),i.render(e.element),i.setResponse(t,c(s)),e.$container.on("responseChange.qti-widget",function(e,t){o.setCorrect(d(t.response))
})},l=function(e){e.$container.off("responseChange.qti-widget"),i.destroy(e.element)},c=function(e){return{list:{identifier:e}}},d=function(e){var t=[];return e.list&&e.list.identifier&&(t=e.list.identifier),t};return o}),define("taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states"],function(e,t){var i=e.clone();return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction","taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)
},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-selectPointInteraction clearfix '+d((o=t&&t.attributes,o=null==o||o===!1?o:o["class"],typeof o===c?o.apply(t):o))+'" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(e,t,i,n,a,r,o){var s=function(e){var t=o.getContainer(e),i=e.object.attributes,n=this.getOption("baseUrl")||"";e.paper=a.responsivePaper("graphic-paper-"+e.serial,e.serial,{width:i.width,height:i.height,img:n+i.data,imgId:"bg-image-"+e.serial,container:t}),l(e),o.minMaxChoiceInstructions(e,{min:e.attr("minChoices"),max:e.attr("maxChoices"),choiceCount:!1,getResponse:c,onError:function(e){e&&a.highlightError(e.target,"success")
}})},l=function(e){function t(t){d&&t&&a.createTouchCircle(e.paper,t.getBBox()),o.triggerResponseChangeEvent(e),o.validateInstructions(e,{target:t})}var i=e.attr("maxChoices"),n=o.getContainer(e),r=n.find(".main-image-box"),s=n.hasClass("responsive"),l=e.paper.getById("bg-image-"+e.serial),d=!1;l.touchstart(function(){d=!0,l.untouchstart()}),l.click(function(n){if(i>0&&c(e).length>=i)return void o.validateInstructions(e);var l=a.getPoint(n,e.paper,r,s);a.createTarget(e.paper,{point:l,create:t,remove:function(){t()}})})},c=function(e){var t=[];return e.paper.forEach(function(e){var i=e.data("point");"object"==typeof i&&i.x&&i.y&&t.push([Math.round(i.x),Math.round(i.y)])
}),t},d=function(e,i){var n;if(i&&e.paper){try{n=r.unserialize(i,e)}catch(o){}t.isArray(n)&&t(n).flatten().map(function(e,t){return t%2===0?{x:e,y:n[t+1]}:void 0}).filter(t.isObject).forEach(function(t){a.createTarget(e.paper,{point:t})})}},u=function(e){e.paper.forEach(function(e){var t=e.data("point");"object"==typeof t&&a.trigger(e,"click")})},h=function(e){var t=(c(e),r.serialize(c(e),e));return t},p=function(t){var i;t.paper&&(i=o.getContainer(t),e(window).off("resize.qti-widget."+t.serial),i.off("resize.qti-widget."+t.serial),t.paper.clear(),o.removeInstructions(t),e(".main-image-box",i).empty().removeAttr("style"),e(".image-editor",i).removeAttr("style"))
};return{qtiClass:"selectPointInteraction",template:n,render:s,getContainer:o.getContainer,setResponse:d,getResponse:h,resetResponse:u,destroy:p}}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep"],function(e,t){var i=function(){var e=this.widget,t=e.element;e.on("metaChange",function(e){"responsive"===e.key&&(e.value===!0?t.addClass("responsive"):t.removeClass("responsive"))})},n=function(){};return e.extend(t,i,n)}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="panel">\n\n    \n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Interaction Background",s):c.call(t,"__","Interaction Background",s)))+'</h3>\n\n    <div class="panel">\n        <label for="data">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"File",s):c.call(t,"__","File",s)))+'</label>\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n        <div class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The file path to the image.",s):c.call(t,"__","The file path to the image.",s)))+'</div>\n        <input type="text" name="data" value="',(o=i.data)?r=o.call(t,{hash:{},data:a}):(o=t&&t.data,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-validate="$notEmpty; $fileExists(baseUrl=',(o=i.baseUrl)?r=o.call(t,{hash:{},data:a}):(o=t&&t.baseUrl,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+')"/>\n        <button class="btn-info small block" data-role="upload-trigger">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Select image",s):c.call(t,"__","Select image",s)))+'</button>\n    </div>\n\n    <div class="panel">\n        <label for="width">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Width",s):c.call(t,"__","Width",s)))+'</label>\n        <input name="width" value="',(o=i.width)?r=o.call(t,{hash:{},data:a}):(o=t&&t.width,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="height">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Height",s):c.call(t,"__","Height",s)))+'</label>\n        <input name="height" value="',(o=i.height)?r=o.call(t,{hash:{},data:a}):(o=t&&t.height,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="type">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Mime Type",s):c.call(t,"__","Mime Type",s)))+'</label>\n        <input name="type" value="',(o=i.type)?r=o.call(t,{hash:{},data:a}):(o=t&&t.type,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    </div>\n\n    <hr>\n\n    <h3>'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Allowed number of choices",s):c.call(t,"__","Allowed number of choices",s)))+'\n        <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n        <span class="tooltip-content">\n            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The minimum number of choices that the candidate is required to select to form a valid response.",s):c.call(t,"__","The minimum number of choices that the candidate is required to select to form a valid response.",s)))+"<br>\n            "+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The maximum number of choices that the candidate is allowed to select.",s):c.call(t,"__","The maximum number of choices that the candidate is allowed to select.",s)))+'\n        </span>\n    </h3>\n\n    <div class="panel">\n        <label for="minChoices" class="spinner">Min</label>\n        <input name="minChoices" value="',(o=i.minChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.minChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" type="text" />\n    </div>\n\n    <div class="panel">\n        <label for="maxChoices" class="spinner">Max</label>\n        <input name="maxChoices" value="',(o=i.maxChoices)?r=o.call(t,{hash:{},data:a}):(o=t&&t.maxChoices,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" type="text" />\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question",["jquery","lodash","util/image","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint"],function(e,t,i,n,a,r,o,s,l){var c=n.extend(a);return c.prototype.initForm=function(){var e=this.widget,i=e.options,n=e.element,a=e.$form;a.html(l({baseUrl:i.baseUrl,maxChoices:parseInt(n.attr("maxChoices")),minChoices:parseInt(n.attr("minChoices")),choicesCount:t.size(n.getChoices()),data:n.object.attr("data"),width:n.object.attr("width"),height:n.object.attr("height"),type:n.object.attr("type")})),r(a,i),o.initWidget(a);
var c=o.getMinMaxAttributeCallbacks(this.widget.$form,"minChoices","maxChoices");c.data=function(t,i){n.object.attr("data",i),e.rebuild({ready:function(e){e.changeState("question")}})},c.width=function(e,t){n.object.attr("width",t)},c.height=function(e,t){n.object.attr("height",t)},c.type=function(e,t){t&&""!==t?n.object.attr("type",t):n.object.removeAttr("type")},o.setChangeCallbacks(a,n,c,{validateOnInit:!1}),s.syncMaxChoices(e)},c}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t){function i(){this.widget.changeState("map")
}function n(){}return e.extend(t,i,n)}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor","taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup","tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm","taoQtiItem/qtiCreator/widgets/helpers/formElement","ui/incrementer","ui/tooltipster"],function(e,t,i,n,a,r,o,s,l,c,d,u,h,p){function f(){var e=this.widget,n=e.element,a=(e.$original,n.getResponseDeclaration());
e._targets=[],n.paper&&(r.destroy(n),o.appendInstruction(n,i("Please create areas that correspond to the response and associate them a score.\nYou can also position the target to the exact point as the correct response.")),n.responseMappingMode=!0,t.isPlainObject(a.mapEntries)&&(a.mapEntries=t.values(a.mapEntries)),n.paper=e.createPaper(),v(e),e._editor=b(e),I(e))}function m(e){return e.shape+"-"+e.coords.replace(/,*/g,"-")}function g(e,i){var n=!1;return t.forEach(e.mapEntries,function(e,t){return m(e)===i?(n=t,!1):void 0}),n}function v(i){var n=i.element,a=i.$original,r=n.getResponseDeclaration(),o=t.values(r.getCorrect());t.forEach(r.mapEntries,function(e){var t=i.createResponseArea(e.shape,e.coords);
C(i,e,t,!1)}),c.defineCorrect(r)&&o.length&&t.forEach(o,function(e){var t=e.split(" ");if(t.length>=2){var a=s.createTarget(n.paper,{point:{x:t[0],y:t[1]}});i._targets.push(a.id)}}),n.paper.getById("bg-image-"+n.serial).click(function(){e(".-mapping-editor",a).hide()})}function b(i){var n=i.element,a=n.getResponseDeclaration(),r=d(i,{currents:a.mapEntries.map(m).concat(i._targets),target:!0,shapeCreated:function(e,t){var n,r,o;"target"===t?(n=e.data("target"),r=a.getCorrect()||[],r.push(y(n)),a.setCorrect(r)):(o={shape:"path"===t?"poly":t,coords:s.qtiCoords(e),mappedValue:a.mappingAttributes.defaultValue||"0"},C(i,o,e,!0),a.mapEntries.push(o))},shapeRemoved:function(i,r){var o;
/^target/.test(i)&&r.target?a.setCorrect(t.without(a.getCorrect(),y(r.target))):(o=n.paper.getById("score-"+i),o&&o.remove(),e("#score-popup-"+i).remove(),t.remove(a.mapEntries,function(e){return i&&m(e)===i}))},enterHandling:function(t){"set"===t.type?t.forEach(function(e){return"path"===e.type?void e.attr(s._style["target-hover"]):void 0}):(t.toFront(),e("#score-popup-"+t.id).show())},quitHandling:function(t){if("set"===t.type)t.forEach(function(e){return"path"===e.type?void e.attr(s._style["target-success"]):void 0});else{var i=n.paper.getById("score-"+t.id);i&&i.show().toFront(),e("#score-popup-"+t.id).hide()}},shapeChanging:function(t){var i=n.paper.getById("score-"+t.id);
i&&i.remove(),e("#score-popup-"+t.id).remove()},shapeChange:function(e){var t,n=g(a,e.id);n!==!1&&(t=a.mapEntries[n],a.mapEntries[n].coords=s.qtiCoords(e),C(i,t,e,t.mappedValue===a.mappingAttributes.defaultValue),e.id=m(t))}});return r.create(),r}function y(e){return Math.round(e.x)+" "+Math.round(e.y)}function C(t,n,a,r){var o=t.element,l=t.$original,c=l.hasClass("responsive"),d=o.getResponseDeclaration(),f=m(n),g=e(".main-image-box",l),v=u(o.paper,a,g,c),b=(n.mappedValue||d.mappingAttributes.defaultValue||"0",s.createShapeText(o.paper,a,{id:"score-"+f,content:n.mappedValue+"",style:"score-text-default",title:i("Score value"),shapeClick:!0}));b.data("default",!!r),a.id=f,v.attr("id","score-popup-"+f);
var y=e(h({score:n.mappedValue,scoreMin:d.getMappingAttribute("lowerBound"),scoreMax:d.getMappingAttribute("upperBound"),noCorrect:!0}));p.setChangeCallbacks(y,d,{score:function(e,t){""===t?b.attr({text:e.mappingAttributes.defaultValue}).data("default",!0):b.attr({text:t}).data("default",!1),n.mappedValue=parseFloat(t)}}),y.appendTo(v)}function I(e){var i=e.element,n=e.$container,a=n.find('[data-type="target"]'),r=a.prev(".separator");e.on("mappingAttributeChange",function(e){"defaultValue"===e.key&&i.paper.forEach(function(t){/^score/.test(t.id)&&t.data("default")===!0&&t.attr({text:e.value})})}),e.on("metaChange",function(n){"defineCorrect"===n.key&&(n.value?(a.show(),r.show()):(a.hide(),r.hide(),t.forEach(e._targets,function(e){var t=i.paper.getById(e),n=i.paper.getById("layer-"+e);
t.remove(),n.remove()})))})}function E(){var e=this.widget,t=e.element;t.paper&&(e._editor&&e._editor.destroy(),o.removeInstructions(t),r.destroy(t),t.paper=this.widget.createPaper())}return n.create(a,f,E)}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget",["jquery","lodash","i18n","taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states","taoQtiItem/qtiCommonRenderer/helpers/Graphic"],function(e,t,i,n,a,r,o){var s=t.extend(n.clone(),a,{initCreator:function(e){var t;this.baseUrl=e.baseUrl,this.choiceForm=e.choiceForm,this.registerStates(r),n.initCreator.call(this),t=this.createPaper(),t&&(this.element.paper=t)},destroy:function(){var t=this.$original,i=t.parents(".qti-item");i.off("resize.gridEdit."+this.element.serial),e(window).off("resize.qti-widget."+this.element.serial),t.off("resize.qti-widget."+this.element.serial),n.destroy.call(this)
},createResponseArea:function(e,t){return o.createElement(this.element.paper,e,t,{touchEffect:!1})}});return s}),define("taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction","taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return n=n||{},n.baseUrl=this.getOption("baseUrl"),n.choiceForm=this.getOption("choiceOptionForm"),n.uri=this.getOption("uri"),n.lang=this.getOption("lang"),n.mediaManager=this.getOption("mediaManager"),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)
},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-sliderInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" data-qti-class="sliderInteraction" >\r\n    ',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\r\n    <div class="instruction-container"></div>\r\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","nouislider"],function(e,t,i,n,a){var r=function(e){e.sliderCurrentValue.find(".qti-slider-cur-value").text(e.value),e.sliderValue.val(e.value)},o=function(e){var i=e.getAttributes(),a=e.getContainer(),o=t("<div />").attr({id:i.identifier+"-qti-slider","class":"qti-slider"}),s=t("<div />").attr({"class":"qti-slider-values"}),l=t("<div />").attr({id:i.identifier+"-qti-slider-cur-value","class":"qti-slider-cur-value"}),c=t("<input />").attr({type:"hidden",id:i.identifier+"-qti-slider-value"}),d="horizontal",u="undefined"!=typeof i.reverse&&i.reverse?!0:!1,h=parseInt(i.lowerBound),p=parseInt(i.upperBound),f="undefined"!=typeof i.step&&i.step?parseInt(i.step):1,m=(p-h)/f;
l.append('<span class="qti-slider-cur-value-text">Current value: </span>').append('<span class="qti-slider-cur-value"></span>'),s.append('<span class="slider-min">'+(u?p:h)+"</span>").append('<span class="slider-max">'+(u?h:p)+"</span>"),e.getContainer().append(o).append(s).append(l).append(c),"undefined"!=typeof i.orientation&&t.inArray(i.orientation,["horizontal","vertical"])>-1&&(d=i.orientation);var g=0;if("horizontal"===d)a.addClass("qti-slider-horizontal");else{var v=300;g=20*m,g>v&&(g=v),a.addClass("qti-slider-vertical"),o.height(g+"px"),s.height(g+"px")}if("undefined"!=typeof i.stepLabel&&i.stepLabel){var b=parseInt(m/2),y=100/m*b,C=u?p-b*f:h+b*f;s.find(".slider-min").after("horizontal"===d?'<span class="slider-middle" style="left:'+y+'%">'+C+"</span>":'<span class="slider-middle" style="top:'+y+'%">'+C+"</span>")
}o.noUiSlider({start:u?p:h,range:{min:h,max:p},step:f,orientation:d}).on("slide",function(){var i=parseInt(t(this).val());e.attr("reverse")&&(i=p+h-i),i=Math.round(1e3*i)/1e3,r({value:i,sliderValue:c,sliderCurrentValue:l}),n.triggerResponseChangeEvent(e)}),r({value:h,sliderValue:c,sliderCurrentValue:l})},s=function(e){var i=e.getAttributes(),n=t("#"+i.identifier+"-qti-slider"),a=t("#"+i.identifier+"-qti-slider-value"),o=t("#"+i.identifier+"-qti-slider-cur-value"),s=parseInt(i.lowerBound),l=parseInt(i.upperBound),c="undefined"!=typeof i.reverse&&i.reverse?!0:!1,d=c?l:s;r({value:s,sliderValue:a,sliderCurrentValue:o}),n.val(d)},l=function(e,i){var n,o=e.getAttributes(),s=t("#"+o.identifier+"-qti-slider-value"),l=t("#"+o.identifier+"-qti-slider-cur-value"),c=t("#"+o.identifier+"-qti-slider"),d=parseInt(o.lowerBound),u=parseInt(o.upperBound);
n=a.unserialize(i,e)[0],r({value:n,sliderValue:s,sliderCurrentValue:l}),c.val(e.attr("reverse")?u+d-n:n)},c=function(e){var i,n=e.getAttributes(),a=e.getResponseDeclaration().attr("baseType"),r=parseInt(n.lowerBound),o=t("#"+n.identifier+"-qti-slider-value");return"integer"===a?i=parseInt(o.val()):"float"===a&&(i=parseFloat(o.val())),isNaN(i)?r:i},d=function(e){return a.serialize([c(e)],e)},u=function(e){var t=e.getContainer();t.empty()};return{qtiClass:"sliderInteraction",template:i,render:o,getContainer:n.getContainer,setResponse:l,getResponse:d,resetResponse:s,destroy:u}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s,l="",c=i.helperMissing,d=this.escapeExpression,u="function";return l+='\n<div class="panel">\n    <label for="lowerBound" class="spinner">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Lower Bound",s):c.call(t,"__","Lower Bound",s)))+'</label>\n    <input name="lowerBound" value="',(o=i.lowerBound)?r=o.call(t,{hash:{},data:a}):(o=t&&t.lowerBound,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The lower bound of the slider",s):c.call(t,"__","The lower bound of the slider",s)))+'</span>\n    <label for="upperBound" class="spinner">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Upper Bound",s):c.call(t,"__","Upper Bound",s)))+'</label>\n    <input name="upperBound" value="',(o=i.upperBound)?r=o.call(t,{hash:{},data:a}):(o=t&&t.upperBound,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The upper bound of the slider",s):c.call(t,"__","The upper bound of the slider",s)))+'</span>\n</div>\n\n<div class="panel">\n    <label for="step" class="spinner">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Step",s):c.call(t,"__","Step",s)))+'</label>\n    <input name="step" value="',(o=i.step)?r=o.call(t,{hash:{},data:a}):(o=t&&t.step,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="0" data-max="',(o=i.upperBound)?r=o.call(t,{hash:{},data:a}):(o=t&&t.upperBound,r=typeof o===u?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content:first" data-tooltip-theme="info"></span>\n    <span class="tooltip-content">'+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The number of units corresponding to a step on the slider",s):c.call(t,"__","The number of units corresponding to a step on the slider",s)))+"</span>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider"],function(e,t,i,n){var a=e.extend(t);return a.prototype.initForm=function(){var e=this.widget,t=e.$form,a=e.element;t.html(n({lowerBound:parseFloat(a.attr("lowerBound")),upperBound:parseFloat(a.attr("upperBound")),orientation:a.attr("orientation"),reverse:!!a.attr("reverse"),step:parseInt(a.attr("step")),stepLabel:!!a.attr("stepLabel")})),i.initWidget(t);
var r={};r.lowerBound=function(t,i){t.attr("lowerBound",parseFloat(i));var n=t.attr("lowerBound"),a=t.attr("upperBound"),o=a-n,s=t.attr("step"),l=!!t.attr("reverse");n>a&&(r.upperBound(t,n),e.$form.find('input[name="upperBound"]').val(n)),s>o&&o>=0&&(r.step(t,o),e.$form.find('input[name="step"]').val(o)),e.$container.find(l?".slider-max":".slider-min").text(i),e.$container.find("span.qti-slider-cur-value").text(n),e.$container.find(".qti-slider").noUiSlider({range:{min:n,max:a}},!0),e.$container.find(".qti-slider").val(n)},r.upperBound=function(t,i){t.attr("upperBound",parseFloat(i));var n=t.attr("lowerBound"),a=t.attr("upperBound"),o=a-n,s=t.attr("step"),l=!!t.attr("reverse");
n>a&&(r.lowerBound(t,a),e.$form.find('input[name="lowerBound"]').val(a)),s>o&&o>=0&&(r.step(t,o),e.$form.find('input[name="step"]').val(o)),e.$form.find('input[name="step"]').incrementer("options",{max:a}),e.$container.find(l?".slider-min":".slider-max").text(i),e.$container.find(".qti-slider").noUiSlider({range:{min:t.attr("lowerBound"),max:t.attr("upperBound")}},!0)},r.orientation=function(t,i){t.attr("orientation",i);t.attr("orientation")?t.attr("orientation"):"horizontal",t.attr("reverse");e.$container.find(".qti-slider").noUiSlider({orientation:t.attr("orientation")},!0)},r.reverse=function(t,i){t.attr("reverse",!!i);var n=t.attr("reverse"),a=parseInt(t.attr("lowerBound")),r=parseInt(t.attr("upperBound")),o=e.$container.find(".qti-slider"),s=n?r:a;
o.noUiSlider({start:s},!0),e.$container.find("span.qti-slider-cur-value").text(a),e.$container.find(".slider-min").text(n?r:a),e.$container.find(".slider-max").text(n?a:r)},r.step=function(t,i){var n=t.attr("lowerBound"),a=t.attr("upperBound"),r=parseInt(i),o=a-n;o>=r&&(t.attr("step",r),e.$container.find(".qti-slider").noUiSlider({step:t.attr("step")},!0),e.$form.find('input[name="step"]').incrementer("options",{max:o}))},r.stepLabel=function(t,i){if(t.attr("stepLabel",!!i),e.$container.find("span.slider-middle").remove(),t.attr("stepLabel")){var n=t.attr("upperBound"),a=t.attr("lowerBound"),r=t.attr("step"),o=t.attr("reverse"),s=parseInt((n-a)/r),l=parseInt(s/2),c=100/s*l,d=o?n-l*r:a+l*r;
e.$container.find(".slider-min").after('<span class="slider-middle" style="left:'+c+'%">'+d+"</span>")}},i.setChangeCallbacks(t,a,r)},a}),define("taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t){var i=e.extend(t,function(){this.widget.changeState("correct")},function(){});return i}),define("taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","lodash","i18n"],function(e,t,i,n,a,r){var o=e.create(t,function(){s(this.widget)
},function(){l(this.widget)}),s=function(e){var t=e.element,o=t.getResponseDeclaration(),s=a.values(o.getCorrect());i.setResponse(t,c(s));var l=e.$container.find(".qti-slider");l.removeAttr("disabled"),n.appendInstruction(t,r("Please define the correct response using the slider.")),e.$container.on("responseChange.qti-widget",function(e,t){o.setCorrect(d(t.response))})},l=function(e){var t=e.$container.find(".qti-slider"),i=e.element.attributes.lowerBound;t.attr("disabled","disabled"),t.val(i),e.$container.find("span.qti-slider-cur-value").text(""+i),n.removeInstructions(e.element),e.$container.off("responseChange.qti-widget")},c=function(e){return{base:{integer:e}}
},d=function(e){return[e.base.integer]};return o}),define("taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct"],function(e,t){return e.createBundle(t,arguments)}),define("taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this),this.$container.find(".qti-slider").attr("disabled","disabled")},i}),define("taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction","taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget"],function(e,t,i){var n=e.clone(t);return n.render=function(e,n){return t.render(e),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},n}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<input class="qti-interaction qti-inlineInteraction qti-textEntryInteraction" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-qti-class="textEntryInteraction" type="text">'})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","polyfill/placeholders","tooltipster"],function(e,t,i,n,a){var r=function(e,t){var i=new RegExp("^"+t+"$"),n="pattern"in document.createElement("input");
e.attr("pattern",t),e.on("keyup",function(){e.removeClass("field-error"),i.test(e.val())?e.tooltipster("hide"):((!n||navigator.userAgent.match(/Safari/i))&&e.addClass("field-error"),e.tooltipster("show"))})},o=function(e){var t=e.getAttributes(),i=e.getContainer();t.expectedLength&&i.css("width",parseInt(t.expectedLength)+"em"),t.patternMask&&(i.tooltipster({theme:"tao-error-tooltip",content:a("Invalid pattern"),delay:350,trigger:"custom"}),r(i,t.patternMask)),t.placeholderText&&i.attr("placeholder",t.placeholderText)},s=function(e){e.getContainer().val("")},l=function(e,t){var i;try{i=n.unserialize(t,e)}catch(a){}i&&i.length&&e.getContainer().val(i[0])},c=function(e){var t,i={base:{}},n=e.getContainer(),a=e.getAttributes(),r=e.getResponseDeclaration().attr("baseType"),o=a.base||10;
return a.placeholderText&&n.val()===a.placeholderText?t="":"integer"===r?t=parseInt(n.val(),o):"float"===r?t=parseFloat(n.val()):"string"===r&&(t=n.val()),i.base[r]=isNaN(t)&&"number"==typeof t?"":t,i};return{qtiClass:"textEntryInteraction",template:t,render:o,getContainer:i.getContainer,setResponse:l,getResponse:c,resetResponse:s}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="panel">\r\n    <label for="placeholderText" class="spinner">Placeholder Text</label>\r\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\r\n    <input name="placeholderText" value="',(o=i.placeholderText)?r=o.call(t,{hash:{},data:a}):(o=t&&t.placeholderText,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" />\r\n    <span class="tooltip-content">\r\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.",s):u.call(t,"__","In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.",s)))+'\r\n    </span>\r\n</div>\r\n<div class="panel">\r\n    <label for="patternMask" class="spinner">Pattern Mask</label>\r\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\r\n    <input name="patternMask" value="',(o=i.patternMask)?r=o.call(t,{hash:{},data:a}):(o=t&&t.patternMask,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" type="text" data-validate="$validRegex;" placeholder="e.g. [A-Z][a-z]{3,}"/>\r\n    <span class="tooltip-content">\r\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.",s):u.call(t,"__","If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.",s)))+'\r\n    </span>\r\n</div>\r\n<div class="panel">\r\n    <label for="expectedLength" class="spinner">Expected Length</label>\r\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\r\n    <input name="expectedLength" value="',(o=i.expectedLength)?r=o.call(t,{hash:{},data:a}):(o=t&&t.expectedLength,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="1" data-max="100" type="text" />\r\n    <span class="tooltip-content">\r\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.",s):u.call(t,"__","The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.",s)))+'\r\n    </span>\r\n</div>\r\n<div class="panel">\r\n    <label for="base" class="spinner">Base</label>\r\n    <span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\r\n    <input name="base" value="',(o=i.base)?r=o.call(t,{hash:{},data:a}):(o=t&&t.base,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-increment="1" data-min="1" data-max="100" type="text" />\r\n    <span class="tooltip-content">\r\n        '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.",s):u.call(t,"__","If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.",s)))+"\r\n    </span>\r\n</div>\r\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry"],function(e,t,i,n){var a=e.extend(t);return a.prototype.initForm=function(){var e=this.widget,t=e.$form,a=e.element;t.html(n({base:parseInt(a.attr("base")),patternMask:a.attr("patternMask"),placeholderText:a.attr("placeholderText"),expectedLength:parseInt(a.attr("expectedLength"))})),i.initWidget(t),i.setChangeCallbacks(t,a,{base:i.getAttributeChangeCallback(),patternMask:i.getAttributeChangeCallback(),placeholderText:i.getAttributeChangeCallback(),expectedLength:i.getAttributeChangeCallback()})
},a}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState"],function(e,t,i){var n=e.extend(t,function(){i.forward(this.widget)},function(){});return n}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Correct","lodash"],function(e,t,i,n){var a=t.create(i,function(){var t=this.widget.$container,i=this.widget.element.getResponseDeclaration(),a=n.values(i.getCorrect()).pop()||"";
t.find("tr[data-edit=correct] input[name=correct]").focus().val(a),t.on("keyup.correct","tr[data-edit=correct] input[name=correct]",function(){var t=e(this).val();i.setCorrect(t)})},function(){this.widget.$container.off(".correct")});return a}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<tr class="" data-edit="map">\r\n    <td data-text><input type="text" name="text" value="',(s=i.text)?o=s.call(t,{hash:{},data:a}):(s=t&&t.text,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" data-old-text="',(s=i.text)?o=s.call(t,{hash:{},data:a}):(s=t&&t.text,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'"/></td>\r\n    <td class="mini-tlb" colspan="2">\r\n        <label>\r\n            <input name="correct" type="radio" ',o=i["if"].call(t,t&&t.correct,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+=' />\r\n            <span class="icon-radio"></span>\r\n        </label>\r\n        <input name="score" class="score" value="',(s=i.score)?o=s.call(t,{hash:{},data:a}):(s=t&&t.score,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" data-for="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" data-validate="$numeric" data-validate-option="$allowEmpty; $event(type=keyup)"/>\r\n        <span class="icon-bin" data-role="delete-option"></span>\r\n    </td>\r\n</tr>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map",["jquery","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/states/Map","taoQtiItem/qtiCreator/widgets/helpers/formElement","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry","lodash"],function(e,t,i,n,a,r){var o=function(e){return e.closest("tr").find("input[name=text]").val()},s=t.create(i,function(){this.initMapEntries(),this.initFormCallbacks(),this.hideCorrectInput()},function(){this.widget.$container.off(".map"),this.widget.$container.find("tr[data-edit=map]:not([data-add-option])").remove()});return s.prototype.hideCorrectInput=function(){var e=this.widget.$container.find("tr[data-edit=correct]");
this.widget.on("metaChange",function(t){"defineCorrect"===t.key&&e.hide()}),e.hide(),r.delay(function(){e.hide()},200)},s.prototype.initFormCallbacks=function(){var t=this.widget.$container,i=this.widget.element.getResponseDeclaration();n.setChangeCallbacks(t,i,{text:r.throttle(function(t,i){var n=e(this),a=n.data("old-text"),r=n.closest("tr"),o=!!r.find("input[name=correct]:checked").length,s=parseInt(r.find(".score").val());isNaN(s)||(t.removeMapEntry(a,!0),t.setMapEntry(i,s),n.data("old-text",i),o&&t.setCorrect(i))},600),correct:function(t){var i=o(e(this));t.setCorrect(i)},score:function(t,i){var n=o(e(this)),a=parseFloat(i);isNaN(a)||t.setMapEntry(n,a)}})
},s.prototype.initMapEntries=function(){var t=this,i=this.widget.element.getResponseDeclaration(),n=r.values(i.getCorrect()).pop(),s=this.widget.$container.find("tr[data-add-option]"),l=function(t,i){var r=e(a({text:t||"",score:i||0,correct:t===n}));r.show(),s.before(r)};r.size(i.mapEntries)||(i.mapEntries={"":0}),r.forIn(i.mapEntries,function(e,t){l(t,e)}),this.widget.$container.on("click.map","[data-role=delete-option]",function(){var t=e(this),n=o(t),a=!!t.closest("tr").find("input[name=correct]:checked").length;i.removeMapEntry(n,!0),t.closest("tr").remove(),a&&i.resetCorrect()}).on("click.map",".add-option",function(){l("",0),t.initFormCallbacks()})},s}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map"],function(e,t){return e.createBundle(t,arguments)
}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s,l="",c="function",d=this.escapeExpression,u=i.helperMissing;return l+='<div class="widget-box widget-inline widget-textEntryInteraction" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" data-edit="active">\r\n\r\n    <div class="qti-interaction qti-textEntryInteraction">\r\n        <table>\r\n            <colgroup>\r\n                <col class="text">\r\n                <col class="icon">\r\n                <col class="icon">\r\n            </colgroup>\r\n            <tbody>\r\n                <tr data-edit="question">\r\n                    <td class="main-option"></td>\r\n                    <td colspan="2"></td>\r\n                </tr>\r\n                <tr data-edit="correct">\r\n                    <td data-text><input type="text" name="correct" value="',(o=i.text)?r=o.call(t,{hash:{},data:a}):(o=t&&t.text,r=typeof o===c?o.call(t,{hash:{},data:a}):o),l+=d(r)+'" /></td>\r\n                    <td class="mini-tlb" colspan="2">\r\n                    </td>\r\n                </tr>\r\n                <tr data-add-option data-edit="map">\r\n                    <td>\r\n                        <div class="add-option">\r\n                            <span class="icon-add"></span>\r\n                            '+d((o=i.__||t&&t.__,s={hash:{},data:a},o?o.call(t,"Add another option",s):u.call(t,"__","Add another option",s)))+'\r\n                        </div>\r\n                    </td>\r\n                    <td colspan="2"></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n</div>'
})}),define("taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget",["lodash","taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction"],function(e,t,i,n){var a=t.clone();return a.initCreator=function(){this.registerStates(i),t.initCreator.call(this),this.$container.find(".tlb-title").remove()},a.renderInteraction=function(){var e=this.element,t={tag:e.qtiClass,serial:e.serial,attributes:e.attributes};return n(t)},a.buildContainer=function(){var e,t;this.$original.length&&(e=this.$original[0].previousSibling,t=this.$original[0].nextSibling,(!e||3===e.nodeType&&""===e.nodeValue||3!==e.nodeType)&&this.$original.before("&nbsp;"),(!t||3===t.nodeType&&""===t.nodeValue||3!==t.nodeType)&&this.$original.after("&nbsp;")),this.$itemContainer=this.$original.parents(".item-editor-item"),this.$itemContainer.append(this.renderInteraction()),this.$container=this.$itemContainer.find(".widget-textEntryInteraction[data-serial="+this.element.getSerial()+"]")
},a}),define("tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<span class="widget-box textEntryInteraction-placeholder" data-serial="',(o=i.serial)?r=o.call(t,{hash:{},data:a}):(o=t&&t.serial,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" data-qti-class="textEntryInteraction">\r\n    <label>&nbsp;</label>\r\n</span>'})}),define("taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction","taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget","tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder"],function(e,t,i,n){var a=e.clone(t);
return a.template=n,a.render=function(e,t){return t=t||{},i.build(e,$('.textEntryInteraction-placeholder[data-serial="'+e.serial+'"]'),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),t)},a}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-uploadInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n	',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n	<div class="instruction-container"></div>\n    <div class="file-upload fixed-grid-row">\n        <div class="progressbar"></div>\n        <span class="btn-info small col-4"></span>\n        <span class="file-name placeholder col-8 truncate"></span>\n        <input type="file">\n    </div>\n</div> '
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","jquery","jqueryui","i18n","context","filereader"],function(e,t,i,n,a,r,o){var s={base:null},l=r("Browse your computer and select the appropriate file."),c=r("The selected file is ready to be sent."),d=function(e,t){i.removeInstructions(e),i.appendInstruction(e,l);var n=i.getContainer(e),a=t.name,r=(t.size,t.type);n.find(".file-name").empty().append(a);var o=new FileReader;o.onload=function(t){i.removeInstructions(e),i.appendInstruction(e,c,function(){this.setLevel("success")
}),i.validateInstructions(e),n.find(".progressbar").progressbar({value:100});var o=t.target.result,l=o.indexOf(",");base64Raw=o.substring(l+1),r=r,s={base:{file:{data:base64Raw,mime:r,name:a}}}},o.onloadstart=function(){i.removeInstructions(e),n.find(".progressbar").progressbar({value:0})},o.onprogress=function(e){var t=Math.ceil(Math.round(e.loaded)/Math.round(e.total)*100);n.find(".progressbar").progressbar({value:t})},o.readAsDataURL(t)},u=function(e){$container=i.getContainer(e),$container.find(".file-name").text(r("No file selected")),$container.find(".btn-info").text(r("Browse..."))},h=function(e){$container=i.getContainer(e),u(e),i.appendInstruction(e,l);
var t=function(t){var i=t.target.files[0];"undefined"!=typeof i&&d(e,i)};$input=$container.find("input"),window.File&&window.FileReader&&window.FileList?$input.bind("change",t):$input.fileReader({id:"fileReaderSWFObject",filereader:o.taobase_www+"js/lib/polyfill/filereader.swf",callback:function(){$input.bind("change",t)}}),$input.bind("mousedown",function(e){return e.preventDefault(),n(this).blur(),!1})},p=function(e){$container=i.getContainer(e),u(e)},f=function(e,t){if($container=i.getContainer(e),null!=t.base){var n="undefined"!=typeof t.base.file.name?t.base.file.name:"previously-uploaded-file";$container.find(".file-name").empty().text(n)}s=t},m=function(){return s
};return{qtiClass:"uploadInteraction",template:t,render:h,getContainer:i.getContainer,setResponse:f,getResponse:m,resetResponse:p,resetGui:u}}),define("tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+='\n    		<option value="',(a=i.mime)?n=a.call(e,{hash:{},data:t}):(a=e&&e.mime,n=typeof a===u?a.call(e,{hash:{},data:t}):a),r+=h(n)+'" ',n=i["if"].call(e,e&&e.selected,{hash:{},inverse:p.noop,fn:p.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=">",(a=i.label)?n=a.call(e,{hash:{},data:t}):(a=e&&e.label,n=typeof a===u?a.call(e,{hash:{},data:t}):a),r+=h(n)+"</option>\n    	"
}function o(){return'selected="selected"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l,c,d="",u="function",h=this.escapeExpression,p=this,f=i.helperMissing;return d+="<h3>"+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"MIME-type",c):f.call(t,"__","MIME-type",c)))+'</h3>\n<span class="icon-help tooltipstered" data-tooltip="~ .tooltip-content" data-tooltip-theme="info"></span>\n<div class="tooltip-content">'+h((l=i.__||t&&t.__,c={hash:{},data:a},l?l.call(t,"The MIME-type attribute describes which kind of file may be uploaded.",c):f.call(t,"__","The MIME-type attribute describes which kind of file may be uploaded.",c)))+'</div>\n\n<div class="reset-group">\n    <select name="type" class="select2" data-has-search="false">\n    	',s=i.each.call(t,t&&t.types,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(s||0===s)&&(d+=s),d+="\n    </select>\n</div>\n"
})}),define("taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question",["lodash","i18n","taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question","taoQtiItem/qtiCreator/widgets/helpers/formElement","taoQtiItem/qtiCreator/helper/uploadMime","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload"],function(e,t,i,n,a,r,o){var s=i.extend(n);return s.prototype.initForm=function(){var e=this.widget,i=e.$form,n=e.element,s=r.getMimeTypes();if(s.unshift({mime:"any/kind",label:t("-- Any kind of file --")}),"undefined"!=typeof n.attr("type"))if(""===n.attr("type"))delete n.attributes.type;
else for(var l in s)n.attr("type")==s[l].mime&&(s[l].selected=!0);i.html(o({types:s})),a.initWidget(i),callbacks={},callbacks.type=function(e,t){"any/kind"===t?e.removeAttr("type"):e.attr("type",t)},a.setChangeCallbacks(i,n,callbacks)},s}),define("taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states","taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question"],function(e,t){return e.createBundle(t,arguments,["answer","correct","map"])}),define("taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states"],function(e,t){var i=e.clone();
return i.initCreator=function(){this.registerStates(t),e.initCreator.call(this)},i}),define("tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===c?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<div class="qti-interaction qti-blockInteraction qti-uploadInteraction" data-serial="',(s=i.serial)?o=s.call(t,{hash:{},data:a}):(s=t&&t.serial,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'">\n	',o=i["if"].call(t,t&&t.prompt,{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+='\n	<div class="instruction-container"></div>\n    <div class="fixed-grid-row file-upload">\n        <span class="btn-info small col-4"></span>\n        <span class="file-name placeholder col-8 truncate"></span>\n    </div>\n</div>'
})}),define("taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction",["lodash","taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction","taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget","tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction"],function(e,t,i,n){var t=e.clone(t);return t.template=n,t.render=function(e,n){return t.resetGui(e),i.build(e,t.getContainer(e),this.getOption("interactionOptionForm"),this.getOption("responseOptionForm"),n)},t}),define("taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget",["taoQtiItem/qtiCreator/widgets/interactions/Widget","taoQtiItem/qtiCreator/editor/customInteractionRegistry","lodash"],function(e,t,i){var n=e.clone();
return n.initCreator=function(){e.initCreator.call(this)},n.createToolbar=function(n){var a=t.get(this.element.typeIdentifier);return n=i.defaults(n||{},{title:a.manifest.label}),e.createToolbar.call(this,n)},n}),define("taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Sleep","tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay"],function(e,t,i){return e.extend(t,function(){this.widget.$container.append(i())},function(){this.widget.$container.children(".overlay").remove()})}),define("taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/states","taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep"],function(e,t){return e.createBundle(t,arguments)
}),define("taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Answer",["taoQtiItem/qtiCreator/widgets/states/factory","taoQtiItem/qtiCreator/widgets/interactions/states/Answer","taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState","tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media","taoQtiItem/qtiCreator/widgets/helpers/formElement"],function(e,t){var i=e.extend(t,function(){{var e=this.widget;e.element}},function(){this.widget});return i.prototype.initResponseForm=function(){{var e=this.widget;e.$form,e.element}},i}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/container",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="function";return(o=i.body)?r=o.call(t,{hash:{},data:a}):(o=t&&t.body,r=typeof o===s?o.call(t,{hash:{},data:a}):o),r||0===r?r:""})}),define("taoQtiItem/qtiXmlRenderer/renderers/Container",["tpl!taoQtiItem/qtiXmlRenderer/tpl/container"],function(e){var t=function(e){return e.replace(/&nbsp;/g,"&#160;")},i=function(e){var t="";return e&&(t=e,t=t.replace(/<br([^>]*)?>/gi,"<br />"),t=t.replace(/<hr([^>]*)?>/gi,"<hr />"),t=t.replace(/(<img([^>]*)?\s?[^\/]>)+/gi,function(e){return e.replace(">"," />")})),t};return{qtiClass:"_container",template:e,getData:function(e,n){return n.body=t(n.body),n.body=i(n.body),n}}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/element",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";
return r+="<",(a=i.tag)?n=a.call(e,{hash:{},data:t}):(a=e&&e.tag,n=typeof a===d?a.call(e,{hash:{},data:t}):a),r+=u(n),n=i["if"].call(e,e&&e.attributes,{hash:{},inverse:h.noop,fn:h.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=">",(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===d?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="</",(a=i.tag)?n=a.call(e,{hash:{},data:t}):(a=e&&e.tag,n=typeof a===d?a.call(e,{hash:{},data:t}):a),r+=u(n)+">"}function o(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):c.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function s(e,t){var n,a,r="";
return r+="<",(a=i.tag)?n=a.call(e,{hash:{},data:t}):(a=e&&e.tag,n=typeof a===d?a.call(e,{hash:{},data:t}):a),r+=u(n),n=i["if"].call(e,e&&e.attributes,{hash:{},inverse:h.noop,fn:h.program(2,o,t),data:t}),(n||0===n)&&(r+=n),r+=" />"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c=i.helperMissing,d="function",u=this.escapeExpression,h=this;return l=i["if"].call(t,t&&t.body,{hash:{},inverse:h.program(4,s,a),fn:h.program(1,r,a),data:a}),l||0===l?l:""})}),define("taoQtiItem/qtiXmlRenderer/renderers/Img",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"img",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/item",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a="";
return a+=" ",n=i["if"].call(e,null==t||t===!1?t:t.key,{hash:{},inverse:b.noop,fn:b.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a}function o(e,t){var i,n="";return n+="xmlns:"+v((i=null==t||t===!1?t:t.key,typeof i===g?i.apply(e):i))+'="'+v(typeof e===g?e.apply(e):e)+'"'}function s(e,t){var n,a,r;return a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):y.call(e,"join",e&&e.attributes,"="," ",'"',r),n||0===n?n:""}function l(e){var t,i="";return i+="\n        ",t=typeof e===g?e.apply(e):e,(t||0===t)&&(i+=t),i}function c(){return'\n            <div class="empty"></div>\n        '}function d(e,t){var n,a,r="";return r+="\n            ",(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===g?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r+="\n        "
}function u(e){var t;return t=typeof e===g?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var h,p,f,m="",g="function",v=this.escapeExpression,b=this,y=i.helperMissing,C=i.blockHelperMissing;return m+='<?xml version="1.0" encoding="UTF-8"?>\n<assessmentItem xmlns="http://www.imsglobal.org/xsd/imsqti_v2p1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.imsglobal.org/xsd/imsqti_v2p1  http://www.imsglobal.org/xsd/qti/qtiv2p1/imsqti_v2p1.xsd"',h=i.each.call(t,t&&t.namespaces,{hash:{},inverse:b.noop,fn:b.program(1,r,a),data:a}),(h||0===h)&&(m+=h),m+="\n    ",h=i["if"].call(t,t&&t.attributes,{hash:{},inverse:b.noop,fn:b.program(4,s,a),data:a}),(h||0===h)&&(m+=h),m+=">",f={hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a},(p=i.responses)?h=p.call(t,f):(p=t&&t.responses,h=typeof p===g?p.call(t,f):p),i.responses||(h=C.call(t,h,{hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a})),(h||0===h)&&(m+=h),f={hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a},(p=i.outcomes)?h=p.call(t,f):(p=t&&t.outcomes,h=typeof p===g?p.call(t,f):p),i.outcomes||(h=C.call(t,h,{hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a})),(h||0===h)&&(m+=h),f={hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a},(p=i.stylesheets)?h=p.call(t,f):(p=t&&t.stylesheets,h=typeof p===g?p.call(t,f):p),i.stylesheets||(h=C.call(t,h,{hash:{},inverse:b.noop,fn:b.program(6,l,a),data:a})),(h||0===h)&&(m+=h),m+="\n    \n    <itemBody>\n        ",h=i["if"].call(t,t&&t.empty,{hash:{},inverse:b.program(10,d,a),fn:b.program(8,c,a),data:a}),(h||0===h)&&(m+=h),m+="\n    </itemBody>\n    \n    ",(p=i.responseProcessing)?h=p.call(t,{hash:{},data:a}):(p=t&&t.responseProcessing,h=typeof p===g?p.call(t,{hash:{},data:a}):p),(h||0===h)&&(m+=h),f={hash:{},inverse:b.noop,fn:b.program(12,u,a),data:a},(p=i.feedbacks)?h=p.call(t,f):(p=t&&t.feedbacks,h=typeof p===g?p.call(t,f):p),i.feedbacks||(h=C.call(t,h,{hash:{},inverse:b.noop,fn:b.program(12,u,a),data:a})),(h||0===h)&&(m+=h),m+="\n</assessmentItem>"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/Item",["lodash","tpl!taoQtiItem/qtiXmlRenderer/tpl/item"],function(e,t){return{qtiClass:"assessmentItem",template:t,getData:function(t,i){var n=e.clone(t.namespaces)||[],a=this;delete n[""],delete n.xsi,delete n.xml;var r={responses:[],outcomes:[],stylesheets:[],feedbacks:[],namespaces:n,empty:t.isEmpty(),responseProcessing:t.responseProcessing?t.responseProcessing.render(a):""};return e.each(t.responses,function(e){r.responses.push(e.render(a))}),e.each(t.outcomes,function(e){r.outcomes.push(e.render(a))}),e.each(t.stylesheets,function(e){r.stylesheets.push(e.render(a))}),e.each(t.modalFeedbacks,function(e){r.feedbacks.push(e.render(a))
}),e.merge(i||{},r)}}}),define("taoQtiItem/qtiXmlRenderer/renderers/Math",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"math",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/Object",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"object",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):h.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function o(){return"/>\n"}function s(e,t){var n,a="";
return a+=">\n    ",n=i["if"].call(e,(n=e&&e.defaultValue,null==n||n===!1?n:n.length),{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(n||0===n)&&(a+=n),a+="</outcomeDeclaration>"}function l(e,t){var n,a="";return a+="<defaultValue>\n        ",n=i.each.call(e,e&&e.defaultValue,{hash:{},inverse:m.noop,fn:m.program(7,c,t),data:t}),(n||0===n)&&(a+=n),a+="</defaultValue>\n    "}function c(e){var t="";return t+="<value>"+f(typeof e===p?e.apply(e):e)+"</value>\n        "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u="",h=i.helperMissing,p="function",f=this.escapeExpression,m=this;return u+="\n<outcomeDeclaration",d=i["if"].call(t,t&&t.attributes,{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(d||0===d)&&(u+=d),d=i["if"].call(t,t&&t.empty,{hash:{},inverse:m.program(5,s,a),fn:m.program(3,o,a),data:a}),(d||0===d)&&(u+=d),u
})}),define("taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration",["lodash","tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration"],function(e,t){return{qtiClass:"outcomeDeclaration",template:t,getData:function(t,i){var n=[];t.defaultValue&&(n="object"==typeof t.defaultValue?e.values(t.defaultValue):[t.defaultValue]);var a={empty:!e.size(n),defaultValue:n};return e.merge(i||{},a)}}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(){return"/>"}function o(e,t){var n,a="";return a+=">",n=i["if"].call(e,(n=e&&e.defaultValue,null==n||n===!1?n:n.length),{hash:{},inverse:x.noop,fn:x.program(4,s,t),data:t}),(n||0===n)&&(a+=n),n=i["if"].call(e,(n=e&&e.correctResponse,null==n||n===!1?n:n.length),{hash:{},inverse:x.noop,fn:x.program(7,c,t),data:t}),(n||0===n)&&(a+=n),n=i["if"].call(e,e&&e.MAP_RESPONSE,{hash:{},inverse:x.noop,fn:x.program(10,u,t),data:t}),(n||0===n)&&(a+=n),n=i["if"].call(e,e&&e.MAP_RESPONSE_POINT,{hash:{},inverse:x.noop,fn:x.program(16,m,t),data:t}),(n||0===n)&&(a+=n),a+="\n    </responseDeclaration>"
}function s(e,t){var n,a="";return a+="\n    <defaultValue>",n=i.each.call(e,e&&e.defaultValue,{hash:{},inverse:x.noop,fn:x.program(5,l,t),data:t}),(n||0===n)&&(a+=n),a+="\n    </defaultValue>\n    "}function l(e){var t="";return t+="\n        <value>"+w(typeof e===E?e.apply(e):e)+"</value>\n        "}function c(e,t){var n,a="";return a+="\n    <correctResponse>",n=i.each.call(e,e&&e.correctResponse,{hash:{},inverse:x.noop,fn:x.program(8,d,t),data:t}),(n||0===n)&&(a+=n),a+="\n    </correctResponse>\n    "}function d(e){var t="";return t+="\n        <value>"+w(typeof e===E?e.apply(e):e)+"</value>"}function u(e,t){var n,a="";return n=i["if"].call(e,e&&e.mapEntries,{hash:{},inverse:x.noop,fn:x.program(11,h,t),data:t}),(n||0===n)&&(a+=n),a+="\n    "
}function h(e,t){var n,a="";return a+="<mapping",n=i.each.call(e,e&&e.mappingAttributes,{hash:{},inverse:x.noop,fn:x.program(12,p,t),data:t}),(n||0===n)&&(a+=n),a+=">",n=i.each.call(e,e&&e.mapEntries,{hash:{},inverse:x.noop,fn:x.program(14,f,t),data:t}),(n||0===n)&&(a+=n),a+="\n        </mapping>\n        "}function p(e,t){var i,n="";return n+=" "+w((i=null==t||t===!1?t:t.key,typeof i===E?i.apply(e):i))+'="'+w(typeof e===E?e.apply(e):e)+'"'}function f(e,t){var i,n="";return n+='\n            <mapEntry mapKey="'+w((i=null==t||t===!1?t:t.key,typeof i===E?i.apply(e):i))+'" mappedValue="'+w(typeof e===E?e.apply(e):e)+'" caseSensitive="false"/>'}function m(e,t){var n,a="";
return n=i["if"].call(e,e&&e.mapEntries,{hash:{},inverse:x.noop,fn:x.program(17,g,t),data:t}),(n||0===n)&&(a+=n),a+="\n    "}function g(e,t){var n,a="";return a+="<areaMapping",n=i.each.call(e,e&&e.mappingAttributes,{hash:{},inverse:x.noop,fn:x.program(12,p,t),data:t}),(n||0===n)&&(a+=n),a+=">",n=i.each.call(e,e&&e.mapEntries,{hash:{},inverse:x.noop,fn:x.program(18,v,t),data:t}),(n||0===n)&&(a+=n),a+="\n        </areaMapping>\n        "}function v(e,t){var n,a,r="";return r+='\n            <areaMapEntry shape="',(a=i.shape)?n=a.call(e,{hash:{},data:t}):(a=e&&e.shape,n=typeof a===E?a.call(e,{hash:{},data:t}):a),r+=w(n)+'" coords="',(a=i.coords)?n=a.call(e,{hash:{},data:t}):(a=e&&e.coords,n=typeof a===E?a.call(e,{hash:{},data:t}):a),r+=w(n)+'" mappedValue="',(a=i.mappedValue)?n=a.call(e,{hash:{},data:t}):(a=e&&e.mappedValue,n=typeof a===E?a.call(e,{hash:{},data:t}):a),r+=w(n)+'" />'
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var b,y,C,I="",E="function",w=this.escapeExpression,x=this,T=i.helperMissing;return I+="<responseDeclaration ",y=i.join||t&&t.join,C={hash:{},data:a},b=y?y.call(t,t&&t.attributes,"="," ",'"',C):T.call(t,"join",t&&t.attributes,"="," ",'"',C),(b||0===b)&&(I+=b),b=i["if"].call(t,t&&t.empty,{hash:{},inverse:x.program(3,o,a),fn:x.program(1,r,a),data:a}),(b||0===b)&&(I+=b),I})}),define("taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration",["lodash","tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration"],function(e,t){return{qtiClass:"responseDeclaration",template:t,getData:function(t,i){var n={empty:!e.size(t.mapEntries)&&!e.size(t.correctResponse)&&!e.size(t.defaultValue),correctResponse:e.values(t.correctResponse),MATCH_CORRECT:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct"===t.template,MAP_RESPONSE:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response"===t.template,MAP_RESPONSE_POINT:"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point"===t.template,mappingAttributes:t.mappingAttributes,mapEntries:t.mapEntries};
return e.merge(n,i||{})}}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return(a=i.xml)?n=a.call(e,{hash:{},data:t}):(a=e&&e.xml,n=typeof a===u?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r}function o(e,t){var n,a,r="";return r+='<responseProcessing template="',(a=i.template)?n=a.call(e,{hash:{},data:t}):(a=e&&e.template,n=typeof a===u?a.call(e,{hash:{},data:t}):a),r+=h(n)+'"/>'}function s(e,t){var n,a,r,o="";return o+="<responseProcessing>\n    ",r={hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t},(a=i.responseRules)?n=a.call(e,r):(a=e&&e.responseRules,n=typeof a===u?a.call(e,r):a),i.responseRules||(n=f.call(e,n,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t})),(n||0===n)&&(o+=n),o+="\n    ",r={hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t},(a=i.feedbackRules)?n=a.call(e,r):(a=e&&e.feedbackRules,n=typeof a===u?a.call(e,r):a),i.feedbackRules||(n=f.call(e,n,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t})),(n||0===n)&&(o+=n),o+="\n</responseProcessing>"
}function l(e){var t;return t=typeof e===u?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d="",u="function",h=this.escapeExpression,p=this,f=i.blockHelperMissing;return c=i["if"].call(t,t&&t.custom,{hash:{},inverse:p.noop,fn:p.program(1,r,a),data:a}),(c||0===c)&&(d+=c),c=i["if"].call(t,t&&t.template,{hash:{},inverse:p.noop,fn:p.program(3,o,a),data:a}),(c||0===c)&&(d+=c),c=i["if"].call(t,t&&t.templateDriven,{hash:{},inverse:p.noop,fn:p.program(5,s,a),data:a}),(c||0===c)&&(d+=c),d})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="",l="function",c=this.escapeExpression;return s+='<responseCondition>\n    <responseIf>\n        <match>\n            <variable identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n            <correct identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n        </match>\n        <setOutcomeValue identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n            <sum>\n                <variable identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n                <baseValue baseType="integer">1</baseValue>\n            </sum>\n        </setOutcomeValue>\n    </responseIf>\n</responseCondition>'
})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<responseCondition>\n    <responseIf>\n        <not>\n            <isNull>\n                <variable identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n            </isNull>\n        </not>\n        <setOutcomeValue identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n            <sum>\n                <variable identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n                <mapResponse identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n            </sum>\n        </setOutcomeValue>\n    </responseIf>\n</responseCondition>'
})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var r,o,s="",l="function",c=this.escapeExpression;return s+='<responseCondition>\n    <responseIf>\n        <not>\n            <isNull>\n                <variable identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n            </isNull>\n        </not>\n        <setOutcomeValue identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'">\n            <sum>\n                <variable identifier="',(o=i.outcomeIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.outcomeIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n                <mapResponsePoint identifier="',(o=i.responseIdentifier)?r=o.call(t,{hash:{},data:a}):(o=t&&t.responseIdentifier,r=typeof o===l?o.call(t,{hash:{},data:a}):o),s+=c(r)+'" />\n            </sum>\n        </setOutcomeValue>\n    </responseIf>\n</responseCondition>'
})}),define("taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing",["lodash","tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point"],function(e,t,i,n,a){var r=function(e){var t="",i=e.getResponseDeclaration();return i.template&&(t=o(i.template,{responseIdentifier:i.id(),outcomeIdentifier:"SCORE"})),t},o=function(e,t){var r="";switch(e){case"http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct":case"MATCH_CORRECT":r=i(t);break;case"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response":case"MAP_RESPONSE":r=n(t);
break;case"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point":case"MAP_RESPONSE_POINT":r=a(t);break;default:throw new Error("unknown rp template : "+e)}return r},s=function(t,i){var n=[];return e.each(i.getFeedbackRules(),function(e){n.push(e.render(t))}),n};return{qtiClass:"responseProcessing",template:t,getData:function(t,i){var n={},a=this;switch(t.processingType){case"custom":n.custom=!0,n.xml=t.xml;break;case"templateDriven":var o=t.getRelatedItem().getInteractions();if(1===o.length){var l=o[0].getResponseDeclaration();if(!e.size(l.getFeedbackRules())){n.template=l.template;break}}n.templateDriven=!0,n.responseRules=[],e.each(o,function(e){n.responseRules.push(r(e))
}),n.feedbackRules=[],e.each(o,function(t){n.feedbackRules=e.union(n.feedbackRules,s(a,t.getResponseDeclaration()))})}return e.merge(i||{},n)}}}),define("taoQtiItem/qtiXmlRenderer/renderers/RubricBlock",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element","lodash"],function(e,t){return{qtiClass:"rubricBlock",template:e,getData:function(e,i){var n={view:i.attributes.view?t.values(i.attributes.view).join(" "):""};return t.merge(i||{},n)}}}),define("taoQtiItem/qtiXmlRenderer/renderers/Stylesheet",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"stylesheet",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"associableHotspot",template:e}
}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/Gap",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"gap",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):c.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c=i.helperMissing,d=this,u="function";return l+="<gapImg",o=i["if"].call(t,t&&t.attributes,{hash:{},inverse:d.noop,fn:d.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+=">\n    ",(s=i.renderedObject)?o=s.call(t,{hash:{},data:a}):(s=t&&t.renderedObject,o=typeof s===u?s.call(t,{hash:{},data:a}):s),(o||0===o)&&(l+=o),l+="\n</gapImg>"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg",["tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg"],function(e){return{qtiClass:"gapImg",template:e,getData:function(e,t){return t.renderedObject=e.object.render(this),t}}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/GapText",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"gapText",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"hotspotChoice",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"hottext",template:e}
}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"inlineChoice",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"simpleAssociableChoice",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"simpleChoice",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"modalFeedback",template:e}
}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):f.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function o(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===m?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function s(e,t){var n,a;return(a=i.object)?n=a.call(e,{hash:{},data:t}):(a=e&&e.object,n=typeof a===m?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function l(e){var t;return t=typeof e===m?e.apply(e):e,t||0===t?t:""
}function c(e,t){var n,a;return(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===m?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u,h,p="",f=i.helperMissing,m="function",g=this.escapeExpression,v=this,b=i.blockHelperMissing;return p+="<",(u=i.tag)?d=u.call(t,{hash:{},data:a}):(u=t&&t.tag,d=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=g(d),d=i["if"].call(t,t&&t.attributes,{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(d||0===d)&&(p+=d),p+=">",d=i["if"].call(t,t&&t.prompt,{hash:{},inverse:v.noop,fn:v.program(3,o,a),data:a}),(d||0===d)&&(p+=d),d=i["if"].call(t,t&&t.object,{hash:{},inverse:v.noop,fn:v.program(5,s,a),data:a}),(d||0===d)&&(p+=d),h={hash:{},inverse:v.noop,fn:v.program(7,l,a),data:a},(u=i.choices)?d=u.call(t,h):(u=t&&t.choices,d=typeof u===m?u.call(t,h):u),i.choices||(d=b.call(t,d,{hash:{},inverse:v.noop,fn:v.program(7,l,a),data:a})),(d||0===d)&&(p+=d),d=i["if"].call(t,t&&t.body,{hash:{},inverse:v.noop,fn:v.program(9,c,a),data:a}),(d||0===d)&&(p+=d),p+="\n</",(u=i.tag)?d=u.call(t,{hash:{},data:a}):(u=t&&t.tag,d=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=g(d)+">"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"associateInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"choiceInteraction",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t,i){var n,a="";return a+="\n                <"+u((n=i&&i.ns,n=null==n||n===!1?n:n.pci,typeof n===d?n.apply(e):n))+'lib id="'+u(typeof e===d?e.apply(e):e)+'"/>\n                '
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l,c="",d="function",u=this.escapeExpression,h=i.helperMissing,p=this;return c+="<customInteraction ",s=i.join||t&&t.join,l={hash:{},data:a},o=s?s.call(t,t&&t.attributes,"="," ",'"',l):h.call(t,"join",t&&t.attributes,"="," ",'"',l),(o||0===o)&&(c+=o),c+=">\n    <"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+'portableCustomInteraction customInteractionTypeIdentifier="',(s=i.typeIdentifier)?o=s.call(t,{hash:{},data:a}):(s=t&&t.typeIdentifier,o=typeof s===d?s.call(t,{hash:{},data:a}):s),c+=u(o)+'" hook="',(s=i.entryPoint)?o=s.call(t,{hash:{},data:a}):(s=t&&t.entryPoint,o=typeof s===d?s.call(t,{hash:{},data:a}):s),c+=u(o)+'">\n\n        <'+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+'responseSchema href="http://imsglobal.org/schema/json/v1.0/response.json"/>\n\n        <'+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+'resources location="http://imsglobal.org/pci/1.0.15/sharedLibraries.xml">\n            <'+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"libraries>\n                ",o=i.each.call(t,t&&t.libraries,{hash:{},inverse:p.noop,fn:p.programWithDepth(1,r,a,t),data:a}),(o||0===o)&&(c+=o),c+="\n            </"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"libraries>\n        </"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"resources>\n\n        ",s=i.pciproperties||t&&t.pciproperties,l={hash:{},data:a},o=s?s.call(t,t&&t.properties,(o=t&&t.ns,null==o||o===!1?o:o.pci),l):h.call(t,"pciproperties",t&&t.properties,(o=t&&t.ns,null==o||o===!1?o:o.pci),l),(o||0===o)&&(c+=o),c+="\n\n        <"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"markup>\n            ",(s=i.markup)?o=s.call(t,{hash:{},data:a}):(s=t&&t.markup,o=typeof s===d?s.call(t,{hash:{},data:a}):s),(o||0===o)&&(c+=o),c+="\n        </"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"markup>\n\n    </"+u((o=t&&t.ns,o=null==o||o===!1?o:o.pci,typeof o===d?o.apply(t):o))+"portableCustomInteraction>\n</customInteraction>"
})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r="";return r+=' key="',(a=i.key)?n=a.call(e,{hash:{},data:t}):(a=e&&e.key,n=typeof a===h?a.call(e,{hash:{},data:t}):a),r+=p(n)+'"'}function o(e,t,n){var a,r="";return a=i["if"].call(e,e&&e.key,{hash:{},inverse:f.program(6,l,t),fn:f.programWithDepth(4,s,t,n),data:t}),(a||0===a)&&(r+=a),r}function s(e,t,n){var a,r,o="";return o+="<"+p((a=n&&n.ns,typeof a===h?a.apply(e):a))+'entry key="',(r=i.key)?a=r.call(e,{hash:{},data:t}):(r=e&&e.key,a=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=p(a)+'">',(r=i.value)?a=r.call(e,{hash:{},data:t}):(r=e&&e.value,a=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=p(a)+"</"+p((a=n&&n.ns,typeof a===h?a.apply(e):a))+"entry>\n        "
}function l(e,t){var n,a,r="";return r+="\n            ",(a=i.value)?n=a.call(e,{hash:{},data:t}):(a=e&&e.value,n=typeof a===h?a.call(e,{hash:{},data:t}):a),(n||0===n)&&(r+=n),r}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var c,d,u="",h="function",p=this.escapeExpression,f=this;return u+="<",(d=i.ns)?c=d.call(t,{hash:{},data:a}):(d=t&&t.ns,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+"properties",c=i["if"].call(t,t&&t.key,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(c||0===c)&&(u+=c),u+=">\n    ",c=i.each.call(t,t&&t.entries,{hash:{},inverse:f.noop,fn:f.programWithDepth(3,o,a,t),data:a}),(c||0===c)&&(u+=c),u+="\n</",(d=i.ns)?c=d.call(t,{hash:{},data:a}):(d=t&&t.ns,c=typeof d===h?d.call(t,{hash:{},data:a}):d),u+=p(c)+"properties>"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/CustomInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main","tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties","lodash","handlebars"],function(e,t,i,n){function a(e,n,r){var o=[];return i.forIn(e,function(e,t){o.push(i.isObject(e)?{value:a(e,n,t)}:{key:t,value:e})}),t({entries:o,ns:n,key:r})}function r(e,t){return t?e.replace(/<(\/)?([^!])/g,"<$1"+t+":$2"):e}return n.registerHelper("pciproperties",function(e,t){return a(e,t,"")}),{qtiClass:"customInteraction",template:e,getData:function(e,t){var i=e.getMarkupNamespace();return t.markup=r(e.markup,i?i.name:""),t
}}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/EndAttemptInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"endAttemptInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"extendedTextInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"gapMatchInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"graphicAssociateInteraction",template:e}
}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):h.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function o(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===p?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function s(e){var t;return t=typeof e===p?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h=i.helperMissing,p="function",f=this,m=i.blockHelperMissing;
return u+="<graphicGapMatchInteraction",l=i["if"].call(t,t&&t.attributes,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+=">",l=i["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+="\n    ",(c=i.object)?l=c.call(t,{hash:{},data:a}):(c=t&&t.object,l=typeof c===p?c.call(t,{hash:{},data:a}):c),(l||0===l)&&(u+=l),d={hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a},(c=i.gapImgs)?l=c.call(t,d):(c=t&&t.gapImgs,l=typeof c===p?c.call(t,d):c),i.gapImgs||(l=m.call(t,l,{hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a})),(l||0===l)&&(u+=l),d={hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a},(c=i.choices)?l=c.call(t,d):(c=t&&t.choices,l=typeof c===p?c.call(t,d):c),i.choices||(l=m.call(t,l,{hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a})),(l||0===l)&&(u+=l),u+="\n</graphicGapMatchInteraction>"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction"],function(e){return{qtiClass:"graphicGapMatchInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"graphicOrderInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"hotspotInteraction",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";
return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):u.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function o(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===h?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function s(e,t){var n,a;return(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===h?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d="",u=i.helperMissing,h="function",p=this.escapeExpression,f=this;return d+="<",(c=i.tag)?l=c.call(t,{hash:{},data:a}):(c=t&&t.tag,l=typeof c===h?c.call(t,{hash:{},data:a}):c),d+=p(l),l=i["if"].call(t,t&&t.attributes,{hash:{},inverse:f.noop,fn:f.program(1,r,a),data:a}),(l||0===l)&&(d+=l),d+=">",l=i["if"].call(t,t&&t.prompt,{hash:{},inverse:f.noop,fn:f.program(3,o,a),data:a}),(l||0===l)&&(d+=l),l=i["if"].call(t,t&&t.body,{hash:{},inverse:f.noop,fn:f.program(5,s,a),data:a}),(l||0===l)&&(d+=l),d+="\n</",(c=i.tag)?l=c.call(t,{hash:{},data:a}):(c=t&&t.tag,l=typeof c===h?c.call(t,{hash:{},data:a}):c),d+=p(l)+">"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction"],function(e){return{qtiClass:"hottextInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"inlineChoiceInteraction",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):h.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o
}function o(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===p?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}function s(e){var t;return t=typeof e===p?e.apply(e):e,t||0===t?t:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var l,c,d,u="",h=i.helperMissing,p="function",f=this.escapeExpression,m=this,g=i.blockHelperMissing;return u+="<",(c=i.tag)?l=c.call(t,{hash:{},data:a}):(c=t&&t.tag,l=typeof c===p?c.call(t,{hash:{},data:a}):c),u+=f(l),l=i["if"].call(t,t&&t.attributes,{hash:{},inverse:m.noop,fn:m.program(1,r,a),data:a}),(l||0===l)&&(u+=l),u+=">",l=i["if"].call(t,t&&t.prompt,{hash:{},inverse:m.noop,fn:m.program(3,o,a),data:a}),(l||0===l)&&(u+=l),u+="\n    <simpleMatchSet>\n        ",d={hash:{},inverse:m.noop,fn:m.program(5,s,a),data:a},(c=i.matchSet1)?l=c.call(t,d):(c=t&&t.matchSet1,l=typeof c===p?c.call(t,d):c),i.matchSet1||(l=g.call(t,l,{hash:{},inverse:m.noop,fn:m.program(5,s,a),data:a})),(l||0===l)&&(u+=l),u+="\n    </simpleMatchSet>\n    <simpleMatchSet>\n        ",d={hash:{},inverse:m.noop,fn:m.program(5,s,a),data:a},(c=i.matchSet2)?l=c.call(t,d):(c=t&&t.matchSet2,l=typeof c===p?c.call(t,d):c),i.matchSet2||(l=g.call(t,l,{hash:{},inverse:m.noop,fn:m.program(5,s,a),data:a})),(l||0===l)&&(u+=l),u+="\n    </simpleMatchSet>\n</",(c=i.tag)?l=c.call(t,{hash:{},data:a}):(c=t&&t.tag,l=typeof c===p?c.call(t,{hash:{},data:a}):c),u+=f(l)+">"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction"],function(e){return{qtiClass:"matchInteraction",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,e&&e.attributes,"="," ",'"',r):f.call(e,"join",e&&e.attributes,"="," ",'"',r),(n||0===n)&&(o+=n),o}function o(e,t){var n,a;return(a=i.prompt)?n=a.call(e,{hash:{},data:t}):(a=e&&e.prompt,n=typeof a===m?a.call(e,{hash:{},data:t}):a),n||0===n?n:""
}function s(e,t){var n,a,r,o="";return o+=" ",a=i.join||e&&e.join,r={hash:{},data:t},n=a?a.call(e,(n=e&&e.object,null==n||n===!1?n:n.attributes),"="," ",'"',r):f.call(e,"join",(n=e&&e.object,null==n||n===!1?n:n.attributes),"="," ",'"',r),(n||0===n)&&(o+=n),o}function l(e){var t;return t=typeof e===m?e.apply(e):e,t||0===t?t:""}function c(e,t){var n,a;return(a=i.body)?n=a.call(e,{hash:{},data:t}):(a=e&&e.body,n=typeof a===m?a.call(e,{hash:{},data:t}):a),n||0===n?n:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u,h,p="",f=i.helperMissing,m="function",g=this.escapeExpression,v=this,b=i.blockHelperMissing;return p+="<",(u=i.tag)?d=u.call(t,{hash:{},data:a}):(u=t&&t.tag,d=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=g(d),d=i["if"].call(t,t&&t.attributes,{hash:{},inverse:v.noop,fn:v.program(1,r,a),data:a}),(d||0===d)&&(p+=d),p+=">",d=i["if"].call(t,t&&t.prompt,{hash:{},inverse:v.noop,fn:v.program(3,o,a),data:a}),(d||0===d)&&(p+=d),p+="\r\n    <object ",d=i["if"].call(t,(d=t&&t.object,null==d||d===!1?d:d.attributes),{hash:{},inverse:v.noop,fn:v.program(5,s,a),data:a}),(d||0===d)&&(p+=d),p+=" />",h={hash:{},inverse:v.noop,fn:v.program(7,l,a),data:a},(u=i.choices)?d=u.call(t,h):(u=t&&t.choices,d=typeof u===m?u.call(t,h):u),i.choices||(d=b.call(t,d,{hash:{},inverse:v.noop,fn:v.program(7,l,a),data:a})),(d||0===d)&&(p+=d),d=i["if"].call(t,t&&t.body,{hash:{},inverse:v.noop,fn:v.program(9,c,a),data:a}),(d||0===d)&&(p+=d),p+="\r\n</",(u=i.tag)?d=u.call(t,{hash:{},data:a}):(u=t&&t.tag,d=typeof u===m?u.call(t,{hash:{},data:a}):u),p+=g(d)+">"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction"],function(e){return{qtiClass:"mediaInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"orderInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"prompt",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"selectPointInteraction",template:e}
}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"sliderInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/element"],function(e){return{qtiClass:"textEntryInteraction",template:e}}),define("taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction",["tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction"],function(e){return{qtiClass:"uploadInteraction",template:e}}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule",["handlebars"],function(e){return e.template(function(e,t,i,n,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};
var r,o,s="function";return(o=i.rule)?r=o.call(t,{hash:{},data:a}):(o=t&&t.rule,r=typeof o===s?o.call(t,{hash:{},data:a}):o),r||0===r?r:""})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e,t){var n,a="";return n=i["if"].call(e,e&&e.mapResponsePoint,{hash:{},inverse:m.program(4,s,t),fn:m.program(2,o,t),data:t}),(n||0===n)&&(a+=n),a}function o(e,t){var n,a,r="";return r+='\n            <mapResponsePoint identifier="',(a=i.response)?n=a.call(e,{hash:{},data:t}):(a=e&&e.response,n=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=f(n)+'" />'}function s(e,t){var n,a,r="";
return r+='\n            <mapResponse identifier="',(a=i.response)?n=a.call(e,{hash:{},data:t}):(a=e&&e.response,n=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=f(n)+'" />'}function l(e,t){var n,a,r="";return r+='\n            <variable identifier="',(a=i.outcome)?n=a.call(e,{hash:{},data:t}):(a=e&&e.outcome,n=typeof a===p?a.call(e,{hash:{},data:t}):a),r+=f(n)+'" />'}function c(e){var t,i="";return i+='\n    <responseElse>\n        <setOutcomeValue identifier="'+f((t=e&&e.feedback,t=null==t||t===!1?t:t.outcome,typeof t===p?t.apply(e):t))+'">\n            <baseValue baseType="identifier">'+f((t=e&&e.feedback,t=null==t||t===!1?t:t["else"],typeof t===p?t.apply(e):t))+"</baseValue>\n        </setOutcomeValue>\n    </responseElse>"
}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var d,u,h="",p="function",f=this.escapeExpression,m=this;return h+="<responseCondition>\n    <responseIf>\n        <",(u=i.condition)?d=u.call(t,{hash:{},data:a}):(u=t&&t.condition,d=typeof u===p?u.call(t,{hash:{},data:a}):u),h+=f(d)+">",d=i["if"].call(t,t&&t.response,{hash:{},inverse:m.program(6,l,a),fn:m.program(1,r,a),data:a}),(d||0===d)&&(h+=d),h+='\n            <baseValue baseType="float">',(u=i.comparedValue)?d=u.call(t,{hash:{},data:a}):(u=t&&t.comparedValue,d=typeof u===p?u.call(t,{hash:{},data:a}):u),h+=f(d)+"</baseValue>\n        </",(u=i.condition)?d=u.call(t,{hash:{},data:a}):(u=t&&t.condition,d=typeof u===p?u.call(t,{hash:{},data:a}):u),h+=f(d)+'>\n        <setOutcomeValue identifier="'+f((d=t&&t.feedback,d=null==d||d===!1?d:d.outcome,typeof d===p?d.apply(t):d))+'">\n            <baseValue baseType="identifier">'+f((d=t&&t.feedback,d=null==d||d===!1?d:d.then,typeof d===p?d.apply(t):d))+"</baseValue>\n        </setOutcomeValue>\n    </responseIf>",d=i["if"].call(t,(d=t&&t.feedback,null==d||d===!1?d:d["else"]),{hash:{},inverse:m.noop,fn:m.program(8,c,a),data:a}),(d||0===d)&&(h+=d),h+="\n</responseCondition>"
})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t,i="";return i+='\n    <responseElse>\n        <setOutcomeValue identifier="'+d((t=e&&e.feedback,t=null==t||t===!1?t:t.outcome,typeof t===c?t.apply(e):t))+'">\n            <baseValue baseType="identifier">'+d((t=e&&e.feedback,t=null==t||t===!1?t:t["else"],typeof t===c?t.apply(e):t))+"</baseValue>\n        </setOutcomeValue>\n    </responseElse>"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<responseCondition>\n    <responseIf>\n        <match>\n            <variable identifier="',(s=i.response)?o=s.call(t,{hash:{},data:a}):(s=t&&t.response,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" />\n            <correct identifier="',(s=i.response)?o=s.call(t,{hash:{},data:a}):(s=t&&t.response,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" />\n        </match>\n        <setOutcomeValue identifier="'+d((o=t&&t.feedback,o=null==o||o===!1?o:o.outcome,typeof o===c?o.apply(t):o))+'">\n            <baseValue baseType="identifier">'+d((o=t&&t.feedback,o=null==o||o===!1?o:o.then,typeof o===c?o.apply(t):o))+"</baseValue>\n        </setOutcomeValue>\n    </responseIf>",o=i["if"].call(t,(o=t&&t.feedback,null==o||o===!1?o:o["else"]),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+="\n</responseCondition>"
})}),define("tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect",["handlebars"],function(e){return e.template(function(e,t,i,n,a){function r(e){var t,i="";return i+='\n    <responseElse>\n        <setOutcomeValue identifier="'+d((t=e&&e.feedback,t=null==t||t===!1?t:t.outcome,typeof t===c?t.apply(e):t))+'">\n            <baseValue baseType="identifier">'+d((t=e&&e.feedback,t=null==t||t===!1?t:t["else"],typeof t===c?t.apply(e):t))+"</baseValue>\n        </setOutcomeValue>\n    </responseElse>"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var o,s,l="",c="function",d=this.escapeExpression,u=this;return l+='<responseCondition>\n    <responseIf>\n        <not>\n            <match>\n                <variable identifier="',(s=i.response)?o=s.call(t,{hash:{},data:a}):(s=t&&t.response,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" />\n                <correct identifier="',(s=i.response)?o=s.call(t,{hash:{},data:a}):(s=t&&t.response,o=typeof s===c?s.call(t,{hash:{},data:a}):s),l+=d(o)+'" />\n            </match>\n        </not>\n        <setOutcomeValue identifier="'+d((o=t&&t.feedback,o=null==o||o===!1?o:o.outcome,typeof o===c?o.apply(t):o))+'">\n            <baseValue baseType="identifier">'+d((o=t&&t.feedback,o=null==o||o===!1?o:o.then,typeof o===c?o.apply(t):o))+"</baseValue>\n        </setOutcomeValue>\n    </responseIf>",o=i["if"].call(t,(o=t&&t.feedback,null==o||o===!1?o:o["else"]),{hash:{},inverse:u.noop,fn:u.program(1,r,a),data:a}),(o||0===o)&&(l+=o),l+="\n</responseCondition>"
})}),define("taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule",["tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct","tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect"],function(e,t,i,n){return{qtiClass:"_simpleFeedbackRule",template:e,getData:function(e,a){var r=null,o="",s={response:e.comparedOutcome.id(),feedback:{outcome:e.feedbackOutcome.id(),then:e.feedbackThen.id(),"else":e.feedbackElse?e.feedbackElse.id():""}};switch(e.condition){case"correct":r=i;break;case"incorrect":r=n;break;case"lt":case"lte":case"equal":case"gte":case"gt":r=t,s.condition=e.condition,s.comparedValue=e.comparedValue;
break;default:throw new Error("unknown condition in simple feedback rule rendering : "+e.condition)}return r&&(o=r(s)),_.merge(a||{},{rule:o})}}}),function(e){var t=document,i="appendChild",n="styleSheet",a=t.createElement("style");a.type="text/css",t.getElementsByTagName("head")[0][i](a),a[n]?a[n].cssText=e:a[i](t.createTextNode(e))}('.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\nhtml, button, input, select, textarea { color: #222; background: white; border-width: 1px; }\n\nhtml { line-height: 1.4; }\n\nhtml { font-size: 62.5%; }\n\nbody { font-size: 14px; background-color: white; }\n\nh1 { font-size: 24px; font-size: 2.4rem; }\n\nh2 { font-size: 22px; font-size: 2.2rem; }\n\nh3 { font-size: 20px; font-size: 2rem; }\n\nh4 { font-size: 18px; font-size: 1.8rem; }\n\nh5 { font-size: 16px; font-size: 1.6rem; }\n\nh6 { font-size: 14px; font-size: 1.4rem; }\n\n/* Remove text-shadow in selection highlight: h5bp.com/i These selection rule sets have to be separate. Customize the background color to match your design. */\n::-moz-selection { background: #b3d4fc; text-shadow: none; }\n\n::selection { background: #b3d4fc; text-shadow: none; }\n\n/* A better looking default horizontal rule */\nhr { display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; }\n\n/* Remove the gap between images, videos, audio and canvas and the bottom of their containers: h5bp.com/i/440 */\naudio, canvas, img, video { vertical-align: middle; }\n\n/* Remove default fieldset styles. */\nfieldset { border: 0; margin: 0; padding: 0; }\n\n/* Allow only vertical resizing of textareas. */\ntextarea { resize: vertical; }\n\n/* Hide from both screenreaders and browsers: h5bp.com/u */\n.hidden { display: none !important; visibility: hidden; }\n\n/* Hide only visually, but have it available for screenreaders: h5bp.com/v */\n.visuallyhidden { border: 0; clip: rect(0 0 0 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; }\n\n/* Extends the .visuallyhidden class to allow the element to be focusable when navigated to via the keyboard: h5bp.com/p */\n.visuallyhidden.focusable:active, .visuallyhidden.focusable:focus { clip: auto; height: auto; margin: 0; overflow: visible; position: static; width: auto; }\n\n/* Hide visually and from screenreaders, but maintain layout */\n.invisible { visibility: hidden; }\n\n/* Clearfix: contain floats  For modern browsers 1. The space content is one way to avoid an Opera bug when the `contenteditable` attribute is included anywhere else in the document. Otherwise it causes space to appear at the top and bottom of elements that receive the `clearfix` class. 2. The use of `table` rather than `block` is only necessary if using `:before` to contain the top-margins of child elements. */\n.clearfix:before, .block-listing.horizontal:before, .qti-associateInteraction .result-area > li:before, .clearfix:after, .block-listing.horizontal:after, .qti-associateInteraction .result-area > li:after { content: " "; /* 1 */ display: table; /* 2 */ }\n\n.clearfix:after, .block-listing.horizontal:after, .qti-associateInteraction .result-area > li:after { clear: both; }\n\n/* For IE 6/7 only Include this rule to trigger hasLayout and contain floats. */\n.clearfix, .block-listing.horizontal, .qti-associateInteraction .result-area > li { background-repeat: no-repeat; }\n\n/* ========================================================================== EXAMPLE Media Queries for Responsive Design. These examples override the primary (\'mobile first\') styles. Modify as content requires. ========================================================================== */\n@media only screen and (min-width: 35em) { /* Style adjustments for viewports that meet the condition */ }\n@media print, (-o-min-device-pixel-ratio: 5 / 4), (-webkit-min-device-pixel-ratio: 1.25), (min-resolution: 120dpi) { /* Style adjustments for high resolution devices */ }\n/* ========================================================================== Print styles. Inlined to avoid required HTTP connection: h5bp.com/r ========================================================================== */\n@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }\n  a, a:visited { text-decoration: underline; }\n  a[href]:after { content: " (" attr(href) ")"; }\n  abbr[title]:after { content: " (" attr(title) ")"; }\n  /* Don\'t show links for images, or javascript/internal links */\n  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }\n  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }\n  thead { display: table-header-group; /* h5bp.com/t */ }\n  tr, img { page-break-inside: avoid; }\n  img { max-width: 100% !important; }\n  @page { margin: 0.5cm; }\n  p, h2, h3 { orphans: 3; widows: 3; }\n  h2, h3 { page-break-after: avoid; } }\n.qti-item { padding: 15px; background: white; margin: auto; max-width: 1024px; }\n.qti-item.runtime { min-height: 100%; }\n.qti-item [class*="col-"] img { max-width: auto; }\n\n.runtime .block-listing > li:hover, .qti-associateInteraction .empty:hover, .qti-graphicGapMatchInteraction ul.source > li:hover, .qti-graphicGapMatchInteraction ul.source > li.active.selectable:hover, .qti-graphicOrderInteraction ul.ordinals > li:hover, .qti-hottextInteraction .hottext:hover, .qti-gapMatchInteraction .gapmatch-content:hover { background: #f2f6f9 !important; cursor: pointer !important; }\n\n.runtime .block-listing > li.active:hover, .qti-associateInteraction .result-area > li > .target.active:hover { background: #e9f0f5 !important; }\n\n#modalFeedbacks { max-height: 0; }\n\n.mini-tlb .tlb-button { color: #222 !important; padding-top: 3px; }\n.mini-tlb .tlb-button:hover { color: #3e7da7 !important; }\n.mini-tlb ul[data-button-group] { background: transparent !important; border: none; }\n.mini-tlb ul[data-button-group] > li { display: none; background: transparent !important; min-width: 0; padding: 0; float: none; }\n.mini-tlb ul[data-button-group] > li span { color: #222; text-shadow: none !important; }\n.mini-tlb ul[data-button-group] > li.active { display: inline-block; }\n\n.edit-question .qti-blockInteraction .horizontal .add-option { margin-top: 25px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice { margin-top: 25px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice .mini-tlb { white-space: nowrap; top: -26px; right: -4px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice .mini-tlb .tlb-button { min-width: 25px; height: 20px; margin: 0; }\n\n.qti-choice p:last-child, .qti-prompt-container p:last-child { margin-bottom: 0 !important; }\n\n.runtime .block-listing > li.active { border-color: #3e7da7 !important; }\n\n.block-listing > li { border: 1px solid #e0e0e0; border-radius: 2px; -webkit-border-radius: 2px; background: transparent; padding: 5px; margin: 3px; cursor: pointer; position: relative; }\n.block-listing.horizontal > li { display: block; float: left; }\n.block-listing.solid, .block-listing.bordered { padding-top: 3px; padding-right: 3px; padding-bottom: 3px; }\n.block-listing.solid.none, .block-listing.bordered.none { padding-left: 3px; }\n\n.qti-block { border: 1px solid transparent; }\n\n.qti-interaction .solid { border: 6px solid #f5f3f2; }\n.qti-interaction .bordered { border: 1px solid #e0e0e0; border-radius: 2px; -webkit-border-radius: 2px; background: white; }\n.qti-interaction .empty { border: 1px #3e7da7 dashed !important; min-height: 50px; cursor: default; }\n.qti-interaction .add-option { border: 1px #3e7da7 dashed !important; list-style-type: none; position: relative; cursor: pointer !important; color: #0e5d91 !important; border-radius: 3px; background-color: #e6eef4; }\n.qti-interaction .add-option [class^="icon-"], .qti-interaction .add-option [class*=" icon-"] { font-size: 14px; font-size: 1.4rem; position: relative; top: 1px; left: 2px; color: #0e5d91; padding-right: 5px; }\n.qti-interaction .add-option > div { display: table; width: 100%; height: 100%; }\n.qti-interaction .add-option > div [class^="icon-"], .qti-interaction .add-option > div [class*=" icon-"] { display: table-cell; font-size: 60px; font-size: 6rem; position: static !important; vertical-align: middle; width: 100%; height: 100%; text-align: center; top: 0; left: auto; padding: 0; }\n.qti-interaction .add-option:hover { opacity: 0.8; }\n.qti-interaction input[type="color"], .qti-interaction input[type="date"], .qti-interaction input[type="datetime"], .qti-interaction input[type="datetime-local"], .qti-interaction input[type="email"], .qti-interaction input[type="month"], .qti-interaction input[type="number"], .qti-interaction input[type="range"], .qti-interaction input[type="search"], .qti-interaction input[type="tel"], .qti-interaction input[type="time"], .qti-interaction input[type="text"], .qti-interaction input[type="password"], .qti-interaction input[type="url"], .qti-interaction input[type="week"], .qti-interaction textarea, .qti-interaction select { border-top-color: #aaa; border-left-color: #aaa; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-choiceInteraction .qti-choice .real-label { top: 1px; }\n.qti-choiceInteraction .block-listing > li { margin-top: 0; margin-bottom: 0; border-top: none; border-bottom: none; -moz-border-radius: 0px; -webkit-border-radius: 0px; border-radius: 0px; }\n.qti-choiceInteraction .block-listing > li:first-child { margin-top: 3px; border-top: 1px solid #eee; -webkit-border-top-left-radius: 2px; -webkit-border-top-right-radius: 2px; -moz-border-radius-topleft: 2px; -moz-border-radius-topright: 2px; border-top-left-radius: 2px; border-top-right-radius: 2px; }\n.qti-choiceInteraction .block-listing > li:last-child { margin-bottom: 3px; border-bottom: 1px solid #eee; -webkit-border-bottom-right-radius: 2px; -webkit-border-bottom-left-radius: 2px; -moz-border-radius-bottomright: 2px; -moz-border-radius-bottomleft: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; }\n.qti-choiceInteraction .real-label input { position: absolute; left: -10000px; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-orderInteraction .arrow-bar { text-align: center; }\n.qti-orderInteraction .arrow-bar span { margin: 3px auto; font-size: 25px; font-size: 2.5rem; color: #909090; background: #f9f8f7; cursor: default; height: 40px; }\n.qti-orderInteraction .arrow-bar span.active { background: #f3f1ef; cursor: pointer; color: #222; }\n.qti-orderInteraction .arrow-bar span.active:hover { color: white; background: #3e7da7; }\n.qti-orderInteraction .arrow-bar span.triggered { color: white; background: #3e7da7; }\n.qti-orderInteraction.qti-vertical .order-interaction-area { display: table; border-collapse: separate; border-spacing: 5px 5px 5px 0; width: 100%; }\n.qti-orderInteraction.qti-vertical ul.source, .qti-orderInteraction.qti-vertical ul.target, .qti-orderInteraction.qti-vertical ol.source, .qti-orderInteraction.qti-vertical ol.target { display: table-cell; width: 43%; }\n.qti-orderInteraction.qti-vertical .arrow-bar { display: table-cell; vertical-align: middle; padding: 5px; }\n.qti-orderInteraction.qti-vertical .arrow-bar span { padding: 8px 0; display: block; width: 50px; }\n.qti-orderInteraction.qti-vertical .arrow-bar span.inactive { visibility: hidden; }\n.qti-orderInteraction.qti-vertical .arrow-bar.middle span.inactive { display: none; }\n.qti-orderInteraction.qti-horizontal .block-listing { min-height: 38px; }\n.qti-orderInteraction.qti-horizontal .arrow-bar { margin-bottom: 10px; }\n.qti-orderInteraction.qti-horizontal .arrow-bar span { padding: 0 15px; display: inline-block; line-height: 1.6; }\n.qti-orderInteraction.qti-horizontal .arrow-bar span.inactive { visibility: hidden; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-extendedTextInteraction input { width: 100%; }\n.qti-extendedTextInteraction .solid > li, .qti-extendedTextInteraction .bordered > li { padding: 0; border: none; }\n.qti-extendedTextInteraction .solid ~ input, .qti-extendedTextInteraction .solid ~ textarea, .qti-extendedTextInteraction .bordered ~ input, .qti-extendedTextInteraction .bordered ~ textarea { border: 1px solid #eee; border-radius: 2px; -webkit-border-radius: 2px; }\n.qti-extendedTextInteraction .active > input, .qti-extendedTextInteraction .active > textarea, .qti-extendedTextInteraction .active input.active, .qti-extendedTextInteraction .active textarea.active { border-color: #3e7da7; }\n.qti-extendedTextInteraction textarea { max-width: 100% !important; width: 100%; height: 150px; resize: none; }\n.qti-extendedTextInteraction textarea[disabled="disabled"] { background-color: white; opacity: 1 !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-associateInteraction .empty { cursor: pointer; min-height: 0; }\n.qti-associateInteraction .choice-area { margin-bottom: 30px; }\n.qti-associateInteraction .choice-area .deactivated { opacity: 0.2; cursor: default !important; }\n.qti-associateInteraction .choice-area > .qti-choice { min-width: 100px; min-height: 30px; max-width: 150px; }\n.qti-associateInteraction .result-area { width: 40%; min-width: 260px; margin: auto; }\n.qti-associateInteraction .result-area > li { display: block; margin-bottom: 30px; position: relative; }\n.qti-associateInteraction .result-area > li:before { border-top: 1px solid #86aec8; display: block; width: 80%; left: 10%; height: 1px; position: absolute; z-index: 1; top: 50%; }\n.qti-associateInteraction .result-area > li > .target { background: white; padding: 5px; margin: 5px; float: right; position: relative; z-index: 2; min-width: 100px; min-height: 30px; max-width: 150px; max-height: 150px; outline: 5px #f5f3f2 solid; border: 1px solid #eee; border-radius: 2px; -webkit-border-radius: 2px; overflow: hidden; }\n.qti-associateInteraction .result-area > li > .target.active { border-color: #3e7da7; }\n.qti-associateInteraction .result-area > li > .target:first-child { float: left; }\n.qti-associateInteraction .result-area > li.removing > div { background-color: #eee; }\n.qti-associateInteraction .result-area > li.incomplete-pair { display: none; }\n.qti-associateInteraction .result-area > li.incomplete-pair > div { border: 1px dashed #ccc; }\n.qti-associateInteraction .result-area .remove-choice { cursor: pointer; position: absolute; right: 0; bottom: 0; margin: 0 2px 2px 0; color: #0e5d91; }\n.qti-associateInteraction .result-area .remove-choice:hover { opacity: 0.6; }\n.qti-associateInteraction .result-area .filled { cursor: pointer; }\n.qti-associateInteraction .result-area .filled:hover { background: #f2f6f9; }\n\n.result-area > li > div.filled ~ div.filled:before { border-top: 1px solid #86c8a5 !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-matchInteraction .matrix { table-layout: fixed; }\n.qti-matchInteraction .matrix tbody [data-edit] { width: 30px; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-mediaInteraction .mejs-container iframe { min-height: inherit; }\n.qti-mediaInteraction .overlay { background: #000; z-index: 999; position: relative; opacity: 0; width: 100%; height: 100%; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-graphicInteraction .source li > img { display: block; }\n.qti-graphicInteraction .active > input, .qti-graphicInteraction .active > textarea, .qti-graphicInteraction .active input.active, .qti-graphicInteraction .active textarea.active { border-color: #3e7da7; }\n.qti-graphicInteraction .image-editor { position: relative; float: left; padding: 3px; }\n.qti-graphicInteraction .image-editor .mapping-editor { display: none; position: absolute; width: 150px; height: 150px; text-align: left; z-index: 10009; }\n.qti-graphicInteraction .main-image-box { margin: 0 auto; padding: 0; text-align: center; overflow: visible; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-graphicGapMatchInteraction ul.source { width: 100%; margin: 10px auto; padding: 3px !important; clear: both; min-height: 60px; }\n.qti-graphicGapMatchInteraction ul.source > li { min-width: 60px; line-height: 60px; min-height: 60px; text-align: center; font-size: 20px; font-size: 2rem; margin: 0 3px 3px 0 !important; padding: 0; background: white; border: solid 1px #ddd !important; cursor: pointer; }\n.qti-graphicGapMatchInteraction ul.source > li.active { border: solid 1px #3e7da7 !important; -webkit-transition: background 0.4s ease-out; -moz-transition: background 0.4s ease-out; -o-transition: background 0.4s ease-out; transition: background 0.4s ease-out; }\n.qti-graphicGapMatchInteraction ul.source > li.active:hover { background: white !important; cursor: default !important; }\n.qti-graphicGapMatchInteraction ul.source > li.active.selectable:hover { cursor: pointer !important; }\n.qti-graphicGapMatchInteraction ul.source > li.disabled { border: none; cursor: default !important; color: #333 !important; background-color: transparent !important; }\n.qti-graphicGapMatchInteraction ul.source > li img { display: block; }\n.qti-graphicGapMatchInteraction .gap-filler { display: block; position: absolute; z-index: 20000; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-graphicOrderInteraction ul.ordinals { width: 100%; margin: 10px auto; padding: 0 !important; clear: both; min-height: 54px; }\n.qti-graphicOrderInteraction ul.ordinals > li { width: 30px; line-height: 30px; text-align: center; font-size: 20px; font-size: 2rem; margin: 0; background: white; margin-right: 1px; }\n.qti-graphicOrderInteraction ul.ordinals > li:hover { cursor: pointer; }\n.qti-graphicOrderInteraction ul.ordinals > li.active { border: solid 1px #3e7da7; -webkit-transition: background 0.4s ease-out; -moz-transition: background 0.4s ease-out; -o-transition: background 0.4s ease-out; transition: background 0.4s ease-out; }\n.qti-graphicOrderInteraction ul.ordinals > li.active:hover { background: white !important; cursor: default !important; }\n.qti-graphicOrderInteraction ul.ordinals > li.disabled { border: none; cursor: default !important; color: #666 !important; background-color: transparent !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-SelectPointInteraction .txt-success:hover { background: transparent !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-hottextInteraction .hottext { background: #f3f1ef; padding-right: 5px; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; position: relative; }\n.qti-hottextInteraction .hottext.error { color: #ba122b; }\n.qti-hottextInteraction .hottext .hottext-checkmark { padding-right: 0; min-width: auto; width: auto; }\n.qti-hottextInteraction .hottext [class^="icon-"].small, .qti-hottextInteraction .hottext [class*=" icon-"].small { font-size: 12px; font-size: 1.2rem; text-shadow: none; line-height: 10px; top: 1px; }\n.qti-hottextInteraction .hottext [class^="icon-"].error, .qti-hottextInteraction .hottext [class*=" icon-"].error { color: #ba122b; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] { top: -2px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit].icon-undo { padding-right: 8px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] label { padding: 0 3px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] [data-role="score"] { width: 30px; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-gapMatchInteraction .gapmatch-content { background: #f3f1ef; color: #222; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; position: relative; top: 0px; min-width: 45px; min-height: 20px; display: inline-block; }\n.qti-gapMatchInteraction .gapmatch-content audio, .qti-gapMatchInteraction .gapmatch-content canvas, .qti-gapMatchInteraction .gapmatch-content img, .qti-gapMatchInteraction .gapmatch-content video { vertical-align: baseline; }\n.qti-gapMatchInteraction .gapmatch-content.empty { min-height: 20px; }\n.qti-gapMatchInteraction .gapmatch-content .remove { float: right; }\n.qti-gapMatchInteraction .gapmatch-content.filled { top: 0 !important; }\n.qti-gapMatchInteraction .choice-area .deactivated { cursor: default; opacity: 0.2; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-sliderInteraction .ui-slider-horizontal { margin: 0 20px; }\n.qti-sliderInteraction .ui-slider-vertical { margin: 0 20px; display: inline-block; }\n.qti-sliderInteraction .qti-slider-values { position: relative; }\n.qti-sliderInteraction.qti-slider-horizontal .qti-slider-values { height: 20px; margin: 0 20px; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-min, .qti-sliderInteraction.qti-slider-horizontal .slider-max, .qti-sliderInteraction.qti-slider-horizontal .slider-middle { position: absolute; width: 40px; margin-left: -20px; text-align: center; font-size: 12px; font-size: 1.2rem; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-min { left: 0%; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-max { left: 100%; }\n.qti-sliderInteraction.qti-slider-vertical .qti-slider-values { width: 30px; display: inline-block; }\n.qti-sliderInteraction.qti-slider-vertical .slider-min, .qti-sliderInteraction.qti-slider-vertical .slider-max, .qti-sliderInteraction.qti-slider-vertical .slider-middle { position: absolute; }\n.qti-sliderInteraction.qti-slider-vertical .slider-min { bottom: -10px; }\n.qti-sliderInteraction.qti-slider-vertical .slider-max { top: -10px; }\n.qti-sliderInteraction.qti-slider-vertical .ui-slider-handle { width: 17px !important; height: 10px !important; margin-left: -4px !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-inlineChoiceInteraction { min-width: 150px; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-textEntryInteraction { /*background: rgba($uiClickableDefaultBg, .85);*/ /*padding: 50px 10px 10px 30px;*/ }\n.qti-textEntryInteraction table { border-collapse: separate; border-spacing: 2px; }\n.qti-textEntryInteraction tr { height: 27px; white-space: nowrap; }\n.qti-textEntryInteraction .icon-bin, .qti-textEntryInteraction .icon-pin, .qti-textEntryInteraction .icon-shuffle { text-align: center; padding: 0 5px; cursor: pointer; vertical-align: middle; }\n.qti-textEntryInteraction .icon-radio, .qti-textEntryInteraction .icon-checkbox, .qti-textEntryInteraction .icon-radio-checked, .qti-textEntryInteraction .icon-checkbox-checked { font-size: 13px !important; }\n.qti-textEntryInteraction .icon-bin:hover, .qti-textEntryInteraction .icon-pin:hover, .qti-textEntryInteraction .icon-shuffle:hover { color: #3e7da7; }\n.qti-textEntryInteraction td[contenteditable], .qti-textEntryInteraction .main-option { padding: 0 7px; background: white; border: 1px solid #ddd; border-radius: 2px; -webkit-border-radius: 2px; }\n.qti-textEntryInteraction .main-option { border-top: 1px #ddd solid; border-bottom: 1px #ddd solid; padding-right: 29px; min-width: 180px; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-uploadInteraction { padding: 6px 6px 0 6px; }\n.qti-uploadInteraction .grid-row { margin-bottom: 0 !important; }\n.qti-uploadInteraction .progressbar { margin-bottom: 6px; }\n.qti-uploadInteraction .btn-info { padding-top: 0 !important; }\n.qti-uploadInteraction .file-name { padding: 2px 3px !important; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\123"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\124"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\1b1"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\1b4"; }\n\n.qti-rubricBlock .qti-rubricBlock-body { border: 1px solid transparent; }\n.qti-rubricBlock > .col-12 { border: 1px solid #DDD !important; background-color: rgba(243, 241, 239, 0.3); }\n\n#qti-submit-response { display: block; width: 100px; margin-top: 20px; margin-right: auto; margin-left: auto; }\n\n/* Below is a temporary solution to address Bug #2768. Eventually this will be fixed by implementing feature #2771. */\n.qti-simpleChoice .mini-tlb[data-edit="question"] { right: -45px !important; top: 3px; }\n\n.qti-hottextInteraction .mini-tlb { right: -31px !important; }\n\n.qti-interaction .qti-prompt ~ .mini-tlb { right: -31px !important; top: 1px; }\n\n.widget-textBlock .mini-tlb { right: -60px !important; }\n\n.qti-flow-container .mini-tlb { right: -31px !important; }\n\n/* end tmp fix #2768 */\n\n/*# sourceMappingURL=qti.css.map */\n/* This is the default Tooltipster theme (feel free to modify or duplicate and create multiple themes!): */\n.tooltipster-default {\n	border-radius: 5px; \n	border: 2px solid #000;\n	background: #4c4c4c;\n	color: #fff;\n}\n\n/* Use this next selector to style things like font-size and line-height: */\n.tooltipster-default .tooltipster-content {\n	font-family: Arial, sans-serif;\n	font-size: 14px;\n	line-height: 16px;\n	padding: 8px 10px;\n	overflow: hidden;\n}\n\n/* This next selector defines the color of the border on the outside of the arrow. This will automatically match the color and size of the border set on the main tooltip styles. Set display: none; if you would like a border around the tooltip but no border around the arrow */\n.tooltipster-default .tooltipster-arrow .tooltipster-arrow-border {\n	/* border-color: ... !important; */\n}\n\n\n/* If you\'re using the icon option, use this next selector to style them */\n.tooltipster-icon {\n	cursor: help;\n	margin-left: 4px;\n}\n\n\n\n\n\n\n\n\n/* This is the base styling required to make all Tooltipsters work */\n.tooltipster-base {\n	padding: 0;\n	font-size: 0;\n	line-height: 0;\n	position: absolute;\n	left: 0;\n	top: 0;\n	z-index: 9999999;\n	pointer-events: none;\n	width: auto;\n	overflow: visible;\n}\n.tooltipster-base .tooltipster-content {\n	overflow: hidden;\n}\n\n\n/* These next classes handle the styles for the little arrow attached to the tooltip. By default, the arrow will inherit the same colors and border as what is set on the main tooltip itself. */\n.tooltipster-arrow {\n	display: block;\n	text-align: center;\n	width: 100%;\n	height: 100%;\n	position: absolute;\n	top: 0;\n	left: 0;\n	z-index: -1;\n}\n.tooltipster-arrow span, .tooltipster-arrow-border {\n	display: block;\n	width: 0; \n	height: 0;\n	position: absolute;\n}\n.tooltipster-arrow-top span, .tooltipster-arrow-top-right span, .tooltipster-arrow-top-left span {\n	border-left: 8px solid transparent !important;\n	border-right: 8px solid transparent !important;\n	border-top: 8px solid;\n	bottom: -7px;\n}\n.tooltipster-arrow-top .tooltipster-arrow-border, .tooltipster-arrow-top-right .tooltipster-arrow-border, .tooltipster-arrow-top-left .tooltipster-arrow-border {\n	border-left: 9px solid transparent !important;\n	border-right: 9px solid transparent !important;\n	border-top: 9px solid;\n	bottom: -7px;\n}\n\n.tooltipster-arrow-bottom span, .tooltipster-arrow-bottom-right span, .tooltipster-arrow-bottom-left span {\n	border-left: 8px solid transparent !important;\n	border-right: 8px solid transparent !important;\n	border-bottom: 8px solid;\n	top: -7px;\n}\n.tooltipster-arrow-bottom .tooltipster-arrow-border, .tooltipster-arrow-bottom-right .tooltipster-arrow-border, .tooltipster-arrow-bottom-left .tooltipster-arrow-border {\n	border-left: 9px solid transparent !important;\n	border-right: 9px solid transparent !important;\n	border-bottom: 9px solid;\n	top: -7px;\n}\n.tooltipster-arrow-top span, .tooltipster-arrow-top .tooltipster-arrow-border, .tooltipster-arrow-bottom span, .tooltipster-arrow-bottom .tooltipster-arrow-border {\n	left: 0;\n	right: 0;\n	margin: 0 auto;\n}\n.tooltipster-arrow-top-left span, .tooltipster-arrow-bottom-left span {\n	left: 6px;\n}\n.tooltipster-arrow-top-left .tooltipster-arrow-border, .tooltipster-arrow-bottom-left .tooltipster-arrow-border {\n	left: 5px;\n}\n.tooltipster-arrow-top-right span,  .tooltipster-arrow-bottom-right span {\n	right: 6px;\n}\n.tooltipster-arrow-top-right .tooltipster-arrow-border, .tooltipster-arrow-bottom-right .tooltipster-arrow-border {\n	right: 5px;\n}\n.tooltipster-arrow-left span, .tooltipster-arrow-left .tooltipster-arrow-border {\n	border-top: 8px solid transparent !important;\n	border-bottom: 8px solid transparent !important; \n	border-left: 8px solid;\n	top: 50%;\n	margin-top: -7px;\n	right: -7px;\n}\n.tooltipster-arrow-left .tooltipster-arrow-border {\n	border-top: 9px solid transparent !important;\n	border-bottom: 9px solid transparent !important; \n	border-left: 9px solid;\n	margin-top: -8px;\n}\n.tooltipster-arrow-right span, .tooltipster-arrow-right .tooltipster-arrow-border {\n	border-top: 8px solid transparent !important;\n	border-bottom: 8px solid transparent !important; \n	border-right: 8px solid;\n	top: 50%;\n	margin-top: -7px;\n	left: -7px;\n}\n.tooltipster-arrow-right .tooltipster-arrow-border {\n	border-top: 9px solid transparent !important;\n	border-bottom: 9px solid transparent !important; \n	border-right: 9px solid;\n	margin-top: -8px;\n}\n\n\n/* Some CSS magic for the awesome animations - feel free to make your own custom animations and reference it in your Tooltipster settings! */\n\n.tooltipster-fade {\n	opacity: 0;\n	-webkit-transition-property: opacity;\n	-moz-transition-property: opacity;\n	-o-transition-property: opacity;\n	-ms-transition-property: opacity;\n	transition-property: opacity;\n}\n.tooltipster-fade-show {\n	opacity: 1;\n}\n\n.tooltipster-grow {\n	-webkit-transform: scale(0,0);\n	-moz-transform: scale(0,0);\n	-o-transform: scale(0,0);\n	-ms-transform: scale(0,0);\n	transform: scale(0,0);\n	-webkit-transition-property: -webkit-transform;\n	-moz-transition-property: -moz-transform;\n	-o-transition-property: -o-transform;\n	-ms-transition-property: -ms-transform;\n	transition-property: transform;\n	-webkit-backface-visibility: hidden;\n}\n.tooltipster-grow-show {\n	-webkit-transform: scale(1,1);\n	-moz-transform: scale(1,1);\n	-o-transform: scale(1,1);\n	-ms-transform: scale(1,1);\n	transform: scale(1,1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15);\n}\n\n.tooltipster-swing {\n	opacity: 0;\n	-webkit-transform: rotateZ(4deg);\n	-moz-transform: rotateZ(4deg);\n	-o-transform: rotateZ(4deg);\n	-ms-transform: rotateZ(4deg);\n	transform: rotateZ(4deg);\n	-webkit-transition-property: -webkit-transform, opacity;\n	-moz-transition-property: -moz-transform;\n	-o-transition-property: -o-transform;\n	-ms-transition-property: -ms-transform;\n	transition-property: transform;\n}\n.tooltipster-swing-show {\n	opacity: 1;\n	-webkit-transform: rotateZ(0deg);\n	-moz-transform: rotateZ(0deg);\n	-o-transform: rotateZ(0deg);\n	-ms-transform: rotateZ(0deg);\n	transform: rotateZ(0deg);\n	-webkit-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-moz-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-ms-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-o-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4);\n}\n\n.tooltipster-fall {\n	top: 0;\n	-webkit-transition-property: top;\n	-moz-transition-property: top;\n	-o-transition-property: top;\n	-ms-transition-property: top;\n	transition-property: top;\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n}\n.tooltipster-fall-show {\n}\n.tooltipster-fall.tooltipster-dying {\n	-webkit-transition-property: all;\n	-moz-transition-property: all;\n	-o-transition-property: all;\n	-ms-transition-property: all;\n	transition-property: all;\n	top: 0px !important;\n	opacity: 0;\n}\n\n.tooltipster-slide {\n	left: -40px;\n	-webkit-transition-property: left;\n	-moz-transition-property: left;\n	-o-transition-property: left;\n	-ms-transition-property: left;\n	transition-property: left;\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15);\n}\n.tooltipster-slide.tooltipster-slide-show {\n}\n.tooltipster-slide.tooltipster-dying {\n	-webkit-transition-property: all;\n	-moz-transition-property: all;\n	-o-transition-property: all;\n	-ms-transition-property: all;\n	transition-property: all;\n	left: 0px !important;\n	opacity: 0;\n}\n\n\n/* CSS transition for when contenting is changing in a tooltip that is still open. The only properties that will NOT transition are: width, height, top, and left */\n.tooltipster-content-changing {\n	opacity: 0.5;\n	-webkit-transform: scale(1.1, 1.1);\n	-moz-transform: scale(1.1, 1.1);\n	-o-transform: scale(1.1, 1.1);\n	-ms-transform: scale(1.1, 1.1);\n	transform: scale(1.1, 1.1);\n}\n');

//# sourceMappingURL=routes.js.map